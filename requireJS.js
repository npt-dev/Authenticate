/*
 AngularJS v1.7.8
 (c) 2010-2018 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(C){'use strict';function re(a){if(D(a))w(a.objectMaxDepth)&&(Wb.objectMaxDepth=Xb(a.objectMaxDepth)?a.objectMaxDepth:NaN),w(a.urlErrorParamsEnabled)&&Ga(a.urlErrorParamsEnabled)&&(Wb.urlErrorParamsEnabled=a.urlErrorParamsEnabled);else return Wb}function Xb(a){return W(a)&&0<a}function F(a,b){b=b||Error;return function(){var d=arguments[0],c;c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.7.8/"+(a?a+"/":"")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var e=encodeURIComponent,
f;f=arguments[d];f="function"==typeof f?f.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof f?"undefined":"string"!=typeof f?JSON.stringify(f):f;c+=e(f)}return new b(c)}}function ya(a){if(null==a||$a(a))return!1;if(H(a)||A(a)||x&&a instanceof x)return!0;var b="length"in Object(a)&&a.length;return W(b)&&(0<=b&&b-1 in a||"function"===typeof a.item)}function r(a,b,d){var c,e;if(a)if(B(a))for(c in a)"prototype"!==c&&"length"!==c&&"name"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(H(a)||
ya(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==r)a.forEach(b,d,a);else if(Nc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ta.call(a,c)&&b.call(d,a[c],c,a);return a}function Oc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Yb(a){return function(b,d){a(d,b)}}function se(){return++pb}
function Zb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(D(g)||B(g))for(var k=Object.keys(g),h=0,l=k.length;h<l;h++){var m=k[h],p=g[m];d&&D(p)?ha(p)?a[m]=new Date(p.valueOf()):ab(p)?a[m]=new RegExp(p):p.nodeName?a[m]=p.cloneNode(!0):$b(p)?a[m]=p.clone():(D(a[m])||(a[m]=H(p)?[]:{}),Zb(a[m],[p],!0)):a[m]=p}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function S(a){return Zb(a,Ha.call(arguments,1),!1)}function te(a){return Zb(a,Ha.call(arguments,1),!0)}function fa(a){return parseInt(a,
10)}function ac(a,b){return S(Object.create(a),b)}function E(){}function Ta(a){return a}function ia(a){return function(){return a}}function bc(a){return B(a.toString)&&a.toString!==la}function z(a){return"undefined"===typeof a}function w(a){return"undefined"!==typeof a}function D(a){return null!==a&&"object"===typeof a}function Nc(a){return null!==a&&"object"===typeof a&&!Pc(a)}function A(a){return"string"===typeof a}function W(a){return"number"===typeof a}function ha(a){return"[object Date]"===la.call(a)}
function H(a){return Array.isArray(a)||a instanceof Array}function cc(a){switch(la.call(a)){case "[object Error]":return!0;case "[object Exception]":return!0;case "[object DOMException]":return!0;default:return a instanceof Error}}function B(a){return"function"===typeof a}function ab(a){return"[object RegExp]"===la.call(a)}function $a(a){return a&&a.window===a}function bb(a){return a&&a.$evalAsync&&a.$watch}function Ga(a){return"boolean"===typeof a}function ue(a){return a&&W(a.length)&&ve.test(la.call(a))}
function $b(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function we(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function ua(a){return K(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function Ia(a,b,d){function c(a,b,c){c--;if(0>c)return"...";var d=b.$$hashKey,f;if(H(a)){f=0;for(var g=a.length;f<g;f++)b.push(e(a[f],c))}else if(Nc(a))for(f in a)b[f]=e(a[f],c);else if(a&&"function"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&
(b[f]=e(a[f],c));else for(f in a)ta.call(a,f)&&(b[f]=e(a[f],c));d?b.$$hashKey=d:delete b.$$hashKey;return b}function e(a,b){if(!D(a))return a;var d=g.indexOf(a);if(-1!==d)return k[d];if($a(a)||bb(a))throw pa("cpws");var d=!1,e=f(a);void 0===e&&(e=H(a)?[]:Object.create(Pc(a)),d=!0);g.push(a);k.push(e);return d?c(a,e,b):e}function f(a){switch(la.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(e(a.buffer),
a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(B(a.cloneNode))return a.cloneNode(!0)}
var g=[],k=[];d=Xb(d)?d:NaN;if(b){if(ue(b)||"[object ArrayBuffer]"===la.call(b))throw pa("cpta");if(a===b)throw pa("cpi");H(b)?b.length=0:r(b,function(a,c){"$$hashKey"!==c&&delete b[c]});g.push(a);k.push(b);return c(a,b,d)}return e(a,d)}function dc(a,b){return a===b||a!==a&&b!==b}function va(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&"object"===d)if(H(a)){if(!H(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!va(a[c],
b[c]))return!1;return!0}}else{if(ha(a))return ha(b)?dc(a.getTime(),b.getTime()):!1;if(ab(a))return ab(b)?a.toString()===b.toString():!1;if(bb(a)||bb(b)||$a(a)||$a(b)||H(b)||ha(b)||ab(b))return!1;d=T();for(c in a)if("$"!==c.charAt(0)&&!B(a[c])){if(!va(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&w(b[c])&&!B(b[c]))return!1;return!0}return!1}function db(a,b,d){return a.concat(Ha.call(b,d))}function Va(a,b){var d=2<arguments.length?Ha.call(arguments,2):[];return!B(b)||b instanceof
RegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Qc(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:$a(b)?d="$WINDOW":b&&C.document===b?d="$DOCUMENT":bb(b)&&(d="$SCOPE");return d}function eb(a,b){if(!z(a))return W(b)||(b=b?2:null),JSON.stringify(a,Qc,b)}function Rc(a){return A(a)?JSON.parse(a):a}function ec(a,b){a=a.replace(xe,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+
a)/6E4;return X(d)?b:d}function Sc(a,b){a=new Date(a.getTime());a.setMinutes(a.getMinutes()+b);return a}function fc(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=ec(b,c);return Sc(a,d*(b-c))}function za(a){a=x(a).clone().empty();var b=x("<div></div>").append(a).html();try{return a[0].nodeType===Pa?K(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(b)}}function Tc(a){try{return decodeURIComponent(a)}catch(b){}}function gc(a){var b={};r((a||"").split("&"),
function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Tc(e),w(e)&&(f=w(f)?Tc(f):!0,ta.call(b,e)?H(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function ye(a){var b=[];r(a,function(a,c){H(a)?r(a,function(a){b.push(ba(c,!0)+(!0===a?"":"="+ba(a,!0)))}):b.push(ba(c,!0)+(!0===a?"":"="+ba(a,!0)))});return b.length?b.join("&"):""}function hc(a){return ba(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ba(a,
b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ze(a,b){var d,c,e=Qa.length;for(c=0;c<e;++c)if(d=Qa[c]+b,A(d=a.getAttribute(d)))return d;return null}function Ae(a,b){var d,c,e={};r(Qa,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});r(Qa,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});
d&&(Be?(e.strictDi=null!==ze(d,"strict-di"),b(d,c?[c]:[],e)):C.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function Uc(a,b,d){D(d)||(d={});d=S({strictDi:!1},d);var c=function(){a=x(a);if(a.injector()){var c=a[0]===C.document?"document":za(a);throw pa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",
function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=fb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;C&&e.test(C.name)&&(d.debugInfoEnabled=!0,C.name=C.name.replace(e,""));if(C&&!f.test(C.name))return c();C.name=C.name.replace(f,"");ca.resumeBootstrap=function(a){r(a,function(a){b.push(a)});return c()};B(ca.resumeDeferredBootstrap)&&
ca.resumeDeferredBootstrap()}function Ce(){C.name="NG_ENABLE_DEBUG_INFO!"+C.name;C.location.reload()}function De(a){a=ca.element(a).injector();if(!a)throw pa("test");return a.get("$$testability")}function Vc(a,b){b=b||"_";return a.replace(Ee,function(a,c){return(c?b:"")+a.toLowerCase()})}function Fe(){var a;if(!Wc){var b=qb();(rb=z(b)?C.jQuery:b?C[b]:void 0)&&rb.fn.on?(x=rb,S(rb.fn,{scope:Wa.scope,isolateScope:Wa.isolateScope,controller:Wa.controller,injector:Wa.injector,inheritedData:Wa.inheritedData})):
x=Y;a=x.cleanData;x.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=(x._data(f)||{}).events)&&c.$destroy&&x(f).triggerHandler("$destroy");a(b)};ca.element=x;Wc=!0}}function gb(a,b,d){if(!a)throw pa("areq",b||"?",d||"required");return a}function sb(a,b,d){d&&H(a)&&(a=a[a.length-1]);gb(B(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ja(a,b){if("hasOwnProperty"===a)throw pa("badname",b);}function Ge(a,b,d){if(!b)return a;b=b.split(".");
for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&B(a)?Va(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==b)c||(c=x(Ha.call(a,0,e))),c.push(b);return c||a}function T(){return Object.create(null)}function ic(a){if(null==a)return"";switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=!bc(a)||H(a)||ha(a)?eb(a):a.toString()}return a}function He(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=F("$injector"),
c=F("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||F;return b(a,"module",function(){var a={};return function(f,g,k){var h={};if("hasOwnProperty"===f)throw c("badname","module");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,c,d,f){f||(f=e);return function(){f[d||"push"]([b,c,arguments]);return t}}function b(a,c,d){d||(d=e);return function(b,e){e&&B(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return t}}if(!g)throw d("nomod",f);var e=[],n=[],s=[],G=a("$injector","invoke",
"push",n),t={_invokeQueue:e,_configBlocks:n,_runBlocks:s,info:function(a){if(w(a)){if(!D(a))throw c("aobj","value");h=a;return this}return h},requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",n),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider",
"directive"),component:b("$compileProvider","component"),config:G,run:function(a){s.push(a);return this}};k&&G(k);return t})}})}function ja(a,b){if(H(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(D(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function Ie(a,b){var d=[];Xb(b)&&(a=ca.copy(a,null,b));return JSON.stringify(a,function(a,b){b=Qc(a,b);if(D(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}function Je(a){S(a,{errorHandlingConfig:re,
bootstrap:Uc,copy:Ia,extend:S,merge:te,equals:va,element:x,forEach:r,injector:fb,noop:E,bind:Va,toJson:eb,fromJson:Rc,identity:Ta,isUndefined:z,isDefined:w,isString:A,isFunction:B,isObject:D,isNumber:W,isElement:$b,isArray:H,version:Ke,isDate:ha,callbacks:{$$counter:0},getTestability:De,reloadWithDebugInfo:Ce,$$minErr:F,$$csp:Aa,$$encodeUriSegment:hc,$$encodeUriQuery:ba,$$lowercase:K,$$stringify:ic,$$uppercase:ub});kc=He(C);kc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Le});
a.provider("$compile",Xc).directive({a:Me,input:Yc,textarea:Yc,form:Ne,script:Oe,select:Pe,option:Qe,ngBind:Re,ngBindHtml:Se,ngBindTemplate:Te,ngClass:Ue,ngClassEven:Ve,ngClassOdd:We,ngCloak:Xe,ngController:Ye,ngForm:Ze,ngHide:$e,ngIf:af,ngInclude:bf,ngInit:cf,ngNonBindable:df,ngPluralize:ef,ngRef:ff,ngRepeat:gf,ngShow:hf,ngStyle:jf,ngSwitch:kf,ngSwitchWhen:lf,ngSwitchDefault:mf,ngOptions:nf,ngTransclude:of,ngModel:pf,ngList:qf,ngChange:rf,pattern:Zc,ngPattern:Zc,required:$c,ngRequired:$c,minlength:ad,
ngMinlength:ad,maxlength:bd,ngMaxlength:bd,ngValue:sf,ngModelOptions:tf}).directive({ngInclude:uf,input:vf}).directive(vb).directive(cd);a.provider({$anchorScroll:wf,$animate:xf,$animateCss:yf,$$animateJs:zf,$$animateQueue:Af,$$AnimateRunner:Bf,$$animateAsyncRun:Cf,$browser:Df,$cacheFactory:Ef,$controller:Ff,$document:Gf,$$isDocumentHidden:Hf,$exceptionHandler:If,$filter:dd,$$forceReflow:Jf,$interpolate:Kf,$interval:Lf,$$intervalFactory:Mf,$http:Nf,$httpParamSerializer:Of,$httpParamSerializerJQLike:Pf,
$httpBackend:Qf,$xhrFactory:Rf,$jsonpCallbacks:Sf,$location:Tf,$log:Uf,$parse:Vf,$rootScope:Wf,$q:Xf,$$q:Yf,$sce:Zf,$sceDelegate:$f,$sniffer:ag,$$taskTrackerFactory:bg,$templateCache:cg,$templateRequest:dg,$$testability:eg,$timeout:fg,$window:gg,$$rAF:hg,$$jqLite:ig,$$Map:jg,$$cookieReader:kg})}]).info({angularVersion:"1.7.8"})}function wb(a,b){return b.toUpperCase()}function xb(a){return a.replace(lg,wb)}function lc(a){a=a.nodeType;return 1===a||!a||9===a}function ed(a,b){var d,c,e=b.createDocumentFragment(),
f=[];if(mc.test(a)){d=e.appendChild(b.createElement("div"));c=(mg.exec(a)||["",""])[1].toLowerCase();c=oa[c]||oa._default;d.innerHTML=c[1]+a.replace(ng,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=db(f,d.childNodes);d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";r(f,function(a){e.appendChild(a)});return e}function Y(a){if(a instanceof Y)return a;var b;A(a)&&(a=U(a),b=!0);if(!(this instanceof Y)){if(b&&"<"!==a.charAt(0))throw nc("nosel");return new Y(a)}if(b){b=
C.document;var d;a=(d=og.exec(a))?[b.createElement(d[1])]:(d=ed(a,b))?d.childNodes:[];oc(this,a)}else B(a)?fd(a):oc(this,a)}function pc(a){return a.cloneNode(!0)}function yb(a,b){!b&&lc(a)&&x.cleanData([a]);a.querySelectorAll&&x.cleanData(a.querySelectorAll("*"))}function gd(a){for(var b in a)return!1;return!0}function hd(a){var b=a.ng339,d=b&&Ka[b],c=d&&d.events,d=d&&d.data;d&&!gd(d)||c&&!gd(c)||(delete Ka[b],a.ng339=void 0)}function id(a,b,d,c){if(w(c))throw nc("offargs");var e=(c=zb(a))&&c.events,
f=c&&c.handle;if(f){if(b){var g=function(b){var c=e[b];w(d)&&cb(c||[],d);w(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};r(b.split(" "),function(a){g(a);Ab[a]&&g(Ab[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f),delete e[b];hd(a)}}function qc(a,b){var d=a.ng339;if(d=d&&Ka[d])b?delete d.data[b]:d.data={},hd(a)}function zb(a,b){var d=a.ng339,d=d&&Ka[d];b&&!d&&(a.ng339=d=++pg,d=Ka[d]={events:{},data:{},handle:void 0});return d}function rc(a,b,d){if(lc(a)){var c,e=w(d),
f=!e&&b&&!D(b),g=!b;a=(a=zb(a,!f))&&a.data;if(e)a[xb(b)]=d;else{if(g)return a;if(f)return a&&a[xb(b)];for(c in b)a[xb(c)]=b[c]}}}function Bb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Cb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=U(a);c=c.replace(" "+a+" "," ")});c!==d&&a.setAttribute("class",U(c))}}function Db(a,b){if(b&&a.setAttribute){var d=
(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=U(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ")});c!==d&&a.setAttribute("class",U(c))}}function oc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function jd(a,b){return Eb(a,"$"+(b||"ngController")+"Controller")}function Eb(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=H(b)?b:[b];a;){for(var c=
0,e=b.length;c<e;c++)if(w(d=x.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function kd(a){for(yb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Fb(a,b){b||yb(a);var d=a.parentNode;d&&d.removeChild(a)}function qg(a,b){b=b||C;if("complete"===b.document.readyState)b.setTimeout(a);else x(b).on("load",a)}function fd(a){function b(){C.document.removeEventListener("DOMContentLoaded",b);C.removeEventListener("load",b);a()}"complete"===C.document.readyState?C.setTimeout(a):(C.document.addEventListener("DOMContentLoaded",
b),C.addEventListener("load",b))}function ld(a,b){var d=Gb[b.toLowerCase()];return d&&md[ua(a)]&&d}function rg(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(z(c.immediatePropagationStopped)){var k=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();k&&k.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};
var h=f.specialHandlerWrapper||sg;1<g&&(f=ja(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||h(a,c,f[l])}};d.elem=a;return d}function sg(a,b,d){d.call(a,b)}function tg(a,b,d){var c=b.relatedTarget;c&&(c===a||ug.call(a,c))||d.call(a,b)}function ig(){this.$get=function(){return S(Y,{hasClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Db(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Cb(a,b)}})}}function La(a,b){var d=a&&a.$$hashKey;
if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||se)():d+":"+a}function nd(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function od(a){a=Function.prototype.toString.call(a).replace(vg,"");return a.match(wg)||a.match(xg)}function yg(a){return(a=od(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function fb(a,b){function d(a){return function(b,c){if(D(b))r(b,Yb(a));else return a(b,
c)}}function c(a,b){Ja(a,"service");if(B(b)||H(b))b=n.instantiate(b);if(!b.$get)throw Ba("pget",a);return p[a+"Provider"]=b}function e(a,b){return function(){var c=t.invoke(b,this);if(z(c))throw Ba("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){gb(z(a)||H(a),"modulesToLoad","not an array");var b=[],c;r(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=n.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.set(a,!0);try{A(a)?(c=kc(a),
t.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):B(a)?b.push(n.invoke(a)):H(a)?b.push(n.invoke(a)):sb(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ba("modulerr",a,e.stack||e.message||e);}}});return b}function k(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===h)throw Ba("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=h,a[b]=c(b,e),
a[b]}catch(f){throw a[b]===h&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var g=[];a=fb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Ba("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);H(a)&&(a=a[a.length-1]);d=a;if(Ca||"function"!==typeof d)d=!1;else{var f=d.$$ngIsClass;Ga(f)||(f=d.$$ngIsClass=/^class\b/.test(Function.prototype.toString.call(d)));d=f}return d?
(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=H(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:fb.$$annotate,has:function(b){return p.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var h={},l=[],m=new Hb,p={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,
ia(b),!1)}),constant:d(function(a,b){Ja(a,"constant");p[a]=b;s[a]=b}),decorator:function(a,b){var c=n.get(a+"Provider"),d=c.$get;c.$get=function(){var a=t.invoke(d,c);return t.invoke(b,null,{$delegate:a})}}}},n=p.$injector=k(p,function(a,b){ca.isString(b)&&l.push(b);throw Ba("unpr",l.join(" <- "));}),s={},G=k(s,function(a,b){var c=n.get(a+"Provider",b);return t.invoke(c.$get,c,void 0,a)}),t=G;p.$injectorProvider={$get:ia(G)};t.modules=n.modules=T();var N=g(a),t=G.get("$injector");t.strictDi=b;r(N,
function(a){a&&t.invoke(a)});t.loadNewModules=function(a){r(g(a),function(a){a&&t.invoke(a)})};return t}function wf(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===ua(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;B(c)?c=c():$b(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):W(c)||
(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=A(a)?a:W(a)?a.toString():d.hash();var b;a?(b=k.getElementById(a))?f(b):(b=e(k.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var k=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||qg(function(){c.$evalAsync(g)})});return g}]}function hb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;H(a)&&(a=a.join(" "));H(b)&&(b=b.join(" "));return a+" "+b}function zg(a){A(a)&&
(a=a.split(" "));var b=T();r(a,function(a){a.length&&(b[a]=!0)});return b}function ra(a){return D(a)?a:{}}function Ag(a,b,d,c,e){function f(){qa=null;k()}function g(){t=y();t=z(t)?null:t;va(t,P)&&(t=P);N=P=t}function k(){var a=N;g();if(v!==h.url()||a!==t)v=h.url(),N=t,r(J,function(a){a(h.url(),t)})}var h=this,l=a.location,m=a.history,p=a.setTimeout,n=a.clearTimeout,s={},G=e(d);h.isMock=!1;h.$$completeOutstandingRequest=G.completeTask;h.$$incOutstandingRequestCount=G.incTaskCount;h.notifyWhenNoOutstandingRequests=
G.notifyWhenNoPendingTasks;var t,N,v=l.href,jc=b.find("base"),qa=null,y=c.history?function(){try{return m.state}catch(a){}}:E;g();h.url=function(b,d,e){z(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=N===e;b=ga(b).href;if(v===b&&(!c.history||f))return h;var k=v&&Da(v)===Da(b);v=b;N=e;!c.history||k&&f?(k||(qa=b),d?l.replace(b):k?(d=l,e=b,f=e.indexOf("#"),e=-1===f?"":e.substr(f),d.hash=e):l.href=b,l.href!==b&&(qa=b)):(m[d?"replaceState":"pushState"](e,"",b),g());
qa&&(qa=b);return h}return(qa||l.href).replace(/#$/,"")};h.state=function(){return t};var J=[],I=!1,P=null;h.onUrlChange=function(b){if(!I){if(c.history)x(a).on("popstate",f);x(a).on("hashchange",f);I=!0}J.push(b);return b};h.$$applicationDestroyed=function(){x(a).off("hashchange popstate",f)};h.$$checkUrlChange=k;h.baseHref=function(){var a=jc.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,""):""};h.defer=function(a,b,c){var d;b=b||0;c=c||G.DEFAULT_TASK_TYPE;G.incTaskCount(c);d=p(function(){delete s[d];
G.completeTask(a,c)},b);s[d]=c;return d};h.defer.cancel=function(a){if(s.hasOwnProperty(a)){var b=s[a];delete s[a];n(a);G.completeTask(E,b);return!0}return!1}}function Df(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(a,b,d,c,e){return new Ag(a,c,b,d,e)}]}function Ef(){this.$get=function(){function a(a,c){function e(a){a!==p&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw F("$cacheFactory")("iid",
a);var g=0,k=S({},c,{id:a}),h=T(),l=c&&c.capacity||Number.MAX_VALUE,m=T(),p=null,n=null;return b[a]={put:function(a,b){if(!z(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in h||g++;h[a]=b;g>l&&this.remove(n.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return h[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===p&&(p=b.p);b===n&&(n=b.n);f(b.n,b.p);delete m[a]}a in h&&(delete h[a],g--)},removeAll:function(){h=T();g=0;m=T();
p=n=null},destroy:function(){m=k=h=null;delete b[a]},info:function(){return S({},k,{size:g})}}}var b={};a.info=function(){var a={};r(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function cg(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Xc(a,b){function d(a,b,c){var d=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,e=T();r(a,function(a,f){a=a.trim();if(a in p)e[f]=p[a];else{var g=a.match(d);if(!g)throw $("iscp",b,f,a,c?"controller bindings definition":
"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f};g[4]&&(p[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==K(b))throw $("baddir",a);if(a!==a.trim())throw $("baddir",a);}function e(a){var b=a.require||a.controller&&a.name;!H(b)&&D(b)&&r(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,k=/(([\w-]+)(?::([^;]+))?;?)/,h=we("ngSrc,ngSrcset,src,srcset"),
l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,m=/^(on[a-z]+|formaction)$/,p=T();this.directive=function qa(b,d){gb(b,"name");Ja(b,"directive");A(b)?(c(b),gb(d,"directiveFactory"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];r(f[b],function(f,g){try{var h=a.invoke(f);B(h)?h={compile:ia(h)}:!h.compile&&h.link&&(h.compile=ia(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=e(h);var k=h,l=h.restrict;if(l&&(!A(l)||!/[EACM]/.test(l)))throw $("badrestrict",
l,b);k.restrict=l||"EA";h.$$moduleName=f.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),f[b].push(d)):r(b,Yb(qa));return this};this.component=function y(a,b){function c(a){function e(b){return B(b)||H(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:Bg(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",
require:b.require};r(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}if(!A(a))return r(a,Yb(Va(this,y))),this;var d=b.controller||function(){};r(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,B(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return w(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return w(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};
var n=!0;this.debugInfoEnabled=function(a){return w(a)?(n=a,this):n};var s=!1;this.strictComponentBindingsEnabled=function(a){return w(a)?(s=a,this):s};var G=10;this.onChangesTtl=function(a){return arguments.length?(G=a,this):G};var t=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(t=a,this):t};var N=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(N=a,this):N};var v=T();this.addPropertySecurityContext=function(a,b,c){var d=a.toLowerCase()+"|"+b.toLowerCase();
if(d in v&&v[d]!==c)throw $("ctxoverride",a,b,v[d],c);v[d]=c;return this};(function(){function a(b,c){r(c,function(a){v[a.toLowerCase()]=b})}a(V.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]);a(V.CSS,["*|style"]);a(V.URL,"area|href area|ping a|href a|ping blockquote|cite body|background del|cite input|src ins|cite q|cite".split(" "));a(V.MEDIA_URL,"audio|src img|src img|srcset source|src source|srcset track|src video|src video|poster".split(" "));a(V.RESOURCE_URL,"*|formAction applet|code applet|codebase base|href embed|src frame|src form|action head|profile html|manifest iframe|src link|href media|src object|codebase object|data script|src".split(" "))})();
this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(a,b,c,e,p,M,L,u,R){function q(){try{if(!--Ja)throw Ua=void 0,$("infchng",G);L.$apply(function(){for(var a=0,b=Ua.length;a<b;++a)try{Ua[a]()}catch(d){c(d)}Ua=void 0})}finally{Ja++}}function ma(a,b){if(!a)return a;if(!A(a))throw $("srcset",b,a.toString());for(var c="",d=U(a),e=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,e=/\s/.test(d)?e:/(,)/,d=d.split(e),e=Math.floor(d.length/
2),f=0;f<e;f++)var g=2*f,c=c+u.getTrustedMediaUrl(U(d[g])),c=c+(" "+U(d[g+1]));d=U(d[2*f]).split(/\s/);c+=u.getTrustedMediaUrl(U(d[0]));2===d.length&&(c+=" "+U(d[1]));return c}function w(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function O(a,b,c){Fa.innerHTML="<span "+b+">";b=Fa.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function sa(a,b){try{a.addClass(b)}catch(c){}}
function da(a,b,c,d,e){a instanceof x||(a=x(a));var f=Xa(a,b,a,c,d,e);da.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw $("multilink");gb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);g||(g=(d=d&&d[0])?"foreignobject"!==ua(d)&&la.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==g?x(ja(g,x("<div></div>").append(a).html())):c?Wa.clone.call(a):
a;if(k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);da.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,h);c||(a=f=null);return d}}function Xa(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,p,I,t;if(n)for(t=Array(c.length),m=0;m<h.length;m+=3)f=h[m],t[f]=c[f];else t=c;m=0;for(p=h.length;m<p;)k=t[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),da.$$addScopeInfo(x(k),l)):l=a,I=c.transcludeOnThisElement?ka(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ka(a,b):null,c(f,l,k,d,I)):f&&f(a,k.childNodes,
void 0,e)}for(var h=[],k=H(a)||a instanceof x,l,m,p,I,n,t=0;t<a.length;t++){l=new w;11===Ca&&ib(a,t,k);m=sc(a[t],[],l,0===t?d:void 0,e);(f=m.length?aa(m,a[t],l,b,c,null,[],[],f):null)&&f.scope&&da.$$addScopeClass(l.$$element);l=f&&f.terminal||!(p=a[t].childNodes)||!p.length?null:Xa(p,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(t,f,l),I=!0,n=n||f;f=null}return I?g:null}function ib(a,b,c){var d=a[b],e=d.parentNode,f;if(d.nodeType===Pa)for(;;){f=e?d.nextSibling:
a[b+1];if(!f||f.nodeType!==Pa)break;d.nodeValue+=f.nodeValue;f.parentNode&&f.parentNode.removeChild(f);c&&f===a[b+1]&&a.splice(b+1,1)}}function ka(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=T(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?ka(a,b.$$slots[f],c):null;return d}function sc(a,b,d,e,f){var g=d.$attr,h;switch(a.nodeType){case 1:h=ua(a);X(b,wa(h),"E",e,f);for(var l,m,
n,t,J,s=a.attributes,v=0,G=s&&s.length;v<G;v++){var P=!1,N=!1,r=!1,y=!1,u=!1,M;l=s[v];m=l.name;t=l.value;n=wa(m.toLowerCase());(J=n.match(Ra))?(r="Attr"===J[1],y="Prop"===J[1],u="On"===J[1],m=m.replace(pd,"").toLowerCase().substr(4+J[1].length).replace(/_(.)/g,function(a,b){return b.toUpperCase()})):(M=n.match(Sa))&&ca(M[1])&&(P=m,N=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6));if(y||u)d[n]=t,g[n]=l.name,y?Ea(a,b,n,m):b.push(qd(p,L,c,n,m,!1));else{n=wa(m.toLowerCase());g[n]=m;if(r||!d.hasOwnProperty(n))d[n]=
t,ld(a,n)&&(d[n]=!0);Ia(a,b,t,n,r);X(b,n,"A",e,f,P,N)}}"input"===h&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off");if(!Qa)break;g=a.className;D(g)&&(g=g.animVal);if(A(g)&&""!==g)for(;a=k.exec(g);)n=wa(a[2]),X(b,n,"C",e,f)&&(d[n]=U(a[3])),g=g.substr(a.index+a[0].length);break;case Pa:na(b,a.nodeValue);break;case 8:if(!Oa)break;F(a,b,d,e,f)}b.sort(ia);return b}function F(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=wa(f[1]);X(b,h,"M",d,e)&&(c[h]=U(f[2]))}}catch(k){}}
function V(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw $("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return x(d)}function Y(a,b,c){return function(d,e,f,g,h){e=V(e[0],b,c);return a(d,e,f,g,h)}}function Z(a,b,c,d,e,f){var g;return a?da(b,c,d,e,f):function(){g||(g=da(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function aa(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&(a=
Y(a,c,d));a.require=u.require;a.directiveName=Q;if(s===u||u.$$isolateScope)a=Aa(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=Y(b,c,d));b.require=u.require;b.directiveName=Q;if(s===u||u.$$isolateScope)b=Aa(b,{isolateScope:!0});k.push(b)}}function p(a,e,f,g,l){function m(a,b,c,d){var e;bb(a)||(d=c,c=b,b=a,a=void 0);N&&(e=P);c||(c=N?Q.parent():Q);if(d){var f=l.$$slots[d];if(f)return f(a,b,e,c,R);if(z(f))throw $("noslot",d,za(Q));}else return l(a,b,e,c,R)}var n,u,L,y,G,P,M,Q;b===f?(g=d,Q=d.$$element):(Q=
x(f),g=new w(Q,d));G=e;s?y=e.$new(!0):t&&(G=e.$parent);l&&(M=m,M.$$boundTransclude=l,M.isSlotFilled=function(a){return!!l.$$slots[a]});J&&(P=ea(Q,g,M,J,y,e,s));s&&(da.$$addScopeInfo(Q,y,!0,!(v&&(v===s||v===s.$$originalDirective))),da.$$addScopeClass(Q,!0),y.$$isolateBindings=s.$$isolateBindings,u=Da(e,g,y,y.$$isolateBindings,s),u.removeWatches&&y.$on("$destroy",u.removeWatches));for(n in P){u=J[n];L=P[n];var Cg=u.$$bindings.bindToController;L.instance=L();Q.data("$"+u.name+"Controller",L.instance);
L.bindingInfo=Da(G,g,L.instance,Cg,u)}r(J,function(a,b){var c=a.require;a.bindToController&&!H(c)&&D(c)&&S(P[b].instance,W(b,c,Q,P))});r(P,function(a){var b=a.instance;if(B(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(B(b.$onInit))try{b.$onInit()}catch(e){c(e)}B(b.$doCheck)&&(G.$watch(function(){b.$doCheck()}),b.$doCheck());B(b.$onDestroy)&&G.$on("$destroy",function(){b.$onDestroy()})});n=0;for(u=h.length;n<u;n++)L=h[n],Ba(L,L.isolateScope?y:e,Q,g,L.require&&W(L.directiveName,
L.require,Q,P),M);var R=e;s&&(s.template||null===s.templateUrl)&&(R=y);a&&a(R,f.childNodes,void 0,l);for(n=k.length-1;0<=n;n--)L=k[n],Ba(L,L.isolateScope?y:e,Q,g,L.require&&W(L.directiveName,L.require,Q,P),M);r(P,function(a){a=a.instance;B(a.$postLink)&&a.$postLink()})}l=l||{};for(var n=-Number.MAX_VALUE,t=l.newScopeDirective,J=l.controllerDirectives,s=l.newIsolateScopeDirective,v=l.templateDirective,L=l.nonTlbTranscludeDirective,G=!1,P=!1,N=l.hasElementTranscludeDirective,y=d.$$element=x(b),u,Q,
M,R=e,q,ma=!1,Ib=!1,O,sa=0,A=a.length;sa<A;sa++){u=a[sa];var E=u.$$start,ib=u.$$end;E&&(y=V(b,E,ib));M=void 0;if(n>u.priority)break;if(O=u.scope)u.templateUrl||(D(O)?(ba("new/isolated scope",s||t,u,y),s=u):ba("new/isolated scope",s,u,y)),t=t||u;Q=u.name;if(!ma&&(u.replace&&(u.templateUrl||u.template)||u.transclude&&!u.$$tlb)){for(O=sa+1;ma=a[O++];)if(ma.transclude&&!ma.$$tlb||ma.replace&&(ma.templateUrl||ma.template)){Ib=!0;break}ma=!0}!u.templateUrl&&u.controller&&(J=J||T(),ba("'"+Q+"' controller",
J[Q],u,y),J[Q]=u);if(O=u.transclude)if(G=!0,u.$$tlb||(ba("transclusion",L,u,y),L=u),"element"===O)N=!0,n=u.priority,M=y,y=d.$$element=x(da.$$createComment(Q,d[Q])),b=y[0],pa(f,Ha.call(M,0),b),R=Z(Ib,M,e,n,g&&g.name,{nonTlbTranscludeDirective:L});else{var ka=T();if(D(O)){M=C.document.createDocumentFragment();var Xa=T(),F=T();r(O,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Xa[a]=b;ka[b]=null;F[b]=c});r(y.contents(),function(a){var b=Xa[wa(ua(a))];b?(F[b]=!0,ka[b]=ka[b]||C.document.createDocumentFragment(),
ka[b].appendChild(a)):M.appendChild(a)});r(F,function(a,b){if(!a)throw $("reqslot",b);});for(var K in ka)ka[K]&&(R=x(ka[K].childNodes),ka[K]=Z(Ib,R,e));M=x(M.childNodes)}else M=x(pc(b)).contents();y.empty();R=Z(Ib,M,e,void 0,void 0,{needsNewScope:u.$$isolateScope||u.$$newScope});R.$$slots=ka}if(u.template)if(P=!0,ba("template",v,u,y),v=u,O=B(u.template)?u.template(y,d):u.template,O=Na(O),u.replace){g=u;M=mc.test(O)?rd(ja(u.templateNamespace,U(O))):[];b=M[0];if(1!==M.length||1!==b.nodeType)throw $("tplrt",
Q,"");pa(f,y,b);A={$attr:{}};O=sc(b,[],A);var Dg=a.splice(sa+1,a.length-(sa+1));(s||t)&&fa(O,s,t);a=a.concat(O).concat(Dg);ga(d,A);A=a.length}else y.html(O);if(u.templateUrl)P=!0,ba("template",v,u,y),v=u,u.replace&&(g=u),p=ha(a.splice(sa,a.length-sa),y,d,f,G&&R,h,k,{controllerDirectives:J,newScopeDirective:t!==u&&t,newIsolateScopeDirective:s,templateDirective:v,nonTlbTranscludeDirective:L}),A=a.length;else if(u.compile)try{q=u.compile(y,d,R);var X=u.$$originalDirective||u;B(q)?m(null,Va(X,q),E,ib):
q&&m(Va(X,q.pre),Va(X,q.post),E,ib)}catch(ca){c(ca,za(y))}u.terminal&&(p.terminal=!0,n=Math.max(n,u.priority))}p.scope=t&&!0===t.scope;p.transcludeOnThisElement=G;p.templateOnThisElement=P;p.transclude=R;l.hasElementTranscludeDirective=N;return p}function W(a,b,c,d){var e;if(A(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e="^^"===g&&c[0]&&9===c[0].nodeType?null:g?c.inheritedData(h):c.data(h)}if(!e&&
!f)throw $("ctreq",b,a);}else if(H(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=W(a,b[g],c,d);else D(b)&&(e={},r(b,function(b,f){e[f]=W(a,b,c,d)}));return e||null}function ea(a,b,c,d,e,f,g){var h=T(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},p=l.controller;"@"===p&&(p=b[l.name]);m=M(p,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function fa(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=ac(a[d],{$$isolateScope:b,
$$newScope:c})}function X(b,c,e,g,h,k,l){if(c===h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+"Directive");for(var p=0,n=h.length;p<n;p++)if(c=h[p],(z(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){k&&(c=ac(c,{$$start:k,$$end:l}));if(!c.$$bindings){var I=m=c,t=c.name,u={isolateScope:null,bindToController:null};D(I.scope)&&(!0===I.bindToController?(u.bindToController=d(I.scope,t,!0),u.isolateScope={}):u.isolateScope=d(I.scope,t,!1));D(I.bindToController)&&(u.bindToController=d(I.bindToController,
t,!0));if(u.bindToController&&!I.controller)throw $("noctrl",t);m=m.$$bindings=u;D(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);m=c}}return m}function ca(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function ga(a,b){var c=b.$attr,d=a.$attr;r(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+(("style"===e?";":" ")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,e){a.hasOwnProperty(e)||
"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function ha(a,b,d,f,g,h,k,l){var m=[],p,n,t=b[0],u=a.shift(),J=ac(u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),s=B(u.templateUrl)?u.templateUrl(b,d):u.templateUrl,L=u.templateNamespace;b.empty();e(s).then(function(c){var e,I;c=Na(c);if(u.replace){c=mc.test(c)?rd(ja(L,U(c))):[];e=c[0];if(1!==c.length||1!==e.nodeType)throw $("tplrt",u.name,s);c={$attr:{}};pa(f,b,e);var v=sc(e,[],c);D(u.scope)&&fa(v,!0);a=
v.concat(a);ga(d,c)}else e=t,b.html(c);a.unshift(J);p=aa(a,e,d,g,b,u,h,k,l);r(f,function(a,c){a===e&&(f[c]=b[0])});for(n=Xa(b[0].childNodes,g);m.length;){c=m.shift();I=m.shift();var y=m.shift(),P=m.shift(),v=b[0];if(!c.$$destroyed){if(I!==t){var G=I.className;l.hasElementTranscludeDirective&&u.replace||(v=pc(e));pa(y,x(I),v);sa(x(v),G)}I=p.transcludeOnThisElement?ka(c,p.transclude,P):P;p(n,c,v,f,I)}}m=null}).catch(function(a){cc(a)&&c(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(m?m.push(b,
c,d,a):(p.transcludeOnThisElement&&(a=ka(b,p.transclude,e)),p(n,b,c,d,a)))}}function ia(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function ba(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw $("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,za(d));}function na(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&da.$$addBindingClass(a);return function(a,c){var e=c.parent();
b||da.$$addBindingClass(e);da.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ja(a,b){a=K(a||"html");switch(a){case "svg":case "math":var c=C.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function oa(a,b){if("srcdoc"===b)return u.HTML;if("src"===b||"ngSrc"===b)return-1===["img","video","audio","source","track"].indexOf(a)?u.RESOURCE_URL:u.MEDIA_URL;if("xlinkHref"===b)return"image"===a?u.MEDIA_URL:
"a"===a?u.URL:u.RESOURCE_URL;if("form"===a&&"action"===b||"base"===a&&"href"===b||"link"===a&&"href"===b)return u.RESOURCE_URL;if("a"===a&&("href"===b||"ngHref"===b))return u.URL}function xa(a,b){var c=b.toLowerCase();return v[a+"|"+c]||v["*|"+c]}function ya(a){return ma(u.valueOf(a),"ng-prop-srcset")}function Ea(a,b,c,d){if(m.test(d))throw $("nodomevents");a=ua(a);var e=xa(a,d),f=Ta;"srcset"!==d||"img"!==a&&"source"!==a?e&&(f=u.getTrusted.bind(u,e)):f=ya;b.push({priority:100,compile:function(a,b){var e=
p(b[c]),g=p(b[c],function(a){return u.valueOf(a)});return{pre:function(a,b){function c(){var g=e(a);b[0][d]=f(g)}c();a.$watch(g,c)}}}})}function Ia(a,c,d,e,f){var g=ua(a),k=oa(g,e),l=h[e]||f,p=b(d,!f,k,l);if(p){if("multiple"===e&&"select"===g)throw $("selmulti",za(a));if(m.test(e))throw $("nodomevents");c.push({priority:100,compile:function(){return{pre:function(a,c,f){c=f.$$observers||(f.$$observers=T());var g=f[e];g!==d&&(p=g&&b(g,!0,k,l),d=g);p&&(f[e]=p(a),(c[e]||(c[e]=[])).$$inter=!0,(f.$$observers&&
f.$$observers[e].$$scope||a).$watch(p,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function pa(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]===d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=C.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);x.hasData(d)&&(x.data(c,x.data(d)),x(d).off("$destroy"));x.cleanData(a.querySelectorAll("*"));
for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function Aa(a,b){return S(function(){return a.apply(null,arguments)},a,b)}function Ba(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,za(d))}}function ra(a,b){if(s)throw $("missingattr",a,b);}function Da(a,c,d,e,f){function g(b,c,e){B(d.$onChanges)&&!dc(c,e)&&(Ua||(a.$$postDigest(q),Ua=[]),m||(m={},Ua.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Jb(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;r(e,function(e,h){var m=e.attrName,n=e.optional,
I,t,u,s;switch(e.mode){case "@":n||ta.call(c,m)||(ra(m,f.name),d[h]=c[m]=void 0);n=c.$observe(m,function(a){if(A(a)||Ga(a))g(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;I=c[m];A(I)?d[h]=b(I)(a):Ga(I)&&(d[h]=I);l[h]=new Jb(tc,d[h]);k.push(n);break;case "=":if(!ta.call(c,m)){if(n)break;ra(m,f.name);c[m]=void 0}if(n&&!c[m])break;t=p(c[m]);s=t.literal?va:dc;u=t.assign||function(){I=d[h]=t(a);throw $("nonassign",c[m],m,f.name);};I=d[h]=t(a);n=function(b){s(b,d[h])||(s(b,I)?u(a,b=d[h]):d[h]=b);return I=
b};n.$stateful=!0;n=e.collection?a.$watchCollection(c[m],n):a.$watch(p(c[m],n),null,t.literal);k.push(n);break;case "<":if(!ta.call(c,m)){if(n)break;ra(m,f.name);c[m]=void 0}if(n&&!c[m])break;t=p(c[m]);var v=t.literal,L=d[h]=t(a);l[h]=new Jb(tc,d[h]);n=a[e.collection?"$watchCollection":"$watch"](t,function(a,b){if(b===a){if(b===L||v&&va(b,L))return;b=L}g(h,a,b);d[h]=a});k.push(n);break;case "&":n||ta.call(c,m)||ra(m,f.name);t=c.hasOwnProperty(m)?p(c[m]):E;if(t===E&&n)break;d[h]=function(b){return t(a,
b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ma=/^\w/,Fa=C.document.createElement("div"),Oa=t,Qa=N,Ja=G,Ua;w.prototype={$normalize:wa,$addClass:function(a){a&&0<a.length&&R.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&R.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=sd(a,b);c&&c.length&&R.addClass(this.$$element,c);(c=sd(b,a))&&c.length&&R.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=
ld(this.$$element[0],a),g=td[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Vc(a,"-"));"img"===ua(this.$$element)&&"srcset"===a&&(this[a]=b=ma(b,"$set('srcset', value)"));!1!==d&&(null===b||z(b)?this.$$element.removeAttr(e):Ma.test(e)?f&&!1===b?this.$$element.removeAttr(e):this.$$element.attr(e,b):O(this.$$element[0],e,b));(a=this.$$observers)&&r(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,
d=c.$$observers||(c.$$observers=T()),e=d[a]||(d[a]=[]);e.push(b);L.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||z(c[a])||b(c[a])});return function(){cb(e,b)}}};var Ka=b.startSymbol(),La=b.endSymbol(),Na="{{"===Ka&&"}}"===La?Ta:function(a){return a.replace(/\{\{/g,Ka).replace(/}}/g,La)},Ra=/^ng(Attr|Prop|On)([A-Z].*)$/,Sa=/^(.+)Start$/;da.$$addBindingInfo=n?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:E;da.$$addBindingClass=n?function(a){sa(a,
"ng-binding")}:E;da.$$addScopeInfo=n?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:E;da.$$addScopeClass=n?function(a,b){sa(a,b?"ng-isolate-scope":"ng-scope")}:E;da.$$createComment=function(a,b){var c="";n&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return C.document.createComment(c)};return da}]}function Jb(a,b){this.previousValue=a;this.currentValue=b}function wa(a){return a.replace(pd,"").replace(Eg,function(a,d,c){return c?d.toUpperCase():d})}function sd(a,b){var d=
"",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],k=0;k<e.length;k++)if(g===e[k])continue a;d+=(0<d.length?" ":"")+g}return d}function rd(a){a=x(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Pa&&""===d.nodeValue.trim())&&Fg.call(a,b,1)}return a}function Bg(a,b){if(b&&A(b))return b;if(A(a)){var d=ud.exec(a);if(d)return d[3]}}function Ff(){var a={};this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,d){Ja(b,
"controller");D(b)?S(a,b):a[b]=d};this.$get=["$injector",function(b){function d(a,b,d,g){if(!a||!D(a.$scope))throw F("$controller")("noscp",g,b);a.$scope[b]=d}return function(c,e,f,g){var k,h,l;f=!0===f;g&&A(g)&&(l=g);if(A(c)){g=c.match(ud);if(!g)throw vd("ctrlfmt",c);h=g[1];l=l||g[3];c=a.hasOwnProperty(h)?a[h]:Ge(e.$scope,h,!0);if(!c)throw vd("ctrlreg",h);sb(c,h,!0)}if(f)return f=(H(c)?c[c.length-1]:c).prototype,k=Object.create(f||null),l&&d(e,l,k,h||c.name),S(function(){var a=b.invoke(c,k,e,h);
a!==k&&(D(a)||B(a))&&(k=a,l&&d(e,l,k,h||c.name));return k},{instance:k,identifier:l});k=b.instantiate(c,e,h);l&&d(e,l,k,h||c.name);return k}}]}function Gf(){this.$get=["$window",function(a){return x(a.document)}]}function Hf(){this.$get=["$document","$rootScope",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;a.on("visibilitychange",d);b.$on("$destroy",function(){a.off("visibilitychange",d)});return function(){return e}}]}function If(){this.$get=["$log",function(a){return function(b,
d){a.error.apply(a,arguments)}}]}function uc(a){return D(a)?ha(a)?a.toISOString():eb(a):a}function Of(){this.$get=function(){return function(a){if(!a)return"";var b=[];Oc(a,function(a,c){null===a||z(a)||B(a)||(H(a)?r(a,function(a){b.push(ba(c)+"="+ba(uc(a)))}):b.push(ba(c)+"="+ba(uc(a))))});return b.join("&")}}}function Pf(){this.$get=function(){return function(a){function b(a,e,f){H(a)?r(a,function(a,c){b(a,e+"["+(D(a)?c:"")+"]")}):D(a)&&!ha(a)?Oc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):
(B(a)&&(a=a()),d.push(ba(e)+"="+(null==a?"":ba(uc(a)))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function vc(a,b){if(A(a)){var d=a.replace(Gg,"").trim();if(d){var c=b("Content-Type"),c=c&&0===c.indexOf(wd),e;(e=c)||(e=(e=d.match(Hg))&&Ig[e[0]].test(d));if(e)try{a=Rc(d)}catch(f){if(!c)return a;throw Kb("baddata",a,f);}}}return a}function xd(a){var b=T(),d;A(a)?r(a.split("\n"),function(a){d=a.indexOf(":");var e=K(U(a.substr(0,d)));a=U(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):D(a)&&
r(a,function(a,d){var f=K(d),g=U(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function yd(a){var b;return function(d){b||(b=xd(a));return d?(d=b[K(d)],void 0===d&&(d=null),d):b}}function zd(a,b,d,c){if(B(c))return c(a,b,d);r(c,function(c){a=c(a,b,d)});return a}function Nf(){var a=this.defaults={transformResponse:[vc],transformRequest:[function(a){return D(a)&&"[object File]"!==la.call(a)&&"[object Blob]"!==la.call(a)&&"[object FormData]"!==la.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:ja(wc),put:ja(wc),patch:ja(wc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return w(a)?(b=!!a,this):b};var d=this.interceptors=[],c=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(e,f,g,k,h,l,m,p){function n(b){function c(a,b){for(var d=0,e=b.length;d<e;){var f=b[d++],g=b[d++];
a=a.then(f,g)}b.length=0;return a}function d(a,b){var c,e={};r(a,function(a,d){B(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a});return e}function f(a){var b=S({},a);b.data=zd(a.data,a.headers,a.status,g.transformResponse);a=a.status;return 200<=a&&300>a?b:l.reject(b)}if(!D(b))throw F("$http")("badreq",b);if(!A(p.valueOf(b.url)))throw F("$http")("badreq",b.url);var g=S({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},
b);g.headers=function(b){var c=a.headers,e=S({},b.headers),f,g,h,c=S({},c.common,c[K(b.method)]);a:for(f in c){g=K(f);for(h in e)if(K(h)===g)continue a;e[f]=c[f]}return d(e,ja(b))}(b);g.method=ub(g.method);g.paramSerializer=A(g.paramSerializer)?m.get(g.paramSerializer):g.paramSerializer;e.$$incOutstandingRequestCount("$http");var h=[],k=[];b=l.resolve(g);r(v,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&k.push(a.response,a.responseError)});
b=c(b,h);b=b.then(function(b){var c=b.headers,d=zd(b.data,yd(c),void 0,b.transformRequest);z(d)&&r(c,function(a,b){"content-type"===K(b)&&delete c[b]});z(b.withCredentials)&&!z(a.withCredentials)&&(b.withCredentials=a.withCredentials);return s(b,d).then(f,f)});b=c(b,k);return b=b.finally(function(){e.$$completeOutstandingRequest(E,"$http")})}function s(c,d){function e(a){if(a){var c={};r(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function k(a,
c,d,e,f){function g(){m(c,a,d,e,f)}R&&(200<=a&&300>a?R.put(O,[a,c,xd(d),e,f]):R.remove(O));b?h.$applyAsync(g):(g(),h.$$phase||h.$apply())}function m(a,b,d,e,f){b=-1<=b?b:0;(200<=b&&300>b?L.resolve:L.reject)({data:a,status:b,headers:yd(d),config:c,statusText:e,xhrStatus:f})}function s(a){m(a.data,a.status,ja(a.headers()),a.statusText,a.xhrStatus)}function v(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var L=l.defer(),u=L.promise,R,q,ma=c.headers,x="jsonp"===K(c.method),
O=c.url;x?O=p.getTrustedResourceUrl(O):A(O)||(O=p.valueOf(O));O=G(O,c.paramSerializer(c.params));x&&(O=t(O,c.jsonpCallbackParam));n.pendingRequests.push(c);u.then(v,v);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(R=D(c.cache)?c.cache:D(a.cache)?a.cache:N);R&&(q=R.get(O),w(q)?q&&B(q.then)?q.then(s,s):H(q)?m(q[1],q[0],ja(q[2]),q[3],q[4]):m(q,200,{},"OK","complete"):R.put(O,u));z(q)&&((q=jc(c.url)?g()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(ma[c.xsrfHeaderName||a.xsrfHeaderName]=
q),f(c.method,O,d,k,ma,c.timeout,c.withCredentials,c.responseType,e(c.eventHandlers),e(c.uploadEventHandlers)));return u}function G(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}function t(a,b){var c=a.split("?");if(2<c.length)throw Kb("badjsonp",a);c=gc(c[1]);r(c,function(c,d){if("JSON_CALLBACK"===c)throw Kb("badjsonp",a);if(d===b)throw Kb("badjsonp",b,a);});return a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var N=k("$http");a.paramSerializer=A(a.paramSerializer)?m.get(a.paramSerializer):
a.paramSerializer;var v=[];r(d,function(a){v.unshift(A(a)?m.get(a):m.invoke(a))});var jc=Jg(c);n.pendingRequests=[];(function(a){r(arguments,function(a){n[a]=function(b,c){return n(S({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){r(arguments,function(a){n[a]=function(b,c,d){return n(S({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");n.defaults=a;return n}]}function Rf(){this.$get=function(){return function(){return new C.XMLHttpRequest}}}function Qf(){this.$get=
["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return Kg(a,c,a.defer,b,d[0])}]}function Kg(a,b,d,c,e){function f(a,b,d){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m);f.removeEventListener("error",m);e.body.removeChild(f);f=null;var g=-1,s="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),s=a.type,g="error"===a.type?404:200);d&&d(g,s)};f.addEventListener("load",
m);f.addEventListener("error",m);e.body.appendChild(f);return m}return function(e,k,h,l,m,p,n,s,G,t){function N(a){J="timeout"===a;qa&&qa();y&&y.abort()}function v(a,b,c,e,f,g){w(P)&&d.cancel(P);qa=y=null;a(b,c,e,f,g)}k=k||a.url();if("jsonp"===K(e))var q=c.createCallback(k),qa=f(k,q,function(a,b){var d=200===a&&c.getResponse(q);v(l,a,d,"",b,"complete");c.removeCallback(q)});else{var y=b(e,k),J=!1;y.open(e,k,!0);r(m,function(a,b){w(a)&&y.setRequestHeader(b,a)});y.onload=function(){var a=y.statusText||
"",b="response"in y?y.response:y.responseText,c=1223===y.status?204:y.status;0===c&&(c=b?200:"file"===ga(k).protocol?404:0);v(l,c,b,y.getAllResponseHeaders(),a,"complete")};y.onerror=function(){v(l,-1,null,null,"","error")};y.ontimeout=function(){v(l,-1,null,null,"","timeout")};y.onabort=function(){v(l,-1,null,null,"",J?"timeout":"abort")};r(G,function(a,b){y.addEventListener(b,a)});r(t,function(a,b){y.upload.addEventListener(b,a)});n&&(y.withCredentials=!0);if(s)try{y.responseType=s}catch(I){if("json"!==
s)throw I;}y.send(z(h)?null:h)}if(0<p)var P=d(function(){N("timeout")},p);else p&&B(p.then)&&p.then(function(){N(w(p.$$timeoutId)?"timeout":"abort")})}}function Kf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(p,a).replace(n,b)}function k(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}
function h(f,h,n,p){function v(a){try{return a=n&&!r?e.getTrusted(n,a):e.valueOf(a),p&&!w(a)?a:ic(a)}catch(b){c(Ma.interr(f,b))}}var r=n===e.URL||n===e.MEDIA_URL;if(!f.length||-1===f.indexOf(a)){if(h)return;h=g(f);r&&(h=e.getTrusted(n,h));h=ia(h);h.exp=f;h.expressions=[];h.$$watchDelegate=k;return h}p=!!p;for(var q,y,J=0,I=[],P,Q=f.length,M=[],L=[],u;J<Q;)if(-1!==(q=f.indexOf(a,J))&&-1!==(y=f.indexOf(b,q+l)))J!==q&&M.push(g(f.substring(J,q))),J=f.substring(q+l,y),I.push(J),J=y+m,L.push(M.length),
M.push("");else{J!==Q&&M.push(g(f.substring(J)));break}u=1===M.length&&1===L.length;var R=r&&u?void 0:v;P=I.map(function(a){return d(a,R)});if(!h||I.length){var x=function(a){for(var b=0,c=I.length;b<c;b++){if(p&&z(a[b]))return;M[L[b]]=a[b]}if(r)return e.getTrusted(n,u?M[0]:M.join(""));n&&1<M.length&&Ma.throwNoconcat(f);return M.join("")};return S(function(a){var b=0,d=I.length,e=Array(d);try{for(;b<d;b++)e[b]=P[b](a);return x(e)}catch(g){c(Ma.interr(f,g))}},{exp:f,expressions:I,$$watchDelegate:function(a,
b){var c;return a.$watchGroup(P,function(d,e){var f=x(d);b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,p=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");h.startSymbol=function(){return a};h.endSymbol=function(){return b};return h}]}function Lf(){this.$get=["$$intervalFactory","$window",function(a,b){var d={},c=function(a){b.clearInterval(a);delete d[a]},e=a(function(a,c,e){a=b.setInterval(a,c);d[a]=e;return a},c);e.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty("$$intervalId"))throw Lg("badprom");
if(!d.hasOwnProperty(a.$$intervalId))return!1;a=a.$$intervalId;var b=d[a],e=b.promise;e.$$state&&(e.$$state.pur=!0);b.reject("canceled");c(a);return!0};return e}]}function Mf(){this.$get=["$browser","$q","$$q","$rootScope",function(a,b,d,c){return function(e,f){return function(g,k,h,l){function m(){p?g.apply(null,n):g(s)}var p=4<arguments.length,n=p?Ha.call(arguments,4):[],s=0,G=w(l)&&!l,t=(G?d:b).defer(),r=t.promise;h=w(h)?h:0;r.$$intervalId=e(function(){G?a.defer(m):c.$evalAsync(m);t.notify(s++);
0<h&&s>=h&&(t.resolve(s),f(r.$$intervalId));G||c.$apply()},k,t,G);return r}}}]}function Ad(a,b){var d=ga(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=fa(d.port)||Mg[d.protocol]||null}function Bd(a,b,d){if(Ng.test(a))throw jb("badpath",a);var c="/"!==a.charAt(0);c&&(a="/"+a);a=ga(a);for(var c=(c&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname).split("/"),e=c.length;e--;)c[e]=decodeURIComponent(c[e]),d&&(c[e]=c[e].replace(/\//g,"%2F"));d=c.join("/");b.$$path=d;b.$$search=gc(a.search);
b.$$hash=decodeURIComponent(a.hash);b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function xc(a,b){return a.slice(0,b.length)===b}function xa(a,b){if(xc(b,a))return b.substr(a.length)}function Da(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function yc(a,b,d){this.$$html5=!0;d=d||"";Ad(a,this);this.$$parse=function(a){var d=xa(b,a);if(!A(d))throw jb("ipthprfx",a,b);Bd(d,this,!0);this.$$path||(this.$$path="/");this.$$compose()};this.$$normalizeUrl=function(a){return b+a.substr(1)};
this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;w(f=xa(a,c))?(g=f,g=d&&w(f=xa(d,f))?b+(xa("/",f)||f):a+g):w(f=xa(b,c))?g=b+f:b===c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function zc(a,b,d){Ad(a,this);this.$$parse=function(c){var e=xa(a,c)||xa(b,c),f;z(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",z(e)&&(a=c,this.replace())):(f=xa(d,e),z(f)&&(f=e));Bd(f,this,!1);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;xc(f,e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?
f[1]:c);this.$$path=c;this.$$compose()};this.$$normalizeUrl=function(b){return a+(b?d+b:"")};this.$$parseLinkUrl=function(b,d){return Da(a)===Da(b)?(this.$$parse(b),!0):!1}}function Cd(a,b,d){this.$$html5=!0;zc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a===Da(c)?f=c:(g=xa(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$normalizeUrl=function(b){return a+d+b}}function Lb(a){return function(){return this[a]}}function Dd(a,
b){return function(d){if(z(d))return this[a];this[a]=b(d);this.$$compose();return this}}function Tf(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return w(b)?(a=b,this):a};this.html5Mode=function(a){if(Ga(a))return b.enabled=a,this;if(D(a)){Ga(a.enabled)&&(b.enabled=a.enabled);Ga(a.requireBase)&&(b.requireBase=a.requireBase);if(Ga(a.rewriteLinks)||A(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer",
"$rootElement","$window",function(d,c,e,f,g){function k(a,b){return a===b||ga(a).href===ga(b).href}function h(a,b,d){var e=m.url(),f=m.$$state;try{c.url(a,b,d),m.$$state=c.state()}catch(g){throw m.url(e),m.$$state=f,g;}}function l(a,b){d.$broadcast("$locationChangeSuccess",m.absUrl(),a,m.$$state,b)}var m,p;p=c.baseHref();var n=c.url(),s;if(b.enabled){if(!p&&b.requireBase)throw jb("nobase");s=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(p||"/");p=e.history?yc:Cd}else s=Da(n),p=zc;var r=s.substr(0,
Da(s).lastIndexOf("/")+1);m=new p(s,r,"#"+a);m.$$parseLinkUrl(n,n);m.$$state=c.state();var t=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var g=x(a.target);"a"!==ua(g[0]);)if(g[0]===f[0]||!(g=g.parent())[0])return;if(!A(e)||!z(g.attr(e))){var e=g.prop("href"),h=g.attr("href")||g.attr("xlink:href");D(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=ga(e.animVal).href);t.test(e)||!e||g.attr("target")||
a.isDefaultPrevented()||!m.$$parseLinkUrl(e,h)||(a.preventDefault(),m.absUrl()!==c.url()&&d.$apply())}}});m.absUrl()!==n&&c.url(m.absUrl(),!0);var N=!0;c.onUrlChange(function(a,b){xc(a,r)?(d.$evalAsync(function(){var c=m.absUrl(),e=m.$$state,f;m.$$parse(a);m.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;m.absUrl()===a&&(f?(m.$$parse(c),m.$$state=e,h(c,!1,e)):(N=!1,l(c,e)))}),d.$$phase||d.$digest()):g.location.href=a});d.$watch(function(){if(N||m.$$urlUpdatedByLocation){m.$$urlUpdatedByLocation=
!1;var a=c.url(),b=m.absUrl(),f=c.state(),g=m.$$replace,n=!k(a,b)||m.$$html5&&e.history&&f!==m.$$state;if(N||n)N=!1,d.$evalAsync(function(){var b=m.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,m.$$state,f).defaultPrevented;m.absUrl()===b&&(c?(m.$$parse(a),m.$$state=f):(n&&h(b,g,f===m.$$state?null:m.$$state),l(a,f)))})}m.$$replace=!1});return m}]}function Uf(){var a=!0,b=this;this.debugEnabled=function(b){return w(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){cc(a)&&(a.stack&&
f?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||E;return function(){var a=[];r(arguments,function(b){a.push(c(b))});return Function.prototype.apply.call(e,b,a)}}var f=Ca||/\bEdge\//.test(d.navigator&&d.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,
arguments)}}()}}]}function Og(a){return a+""}function Pg(a,b){return"undefined"!==typeof a?a:b}function Ed(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function Qg(a,b){switch(a.type){case q.MemberExpression:if(a.computed)return!1;break;case q.UnaryExpression:return 1;case q.BinaryExpression:return"+"!==a.operator?1:!1;case q.CallExpression:return!1}return void 0===b?Fd:b}function Z(a,b,d){var c,e,f=a.isPure=Qg(a,d);switch(a.type){case q.Program:c=!0;r(a.body,function(a){Z(a.expression,
b,f);c=c&&a.expression.constant});a.constant=c;break;case q.Literal:a.constant=!0;a.toWatch=[];break;case q.UnaryExpression:Z(a.argument,b,f);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case q.BinaryExpression:Z(a.left,b,f);Z(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case q.LogicalExpression:Z(a.left,b,f);Z(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case q.ConditionalExpression:Z(a.test,
b,f);Z(a.alternate,b,f);Z(a.consequent,b,f);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case q.Identifier:a.constant=!1;a.toWatch=[a];break;case q.MemberExpression:Z(a.object,b,f);a.computed&&Z(a.property,b,f);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=a.constant?[]:[a];break;case q.CallExpression:c=d=a.filter?!b(a.callee.name).$stateful:!1;e=[];r(a.arguments,function(a){Z(a,b,f);c=c&&a.constant;e.push.apply(e,
a.toWatch)});a.constant=c;a.toWatch=d?e:[a];break;case q.AssignmentExpression:Z(a.left,b,f);Z(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case q.ArrayExpression:c=!0;e=[];r(a.elements,function(a){Z(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=c;a.toWatch=e;break;case q.ObjectExpression:c=!0;e=[];r(a.properties,function(a){Z(a.value,b,f);c=c&&a.value.constant;e.push.apply(e,a.value.toWatch);a.computed&&(Z(a.key,b,!1),c=c&&a.key.constant,e.push.apply(e,
a.key.toWatch))});a.constant=c;a.toWatch=e;break;case q.ThisExpression:a.constant=!1;a.toWatch=[];break;case q.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Gd(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Hd(a){return a.type===q.Identifier||a.type===q.MemberExpression}function Id(a){if(1===a.body.length&&Hd(a.body[0].expression))return{type:q.AssignmentExpression,left:a.body[0].expression,right:{type:q.NGValueParameter},operator:"="}}
function Jd(a){this.$filter=a}function Kd(a){this.$filter=a}function Mb(a,b,d){this.ast=new q(a,d);this.astCompiler=d.csp?new Kd(b):new Jd(b)}function Ac(a){return B(a.valueOf)?a.valueOf():Rg.call(a)}function Vf(){var a=T(),b={"true":!0,"false":!1,"null":null,undefined:void 0},d,c;this.addLiteral=function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){d=a;c=b;return this};this.$get=["$filter",function(e){function f(b,c){var d,f;switch(typeof b){case "string":return f=b=b.trim(),d=a[f],d||(d=new Nb(G),
d=(new Mb(d,e,G)).parse(b),a[f]=p(d)),s(d,c);case "function":return s(b,c);default:return s(E,c)}}function g(a,b,c){return null==a||null==b?a===b:"object"!==typeof a||(a=Ac(a),"object"!==typeof a||c)?a===b||a!==a&&b!==b:!1}function k(a,b,c,d,e){var f=d.inputs,h;if(1===f.length){var k=g,f=f[0];return a.$watch(function(a){var b=f(a);g(b,k,f.isPure)||(h=d(a,void 0,void 0,[b]),k=b&&Ac(b));return h},b,c,e)}for(var l=[],m=[],n=0,p=f.length;n<p;n++)l[n]=g,m[n]=null;return a.$watch(function(a){for(var b=
!1,c=0,e=f.length;c<e;c++){var k=f[c](a);if(b||(b=!g(k,l[c],f[c].isPure)))m[c]=k,l[c]=k&&Ac(k)}b&&(h=d(a,void 0,void 0,m));return h},b,c,e)}function h(a,b,c,d,e){function f(){h(m)&&k()}function g(a,b,c,d){m=u&&d?d[0]:n(a,b,c,d);h(m)&&a.$$postDigest(f);return s(m)}var h=d.literal?l:w,k,m,n=d.$$intercepted||d,s=d.$$interceptor||Ta,u=d.inputs&&!n.inputs;g.literal=d.literal;g.constant=d.constant;g.inputs=d.inputs;p(g);return k=a.$watch(g,b,c,e)}function l(a){var b=!0;r(a,function(a){w(a)||(b=!1)});return b}
function m(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function p(a){a.constant?a.$$watchDelegate=m:a.oneTime?a.$$watchDelegate=h:a.inputs&&(a.$$watchDelegate=k);return a}function n(a,b){function c(d){return b(a(d))}c.$stateful=a.$stateful||b.$stateful;c.$$pure=a.$$pure&&b.$$pure;return c}function s(a,b){if(!b)return a;a.$$interceptor&&(b=n(a.$$interceptor,b),a=a.$$intercepted);var c=!1,d=function(d,e,f,g){d=c&&g?g[0]:a(d,e,f,g);return b(d)};d.$$intercepted=a;d.$$interceptor=
b;d.literal=a.literal;d.oneTime=a.oneTime;d.constant=a.constant;b.$stateful||(c=!a.inputs,d.inputs=a.inputs?a.inputs:[a],b.$$pure||(d.inputs=d.inputs.map(function(a){return a.isPure===Fd?function(b){return a(b)}:a})));return p(d)}var G={csp:Aa().noUnsafeEval,literals:Ia(b),isIdentifierStart:B(d)&&d,isIdentifierContinue:B(c)&&c};f.$$getAst=function(a){var b=new Nb(G);return(new Mb(b,e,G)).getAst(a).ast};return f}]}function Xf(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,d){return Ld(function(a){b.$evalAsync(a)},
d,a)}];this.errorOnUnhandledRejections=function(b){return w(b)?(a=b,this):a}}function Yf(){var a=!0;this.$get=["$browser","$exceptionHandler",function(b,d){return Ld(function(a){b.defer(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return w(b)?(a=b,this):a}}function Ld(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){h(a,b)};this.reject=function(b){m(a,b)};this.notify=function(b){n(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!w&&
x.length;){var a=x.shift();if(!a.pur){a.pur=!0;var c=a.value,c="Possibly unhandled rejection: "+("function"===typeof c?c.toString().replace(/ \{[\s\S]*$/,""):z(c)?"undefined":"string"!==typeof c?Ie(c,void 0):c);cc(a.value)?b(a.value,c):b(c)}}}function k(c){!d||c.pending||2!==c.status||c.pur||(0===w&&0===x.length&&a(g),x.push(c));!c.processScheduled&&c.pending&&(c.processScheduled=!0,++w,a(function(){var e,f,k;k=c.pending;c.processScheduled=!1;c.pending=void 0;try{for(var l=0,n=k.length;l<n;++l){c.pur=
!0;f=k[l][0];e=k[l][c.status];try{B(e)?h(f,e(c.value)):1===c.status?h(f,c.value):m(f,c.value)}catch(p){m(f,p),p&&!0===p.$$passToExceptionHandler&&b(p)}}}finally{--w,d&&0===w&&a(g)}}))}function h(a,b){a.$$state.status||(b===a?p(a,v("qcycle",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,p(a,b))}function e(b){n(a,b)}var f,g=!1;try{if(D(b)||B(b))f=b.then;B(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,k(a.$$state))}catch(h){d(h)}}function m(a,
b){a.$$state.status||p(a,b)}function p(a,b){a.$$state.value=b;a.$$state.status=2;k(a.$$state)}function n(c,d){var e=c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0];a=e[f][3];try{n(c,B(a)?a(d):d)}catch(h){b(h)}}})}function s(a){var b=new f;m(b,a);return b}function G(a,b,c){var d=null;try{B(c)&&(d=c())}catch(e){return s(e)}return d&&B(d.then)?d.then(function(){return b(a)},s):b(a)}function t(a,b,c,d){var e=new f;h(e,a);return e.then(b,c,
d)}function q(a){if(!B(a))throw v("norslvr",a);var b=new f;a(function(a){h(b,a)},function(a){m(b,a)});return b}var v=F("$q",TypeError),w=0,x=[];S(f.prototype,{then:function(a,b,c){if(z(a)&&z(b)&&z(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&k(this.$$state);return d},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return G(b,y,a)},function(b){return G(b,s,a)},
b)}});var y=t;q.prototype=f.prototype;q.defer=c;q.reject=s;q.when=t;q.resolve=y;q.all=function(a){var b=new f,c=0,d=H(a)?[]:{};r(a,function(a,e){c++;t(a).then(function(a){d[e]=a;--c||h(b,d)},function(a){m(b,a)})});0===c&&h(b,d);return b};q.race=function(a){var b=c();r(a,function(a){t(a).then(b.resolve,b.reject)});return b.promise};return q}function hg(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||
a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function Wf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++pb;this.$$ChildScope=null;this.$$suspended=!1}b.prototype=a;return b}var b=10,d=F("$rootScope"),c=null,e=null;this.digestTtl=
function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,k){function h(a){a.currentScope.$$destroyed=!0}function l(a){9===Ca&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++pb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=
this;this.$$suspended=this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function p(a){if(v.$$phase)throw d("inprog",v.$$phase);v.$$phase=a}function n(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function G(){}function t(){for(;y.length;)try{y.shift()()}catch(a){f(a)}e=null}function q(){null===e&&(e=k.defer(function(){v.$apply(t)},
null,"$applyAsync"))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",h);return d},$watch:function(a,b,d,e){var f=g(a);b=B(b)?b:E;if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l=
{fn:b,last:G,get:f,exp:e||a,eq:!!d};c=null;k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;n(this,1);return function(){var a=cb(k,l);0<=a&&(n(h,-1),a<k.$$digestWatchIndex&&k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;try{k?(k=!1,b(e,e,g)):b(e,d,g)}finally{for(var f=0;f<a.length;f++)d[f]=e[f]}}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=
!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});r(a,function(a,b){var d=g.$watch(a,function(a){e[b]=a;h||(h=!0,g.$evalAsync(c))});f.push(d)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!z(e)){if(D(e))if(ya(e))for(f!==n&&(f=n,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==p&&(f=p={},t=0,l++);a=0;for(b in e)ta.call(e,
b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ta.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$$pure=g(a).literal;c.$stateful=!c.$$pure;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),n=[],p={},s=!0,t=0;return this.$watch(m,function(){s?(s=!1,b(e,e,d)):b(e,h,d);if(k)if(D(e))if(ya(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ta.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,
g,h,l,m,n,s,r=b,q,y=w.length?v:this,N=[],z,A;p("$digest");k.$$checkUrlChange();this===v&&null!==e&&(k.defer.cancel(e),t());c=null;do{s=!1;q=y;for(n=0;n<w.length;n++){try{A=w[n],l=A.fn,l(A.scope,A.locals)}catch(C){f(C)}c=null}w.length=0;a:do{if(n=!q.$$suspended&&q.$$watchers)for(n.$$digestWatchIndex=n.length;n.$$digestWatchIndex--;)try{if(a=n[n.$$digestWatchIndex])if(m=a.get,(g=m(q))!==(h=a.last)&&!(a.eq?va(g,h):X(g)&&X(h)))s=!0,c=a,a.last=a.eq?Ia(g,null):g,l=a.fn,l(g,h===G?g:h,q),5>r&&(z=4-r,N[z]||
(N[z]=[]),N[z].push({msg:B(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:h}));else if(a===c){s=!1;break a}}catch(E){f(E)}if(!(n=!q.$$suspended&&q.$$watchersCount&&q.$$childHead||q!==y&&q.$$nextSibling))for(;q!==y&&!(n=q.$$nextSibling);)q=q.$parent}while(q=n);if((s||w.length)&&!r--)throw v.$$phase=null,d("infdig",b,N);}while(s||w.length);for(v.$$phase=null;J<x.length;)try{x[J++]()}catch(D){f(D)}x.length=J=0;k.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},
$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===v&&k.$$applicationDestroyed();n(this,-this.$$watchersCount);for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=
this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=E;this.$on=this.$watch=this.$watchGroup=function(){return E};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){v.$$phase||w.length||k.defer(function(){w.length&&v.$digest()},null,"$evalAsync");w.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){x.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{v.$$phase=
null}}catch(b){f(b)}finally{try{v.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&y.push(b);a=g(a);q()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(delete c[d],s(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=
!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)break;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=db([e],arguments,
1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var v=new m,w=v.$$asyncQueue=[],x=v.$$postDigestQueue=[],y=v.$$applyAsyncQueue=[],J=0;return v}]}function Le(){var a=/^\s*(https?|s?ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;
this.aHrefSanitizationWhitelist=function(b){return w(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return w(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f=ga(d&&d.trim()).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function Sg(a){if("self"===a)return a;if(A(a)){if(-1<a.indexOf("***"))throw Ea("iwcard",a);a=Md(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+a+"$")}if(ab(a))return new RegExp("^"+a.source+"$");throw Ea("imatcher");
}function Nd(a){var b=[];w(a)&&r(a,function(a){b.push(Sg(a))});return b}function $f(){this.SCE_CONTEXTS=V;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=Nd(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=Nd(a));return b};this.$get=["$injector","$$sanitizeUri",function(d,c){function e(a,b){var c;"self"===a?(c=Bc(b,Od))||(C.document.baseURI?c=C.document.baseURI:(Na||(Na=C.document.createElement("a"),Na.href=".",Na=Na.cloneNode(!1)),c=Na.href),
c=Bc(b,c)):c=!!a.exec(b.href);return c}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var g=function(a){throw Ea("unsafe");};d.has("$sanitize")&&(g=d.get("$sanitize"));var k=f(),h={};h[V.HTML]=f(k);h[V.CSS]=f(k);h[V.MEDIA_URL]=f(k);h[V.URL]=f(h[V.MEDIA_URL]);h[V.JS]=f(k);h[V.RESOURCE_URL]=
f(h[V.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ea("icontext",a,b);if(null===b||z(b)||""===b)return b;if("string"!==typeof b)throw Ea("itype",a);return new c(b)},getTrusted:function(d,f){if(null===f||z(f)||""===f)return f;var k=h.hasOwnProperty(d)?h[d]:null;if(k&&f instanceof k)return f.$$unwrapTrustedValue();B(f.$$unwrapTrustedValue)&&(f=f.$$unwrapTrustedValue());if(d===V.MEDIA_URL||d===V.URL)return c(f.toString(),d===V.MEDIA_URL);if(d===V.RESOURCE_URL){var k=
ga(f.toString()),n,s,r=!1;n=0;for(s=a.length;n<s;n++)if(e(a[n],k)){r=!0;break}if(r)for(n=0,s=b.length;n<s;n++)if(e(b[n],k)){r=!1;break}if(r)return f;throw Ea("insecurl",f.toString());}if(d===V.HTML)return g(f);throw Ea("unsafe");},valueOf:function(a){return a instanceof k?a.$$unwrapTrustedValue():a}}}]}function Zf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Ca)throw Ea("iequirks");var c=ja(V);c.isEnabled=function(){return a};
c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Ta);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;r(V,function(a,b){var d=K(b);c[("parse_as_"+d).replace(Cc,wb)]=function(b){return e(a,b)};c[("get_trusted_"+d).replace(Cc,wb)]=function(b){return f(a,b)};c[("trust_as_"+d).replace(Cc,wb)]=function(b){return g(a,b)}});
return c}]}function ag(){this.$get=["$window","$document",function(a,b){var d={},c=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=fa((/android (\d+)/.exec(K((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},k=g.body&&g.body.style,h=!1,l=!1;k&&(h=!!("transition"in k||"webkitTransition"in k),l=!!("animation"in k||"webkitAnimation"in k));return{history:!(!c||
4>e||f),hasEvent:function(a){if("input"===a&&Ca)return!1;if(z(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Aa(),transitions:h,animations:l,android:e}}]}function bg(){this.$get=ia(function(a){return new Tg(a)})}function Tg(a){function b(){var a=e.pop();return a&&a.cb}function d(a){for(var b=e.length-1;0<=b;--b){var c=e[b];if(c.type===a)return e.splice(b,1),c.cb}}var c={},e=[],f=this.ALL_TASKS_TYPE="$$all$$",g=this.DEFAULT_TASK_TYPE="$$default$$";this.completeTask=function(e,
h){h=h||g;try{e()}finally{var l;l=h||g;c[l]&&(c[l]--,c[f]--);l=c[h];var m=c[f];if(!m||!l)for(l=m?d:b;m=l(h);)try{m()}catch(p){a.error(p)}}};this.incTaskCount=function(a){a=a||g;c[a]=(c[a]||0)+1;c[f]=(c[f]||0)+1};this.notifyWhenNoPendingTasks=function(a,b){b=b||f;c[b]?e.push({type:b,cb:a}):a()}}function dg(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,d,c,e,f){function g(k,h){g.totalPendingRequests++;if(!A(k)||
z(d.get(k)))k=f.getTrustedResourceUrl(k);var l=c.defaults&&c.defaults.transformResponse;H(l)?l=l.filter(function(a){return a!==vc}):l===vc&&(l=null);return c.get(k,S({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){return d.put(k,a.data)},function(a){h||(a=Ug("tpload",k,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=0;return g}]}function eg(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,
b,d){a=a.getElementsByClassName("ng-binding");var g=[];r(a,function(a){var c=ca.element(a).data("$binding");c&&r(c,function(c){d?(new RegExp("(^|\\s)"+Md(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],k=0;k<g.length;++k){var h=a.querySelectorAll("["+g[k]+"model"+(d?"=":"*=")+'"'+b+'"]');if(h.length)return h}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},
whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function fg(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,h,l){B(f)||(l=h,h=f,f=E);var m=Ha.call(arguments,3),p=w(l)&&!l,n=(p?c:d).defer(),s=n.promise,r;r=b.defer(function(){try{n.resolve(f.apply(null,m))}catch(b){n.reject(b),e(b)}finally{delete g[s.$$timeoutId]}p||a.$apply()},h,"$timeout");s.$$timeoutId=r;g[r]=n;return s}var g={};f.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty("$$timeoutId"))throw Vg("badprom");
if(!g.hasOwnProperty(a.$$timeoutId))return!1;a=a.$$timeoutId;var c=g[a],d=c.promise;d.$$state&&(d.$$state.pur=!0);c.reject("canceled");delete g[a];return b.defer.cancel(a)};return f}]}function ga(a){if(!A(a))return a;Ca&&(aa.setAttribute("href",a),a=aa.href);aa.setAttribute("href",a);a=aa.hostname;!Wg&&-1<a.indexOf(":")&&(a="["+a+"]");return{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,
""):"",hostname:a,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}}function Jg(a){var b=[Od].concat(a.map(ga));return function(a){a=ga(a);return b.some(Bc.bind(null,a))}}function Bc(a,b){a=ga(a);b=ga(b);return a.protocol===b.protocol&&a.host===b.host}function gg(){this.$get=ia(C)}function Pd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,k,h,l;try{a=d.cookie||""}catch(m){a=""}if(a!==e)for(e=a,a=
e.split("; "),c={},k=0;k<a.length;k++)g=a[k],h=g.indexOf("="),0<h&&(l=b(g.substring(0,h)),z(c[l])&&(c[l]=b(g.substring(h+1))));return c}}function kg(){this.$get=Pd}function dd(a){function b(d,c){if(D(d)){var e={};r(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Qd);b("date",Rd);b("filter",Xg);b("json",Yg);b("limitTo",Zg);b("lowercase",$g);b("number",Sd);b("orderBy",
Td);b("uppercase",ah)}function Xg(){return function(a,b,d,c){if(!ya(a)){if(null==a)return a;throw F("filter")("notarray",a);}c=c||"$";var e;switch(Dc(b)){case "function":break;case "boolean":case "null":case "number":case "string":e=!0;case "object":b=bh(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function bh(a,b,d,c){var e=D(a)&&d in a;!0===b?b=va:B(b)||(b=function(a,b){if(z(a))return!1;if(null===a||null===b)return a===b;if(D(b)||D(a)&&!bc(a))return!1;a=K(""+a);b=K(""+
b);return-1!==a.indexOf(b)});return function(f){return e&&!D(f)?Fa(f,a[d],b,d,!1):Fa(f,a,b,d,c)}}function Fa(a,b,d,c,e,f){var g=Dc(a),k=Dc(b);if("string"===k&&"!"===b.charAt(0))return!Fa(a,b.substring(1),d,c,e);if(H(a))return a.some(function(a){return Fa(a,b,d,c,e)});switch(g){case "object":var h;if(e){for(h in a)if(h.charAt&&"$"!==h.charAt(0)&&Fa(a[h],b,d,c,!0))return!0;return f?!1:Fa(a,b,d,c,!1)}if("object"===k){for(h in b)if(f=b[h],!B(f)&&!z(f)&&(g=h===c,!Fa(g?a:a[h],f,d,c,g,g)))return!1;return!0}return d(a,
b);case "function":return!1;default:return d(a,b)}}function Dc(a){return null===a?"null":typeof a}function Qd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){z(c)&&(c=b.CURRENCY_SYM);z(e)&&(e=b.PATTERNS[1].maxFrac);var f=c?/\u00A4/g:/\s*\u00A4\s*/g;return null==a?a:Ud(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(f,c)}}function Sd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Ud(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function ch(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Vd))&&
(a=a.replace(Vd,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)===Ec;e++);if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===Ec;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Wd&&(d=d.splice(0,Wd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function dh(a,b,d,c){var e=a.d,f=e.length-a.i;b=z(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=
1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Ud(a,b,d,c,e){if(!A(a)&&!W(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,k=Math.abs(a)+"",h="";if(f)h="\u221e";else{g=ch(k);dh(g,e,b.minFrac,b.maxFrac);h=g.d;k=g.i;e=g.e;f=[];for(g=h.reduce(function(a,b){return a&&!b},
!0);0>k;)h.unshift(0),k++;0<k?f=h.splice(k,h.length):(f=h,h=[0]);k=[];for(h.length>=b.lgSize&&k.unshift(h.splice(-b.lgSize,h.length).join(""));h.length>b.gSize;)k.unshift(h.splice(-b.gSize,h.length).join(""));h.length&&k.unshift(h.join(""));h=k.join(d);f.length&&(h+=c+f.join(""));e&&(h+="e+"+e)}return 0>a&&!g?b.negPre+h+b.negSuf:b.posPre+h+b.posSuf}function Ob(a,b,d,c){var e="";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=Ec+a;d&&(a=a.substr(a.length-b));return e+a}function ea(a,
b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12===d&&(f=12);return Ob(f,b,c,e)}}function kb(a,b,d){return function(c,e){var f=c["get"+a](),g=ub((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Xd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Yd(a){return function(b){var d=Xd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Ob(b,a)}}function Fc(a,b){return 0>=
a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Rd(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,k=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=fa(b[9]+b[10]),g=fa(b[9]+b[11]));k.call(a,fa(b[1]),fa(b[2])-1,fa(b[3]));f=fa(b[4]||0)-f;g=fa(b[5]||0)-g;k=fa(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));h.call(a,f,g,k,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,
d,f){var g="",k=[],h,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;A(c)&&(c=eh.test(c)?fa(c):b(c));W(c)&&(c=new Date(c));if(!ha(c)||!isFinite(c.getTime()))return c;for(;d;)(l=fh.exec(d))?(k=db(k,l,1),d=k.pop()):(k.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=ec(f,m),c=fc(c,f,!0));r(k,function(b){h=gh[b];g+=h?h(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Yg(){return function(a,b){z(b)&&(b=2);return eb(a,b)}}function Zg(){return function(a,
b,d){b=Infinity===Math.abs(Number(b))?Number(b):fa(b);if(X(b))return a;W(a)&&(a=a.toString());if(!ya(a))return a;d=!d||isNaN(d)?0:fa(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?Gc(a,d,d+b):0===d?Gc(a,b,a.length):Gc(a,Math.max(0,d+b),d)}}function Gc(a,b,d){return A(a)?a.slice(b,d):Ha.call(a,b,d)}function Td(a){function b(b){return b.map(function(b){var c=1,d=Ta;if(B(b))d=b;else if(A(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=
d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function c(a,b){var c=0,d=a.type,h=b.type;if(d===h){var h=a.value,l=b.value;"string"===d?(h=h.toLowerCase(),l=l.toLowerCase()):"object"===d&&(D(h)&&(h=a.index),D(l)&&(l=b.index));h!==l&&(c=h<l?-1:1)}else c="undefined"===d?1:"undefined"===h?-1:"null"===d?1:"null"===h?-1:d<h?-1:1;return c}return function(a,f,g,k){if(null==a)return a;if(!ya(a))throw F("orderBy")("notarray",
a);H(f)||(f=[f]);0===f.length&&(f=["+"]);var h=b(f),l=g?-1:1,m=B(k)?k:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:h.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="null";else if("object"===c)a:{if(B(e.valueOf)&&(e=e.valueOf(),d(e)))break a;bc(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var d=0,e=h.length;d<e;d++){var f=m(a.predicateValues[d],b.predicateValues[d]);if(f)return f*
h[d].descending*l}return(m(a.tieBreaker,b.tieBreaker)||c(a.tieBreaker,b.tieBreaker))*l});return a=a.map(function(a){return a.value})}}function Ra(a){B(a)&&(a={link:a});a.restrict=a.restrict||"AC";return ia(a)}function Pb(a,b,d,c,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||"")(d);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=lb;this.$$element=a;this.$$animate=c;Zd(this)}function Zd(a){a.$$classCache=
{};a.$$classCache[$d]=!(a.$$classCache[mb]=a.$$element.hasClass(mb))}function ae(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?"-"+Vc(c,"-"):"";b(a,mb+c,!0===d);b(a,$d+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,k){z(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,k)):(this.$pending&&e(this.$pending,
a,k),be(this.$pending)&&(this.$pending=void 0));Ga(g)?g?(e(this.$error,a,k),c(this.$$success,a,k)):(c(this.$error,a,k),e(this.$$success,a,k)):(e(this.$error,a,k),e(this.$$success,a,k));this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,d(this,"",null)):(b(this,"ng-pending",!1),this.$valid=be(this.$error),this.$invalid=!this.$valid,d(this,"",this.$valid));g=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;d(this,a,g);this.$$parentForm.$setValidity(a,
g,this)}}function be(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Hc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Sa(a,b,d,c,e,f){var g=K(b[0].type);if(!e.android){var k=!1;b.on("compositionstart",function(){k=!0});b.on("compositionupdate",function(a){if(z(a.data)||""===a.data)k=!1});b.on("compositionend",function(){k=!1;l()})}var h,l=function(a){h&&(f.defer.cancel(h),h=null);if(!k){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&
"false"===d.ngTrim||(e=U(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){h||(h=f.defer(function(){h=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut drop",m)}b.on("change",l);if(ce[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!h){var b=this.validity,
c=b.badInput,d=b.typeMismatch;h=f.defer(function(){h=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Qb(a,b){return function(d,c){var e,f;if(ha(d))return d;if(A(d)){'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(hh.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),
ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),e=new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0),100>f.yyyy&&e.setFullYear(f.yyyy),e}return NaN}}function nb(a,b,d,c){return function(e,f,g,k,h,l,m,p){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function s(a){return w(a)&&!ha(a)?r(a)||void 0:a}function r(a,b){var c=k.$options.getOption("timezone");v&&v!==c&&(b=Sc(b,ec(v)));var e=d(a,
b);!isNaN(e)&&c&&(e=fc(e,c));return e}Ic(e,f,g,k,a);Sa(e,f,g,k,h,l);var t="time"===a||"datetimelocal"===a,q,v;k.$parsers.push(function(c){if(k.$isEmpty(c))return null;if(b.test(c))return r(c,q);k.$$parserName=a});k.$formatters.push(function(a){if(a&&!ha(a))throw ob("datefmt",a);if(n(a)){q=a;var b=k.$options.getOption("timezone");b&&(v=b,q=fc(q,b,!0));var d=c;t&&A(k.$options.getOption("timeSecondsFormat"))&&(d=c.replace("ss.sss",k.$options.getOption("timeSecondsFormat")).replace(/:$/,""));a=m("date")(a,
d,b);t&&k.$options.getOption("timeStripZeroSeconds")&&(a=a.replace(/(?::00)?(?:\.000)?$/,""));return a}v=q=null;return""});if(w(g.min)||g.ngMin){var x=g.min||p(g.ngMin)(e),B=s(x);k.$validators.min=function(a){return!n(a)||z(B)||d(a)>=B};g.$observe("min",function(a){a!==x&&(B=s(a),x=a,k.$validate())})}if(w(g.max)||g.ngMax){var y=g.max||p(g.ngMax)(e),J=s(y);k.$validators.max=function(a){return!n(a)||z(J)||d(a)<=J};g.$observe("max",function(a){a!==y&&(J=s(a),y=a,k.$validate())})}}}function Ic(a,b,d,
c,e){(c.$$hasNativeValidators=D(b[0].validity))&&c.$parsers.push(function(a){var d=b.prop("validity")||{};if(d.badInput||d.typeMismatch)c.$$parserName=e;else return a})}function de(a){a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(ih.test(b))return parseFloat(b);a.$$parserName="number"});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!W(b))throw ob("numfmt",b);b=b.toString()}return b})}function na(a){w(a)&&!W(a)&&(a=parseFloat(a));return X(a)?void 0:a}function Jc(a){var b=a.toString(),
d=b.indexOf(".");return-1===d?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function ee(a,b,d){a=Number(a);var c=(a|0)!==a,e=(b|0)!==b,f=(d|0)!==d;if(c||e||f){var g=c?Jc(a):0,k=e?Jc(b):0,h=f?Jc(d):0,g=Math.max(g,k,h),g=Math.pow(10,g);a*=g;b*=g;d*=g;c&&(a=Math.round(a));e&&(b=Math.round(b));f&&(d=Math.round(d))}return 0===(a-b)%d}function fe(a,b,d,c,e){if(w(c)){a=a(c);if(!a.constant)throw ob("constexpr",d,c);return a(b)}return e}function Kc(a,b){function d(a,b){if(!a||!a.length)return[];
if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e===b[m])continue a;c.push(e)}return c}function c(a){if(!a)return a;var b=a;H(a)?b=a.map(c).join(" "):D(a)?b=Object.keys(a).filter(function(b){return a[b]}).join(" "):A(a)||(b=a+"");return b}a="ngClass"+a;var e;return["$parse",function(f){return{restrict:"AC",link:function(g,k,h){function l(a,b){var c=[];r(a,function(a){if(0<b||p[a])p[a]=(p[a]||0)+b,p[a]===+(0<b)&&c.push(a)});return c.join(" ")}function m(a){if(a===
b){var c=s,c=l(c&&c.split(" "),1);h.$addClass(c)}else c=s,c=l(c&&c.split(" "),-1),h.$removeClass(c);n=a}var p=k.data("$classCounts"),n=!0,s;p||(p=T(),k.data("$classCounts",p));"ngClass"!==a&&(e||(e=f("$index",function(a){return a&1})),g.$watch(e,m));g.$watch(f(h[a],c),function(a){if(n===b){var c=s&&s.split(" "),e=a&&a.split(" "),f=d(c,e),c=d(e,c),f=l(f,-1),c=l(c,1);h.$addClass(c);h.$removeClass(f)}s=a})}}}]}function qd(a,b,d,c,e,f){return{restrict:"A",compile:function(g,k){var h=a(k[c]);return function(a,
c){c.on(e,function(c){var e=function(){h(a,{$event:c})};if(b.$$phase)if(f)a.$evalAsync(e);else try{e()}catch(g){d(g)}else a.$apply(e)})}}}}function Rb(a,b,d,c,e,f,g,k,h){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=
void 0;this.$name=h(d.name||"",!1)(a);this.$$parentForm=lb;this.$options=Sb;this.$$updateEvents="";this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=e(d.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$parserName="parse";this.$$currentValidationRunId=0;this.$$scope=a;this.$$rootScope=a.$root;this.$$attr=d;
this.$$element=c;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=k;this.$$exceptionHandler=b;Zd(this);jh(this)}function jh(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);b===a.$modelValue||a.$modelValue!==a.$modelValue&&b!==b||a.$$setModelValue(b);return b})}function Lc(a){this.$$options=a}function ge(a,b){r(b,function(b,c){w(a[c])||(a[c]=b)})}function Oa(a,b){a.prop("selected",b);a.attr("selected",b)}function he(a,b,d){if(a){A(a)&&(a=new RegExp("^"+a+"$"));if(!a.test)throw F("ngPattern")("noregexp",
b,a,za(d));return a}}function Tb(a){a=fa(a);return X(a)?-1:a}var Wb={objectMaxDepth:5,urlErrorParamsEnabled:!0},ie=/^\/(.+)\/([a-z]*)$/,ta=Object.prototype.hasOwnProperty,K=function(a){return A(a)?a.toLowerCase():a},ub=function(a){return A(a)?a.toUpperCase():a},Ca,x,rb,Ha=[].slice,Fg=[].splice,kh=[].push,la=Object.prototype.toString,Pc=Object.getPrototypeOf,pa=F("ng"),ca=C.angular||(C.angular={}),kc,pb=0;Ca=C.document.documentMode;var X=Number.isNaN||function(a){return a!==a};E.$inject=[];Ta.$inject=
[];var ve=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,U=function(a){return A(a)?a.trim():a},Md=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Aa=function(){if(!w(Aa.rules)){var a=C.document.querySelector("[ng-csp]")||C.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Aa.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==
b.indexOf("no-inline-style")}}else{a=Aa;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Aa.rules},qb=function(){if(w(qb.name_))return qb.name_;var a,b,d=Qa.length,c,e;for(b=0;b<d;++b)if(c=Qa[b],a=C.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return qb.name_=e},xe=/:/g,Qa=["ng-","data-ng-","ng:","x-ng-"],Be=function(a){var b=a.currentScript;if(!b)return!0;if(!(b instanceof C.HTMLScriptElement||b instanceof C.SVGScriptElement))return!1;
b=b.attributes;return[b.getNamedItem("src"),b.getNamedItem("href"),b.getNamedItem("xlink:href")].every(function(b){if(!b)return!0;if(!b.value)return!1;var c=a.createElement("a");c.href=b.value;if(a.location.origin===c.origin)return!0;switch(c.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;default:return!1}})}(C.document),Ee=/[A-Z]/g,Wc=!1,Pa=3,Ke={full:"1.7.8",major:1,minor:7,dot:8,codeName:"enthusiastic-oblation"};Y.expando="ng339";var Ka=Y.cache=
{},pg=1;Y._data=function(a){return this.cache[a[this.expando]]||{}};var lg=/-([a-z])/g,lh=/^-ms-/,Ab={mouseleave:"mouseout",mouseenter:"mouseover"},nc=F("jqLite"),og=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,mc=/<|&#?\w+;/,mg=/<([\w:-]+)/,ng=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,oa={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>",
"</tr></tbody></table>"],_default:[0,"",""]};oa.optgroup=oa.option;oa.tbody=oa.tfoot=oa.colgroup=oa.caption=oa.thead;oa.th=oa.td;var ug=C.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Wa=Y.prototype={ready:fd,toString:function(){var a=[];r(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?x(this[a]):x(this[this.length+a])},length:0,push:kh,sort:[].sort,splice:[].splice},Gb={};r("multiple selected checked disabled readOnly required open".split(" "),
function(a){Gb[K(a)]=a});var md={};r("input select option textarea button form details".split(" "),function(a){md[a]=!0});var td={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};r({data:rc,removeData:qc,hasData:function(a){for(var b in Ka[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)qc(a[b]),id(a[b])}},function(a,b){Y[b]=a});r({data:rc,inheritedData:Eb,scope:function(a){return x.data(a,"$scope")||Eb(a.parentNode||
a,["$isolateScope","$scope"])},isolateScope:function(a){return x.data(a,"$isolateScope")||x.data(a,"$isolateScopeNoTemplate")},controller:jd,injector:function(a){return Eb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Bb,css:function(a,b,d){b=xb(b.replace(lh,"ms-"));if(w(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Pa&&2!==c&&8!==c&&a.getAttribute){var c=K(b),e=Gb[c];if(w(d))null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,
e?c:d);else return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a}},prop:function(a,b,d){if(w(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(z(d)){var c=a.nodeType;return 1===c||c===Pa?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(z(b)){if(a.multiple&&"select"===ua(a)){var d=[];r(a.options,function(a){a.selected&&d.push(a.value||a.text)});return d}return a.value}a.value=b},html:function(a,b){if(z(b))return a.innerHTML;yb(a,!0);a.innerHTML=b},
empty:kd},function(a,b){Y.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==kd&&z(2===a.length&&a!==Bb&&a!==jd?b:c)){if(D(b)){for(e=0;e<g;e++)if(a===rc)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=z(e)?Math.min(g,1):g;for(f=0;f<g;f++){var k=a(this[f],b,c);e=e?e+k:k}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});r({removeData:qc,on:function(a,b,d,c){if(w(c))throw nc("onargs");if(lc(a)){c=zb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=rg(a,e));c=0<=b.indexOf(" ")?
b.split(" "):[b];for(var g=c.length,k=function(b,c,g){var k=e[b];k||(k=e[b]=[],k.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f));k.push(d)};g--;)b=c[g],Ab[b]?(k(Ab[b],tg),k(b,void 0,!0)):k(b)}},off:id,one:function(a,b,d){a=x(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;yb(a);r(new Y(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];r(a.childNodes,function(a){1===
a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new Y(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;r(new Y(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){var d=x(b).eq(0).clone()[0],c=a.parentNode;c&&c.replaceChild(d,a);d.appendChild(a)},remove:Fb,detach:function(a){Fb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;
if(c){b=new Y(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Db,removeClass:Cb,toggleClass:function(a,b,d){b&&r(b.split(" "),function(b){var e=d;z(e)&&(e=!Bb(a,b));(e?Db:Cb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:pc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=zb(a);if(g=(g=g&&g.events)&&
g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:E,type:f,target:a},b.type&&(c=S(c,b)),b=ja(g),e=d?[c].concat(d):[c],r(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){Y.prototype[b]=function(b,c,e){for(var f,g=0,k=this.length;g<
k;g++)z(f)?(f=a(this[g],b,c,e),w(f)&&(f=x(f))):oc(f,a(this[g],b,c,e));return w(f)?f:this}});Y.prototype.bind=Y.prototype.on;Y.prototype.unbind=Y.prototype.off;var mh=Object.create(null);nd.prototype={_idx:function(a){a!==this._lastKey&&(this._lastKey=a,this._lastIndex=this._keys.indexOf(a));return this._lastIndex},_transformKey:function(a){return X(a)?mh:a},get:function(a){a=this._transformKey(a);a=this._idx(a);if(-1!==a)return this._values[a]},has:function(a){a=this._transformKey(a);return-1!==this._idx(a)},
set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length);this._keys[d]=a;this._values[d]=b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};var Hb=nd,jg=[function(){this.$get=[function(){return Hb}]}],wg=/^([^(]+?)=>/,xg=/^[^(]*\(\s*([^)]*)\)/m,nh=/,/,oh=/^\s*(_?)(\S+?)\1\s*$/,vg=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ba=F("$injector");
fb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw A(d)&&d||(d=a.name||yg(a)),Ba("strictdi",d);b=od(a);r(b[1].split(nh),function(a){a.replace(oh,function(a,b,d){c.push(d)})})}a.$inject=c}}else H(a)?(b=a.length-1,sb(a[b],"fn"),c=a.slice(0,b)):sb(a,"fn",!0);return c};var je=F("$animate"),zf=function(){this.$get=E},Af=function(){var a=new Hb,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=A(b)?b.split(" "):
H(b)?b:[],r(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){r(b,function(b){var c=a.get(b);if(c){var d=zg(b.attr("class")),e="",f="";r(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});r(b,function(a){e&&Db(a,e);f&&Cb(a,f)});a.delete(b)}});b.length=0}return{enabled:E,on:E,off:E,pin:E,push:function(g,k,h,l){l&&l();h=h||{};h.from&&g.css(h.from);h.to&&g.css(h.to);if(h.addClass||h.removeClass)if(k=h.addClass,l=h.removeClass,h=a.get(g)||{},k=e(h,k,!0),l=e(h,l,!1),
k||l)a.set(g,h),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},xf=["$provide",function(a){var b=this,d=null,c=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&"."!==c.charAt(0))throw je("notcsel",c);var g=c+"-animation";b.$$registeredAnimations[c.substr(1)]=g;a.factory(g,d)};this.customFilter=function(a){1===arguments.length&&(c=B(a)?a:null);return c};this.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?
a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(d.toString()))throw d=null,je("nongcls","ng-animate");return d};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.cancel&&a.cancel()},enter:function(c,d,h,l){d=d&&x(d);h=h&&x(h);d=d||h.parent();b(c,d,h);return a.push(c,
"enter",ra(l))},move:function(c,d,h,l){d=d&&x(d);h=h&&x(h);d=d||h.parent();b(c,d,h);return a.push(c,"move",ra(l))},leave:function(b,c){return a.push(b,"leave",ra(c),function(){b.remove()})},addClass:function(b,c,d){d=ra(d);d.addClass=hb(d.addclass,c);return a.push(b,"addClass",d)},removeClass:function(b,c,d){d=ra(d);d.removeClass=hb(d.removeClass,c);return a.push(b,"removeClass",d)},setClass:function(b,c,d,f){f=ra(f);f.addClass=hb(f.addClass,c);f.removeClass=hb(f.removeClass,d);return a.push(b,"setClass",
f)},animate:function(b,c,d,f,m){m=ra(m);m.from=m.from?S(m.from,c):c;m.to=m.to?S(m.to,d):d;m.tempClasses=hb(m.tempClasses,f||"ng-inline-animate");return a.push(b,"animate",m)}}}]}],Cf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},Bf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,
b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){c()?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;r(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:E,getPromise:function(){if(!this.promise){var b=
this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},
complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(r(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},yf=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);k||
h.complete();k=!0});return h}var g=e||{};g.$$prepared||(g=Ia(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var k,h=new d;return{start:f,end:f}}}]},$=F("$compile"),tc=new function(){};Xc.$inject=["$provide","$$sanitizeUriProvider"];Jb.prototype.isFirstChange=function(){return this.previousValue===tc};var pd=/^((?:x|data)[:\-_])/i,Eg=/[:\-_]+(.)/g,vd=F("$controller"),ud=/^(\S+)(\s+as\s+([\w$]+))?$/,Jf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&
b instanceof x&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},wd="application/json",wc={"Content-Type":wd+";charset=utf-8"},Hg=/^\[|^\{(?!\{)/,Ig={"[":/]$/,"{":/}$/},Gg=/^\)]\}',?\n/,Kb=F("$http"),Ma=ca.$interpolateMinErr=F("$interpolate");Ma.throwNoconcat=function(a){throw Ma("noconcat",a);};Ma.interr=function(a,b){return Ma("interr",a,b.toString())};var Lg=F("$interval"),Sf=function(){this.$get=function(){function a(a){var b=function(a){b.data=a;b.called=!0};b.id=a;return b}var b=ca.callbacks,
d={};return{createCallback:function(c){c="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+c,f=a(c);d[e]=b[c]=f;return e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id];delete d[a]}}}},ph=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Mg={http:80,https:443,ftp:21},jb=F("$location"),Ng=/^\s*[\\/]{2,}/,qh={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){for(var a=this.$$path,b=this.$$hash,d=ye(this.$$search),b=b?
"#"+hc(b):"",a=a.split("/"),c=a.length;c--;)a[c]=hc(a[c].replace(/%2F/g,"/"));this.$$url=a.join("/")+(d?"?"+d:"")+b;this.$$absUrl=this.$$normalizeUrl(this.$$url);this.$$urlUpdatedByLocation=!0},absUrl:Lb("$$absUrl"),url:function(a){if(z(a))return this.$$url;var b=ph.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Lb("$$protocol"),host:Lb("$$host"),port:Lb("$$port"),path:Dd("$$path",function(a){a=null!==
a?a.toString():"";return"/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(A(a)||W(a))a=a.toString(),this.$$search=gc(a);else if(D(a))a=Ia(a,{}),r(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw jb("isrcharg");break;default:z(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Dd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};
r([Cd,zc,yc],function(a){a.prototype=Object.create(qh);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==yc||!this.$$html5)throw jb("nostate");this.$$state=z(b)?null:b;this.$$urlUpdatedByLocation=!0;return this}});var Ya=F("$parse"),Rg={}.constructor.prototype.valueOf,Ub=T();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Ub[a]=!0});var rh={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Nb=function(a){this.options=a};Nb.prototype={constructor:Nb,
lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Ub[b],e=Ub[d];Ub[a]||
c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?
this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):
(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=w(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw Ya("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<
this.text.length;){var d=K(this.text.charAt(this.index));if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<
this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,
16))):d+=rh[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var q=function(a,b){this.lexer=a;this.options=b};q.Program="Program";q.ExpressionStatement="ExpressionStatement";q.AssignmentExpression="AssignmentExpression";q.ConditionalExpression="ConditionalExpression";q.LogicalExpression="LogicalExpression";q.BinaryExpression="BinaryExpression";q.UnaryExpression="UnaryExpression";
q.CallExpression="CallExpression";q.MemberExpression="MemberExpression";q.Identifier="Identifier";q.Literal="Literal";q.ArrayExpression="ArrayExpression";q.Property="Property";q.ObjectExpression="ObjectExpression";q.ThisExpression="ThisExpression";q.LocalsExpression="LocalsExpression";q.NGValueParameter="NGValueParameter";q.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},
program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:q.Program,body:a}},expressionStatement:function(){return{type:q.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Hd(a))throw Ya("lval");
a={type:q.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:q.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:q.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a=
{type:q.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:q.BinaryExpression,
operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:q.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?
a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=Ia(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:q.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:q.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):
"["===b.text?(a={type:q.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:q.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:q.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))
}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:q.Identifier,name:a.text}},constant:function(){return{type:q.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:q.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
b={type:q.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");
return{type:q.ObjectExpression,properties:a}},throwError:function(a,b){throw Ya("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw Ya("ueoe",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Ya("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,
e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:q.ThisExpression},$locals:{type:q.LocalsExpression}}};var Fd=2;Jd.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};Z(a,b.$filter);var d="",c;this.stage="assign";if(c=Id(a))this.state.computing=
"assign",d=this.nextId(),this.recurse(c,d),this.return_(d),d="fn.assign="+this.generateFunction("assign","s,v,l");c=Gd(a.body);b.stage="inputs";r(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;var k=b.nextId();b.recurse(a,k);b.return_(k);b.state.inputs.push({name:d,isPure:a.isPure});a.watchId=c});this.state.computing="fn";this.stage="main";this.recurse(a);a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+
d+this.watchFns()+"return fn;";a=(new Function("$filter","getStringValue","ifDefined","plus",a))(this.$filter,Og,Pg,Ed);this.state=this.stage=void 0;return a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;r(b,function(b){a.push("var "+b.name+"="+d.generateFunction(b.name,"s"));b.isPure&&a.push(b.name,".isPure="+JSON.stringify(b.isPure)+";")});b.length&&a.push("fn.inputs=["+b.map(function(a){return a.name}).join(",")+"];");return a.join("")},generateFunction:function(a,
b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;r(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,k,h=this,l,m,p;c=c||E;if(!f&&w(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,
this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case q.Program:r(a.body,function(b,c){h.recurse(b.expression,void 0,void 0,function(a){k=a});c!==a.body.length-1?h.current().body.push(k,";"):h.return_(k)});break;case q.Literal:m=this.escape(a.value);this.assign(b,m);c(b||m);break;case q.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){k=a});m=a.operator+"("+this.ifDefined(k,0)+")";this.assign(b,m);c(m);break;case q.BinaryExpression:this.recurse(a.left,
void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){k=a});m="+"===a.operator?this.plus(g,k):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(k,0):"("+g+")"+a.operator+"("+k+")";this.assign(b,m);c(m);break;case q.LogicalExpression:b=b||this.nextId();h.recurse(a.left,b);h.if_("&&"===a.operator?b:h.not(b),h.lazyRecurse(a.right,b));c(b);break;case q.ConditionalExpression:b=b||this.nextId();h.recurse(a.test,b);h.if_(b,h.lazyRecurse(a.alternate,b),h.lazyRecurse(a.consequent,
b));c(b);break;case q.Identifier:b=b||this.nextId();d&&(d.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",a.name)),function(){h.if_("inputs"===h.stage||"s",function(){e&&1!==e&&h.if_(h.isNull(h.nonComputedMember("s",a.name)),h.lazyAssign(h.nonComputedMember("s",a.name),"{}"));h.assign(b,h.nonComputedMember("s",a.name))})},b&&h.lazyAssign(b,h.nonComputedMember("l",
a.name)));c(b);break;case q.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();h.recurse(a.object,g,void 0,function(){h.if_(h.notNull(g),function(){a.computed?(k=h.nextId(),h.recurse(a.property,k),h.getStringValue(k),e&&1!==e&&h.if_(h.not(h.computedMember(g,k)),h.lazyAssign(h.computedMember(g,k),"{}")),m=h.computedMember(g,k),h.assign(b,m),d&&(d.computed=!0,d.name=k)):(e&&1!==e&&h.if_(h.isNull(h.nonComputedMember(g,a.property.name)),h.lazyAssign(h.nonComputedMember(g,
a.property.name),"{}")),m=h.nonComputedMember(g,a.property.name),h.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){h.assign(b,"undefined")});c(b)},!!e);break;case q.CallExpression:b=b||this.nextId();a.filter?(k=h.filter(a.callee.name),l=[],r(a.arguments,function(a){var b=h.nextId();h.recurse(a,b);l.push(b)}),m=k+"("+l.join(",")+")",h.assign(b,m),c(b)):(k=h.nextId(),g={},l=[],h.recurse(a.callee,k,g,function(){h.if_(h.notNull(k),function(){r(a.arguments,function(b){h.recurse(b,a.constant?
void 0:h.nextId(),void 0,function(a){l.push(a)})});m=g.name?h.member(g.context,g.name,g.computed)+"("+l.join(",")+")":k+"("+l.join(",")+")";h.assign(b,m)},function(){h.assign(b,"undefined")});c(b)}));break;case q.AssignmentExpression:k=this.nextId();g={};this.recurse(a.left,void 0,g,function(){h.if_(h.notNull(g.context),function(){h.recurse(a.right,k);m=h.member(g.context,g.name,g.computed)+a.operator+k;h.assign(b,m);c(b||m)})},1);break;case q.ArrayExpression:l=[];r(a.elements,function(b){h.recurse(b,
a.constant?void 0:h.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(b||m);break;case q.ObjectExpression:l=[];p=!1;r(a.properties,function(a){a.computed&&(p=!0)});p?(b=b||this.nextId(),this.assign(b,"{}"),r(a.properties,function(a){a.computed?(g=h.nextId(),h.recurse(a.key,g)):g=a.key.type===q.Identifier?a.key.name:""+a.key.value;k=h.nextId();h.recurse(a.value,k);h.assign(h.member(b,g,a.computed),k)})):(r(a.properties,function(b){h.recurse(b.value,a.constant?void 0:
h.nextId(),void 0,function(a){l.push(h.escape(b.key.type===q.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case q.ThisExpression:this.assign(b,"s");c(b||"s");break;case q.LocalsExpression:this.assign(b,"l");c(b||"l");break;case q.NGValueParameter:this.assign(b,"v"),c(b||"v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,
b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},
not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,d,c,e,f){var g=
this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(A(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(W(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw Ya("esc");},nextId:function(a,
b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};Kd.prototype={compile:function(a){var b=this;Z(a,b.$filter);var d,c;if(d=Id(a))c=this.recurse(d);d=Gd(a.body);var e;d&&(e=[],r(d,function(a,c){var d=b.recurse(a);d.isPure=a.isPure;a.input=d;e.push(d);a.watchId=c}));var f=[];r(a.body,function(a){f.push(b.recurse(a.expression))});a=0===a.body.length?E:1===a.body.length?f[0]:function(a,b){var c;r(f,function(d){c=
d(a,b)});return c};c&&(a.assign=function(a,b,d){return c(a,d,b)});e&&(a.inputs=e);return a},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case q.Literal:return this.value(a.value,b);case q.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case q.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),
this["binary"+a.operator](c,e,b);case q.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case q.Identifier:return f.identifier(a.name,b,d);case q.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,e,b,d);case q.CallExpression:return g=[],r(a.arguments,function(a){g.push(f.recurse(a))}),
a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var p=[],n=0;n<g.length;++n)p.push(g[n](a,c,d,f));a=e.apply(void 0,p,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var p=e(a,c,d,f),n;if(null!=p.value){n=[];for(var s=0;s<g.length;++s)n.push(g[s](a,c,d,f));n=p.value.apply(p.context,n)}return b?{value:n}:n};case q.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var p=
c(a,d,f,g);a=e(a,d,f,g);p.context[p.name]=a;return b?{value:a}:a};case q.ArrayExpression:return g=[],r(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case q.ObjectExpression:return g=[],r(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===q.Identifier?a.key.name:""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,
c,d,e){for(var f={},n=0;n<g.length;++n)g[n].computed?f[g[n].key(a,c,d,e)]=g[n].value(a,c,d,e):f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case q.ThisExpression:return function(a){return b?{value:a}:a};case q.LocalsExpression:return function(a,c){return b?{value:c}:c};case q.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=w(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,
e,f);d=w(d)?-d:-0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=Ed(k,c);return d?{value:k}:k}},"binary-":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=(w(k)?k:0)-(w(c)?c:0);return d?{value:k}:k}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,
e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,
e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=
a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k)?b(e,f,g,k):d(e,f,g,k);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){c=e&&a in e?e:c;d&&1!==d&&c&&null==c[a]&&(c[a]={});e=c?c[a]:void 0;return b?{context:c,name:a,value:e}:
e}},computedMember:function(a,b,d,c){return function(e,f,g,k){var h=a(e,f,g,k),l,m;null!=h&&(l=b(e,f,g,k),l+="",c&&1!==c&&h&&!h[l]&&(h[l]={}),m=h[l]);return d?{context:h,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k);c&&1!==c&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;return d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};Mb.prototype={constructor:Mb,parse:function(a){a=this.getAst(a);var b=
this.astCompiler.compile(a.ast),d=a.ast;b.literal=0===d.body.length||1===d.body.length&&(d.body[0].expression.type===q.Literal||d.body[0].expression.type===q.ArrayExpression||d.body[0].expression.type===q.ObjectExpression);b.constant=a.ast.constant;b.oneTime=a.oneTime;return b},getAst:function(a){var b=!1;a=a.trim();":"===a.charAt(0)&&":"===a.charAt(1)&&(b=!0,a=a.substring(2));return{ast:this.ast.ast(a),oneTime:b}}};var Ea=F("$sce"),V={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",
JS:"js"},Cc=/_([a-z])/g,Ug=F("$templateRequest"),Vg=F("$timeout"),aa=C.document.createElement("a"),Od=ga(C.location.href),Na;aa.href="http://[::1]";var Wg="[::1]"===aa.hostname;Pd.$inject=["$document"];dd.$inject=["$provide"];var Wd=22,Vd=".",Ec="0";Qd.$inject=["$locale"];Sd.$inject=["$locale"];var gh={yyyy:ea("FullYear",4,0,!1,!0),yy:ea("FullYear",2,0,!0,!0),y:ea("FullYear",1,0,!1,!0),MMMM:kb("Month"),MMM:kb("Month",!0),MM:ea("Month",2,1),M:ea("Month",1,1),LLLL:kb("Month",!1,!0),dd:ea("Date",2),
d:ea("Date",1),HH:ea("Hours",2),H:ea("Hours",1),hh:ea("Hours",2,-12),h:ea("Hours",1,-12),mm:ea("Minutes",2),m:ea("Minutes",1),ss:ea("Seconds",2),s:ea("Seconds",1),sss:ea("Milliseconds",3),EEEE:kb("Day"),EEE:kb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Ob(Math[0<a?"floor":"ceil"](a/60),2)+Ob(Math.abs(a%60),2))},ww:Yd(2),w:Yd(1),G:Fc,GG:Fc,GGG:Fc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},
fh=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,eh=/^-?\d+$/;Rd.$inject=["$locale"];var $g=ia(K),ah=ia(ub);Td.$inject=["$parse"];var Me=ia({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===la.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};r(Gb,function(a,b){function d(a,d,e){a.$watch(e[c],
function(a){e.$set(b,!!a)})}if("multiple"!==a){var c=wa("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});r(td,function(a,b){vb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(ie))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});r(["src","srcset","href"],function(a){var b=wa("ng-"+a);vb[b]=
["$sce",function(d){return{priority:99,link:function(c,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===la.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$set(b,d.getTrustedMediaUrl(f[b]));f.$observe(b,function(b){b?(f.$set(k,b),Ca&&g&&e.prop(g,f[k])):"href"===a&&f.$set(k,null)})}}}]});var lb={$addControl:E,$getControls:ia([]),$$renameControl:function(a,b){a.$name=b},$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E,$setSubmitted:E,$$setSubmitted:E};Pb.$inject=
["$element","$attrs","$scope","$animate","$interpolate"];Pb.prototype={$rollbackViewValue:function(){r(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){r(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){Ja(a.$name,"input");this.$$controls.push(a);a.$name&&(this[a.$name]=a);a.$$parentForm=this},$getControls:function(){return ja(this.$$controls)},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&
this[a.$name]===a&&delete this[a.$name];r(this.$pending,function(b,d){this.$setValidity(d,null,a)},this);r(this.$error,function(b,d){this.$setValidity(d,null,a)},this);r(this.$$success,function(b,d){this.$setValidity(d,null,a)},this);cb(this.$$controls,a);a.$$parentForm=lb},$setDirty:function(){this.$$animate.removeClass(this.$$element,Za);this.$$animate.addClass(this.$$element,Vb);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,
Za,Vb+" ng-submitted");this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;r(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){r(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){for(var a=this;a.$$parentForm&&a.$$parentForm!==lb;)a=a.$$parentForm;a.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted");this.$submitted=!0;r(this.$$controls,function(a){a.$$setSubmitted&&a.$$setSubmitted()})}};ae({clazz:Pb,set:function(a,
b,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&(cb(c,d),0===c.length&&delete a[b])}});var ke=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||E}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Pb,compile:function(d,f){d.addClass(Za).addClass(mb);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var p=f[0];if(!("action"in e)){var n=function(b){a.$apply(function(){p.$commitViewValue();
p.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",n);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",n)},0,!1)})}(f[1]||p.$$parentForm).$addControl(p);var s=g?c(p.$name):E;g&&(s(a,p),e.$observe(g,function(b){p.$name!==b&&(s(a,void 0),p.$$parentForm.$$renameControl(p,b),s=c(p.$name),s(a,p))}));d.on("$destroy",function(){p.$$parentForm.$removeControl(p);s(a,void 0);S(p,lb)})}}}}}]},Ne=ke(),Ze=ke(!0),hh=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,
sh=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,th=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ih=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,le=/^(\d{4,})-(\d{2})-(\d{2})$/,me=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Mc=/^(\d{4,})-W(\d\d)$/,ne=/^(\d{4,})-(\d\d)$/,
oe=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ce=T();r(["date","datetime-local","month","time","week"],function(a){ce[a]=!0});var pe={text:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f);Hc(c)},date:nb("date",le,Qb(le,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":nb("datetimelocal",me,Qb(me,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:nb("time",oe,Qb(oe,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:nb("week",Mc,function(a,b){if(ha(a))return a;if(A(a)){Mc.lastIndex=0;var d=Mc.exec(a);
if(d){var c=+d[1],e=+d[2],f=d=0,g=0,k=0,h=Xd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),k=b.getMilliseconds());return new Date(c,0,h.getDate()+e,d,f,g,k)}}return NaN},"yyyy-Www"),month:nb("month",ne,Qb(ne,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f,g,k){Ic(a,b,d,c,"number");de(c);Sa(a,b,d,c,e,f);var h;if(w(d.min)||d.ngMin){var l=d.min||k(d.ngMin)(a);h=na(l);c.$validators.min=function(a,b){return c.$isEmpty(b)||z(h)||b>=h};d.$observe("min",function(a){a!==l&&(h=na(a),
l=a,c.$validate())})}if(w(d.max)||d.ngMax){var m=d.max||k(d.ngMax)(a),p=na(m);c.$validators.max=function(a,b){return c.$isEmpty(b)||z(p)||b<=p};d.$observe("max",function(a){a!==m&&(p=na(a),m=a,c.$validate())})}if(w(d.step)||d.ngStep){var n=d.step||k(d.ngStep)(a),s=na(n);c.$validators.step=function(a,b){return c.$isEmpty(b)||z(s)||ee(b,h||0,s)};d.$observe("step",function(a){a!==n&&(s=na(a),n=a,c.$validate())})}},url:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f);Hc(c);c.$validators.url=function(a,b){var d=
a||b;return c.$isEmpty(d)||sh.test(d)}},email:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f);Hc(c);c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||th.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||"false"!==U(d.ngTrim);z(d.name)&&b.attr("name",++pb);b.on("change",function(a){var g;b[0].checked&&(g=d.value,e&&(g=U(g)),c.$setViewValue(g,a&&a.type))});c.$render=function(){var a=d.value;e&&(a=U(a));b[0].checked=a===c.$viewValue};d.$observe("value",c.$render)},range:function(a,b,d,c,e,f){function g(a,
c){b.attr(a,d[a]);var e=d[a];d.$observe(a,function(a){a!==e&&(e=a,c(a))})}function k(a){p=na(a);X(c.$modelValue)||(m?(a=b.val(),p>a&&(a=p,b.val(a)),c.$setViewValue(a)):c.$validate())}function h(a){n=na(a);X(c.$modelValue)||(m?(a=b.val(),n<a&&(b.val(n),a=n<p?p:n),c.$setViewValue(a)):c.$validate())}function l(a){s=na(a);X(c.$modelValue)||(m?c.$viewValue!==b.val()&&c.$setViewValue(b.val()):c.$validate())}Ic(a,b,d,c,"range");de(c);Sa(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&"range"===b[0].type,p=m?
0:void 0,n=m?100:void 0,s=m?1:void 0,r=b[0].validity;a=w(d.min);e=w(d.max);f=w(d.step);var q=c.$render;c.$render=m&&w(r.rangeUnderflow)&&w(r.rangeOverflow)?function(){q();c.$setViewValue(b.val())}:q;a&&(p=na(d.min),c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||z(p)||b>=p},g("min",k));e&&(n=na(d.max),c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||z(n)||b<=n},g("max",h));f&&(s=na(d.step),c.$validators.step=m?function(){return!r.stepMismatch}:
function(a,b){return c.$isEmpty(b)||z(s)||ee(b,p||0,s)},g("step",l))},checkbox:function(a,b,d,c,e,f,g,k){var h=fe(k,a,"ngTrueValue",d.ngTrueValue,!0),l=fe(k,a,"ngFalseValue",d.ngFalseValue,!1);b.on("change",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return va(a,h)});c.$parsers.push(function(a){return a?h:l})},hidden:E,button:E,submit:E,reset:E,file:E},Yc=["$browser","$sniffer",
"$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,k){k[0]&&(pe[K(g.type)]||pe.text)(e,f,g,k[0],b,a,d,c)}}}}],vf=function(){var a={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(a){this.setAttribute("value",a)}};return{restrict:"E",priority:200,compile:function(b,d){if("hidden"===K(d.type))return{pre:function(b,d,f,g){b=d[0];b.parentNode&&b.parentNode.insertBefore(b,b.nextSibling);Object.defineProperty&&
Object.defineProperty(b,"value",a)}}}}},uh=/^(true|false|\d+)$/,sf=function(){function a(a,d,c){var e=w(c)?c:9===Ca?"":null;a.prop("value",e);d.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,d){return uh.test(d.ngValue)?function(b,d,f){b=b.$eval(f.ngValue);a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},Re=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];
b.$watch(e.ngBind,function(a){c.textContent=ic(a)})}}}}],Te=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=z(a)?"":a})}}}}],Se=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);
return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){var d=f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],rf=ia({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Ue=Kc("",!0),We=Kc("Odd",0),Ve=Kc("Even",1),Xe=Ra({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Ye=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],cd={},vh={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=wa("ng-"+a);cd[b]=["$parse","$rootScope","$exceptionHandler",function(d,c,e){return qd(d,c,e,b,a,vh[a])}]});var af=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var k,h,l;d.$watch(e.ngIf,function(d){d?h||g(function(d,f){h=f;d[d.length++]=b.$$createComment("end ngIf",e.ngIf);k={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),h&&(h.$destroy(),h=null),k&&(l=tb(k.clone),
a.leave(l).done(function(a){!1!==a&&(l=null)}),k=null))})}}}],bf=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ca.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",k=e.autoscroll;return function(c,e,m,p,n){var r=0,q,t,x,v=function(){t&&(t.remove(),t=null);q&&(q.$destroy(),q=null);x&&(d.leave(x).done(function(a){!1!==a&&(t=null)}),t=x,x=null)};c.$watch(f,function(f){var m=function(a){!1===
a||!w(k)||k&&!c.$eval(k)||b()},t=++r;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&t===r){var b=c.$new();p.template=a;a=n(b,function(a){v();d.enter(a,null,e).done(m)});q=b;x=a;q.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||t!==r||(v(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(v(),p.template=null)})}}}}],uf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,d,c,e){la.call(d[0]).match(/SVG/)?
(d.empty(),a(ed(e.template,C.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],cf=Ra({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),qf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=d.ngList||", ",f="false"!==d.ngTrim,g=f?U(e):e;c.$parsers.push(function(a){if(!z(a)){var b=[];a&&r(a.split(g),function(a){a&&b.push(f?U(a):a)});return b}});c.$formatters.push(function(a){if(H(a))return a.join(e)});
c.$isEmpty=function(a){return!a||!a.length}}}},mb="ng-valid",$d="ng-invalid",Za="ng-pristine",Vb="ng-dirty",ob=F("ngModel");Rb.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" ");Rb.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);B(c)&&(c=a(b));return c};this.$$ngModelSet=
function(a,c){B(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw ob("nonassign",this.$$attr.ngModel,za(this.$$element));},$render:E,$isEmpty:function(a){return z(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,
"ng-not-empty"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,Vb);this.$$animate.addClass(this.$$element,Za)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,Za);this.$$animate.addClass(this.$$element,Vb);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=!0;this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=
!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(!X(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==
c&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function c(){var c=!0;r(h.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g;f(e,g)});return c?!0:(r(h.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;r(h.$asyncValidators,function(e,g){var h=e(a,b);if(!h||!B(h.then))throw ob("nopromise",h);f(g,void 0);c.push(h.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?h.$$q.all(c).then(function(){g(d)},E):g(!0)}function f(a,b){k===h.$$currentValidationRunId&&
h.$setValidity(a,b)}function g(a){k===h.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var k=this.$$currentValidationRunId,h=this;(function(){var a=h.$$parserName;if(z(h.$$parserValid))f(a,null);else return h.$$parserValid||(r(h.$validators,function(a,b){f(b,null)}),r(h.$asyncValidators,function(a,b){f(b,null)})),f(a,h.$$parserValid),h.$$parserValid;return!0})()?c()?e():g(!1):g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue!==
a||""===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;this.$$parserValid=z(a)?void 0:!0;this.$setValidity(this.$$parserName,null);this.$$parserName="parse";if(this.$$parserValid)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),z(a)){this.$$parserValid=!1;break}X(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));
var c=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope());this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);r(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=
a;this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");W(b[a])?b=b[a]:W(b["default"])&&-1===this.$options.getOption("updateOn").indexOf(a)?b=b["default"]:W(b["*"])&&(b=b["*"]);this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},
$overrideModelOptions:function(a){this.$options=this.$options.createChild(a);this.$$setUpdateOnEvents()},$processModelValue:function(){var a=this.$$format();this.$viewValue!==a&&(this.$$updateEmptyClasses(a),this.$viewValue=this.$$lastCommittedViewValue=a,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,E))},$$format:function(){for(var a=this.$formatters,b=a.length,d=this.$modelValue;b--;)d=a[b](d);return d},$$setModelValue:function(a){this.$modelValue=this.$$rawModelValue=a;this.$$parserValid=
void 0;this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler);if(this.$$updateEvents=this.$options.getOption("updateOn"))this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(a){this.$$debounceViewValueCommit(a&&a.type)}};ae({clazz:Rb,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var pf=["$rootScope",function(a){return{restrict:"A",require:["ngModel",
"^?form","^?ngModelOptions"],controller:Rb,priority:1,compile:function(b){b.addClass(Za).addClass("ng-untouched").addClass(mb);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;if(f=f[2])g.$options=f.$options;g.$$initGetterSetters();b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){function g(){k.$setTouched()}var k=f[0];k.$$setUpdateOnEvents();c.on("blur",
function(){k.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Sb,wh=/(\s+|^)default(\s+|$)/;Lc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;a=S({},a);r(a,function(d,c){"$inherit"===d?"*"===c?b=!0:(a[c]=this.$$options[c],"updateOn"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===c&&(a.updateOnDefault=!1,a[c]=U(d.replace(wh,function(){a.updateOnDefault=!0;return" "})))},this);b&&(delete a["*"],ge(a,this.$$options));ge(a,Sb.$$options);
return new Lc(a)}};Sb=new Lc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var tf=function(){function a(a,d){this.$$attrs=a;this.$$scope=d}a.$inject=["$attrs","$scope"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Sb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},df=Ra({terminal:!0,
priority:1E3}),xh=F("ngOptions"),yh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nf=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!r&&ya(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&
"$"!==c.charAt(0)&&b.push(c)}return b}var p=a.match(yh);if(!p)throw xh("iexp",a,za(b));var n=p[5]||p[7],r=p[6];a=/ as /.test(p[0])&&p[1];var q=p[9];b=d(p[2]?p[1]:n);var t=a&&d(a)||b,w=q&&d(q),v=q?function(a,b){return w(c,b)}:function(a){return La(a)},x=function(a,b){return v(a,A(a,b))},z=d(p[2]||p[1]),y=d(p[3]||""),J=d(p[4]||""),I=d(p[8]),B={},A=r?function(a,b){B[r]=b;B[n]=a;return B}:function(a){B[n]=a;return B};return{trackBy:q,getTrackByValue:x,getWatchables:d(I,function(a){var b=[];a=a||[];for(var d=
f(a),e=d.length,g=0;g<e;g++){var k=a===d?g:d[g],l=a[k],k=A(l,k),l=v(l,k);b.push(l);if(p[2]||p[1])l=z(c,k),b.push(l);p[4]&&(k=J(c,k),b.push(k))}return b}),getOptions:function(){for(var a=[],b={},d=I(c)||[],g=f(d),k=g.length,n=0;n<k;n++){var p=d===g?n:g[n],r=A(d[p],p),s=t(c,r),p=v(s,r),w=z(c,r),B=y(c,r),r=J(c,r),s=new e(p,s,w,B,r);a.push(s);b[p]=s}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[x(a)]},getViewValueFromOption:function(a){return q?Ia(a.viewValue):a.viewValue}}}}}
var e=C.document.createElement("option"),f=C.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=E},post:function(d,k,h,l){function m(a){var b=(a=v.getOptionFromViewValue(a))&&a.element;b&&!b.selected&&(b.selected=!0);return a}function p(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}var n=l[0],q=l[1],z=h.multiple;l=0;for(var t=k.children(),
B=t.length;l<B;l++)if(""===t[l].value){n.hasEmptyOption=!0;n.emptyOption=t.eq(l);break}k.empty();l=!!n.emptyOption;x(e.cloneNode(!1)).val("?");var v,A=c(h.ngOptions,k,d),C=b[0].createDocumentFragment();n.generateUnknownOptionValue=function(a){return"?"};z?(n.writeValue=function(a){if(v){var b=a&&a.map(m)||[];v.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})}},n.readValue=function(){var a=k.val()||[],b=[];r(a,function(a){(a=v.selectValueMap[a])&&
!a.disabled&&b.push(v.getViewValueFromOption(a))});return b},A.trackBy&&d.$watchCollection(function(){if(H(q.$viewValue))return q.$viewValue.map(function(a){return A.getTrackByValue(a)})},function(){q.$render()})):(n.writeValue=function(a){if(v){var b=k[0].options[k[0].selectedIndex],c=v.getOptionFromViewValue(a);b&&b.removeAttribute("selected");c?(k[0].value!==c.selectValue&&(n.removeUnknownOption(),k[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):n.selectUnknownOrEmptyOption(a)}},
n.readValue=function(){var a=v.selectValueMap[k.val()];return a&&!a.disabled?(n.unselectEmptyOption(),n.removeUnknownOption(),v.getViewValueFromOption(a)):null},A.trackBy&&d.$watch(function(){return A.getTrackByValue(q.$viewValue)},function(){q.$render()}));l&&(a(n.emptyOption)(d),k.prepend(n.emptyOption),8===n.emptyOption[0].nodeType?(n.hasEmptyOption=!1,n.registerOption=function(a,b){""===b.val()&&(n.hasEmptyOption=!0,n.emptyOption=b,n.emptyOption.removeClass("ng-scope"),q.$render(),b.on("$destroy",
function(){var a=n.$isEmptyOptionSelected();n.hasEmptyOption=!1;n.emptyOption=void 0;a&&q.$render()}))}):n.emptyOption.removeClass("ng-scope"));d.$watchCollection(A.getWatchables,function(){var a=v&&n.readValue();if(v)for(var b=v.items.length-1;0<=b;b--){var c=v.items[b];w(c.group)?Fb(c.element.parentNode):Fb(c.element)}v=A.getOptions();var d={};v.items.forEach(function(a){var b;if(w(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),C.appendChild(b),b.label=null===a.group?"null":a.group,d[a.group]=b);
var c=e.cloneNode(!1);b.appendChild(c);p(a,c)}else b=e.cloneNode(!1),C.appendChild(b),p(a,b)});k[0].appendChild(C);q.$render();q.$isEmpty(a)||(b=n.readValue(),(A.trackBy||z?va(a,b):a===b)||(q.$setViewValue(b),q.$render()))})}}}}],ef=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,k){function h(a){g.text(a||"")}var l=k.count,m=k.$attr.when&&g.attr(k.$attr.when),p=k.offset||0,n=f.$eval(m)||{},q={},w=b.startSymbol(),t=b.endSymbol(),x=w+l+"-"+
p+t,v=ca.noop,A;r(k,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+K(c[2]),n[c]=g.attr(k.$attr[b]))});r(n,function(a,d){q[d]=b(a.replace(c,x))});f.$watch(l,function(b){var c=parseFloat(b),e=X(c);e||c in n||(c=a.pluralCat(c-p));c===A||e&&X(A)||(v(),e=q[c],z(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),v=E,h()):v=f.$watch(e,h),A=c)})}}}],qe=F("ngRef"),ff=["$parse",function(a){return{priority:-1,restrict:"A",compile:function(b,d){var c=wa(ua(b)),e=a(d.ngRef),f=e.assign||
function(){throw qe("nonassign",d.ngRef);};return function(a,b,h){var l;if(h.hasOwnProperty("ngRefRead"))if("$element"===h.ngRefRead)l=b;else{if(l=b.data("$"+h.ngRefRead+"Controller"),!l)throw qe("noctrl",h.ngRefRead,d.ngRef);}else l=b.data("$"+c+"Controller");l=l||b;f(a,l);b.on("$destroy",function(){e(a)===l&&f(a,null)})}}}}],gf=["$parse","$animate","$compile",function(a,b,d){var c=F("ngRepeat"),e=function(a,b,c,d,e,f,g){a[c]=d;e&&(a[e]=f);a.$index=b;a.$first=0===b;a.$last=b===g-1;a.$middle=!(a.$first||
a.$last);a.$odd=!(a.$even=0===(b&1))},f=function(a,b,c){return La(c)},g=function(a,b){return b};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(k,h){var l=h.ngRepeat,m=d.$$createComment("end ngRepeat",l),p=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw c("iexp",l);var n=p[1],q=p[2],w=p[3],t=p[4],p=n.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!p)throw c("iidexp",
n);var x=p[3]||p[1],v=p[2];if(w&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(w)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(w)))throw c("badident",w);var z;if(t){var A={$id:La},y=a(t);z=function(a,b,c,d){v&&(A[v]=b);A[x]=c;A.$index=d;return y(a,A)}}return function(a,d,h,k,n){var p=T();a.$watchCollection(q,function(h){var k,q,t=d[0],s,y=T(),B,C,E,D,H,F,K;w&&(a[w]=h);if(ya(h))H=h,q=z||f;else for(K in q=z||g,H=[],h)ta.call(h,K)&&"$"!==K.charAt(0)&&H.push(K);
B=H.length;K=Array(B);for(k=0;k<B;k++)if(C=h===H?k:H[k],E=h[C],D=q(a,C,E,k),p[D])F=p[D],delete p[D],y[D]=F,K[k]=F;else{if(y[D])throw r(K,function(a){a&&a.scope&&(p[a.id]=a)}),c("dupes",l,D,E);K[k]={id:D,scope:void 0,clone:void 0};y[D]=!0}A&&(A[x]=void 0);for(s in p){F=p[s];D=tb(F.clone);b.leave(D);if(D[0].parentNode)for(k=0,q=D.length;k<q;k++)D[k].$$NG_REMOVED=!0;F.scope.$destroy()}for(k=0;k<B;k++)if(C=h===H?k:H[k],E=h[C],F=K[k],F.scope){s=t;do s=s.nextSibling;while(s&&s.$$NG_REMOVED);F.clone[0]!==
s&&b.move(tb(F.clone),null,t);t=F.clone[F.clone.length-1];e(F.scope,k,x,E,v,C,B)}else n(function(a,c){F.scope=c;var d=m.cloneNode(!1);a[a.length++]=d;b.enter(a,null,t);t=d;F.clone=a;y[F.id]=F;e(F.scope,k,x,E,v,C,B)});p=y})}}}}],hf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],$e=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,
d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],jf=Ra(function(a,b,d){a.$watchCollection(d.ngStyle,function(a,d){d&&a!==d&&(a||(a={}),r(d,function(b,d){null==a[d]&&(a[d]="")}));a&&b.css(a)})}),kf=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],k=[],h=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||
e.on,function(c){for(var d,e;h.length;)a.cancel(h.pop());d=0;for(e=l.length;d<e;++d){var q=tb(k[d].clone);l[d].$destroy();(h[d]=a.leave(q)).done(m(h,d))}k.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&r(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");k.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],lf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,
b,c){return c[b-1]!==a});r(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[];c.cases["!"+a].push({transclude:e,element:b})})}}),mf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),zh=F("ngTransclude"),of=["$compile",function(a){return{restrict:"EAC",compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,k){function h(){d(a,function(a){b.append(a)})}if(!k)throw zh("orphan",
za(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude="");f=f.ngTransclude||f.ngTranscludeSlot;k(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==Pa||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(h(),c.$destroy())},null,f);f&&!k.isSlotFilled(f)&&h()}}}}],Oe=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],Ah={$setViewValue:E,$render:E},Bh=["$element",
"$scope",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1;e.ngModelCtrl.$render()}))}function c(a){k||(k=!0,b.$$postDigest(function(){b.$$destroyed||(k=!1,e.ngModelCtrl.$setViewValue(e.readValue()),a&&e.ngModelCtrl.$render())}))}var e=this,f=new Hb;e.selectValueMap={};e.ngModelCtrl=Ah;e.multiple=!1;e.unknownOption=x(C.document.createElement("option"));e.hasEmptyOption=!1;e.emptyOption=void 0;e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);
a.prepend(e.unknownOption);Oa(e.unknownOption,!0);a.val(b)};e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);Oa(e.unknownOption,!0);a.val(b)};e.generateUnknownOptionValue=function(a){return"? "+La(a)+" ?"};e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.selectEmptyOption=function(){e.emptyOption&&(a.val(""),Oa(e.emptyOption,!0))};e.unselectEmptyOption=function(){e.hasEmptyOption&&Oa(e.emptyOption,!1)};b.$on("$destroy",
function(){e.renderUnknownOption=E});e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null};e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];c&&Oa(x(c),!1);e.hasOption(b)?(e.removeUnknownOption(),c=La(b),a.val(c in e.selectValueMap?c:b),Oa(x(a[0].options[a[0].selectedIndex]),!0)):e.selectUnknownOrEmptyOption(b)};e.addOption=function(a,b){if(8!==b[0].nodeType){Ja(a,'"option value"');""===a&&(e.hasEmptyOption=!0,e.emptyOption=
b);var c=f.get(a)||0;f.set(a,c+1);d()}};e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),""===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))};e.hasOption=function(a){return!!f.get(a)};e.$hasEmptyOption=function(){return e.hasEmptyOption};e.$isUnknownOptionSelected=function(){return a[0].options[0]===e.unknownOption[0]};e.$isEmptyOptionSelected=function(){return e.hasEmptyOption&&a[0].options[a[0].selectedIndex]===e.emptyOption[0]};e.selectUnknownOrEmptyOption=function(a){null==
a&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(a):e.renderUnknownOption(a)};var g=!1,k=!1;e.registerOption=function(a,b,f,g,k){if(f.$attr.ngValue){var q,r;f.$observe("value",function(a){var d,f=b.prop("selected");w(r)&&(e.removeOption(q),delete e.selectValueMap[r],d=!0);r=La(a);q=a;e.selectValueMap[r]=a;e.addOption(a,b);b.attr("value",r);d&&f&&c()})}else g?f.$observe("value",function(a){e.readValue();var d,f=b.prop("selected");
w(q)&&(e.removeOption(q),d=!0);q=a;e.addOption(a,b);d&&f&&c()}):k?a.$watch(k,function(a,d){f.$set("value",a);var g=b.prop("selected");d!==a&&e.removeOption(d);e.addOption(a,b);d&&g&&c()}):e.addOption(f.value,b);f.$observe("disabled",function(a){if("true"===a||a&&b.prop("selected"))e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render())});b.on("$destroy",function(){var a=e.readValue(),b=f.value;e.removeOption(b);d();(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Pe=function(){return{restrict:"E",
require:["select","?ngModel"],controller:Bh,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on("change",function(){e.removeUnknownOption();a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0;e.readValue=function(){var a=[];r(b.find("option"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))});return a};e.writeValue=function(a){r(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,
b.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Oa(x(b),c)})};var g,k=NaN;a.$watch(function(){k!==f.$viewValue||va(g,f.$viewValue)||(g=ja(f.$viewValue),f.$render());k=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=E},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Qe=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,e;w(d.ngValue)||
(w(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set("value",b.text()));return function(a,b,d){var h=b.parent();(h=h.data("$selectController")||h.parent().data("$selectController"))&&h.registerOption(a,b,d,c,e)}}}}],$c=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.hasOwnProperty("required")||a(c.ngRequired)(b);c.ngRequired||(c.required=!0);e.$validators.required=function(a,b){return!f||!e.$isEmpty(b)};c.$observe("required",function(a){f!==a&&(f=
a,e.$validate())})}}}}],Zc=["$parse",function(a){return{restrict:"A",require:"?ngModel",compile:function(b,d){var c,e;d.ngPattern&&(c=d.ngPattern,e="/"===d.ngPattern.charAt(0)&&ie.test(d.ngPattern)?function(){return d.ngPattern}:a(d.ngPattern));return function(a,b,d,h){if(h){var l=d.pattern;d.ngPattern?l=e(a):c=d.pattern;var m=he(l,c,b);d.$observe("pattern",function(a){var d=m;m=he(a,c,b);(d&&d.toString())!==(m&&m.toString())&&h.$validate()});h.$validators.pattern=function(a,b){return h.$isEmpty(b)||
z(m)||m.test(b)}}}}}}],bd=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.maxlength||a(c.ngMaxlength)(b),g=Tb(f);c.$observe("maxlength",function(a){f!==a&&(g=Tb(a),f=a,e.$validate())});e.$validators.maxlength=function(a,b){return 0>g||e.$isEmpty(b)||b.length<=g}}}}}],ad=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.minlength||a(c.ngMinlength)(b),g=Tb(f)||-1;c.$observe("minlength",function(a){f!==
a&&(g=Tb(a)||-1,f=a,e.$validate())});e.$validators.minlength=function(a,b){return e.$isEmpty(b)||b.length>=g}}}}}];C.angular.bootstrap?C.console&&console.log("WARNING: Tried to load AngularJS more than once."):(Fe(),Je(ca),ca.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],
ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",
"short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),x(function(){Ae(C.document,
Uc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 AngularJS v1.7.8
 (c) 2010-2018 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(z,l){'use strict';function q(n){return["$animate",function(u){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(m,f,a,e,r){var b,h,s;if(!n){b=f[0];s=a.ngMessage||a.when;a=a.ngMessageExp||a.whenExp;var k=function(c){h=c?v(c)?c:c.split(/[\s,]+/):null;e.reRender()};a?(k(m.$eval(a)),m.$watchCollection(a,k)):k(s)}var g,t;e.register(b,t={test:function(c){var b=h;c=b?v(b)?0<=b.indexOf(c):b.hasOwnProperty(c):void 0;return c},attach:function(){g||
r(function(c,a){u.enter(c,null,f);g=c;var d=g.$$attachId=e.getAttachId();g.on("$destroy",function(){g&&g.$$attachId===d&&(e.deregister(b,n),t.detach());a.$destroy()})})},detach:function(){if(g){var c=g;g=null;u.leave(c)}}},n);m.$on("$destroy",function(){e.deregister(b,n)})}}}]}var x,v,p,y;l.module("ngMessages",[],function(){x=l.forEach;v=l.isArray;p=l.isString;y=l.element}).info({angularVersion:"1.7.8"}).directive("ngMessages",["$animate",function(n){function u(f,a){return p(a)&&0===a.length||m(f.$eval(a))}
function m(f){return p(f)?f.length:!!f}return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(f,a,e){function r(c,b){for(var d=b,a=[];d&&d!==c;){var e=d.$$ngMessageNode;if(e&&e.length)return k[e];d.childNodes.length&&-1===a.indexOf(d)?(a.push(d),d=d.childNodes[d.childNodes.length-1]):d.previousSibling?d=d.previousSibling:(d=d.parentNode,a.push(d))}}var b=this,h=0,s=0;this.getAttachId=function(){return s++};var k=this.messages={},g,t;this.render=function(c){c=c||
{};g=!1;t=c;for(var w=u(a,e.ngMessagesMultiple)||u(a,e.multiple),d=[],r={},h=0,k=b.head,s=!1,l=0;null!=k;){l++;var p=k.message,q=!1;s||x(c,function(b,c){m(b)&&!q&&(h++,p.test(c)&&!r[c]&&(q=r[c]=!0,p.attach()))});q?s=!w:d.push(p);k=k.next}x(d,function(c){c.detach()});c=d.length!==l;(w=b.default&&!c&&0<h)?b.default.attach():b.default&&b.default.detach();c||w?n.setClass(f,"ng-active","ng-inactive"):n.setClass(f,"ng-inactive","ng-active")};a.$watchCollection(e.ngMessages||e["for"],b.render);this.reRender=
function(){g||(g=!0,a.$evalAsync(function(){g&&t&&b.render(t)}))};this.register=function(c,a,d){if(d)b.default=a;else{d=h.toString();k[d]={message:a};var e=f[0];a=k[d];b.head?(e=r(e,c))?(a.next=e.next,e.next=a):(a.next=b.head,b.head=a):b.head=a;c.$$ngMessageNode=d;h++}b.reRender()};this.deregister=function(a,e){if(e)delete b.default;else{var d=a.$$ngMessageNode;delete a.$$ngMessageNode;var g=k[d];if(g){var h=r(f[0],a);h?h.next=g.next:b.head=g.next}delete k[d]}b.reRender()}}]}}]).directive("ngMessagesInclude",
["$templateRequest","$document","$compile",function(n,l,m){function f(a,e){var f=m.$$createComment?m.$$createComment("ngMessagesInclude",e):l[0].createComment(" ngMessagesInclude: "+e+" "),f=y(f);a.after(f);a.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(a,e,l){var b=l.ngMessagesInclude||l.src;n(b).then(function(h){a.$$destroyed||(p(h)&&!h.trim()?f(e,b):m(h)(a,function(a){e.after(a);f(e,b)}))})}}}]).directive("ngMessage",q()).directive("ngMessageExp",q()).directive("ngMessageDefault",
q(!0))})(window,window.angular);
//# sourceMappingURL=angular-messages.min.js.map

/**
 * State-based routing for AngularJS 1.x
 * NOTICE: This monolithic bundle also bundles the @uirouter/core code.
 *         This causes it to be incompatible with plugins that depend on @uirouter/core.
 *         We recommend switching to the ui-router-core.js and ui-router-angularjs.js bundles instead.
 *         For more information, see https://ui-router.github.io/blog/uirouter-for-angularjs-umd-bundles
 * @version v1.0.22
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],e):e((t=t||self)["@uirouter/angularjs"]={},t.angular)}(this,function(d,t){"use strict";var e=angular,b=t&&t.module?t:e;function c(r){var t=[].slice.apply(arguments,[1]),n=r.length;return function t(e){return e.length>=n?r.apply(null,e):function(){return t(e.concat([].slice.apply(arguments)))}}(t)}function r(){var r=arguments,n=r.length-1;return function(){for(var t=n,e=r[n].apply(this,arguments);t--;)e=r[t].call(this,e);return e}}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,[].slice.call(arguments).reverse())}var w=function(e){return function(t){return t&&t[e]}},y=c(function(t,e,r){return r&&r[t]===e}),R=function(t){return s.apply(null,t.split(".").map(w))},l=function(r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!r.apply(null,t)}};function n(r,n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,t)&&n.apply(null,t)}}function i(r,n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,t)||n.apply(null,t)}}var f=function(r){return function(t){return t.reduce(function(t,e){return t&&!!r(e)},!0)}},h=function(r){return function(t){return t.reduce(function(t,e){return t||!!r(e)},!1)}},p=function(e){return function(t){return null!=t&&t.constructor===e||t instanceof e}},o=function(e){return function(t){return e===t}},v=function(t){return function(){return t}};function a(e,r){return function(t){return t[e].apply(t,r)}}function m(r){return function(t){for(var e=0;e<r.length;e++)if(r[e][0](t))return r[e][1](t)}}var u=Object.prototype.toString,g=function(e){return function(t){return typeof t===e}},_=g("undefined"),E=l(_),S=function(t){return null===t},$=i(S,_),C=g("function"),T=g("number"),P=g("string"),k=function(t){return null!==t&&"object"==typeof t},O=Array.isArray,x=function(t){return"[object Date]"===u.call(t)},j=function(t){return"[object RegExp]"===u.call(t)};function V(t){if(O(t)&&t.length){var e=t.slice(0,-1),r=t.slice(-1);return!(e.filter(l(P)).length||r.filter(l(C)).length)}return C(t)}var I=n(k,s(w("then"),C)),H=function(n,t){return t.reduce(function(t,e){return t[e]=(r=n+"."+e+"()",function(){throw new Error("No implementation for "+r+". The framework specific code did not implement this method.")}),t;var r},{})},A={$q:void 0,$injector:void 0},D="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,q=D.angular||{},U=q.fromJson||JSON.parse.bind(JSON),F=q.toJson||JSON.stringify.bind(JSON),N=q.forEach||function(e,r,t){if(O(e))return e.forEach(r,t);Object.keys(e).forEach(function(t){return r(e[t],t)})},L=Object.assign||Pt,M=q.equals||kt;function B(t){return t}function G(){}function W(e,n,r,t,i){void 0===i&&(i=!1);var o=function(t){return e()[t].bind(r())};return(t=t||Object.keys(e())).reduce(function(t,e){var r;return t[e]=i?(r=e,function(){return n[r]=o(r),n[r].apply(null,arguments)}):o(e),t},n)}var z=function(t,e){return L(Object.create(t),e)},J=c(Q);function Q(t,e){return-1!==t.indexOf(e)}var K=c(Y);function Y(t,e){var r=t.indexOf(e);return 0<=r&&t.splice(r,1),t}var Z=c(X);function X(t,e){return t.push(e),e}var tt=function(e){return e.slice().forEach(function(t){"function"==typeof t&&t(),K(e,t)})};function et(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=L.apply(void 0,[{}].concat(e.reverse()));return L(n,it(t||{},Object.keys(n)))}var rt=function(t,e){return L(t,e)};function nt(t,e){var r=[];for(var n in t.path){if(t.path[n]!==e.path[n])break;r.push(t.path[n])}return r}function it(t,e){var r={};for(var n in t)-1!==e.indexOf(n)&&(r[n]=t[n]);return r}function ot(r,t){return Object.keys(r).filter(l(J(t))).reduce(function(t,e){return t[e]=r[e],t},{})}function at(t,e){return ft(t,w(e))}function ut(t,r){var e=O(t),n=e?[]:{},i=e?function(t){return n.push(t)}:function(t,e){return n[e]=t};return N(t,function(t,e){r(t,e)&&i(t,e)}),n}function st(t,r){var n;return N(t,function(t,e){n||r(t,e)&&(n=t)}),n}var ct=ft;function ft(t,r,n){return n=n||(O(t)?[]:{}),N(t,function(t,e){return n[e]=r(t,e)}),n}var lt=function(e){return Object.keys(e).map(function(t){return e[t]})},ht=function(t,e){return t&&e},pt=function(t,e){return t||e},vt=function(t,e){return t.concat(e)},dt=function(t,e){return O(e)?t.concat(e.reduce(dt,[])):mt(t,e)};function mt(t,e){return t.push(e),t}var yt=function(t,e){return J(t,e)?t:mt(t,e)},gt=function(t){return t.reduce(vt,[])},wt=function(t){return t.reduce(dt,[])},_t=$t,St=$t;function $t(r,n){return void 0===n&&(n="assert failure"),function(t){var e=r(t);if(!e)throw new Error(C(n)?n(t):n);return e}}var bt=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})};function Rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];for(var r=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),n=[],i=function(e){switch(t.length){case 1:n.push([t[0][e]]);break;case 2:n.push([t[0][e],t[1][e]]);break;case 3:n.push([t[0][e],t[1][e],t[2][e]]);break;case 4:n.push([t[0][e],t[1][e],t[2][e],t[3][e]]);break;default:n.push(t.map(function(t){return t[e]}))}},o=0;o<r;o++)i(o);return n}function Et(t,e){var r,n;if(O(e)&&(r=e[0],n=e[1]),!P(r))throw new Error("invalid parameters to applyPairs");return t[r]=n,t}function Ct(t){return t.length&&t[t.length-1]||void 0}function Tt(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),L(e,t)}function Pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var n=Object.keys(r),i=0;i<n.length;i++)t[n[i]]=r[n[i]]}return t}function kt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var r=typeof t;if(r!==typeof e||"object"!==r)return!1;var n,i,o=[t,e];if(f(O)(o))return i=e,(n=t).length===i.length&&Rt(n,i).reduce(function(t,e){return t&&kt(e[0],e[1])},!0);if(f(x)(o))return t.getTime()===e.getTime();if(f(j)(o))return t.toString()===e.toString();if(f(C)(o))return!0;if([C,O,x,j].map(h).reduce(function(t,e){return t||!!e(o)},!1))return!1;var a={};for(var u in t){if(!kt(t[u],e[u]))return!1;a[u]=!0}for(var u in e)if(!a[u])return!1;return!0}var Ot,xt=function(t){return t.catch(function(t){return 0})&&t},jt=function(t){return xt(A.$q.reject(t))},Vt=function(){function e(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return e.is=function(t){return!!/[!,*]+/.exec(t)},e.fromString=function(t){return e.is(t)?new e(t):null},e.prototype.matches=function(t){return this.regexp.test("."+t)},e}(),It=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e,this._evictListeners=[],this.onEvict=Z(this._evictListeners)}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&this.evict(),t},t.prototype.evict=function(){var e=this._items.shift();return this._evictListeners.forEach(function(t){return t(e)}),e},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return-1<e&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();(Ot=d.RejectType||(d.RejectType={}))[Ot.SUPERSEDED=2]="SUPERSEDED",Ot[Ot.ABORTED=3]="ABORTED",Ot[Ot.INVALID=4]="INVALID",Ot[Ot.IGNORED=5]="IGNORED",Ot[Ot.ERROR=6]="ERROR";var Ht=0,At=function(){function n(t,e,r){this.$id=Ht++,this.type=t,this.message=e,this.detail=r}return n.isRejectionPromise=function(t){return t&&"function"==typeof t.then&&p(n)(t._transitionRejection)},n.superseded=function(t,e){var r=new n(d.RejectType.SUPERSEDED,"The transition has been superseded by a different transition",t);return e&&e.redirected&&(r.redirected=!0),r},n.redirected=function(t){return n.superseded(t,{redirected:!0})},n.invalid=function(t){return new n(d.RejectType.INVALID,"This transition is invalid",t)},n.ignored=function(t){return new n(d.RejectType.IGNORED,"The transition was ignored",t)},n.aborted=function(t){return new n(d.RejectType.ABORTED,"The transition has been aborted",t)},n.errored=function(t){return new n(d.RejectType.ERROR,"The transition errored",t)},n.normalize=function(t){return p(n)(t)?t:n.errored(t)},n.prototype.toString=function(){var t,e=(t=this.detail)&&t.toString!==Object.prototype.toString?t.toString():Bt(t);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+e+")"},n.prototype.toPromise=function(){return L(jt(this),{_transitionRejection:this})},n}();function Dt(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function qt(t,e){for(;e.length<t;)e+=" ";return e}function Ut(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function Ft(t){var e=Nt(t),r=e.match(/^(function [^ ]+\([^)]*\))/),n=r?r[1]:e,i=t.name||"";return i&&n.match(/function \(/)?"function "+i+n.substr(9):n}function Nt(t){var e=O(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}var Lt=At.isRejectionPromise,Mt=m([[_,v("undefined")],[S,v("null")],[I,v("[Promise]")],[Lt,function(t){return t._transitionRejection.toString()}],[function(t){return k(t)&&!O(t)&&t.constructor!==Object&&C(t.toString)},function(t){return t.toString()}],[V,Ft],[v(!0),B]]);function Bt(t){var e=[];function r(t){if(k(t)){if(-1!==e.indexOf(t))return"[circular ref]";e.push(t)}return Mt(t)}return _(t)?r(t):JSON.stringify(t,function(t,e){return r(e)}).replace(/\\"/g,'"')}var Gt=function(r){return function(t){if(!t)return["",""];var e=t.indexOf(r);return-1===e?[t,""]:[t.substr(0,e),t.substr(e+1)]}},Wt=new RegExp("^(?:[a-z]+:)?//[^/]+/"),zt=function(t){return t.replace(/\/[^/]*$/,"")},Jt=Gt("#"),Qt=Gt("?"),Kt=Gt("="),Yt=function(t){return t?t.replace(/^#/,""):""};function Zt(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(B)}}function Xt(t,e){return P(Ct(t))&&P(e)?t.slice(0,-1).concat(Ct(t)+e):mt(t,e)}function te(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function ee(t){return T(t)?d.Category[t]:d.Category[d.Category[t]]}var re,ne=Function.prototype.bind.call(console.log,console),ie=C(console.table)?console.table.bind(console):ne.bind(console);(re=d.Category||(d.Category={}))[re.RESOLVE=0]="RESOLVE",re[re.TRANSITION=1]="TRANSITION",re[re.HOOK=2]="HOOK",re[re.UIVIEW=3]="UIVIEW",re[re.VIEWCONFIG=4]="VIEWCONFIG";var oe=R("$id"),ae=R("router.$id"),ue=function(t){return"Transition #"+oe(t)+"-"+ae(t)},se=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(e,t){var r=this;t.length||(t=Object.keys(d.Category).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return d.Category[t]})),t.map(ee).forEach(function(t){return r._enabled[t]=e})},t.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},t.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},t.prototype.enabled=function(t){return!!this._enabled[ee(t)]},t.prototype.traceTransitionStart=function(t){this.enabled(d.Category.TRANSITION)&&console.log(ue(t)+": Started  -> "+Bt(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled(d.Category.TRANSITION)&&console.log(ue(t)+": Ignored  <> "+Bt(t))},t.prototype.traceHookInvocation=function(t,e,r){if(this.enabled(d.Category.HOOK)){var n=R("traceData.hookType")(r)||"internal",i=R("traceData.context.state.name")(r)||R("traceData.context")(r)||"unknown",o=Ft(t.registeredHook.callback);console.log(ue(e)+":   Hook -> "+n+" context: "+i+", "+Dt(200,o))}},t.prototype.traceHookResult=function(t,e,r){this.enabled(d.Category.HOOK)&&console.log(ue(e)+":   <- Hook returned: "+Dt(200,Bt(t)))},t.prototype.traceResolvePath=function(t,e,r){this.enabled(d.Category.RESOLVE)&&console.log(ue(r)+":         Resolving "+t+" ("+e+")")},t.prototype.traceResolvableResolved=function(t,e){this.enabled(d.Category.RESOLVE)&&console.log(ue(e)+":               <- Resolved  "+t+" to: "+Dt(200,Bt(t.data)))},t.prototype.traceError=function(t,e){this.enabled(d.Category.TRANSITION)&&console.log(ue(e)+": <- Rejected "+Bt(e)+", reason: "+t)},t.prototype.traceSuccess=function(t,e){this.enabled(d.Category.TRANSITION)&&console.log(ue(e)+": <- Success  "+Bt(e)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,e,r){void 0===r&&(r=""),this.enabled(d.Category.UIVIEW)&&console.log("ui-view: "+qt(30,t)+" "+te(e)+r)},t.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled(d.Category.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},t.prototype.traceUIViewFill=function(t,e){this.enabled(d.Category.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+Dt(200,e))},t.prototype.traceViewSync=function(t){if(this.enabled(d.Category.VIEWCONFIG)){var a="uiview component fqn",e=t.map(function(t){var e,r=t.uiView,n=t.viewConfig,i=r&&r.fqn,o=n&&n.viewDecl.$context.name+": ("+n.viewDecl.$name+")";return(e={})[a]=i,e["view config state (view name)"]=o,e}).sort(function(t,e){return(t[a]||"").localeCompare(e[a]||"")});ie(e)}},t.prototype.traceViewServiceEvent=function(t,e){var r,n,i;this.enabled(d.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+(n=(r=e).viewDecl,i=n.$context.name||"(root)","[View#"+r.$id+" from '"+i+"' state]: target ui-view: '"+n.$uiViewName+"@"+n.$uiViewContextAnchor+"'"))},t.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled(d.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+te(e))},t}(),ce=new se,fe=function(){function t(t){this.pattern=/.*/,this.inherit=!0,L(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new le(this,t)},t}();function le(n,i){var o=this;function a(t){return O(t)?t:E(t)?[t]:[]}function u(r,n){return function(t){if(O(t)&&0===t.length)return t;var e=ft(a(t),r);return!0===n?0===ut(e,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===i?t[0]:t;default:return t}}(e)}}function s(o){return function(t,e){var r=a(t),n=a(e);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(!o(r[i],n[i]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach(function(t){var e=n[t].bind(n),r="equals"===t?s:u;o[t]=r(e)}),L(this,{dynamic:n.dynamic,name:n.name,pattern:n.pattern,inherit:n.inherit,raw:n.raw,is:u(n.is.bind(n),!0),$arrayMode:i})}var he,pe=Object.prototype.hasOwnProperty,ve=function(t){return 0===["value","type","squash","array","dynamic"].filter(pe.bind(t||{})).length};function de(t,e,r){var n=!1===r.reloadOnSearch&&e===d.DefType.SEARCH||void 0,i=st([r.dynamic,n],E),o=E(i)?{dynamic:i}:{},a=function(t){function e(){return t.value}t=ve(t)?{value:t}:t,e.__cacheable=!0;var r=V(t.value)?t.value:e;return L(t,{$$fn:r})}(r&&r.params&&r.params[t]);return L(o,a)}(he=d.DefType||(d.DefType={}))[he.PATH=0]="PATH",he[he.SEARCH=1]="SEARCH",he[he.CONFIG=2]="CONFIG";var me,ye=function(){function n(t,e,r,n,i){var o=de(t,r,i);e=function(t,e,r,n,i){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+n+"' has two type configurations.");if(t.type&&e&&"string"===e.name&&i.type(t.type))return i.type(t.type);if(e)return e;if(t.type)return t.type instanceof fe?t.type:i.type(t.type);var o=r===d.DefType.CONFIG?"any":r===d.DefType.PATH?"path":r===d.DefType.SEARCH?"query":"string";return i.type(o)}(o,e,r,t,n.paramTypes);var a,u,s=(a={array:r===d.DefType.SEARCH&&"auto"},u=t.match(/\[\]$/)?{array:!0}:{},L(a,u,o).array);e=s?e.$asArray(s,r===d.DefType.SEARCH):e;var c=void 0!==o.value||r===d.DefType.SEARCH,f=E(o.dynamic)?!!o.dynamic:!!e.dynamic,l=E(o.raw)?!!o.raw:!!e.raw,h=function(t,e,r){var n=t.squash;if(!e||!1===n)return!1;if(!E(n)||null==n)return r;if(!0===n||P(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(o,c,n.defaultSquashPolicy()),p=function(t,e,r,n){var i=[{from:"",to:r||e?void 0:""},{from:null,to:r||e?void 0:""}],o=O(t.replace)?t.replace:[];P(n)&&o.push({from:n,to:void 0});var a=ft(o,w("from"));return ut(i,function(t){return-1===a.indexOf(t.from)}).concat(o)}(o,s,c,h),v=E(o.inherit)?!!o.inherit:!!e.inherit;L(this,{id:t,type:e,location:r,isOptional:c,dynamic:f,raw:l,squash:h,replace:p,inherit:v,array:s,config:o})}return n.values=function(t,e){void 0===e&&(e={});for(var r={},n=0,i=t;n<i.length;n++){var o=i[n];r[o.id]=o.value(e[o.id])}return r},n.changed=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),t.filter(function(t){return!t.type.equals(e[t.id],r[t.id])})},n.equals=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),0===n.changed(t,e,r).length},n.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(ht,!0)},n.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},n.prototype.value=function(t){var i=this;return t=function(t){for(var e=0,r=i.replace;e<r.length;e++){var n=r[e];if(n.from===t)return n.to}return t}(t),_(t)?function(){if(i._defaultValueCache)return i._defaultValueCache.defaultValue;if(!A.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=A.$injector.invoke(i.config.$$fn);if(null!=t&&!i.type.is(t))throw new Error("Default value ("+t+") for parameter '"+i.id+"' is not an instance of ParamType ("+i.type.name+")");return i.config.$$fn.__cacheable&&(i._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},n.prototype.isSearch=function(){return this.location===d.DefType.SEARCH},n.prototype.validates=function(t){if((_(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var r=this.type.encode(e);return!(P(r)&&!this.type.pattern.exec(r))},n.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},n}(),ge=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=it(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=z(ft(this.defaultTypes,function(t,e){return new fe(L({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,r){if(!E(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new fe(L({name:t},e)),r&&(this.typeQueue.push({name:t,def:r}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");L(this.types[t.name],A.$injector.invoke(t.def))}},t}();me=function(t){var e=function(t){return null!=t?t.toString():t},r={encode:e,decode:e,is:p(String),pattern:/.*/,equals:function(t,e){return t==e}};return L({},r,t)},L(ge.prototype,{string:me({}),path:me({pattern:/[^/]*/}),query:me({}),hash:me({inherit:!1}),int:me({decode:function(t){return parseInt(t,10)},is:function(t){return!$(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:me({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:p(Boolean),pattern:/0|1/}),date:me({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(r,n){return["getFullYear","getMonth","getDate"].reduce(function(t,e){return t&&r[e]()===n[e]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:me({encode:F,decode:U,is:p(Object),equals:M,pattern:/[^/]*/}),any:me({encode:B,decode:B,is:function(){return!0},equals:M})});var we=function(){function t(t){void 0===t&&(t={}),L(this,t)}return t.prototype.$inherit=function(t,e,r){var n,i=nt(e,r),o={},a=[];for(var u in i)if(i[u]&&i[u].params&&(n=Object.keys(i[u].params)).length)for(var s in n)0<=a.indexOf(n[s])||(a.push(n[s]),o[n[s]]=this[n[s]]);return L({},o,t)},t}(),_e=function(){function n(t){if(t instanceof n){var e=t;this.state=e.state,this.paramSchema=e.paramSchema.slice(),this.paramValues=L({},e.paramValues),this.resolvables=e.resolvables.slice(),this.views=e.views&&e.views.slice()}else{var r=t;this.state=r,this.paramSchema=r.parameters({inherit:!1}),this.paramValues={},this.resolvables=r.resolvables.map(function(t){return t.clone()})}}return n.prototype.clone=function(){return new n(this)},n.prototype.applyRawParams=function(n){return this.paramValues=this.paramSchema.reduce(function(t,e){return Et(t,[(r=e).id,r.value(n[r.id])]);var r},{}),this},n.prototype.parameter=function(t){return st(this.paramSchema,y("id",t))},n.prototype.equals=function(t,e){var r=this.diff(t,e);return r&&0===r.length},n.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var r=e?e(this):this.paramSchema;return ye.changed(r,this.paramValues,t.paramValues)},n.clone=function(t){return t.clone()},n}(),Se=function(){function n(t,e,r,n){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=L({},r||{}),this._options=L({},n||{}),this._definition=t.matcher.find(e,this._options.relative)}return n.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},n.prototype.identifier=function(){return this._identifier},n.prototype.params=function(){return this._params},n.prototype.$state=function(){return this._definition},n.prototype.state=function(){return this._definition&&this._definition.self},n.prototype.options=function(){return this._options},n.prototype.exists=function(){return!(!this._definition||!this._definition.self)},n.prototype.valid=function(){return!this.error()},n.prototype.error=function(){var t=this.options().relative;if(this._definition||!t)return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'";var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"},n.prototype.toString=function(){return"'"+this.name()+"'"+Bt(this.params())},n.prototype.withState=function(t){return new n(this._stateRegistry,t,this._params,this._options)},n.prototype.withParams=function(t,e){void 0===e&&(e=!1);var r=e?t:L({},this._params,t);return new n(this._stateRegistry,this._identifier,r,this._options)},n.prototype.withOptions=function(t,e){void 0===e&&(e=!1);var r=e?t:L({},this._options,t);return new n(this._stateRegistry,this._identifier,this._params,r)},n.isDef=function(t){return t&&t.state&&(P(t.state)||P(t.state.name))},n}(),$e=function(){function h(){}return h.makeTargetState=function(t,e){var r=Ct(e).state;return new Se(t,r,e.map(w("paramValues")).reduce(rt,{}),{})},h.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new _e(t).applyRawParams(e)})},h.buildToPath=function(t,e){var r=h.buildPath(e);return e.options().inherit?h.inheritParams(t,r,Object.keys(e.params())):r},h.applyViewConfigs=function(i,o,e){o.filter(function(t){return J(e,t.state)}).forEach(function(e){var t=lt(e.state.views||{}),r=h.subPath(o,function(t){return t===e}),n=t.map(function(t){return i.createViewConfig(r,t)});e.views=n.reduce(vt,[])})},h.inheritParams=function(s,t,c){void 0===c&&(c=[]);var f=s.map(function(t){return t.paramSchema}).reduce(vt,[]).filter(function(t){return!t.inherit}).map(w("id"));return t.map(function(t){var e=L({},t&&t.paramValues),r=it(e,c);e=ot(e,c);var n,i,o,a=ot((n=s,i=t.state,o=st(n,y("state",i)),L({},o&&o.paramValues)||{}),f),u=L(e,a,r);return new _e(t.state).applyRawParams(u)})},h.treeChanges=function(t,n,e){for(var r,i,o,a,u,s,c=Math.min(t.length,n.length),f=0;f<c&&t[f].state!==e&&(r=t[f],i=n[f],r.equals(i,h.nonDynamicParams));)f++;a=(o=t).slice(0,f),u=o.slice(f);var l=a.map(function(t,e){var r=t.clone();return r.paramValues=n[e].paramValues,r});return s=n.slice(f),{from:o,to:l.concat(s),retained:a,retainedWithToParams:l,exiting:u,entering:s}},h.matching=function(t,e,i){var o=!1;return Rt(t,e).reduce(function(t,e){var r=e[0],n=e[1];return(o=o||!r.equals(n,i))?t:t.concat(r)},[])},h.equals=function(t,e,r){return t.length===e.length&&h.matching(t,e,r).length===t.length},h.subPath=function(t,e){var r=st(t,e),n=t.indexOf(r);return-1===n?void 0:t.slice(0,n+1)},h.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},h.paramValues=function(t){return t.reduce(function(t,e){return L(t,e.paramValues)},{})},h}(),be={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},Re={when:"LAZY",async:"WAIT"},Ee=function(){function a(t,e,r,n,i){if(this.resolved=!1,this.promise=void 0,t instanceof a)L(this,t);else if(C(e)){if($(t))throw new Error("new Resolvable(): token argument is required");if(!C(e))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=t,this.policy=n,this.resolveFn=e,this.deps=r||[],this.data=i,this.resolved=void 0!==i,this.promise=this.resolved?A.$q.when(this.data):void 0}else if(k(t)&&t.token&&(t.hasOwnProperty("resolveFn")||t.hasOwnProperty("data"))){var o=t;return new a(o.token,o.resolveFn,o.deps,o.policy,o.data)}}return a.prototype.getPolicy=function(t){var e=this.policy||{},r=t&&t.resolvePolicy||{};return{when:e.when||r.when||Re.when,async:e.async||r.async||Re.async}},a.prototype.resolve=function(e,r){var n=this,t=A.$q,i=e.findNode(this),o=i&&i.state,a="RXWAIT"===this.getPolicy(o).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:B;return this.promise=t.when().then(function(){return t.all(e.getDependencies(n).map(function(t){return t.get(e,r)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(a).then(function(t){return n.data=t,n.resolved=!0,n.resolveFn=null,ce.traceResolvableResolved(n,r),n.data})},a.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},a.prototype.toString=function(){return"Resolvable(token: "+Bt(this.token)+", requires: ["+this.deps.map(Bt)+"])"},a.prototype.clone=function(){return new a(this)},a.fromData=function(t,e){return new a(t,function(){return e},null,null,e)},a}(),Ce=be.when,Te=[Ce.EAGER,Ce.LAZY],Pe=[Ce.EAGER],ke="Native Injector",Oe=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(yt,[])},t.prototype.getResolvable=function(e){return Ct(this._path.map(function(t){return t.resolvables}).reduce(vt,[]).filter(function(t){return t.token===e}))},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t($e.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var r=st(this._path,y("state",e)),n=t.map(function(t){return t.token});r.resolvables=r.resolvables.filter(function(t){return-1===n.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,u){var s=this;void 0===t&&(t="LAZY");var c=(J(Te,t)?t:"LAZY")===be.when.EAGER?Pe:Te;ce.traceResolvePath(this._path,t,u);var f=function(e,r){return function(t){return J(e,s.getPolicy(t)[r])}},e=this._path.reduce(function(t,e){var r=e.resolvables.filter(f(c,"when")),n=r.filter(f(["NOWAIT"],"async")),i=r.filter(l(f(["NOWAIT"],"async"))),o=s.subContext(e.state),a=function(e){return e.get(o,u).then(function(t){return{token:e.token,value:t}})};return n.forEach(a),t.concat(i.map(a))},[]);return A.$q.all(e)},t.prototype.injector=function(){return this._injector||(this._injector=new xe(this))},t.prototype.findNode=function(e){return st(this._path,function(t){return J(t.resolvables,e)})},t.prototype.getDependencies=function(e){var n=this,r=this.findNode(e),i=($e.subPath(this._path,function(t){return t===r})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(t){return t!==e});return e.deps.map(function(e){var t=i.filter(function(t){return t.token===e});if(t.length)return Ct(t);var r=n.injector().getNative(e);if(_(r))throw new Error("Could not find Dependency Injection token: "+Bt(e));return new Ee(e,function(){return r},[],r)})},t}(),xe=function(){function t(t){this.context=t,this.native=this.get(ke)||A.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+Bt(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):A.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}();function je(t){return t.name}function Ve(t){return t.self.$$state=function(){return t},t.self}function Ie(t){return t.parent&&t.parent.data&&(t.data=t.self.data=z(t.parent.data,t.data)),t.data}var He=function(a,u){return function(t){var e=t.self;if(e&&e.url&&e.name&&e.name.match(/\.\*\*$/)){var r={};Tt(e,r),r.url+="{remainder:any}",e=r}var n=t.parent,i=function(t){if(!P(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(e.url),o=i?a.compile(i.val,{state:e}):e.url;if(!o)return null;if(!a.isMatcher(o))throw new Error("Invalid url '"+o+"' in state '"+t+"'");return i&&i.root?o:(n&&n.navigable||u()).url.append(o)}};function Ae(t){return t.parent?t.parent.path.concat(t):[t]}function De(t){var e=t.parent?L({},t.parent.includes):{};return e[t.name]=!0,e}function qe(t){var e,r,n=function(t){return t.provide||t.token},i=m([[w("resolveFn"),function(t){return new Ee(n(t),t.resolveFn,t.deps,t.policy)}],[w("useFactory"),function(t){return new Ee(n(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[w("useClass"),function(t){return new Ee(n(t),function(){return new t.useClass},[],t.policy)}],[w("useValue"),function(t){return new Ee(n(t),function(){return t.useValue},[],t.policy,t.useValue)}],[w("useExisting"),function(t){return new Ee(n(t),B,[t.useExisting],t.policy)}]]),o=m([[s(w("val"),P),function(t){return new Ee(t.token,B,[t.val],t.policy)}],[s(w("val"),O),function(t){return new Ee(t.token,Ct(t.val),t.val.slice(0,-1),t.policy)}],[s(w("val"),C),function(t){return new Ee(t.token,t.val,(e=t.val,r=A.$injector,e.$inject||r&&r.annotate(e,r.strictDi)||"deferred"),t.policy);var e,r}]]),a=m([[p(Ee),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},i],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},i],[function(t){return!!(t&&t.val&&(P(t.val)||O(t.val)||C(t.val)))},o],[v(!0),function(t){throw new Error("Invalid resolve value: "+Bt(t))}]]),u=t.resolve;return(O(u)?u:(e=u,r=t.resolvePolicy||{},Object.keys(e||{}).map(function(t){return{token:t,val:e[t],deps:void 0,policy:r[t]}}))).map(a)}var Ue,Fe,Ne=function(){function t(e,t){this.matcher=e;var n,r,i=this,o=function(){return e.find("")},a=function(t){return""===t.name};this.builders={name:[je],self:[Ve],parent:[function(t){return a(t)?null:e.find(i.parentName(t))||o()}],data:[Ie],url:[He(t,o)],navigable:[(r=a,function(t){return!r(t)&&t.url?t:t.parent?t.parent.navigable:null})],params:[(n=t.paramFactory,function(r){var t=r.url&&r.url.parameters({inherit:!1})||[],e=lt(ct(ot(r.params||{},t.map(w("id"))),function(t,e){return n.fromConfig(e,null,r.self)}));return t.concat(e).map(function(t){return[t.id,t]}).reduce(Et,{})})],views:[],path:[Ae],includes:[De],resolvables:[qe]}}return t.prototype.builder=function(t,e){var r=this.builders,n=r[t]||[];return P(t)&&!E(e)?1<n.length?n:n[0]:P(t)&&C(e)?(r[t]=n,r[t].push(e),function(){return r[t].splice(r[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,r=this.builders,n=this.parentName(t);if(n&&!e.find(n,void 0,!1))return null;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i].reduce(function(e,r){return function(t){return r(t,e)}},G);t[i]=o(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",r=e.split(".");if("**"===r.pop()&&r.pop(),r.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return r.join(".")}return t.parent?P(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var r=P(t.parent)?t.parent:t.parent.name;return r?r+"."+e:e},t}(),Le=function(){function r(t){return r.create(t||{})}return r.create=function(t){t=r.isStateClass(t)?new t:t;var e=z(z(t,r.prototype));return t.$$state=function(){return e},e.self=t,e.__stateObjectCache={nameGlob:Vt.fromString(e.name)},e},r.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},r.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},r.prototype.root=function(){return this.parent&&this.parent.root()||this},r.prototype.parameters=function(e){return((e=et(e,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(lt(this.params)).filter(function(t){return!e.matchingKeys||e.matchingKeys.hasOwnProperty(t.id)})},r.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||st(lt(this.params),y("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},r.prototype.toString=function(){return this.fqn()},r.isStateClass=function(t){return C(t)&&!0===t.__uiRouterState},r.isState=function(t){return k(t.__stateObjectCache)},r}(),Me=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,r){if(void 0===r&&(r=!0),t||""===t){var n=P(t),i=n?t:t.name;this.isRelative(i)&&(i=this.resolvePath(i,e));var o=this._states[i];if(o&&(n||!(n||o!==t&&o.self!==t)))return o;if(n&&r){var a=lt(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(i)});return 1<a.length&&console.log("stateMatcher.find: Found multiple matches for "+i+" using glob: ",a.map(function(t){return t.name})),a[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var r=this.find(e),n=t.split("."),i=n.length,o=0,a=r;o<i;o++)if(""!==n[o]||0!==o){if("^"!==n[o])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+r.name+"'");a=a.parent}else a=r;var u=n.slice(o).join(".");return a.name+(a.name&&u?".":"")+u},t}(),Be=function(){function t(t,e,r,n){this.router=t,this.states=e,this.builder=r,this.listeners=n,this.queue=[]}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,r=Le.create(t),n=r.name;if(!P(n))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(n)||J(e.map(w("name")),n))throw new Error("State '"+n+"' is already defined");return e.push(r),this.flush(),r},t.prototype.flush=function(){for(var e=this,t=this.queue,r=this.states,n=this.builder,i=[],o=[],a={},u=function(t){return e.states.hasOwnProperty(t)&&e.states[t]},s=function(){i.length&&e.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))})};0<t.length;){var c=t.shift(),f=c.name,l=n.build(c),h=o.indexOf(c);if(l){var p=u(f);if(p&&p.name===f)throw new Error("State '"+f+"' is already defined");var v=u(f+".**");v&&this.router.stateRegistry.deregister(v),r[f]=c,this.attachRoute(c),0<=h&&o.splice(h,1),i.push(c)}else{var d=a[f];if(a[f]=t.length,0<=h&&d===t.length)return t.push(c),s(),r;h<0&&o.push(c),t.push(c)}}return s(),r},t.prototype.attachRoute=function(t){if(!t.abstract&&t.url){var e=this.router.urlService.rules;e.rule(e.urlRuleFactory.create(t))}},t}(),Ge=function(){function t(t){this.router=t,this.states={},this.listeners=[],this.matcher=new Me(this.states),this.builder=new Ne(this.matcher,t.urlMatcherFactory),this.stateQueue=new Be(t,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var e=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(t){return e.get(t)&&e.deregister(t)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){K(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var r=this,n=this.get().map(function(t){return t.$$state()}),i=function(e){var t=n.filter(function(t){return-1!==e.indexOf(t.parent)});return 0===t.length?t:t.concat(i(t))},e=i([t]),o=[t].concat(e).reverse();return o.forEach(function(t){var e=r.router.urlService.rules;e.rules().filter(y("state",t)).forEach(function(t){return e.removeRule(t)}),delete r.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var r=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",r.map(function(t){return t.self}))}),r},t.prototype.get=function(t,e){var r=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return r.states[t].self});var n=this.matcher.find(t,e);return n&&n.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}();(Ue=d.TransitionHookPhase||(d.TransitionHookPhase={}))[Ue.CREATE=0]="CREATE",Ue[Ue.BEFORE=1]="BEFORE",Ue[Ue.RUN=2]="RUN",Ue[Ue.SUCCESS=3]="SUCCESS",Ue[Ue.ERROR=4]="ERROR",(Fe=d.TransitionHookScope||(d.TransitionHookScope={}))[Fe.TRANSITION=0]="TRANSITION",Fe[Fe.STATE=1]="STATE";var We={current:G,transition:null,traceData:{},bind:null},ze=function(){function o(t,e,r,n){var i=this;this.transition=t,this.stateContext=e,this.registeredHook=r,this.options=n,this.isSuperseded=function(){return i.type.hookPhase===d.TransitionHookPhase.RUN&&!i.options.transition.isActive()},this.options=et(n,We),this.type=r.eventType}return o.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||A.$q.when())},o.invokeHooks=function(t,e){for(var r=0;r<t.length;r++){var n=t[r].invokeHook();if(I(n)){var i=t.slice(r+1);return o.chain(i,n).then(e)}}return e()},o.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},o.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},o.prototype.invokeHook=function(){var e=this,r=this.registeredHook;if(!r._deregistered){var t=this.getNotCurrentRejection();if(t)return t;var n=this.options;ce.traceHookInvocation(this,this.transition,n);var i=function(t){return r.eventType.getErrorHandler(e)(t)},o=function(t){return r.eventType.getResultHandler(e)(t)};try{var a=r.callback.call(n.bind,e.transition,e.stateContext);return!this.type.synchronous&&I(a)?a.catch(function(t){return At.normalize(t).toPromise()}).then(o,i):o(a)}catch(t){return i(At.normalize(t))}finally{r.invokeLimit&&++r.invokeCount>=r.invokeLimit&&r.deregister()}}},o.prototype.handleHookResult=function(t){var e=this,r=this.getNotCurrentRejection();return r||(I(t)?t.then(function(t){return e.handleHookResult(t)}):(ce.traceHookResult(t,this.transition,this.options),!1===t?At.aborted("Hook aborted transition").toPromise():p(Se)(t)?At.redirected(t).toPromise():void 0))},o.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?At.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?At.aborted().toPromise():this.isSuperseded()?At.superseded(this.options.current()).toPromise():void 0},o.prototype.toString=function(){var t=this.options,e=this.registeredHook;return(R("traceData.hookType")(t)||"internal")+" context: "+(R("traceData.context.state.name")(t)||R("traceData.context")(t)||"unknown")+", "+Dt(200,Nt(e.callback))},o.HANDLE_RESULT=function(e){return function(t){return e.handleHookResult(t)}},o.LOG_REJECTED_RESULT=function(e){return function(t){I(t)&&t.catch(function(t){return e.logError(At.normalize(t))})}},o.LOG_ERROR=function(e){return function(t){return e.logError(t)}},o.REJECT_ERROR=function(t){return function(t){return jt(t)}},o.THROW_ERROR=function(t){return function(t){throw t}},o}();function Je(t,e,r){var i=P(e)?[e]:e;return!!(C(i)?i:function(t){for(var e=i,r=0;r<e.length;r++){var n=new Vt(e[r]);if(n&&n.matches(t.name)||!n&&e[r]===t.name)return!0}return!1})(t,r)}var Qe=function(){function t(t,e,r,n,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=r,this.matchCriteria=n,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return t.prototype._matchingNodes=function(t,e,r){if(!0===e)return t;var n=t.filter(function(t){return Je(t.state,e,r)});return n.length?n:null},t.prototype._getDefaultMatchCriteria=function(){return ct(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(o,a){var u=this,s=L(this._getDefaultMatchCriteria(),this.matchCriteria);return lt(this.tranSvc._pluginapi._getPathTypes()).reduce(function(t,e){var r=e.scope===d.TransitionHookScope.STATE,n=o[e.name]||[],i=r?n:[Ct(n)];return t[e.name]=u._matchingNodes(i,s[e.name],a),t},{})},t.prototype.matches=function(t,e){var r=this._getMatchingNodes(t,e);return lt(r).every(B)?r:null},t.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},t}();function Ke(t,i,o){var a=(t._registeredHooks=t._registeredHooks||{})[o.name]=[],u=K(a);function e(t,e,r){void 0===r&&(r={});var n=new Qe(i,o,e,t,u,r);return a.push(n),n.deregister.bind(n)}return t[o.name]=e}var Ye=function(){function t(t){this.transition=t}return t.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(vt,[]).filter(B)},t.prototype.buildHooks=function(o){var a=this.transition,t=a.treeChanges(),e=this.getMatchingHooks(o,t,a);if(!e)return[];var u={transition:a,current:a.options().current};return e.map(function(i){return i.matches(t,a)[o.criteriaMatchPath.name].map(function(t){var e=L({bind:i.bind,traceData:{hookType:o.name,context:t}},u),r=o.criteriaMatchPath.scope===d.TransitionHookScope.STATE?t.state.self:null,n=new ze(a,r,i,e);return{hook:i,node:t,transitionHook:n}})}).reduce(vt,[]).sort(function(i){void 0===i&&(i=!1);return function(t,e){var r=i?-1:1,n=(t.node.state.path.length-e.node.state.path.length)*r;return 0!==n?n:e.hook.priority-t.hook.priority}}(o.reverseSort)).map(function(t){return t.transitionHook})},t.prototype.getMatchingHooks=function(e,r,n){var t=e.hookPhase===d.TransitionHookPhase.CREATE,i=this.transition.router.transitionService;return(t?[i]:[this.transition,i]).map(function(t){return t.getHooks(e.name)}).filter(_t(O,"broken event named: "+e.name)).reduce(vt,[]).filter(function(t){return t.matches(r,n)})},t}();var Ze=w("self"),Xe=function(){function e(t,e,r){var n=this;if(this._deferred=A.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new Ye(this),this.isActive=function(){return n.router.globals.transition===n},this.router=r,!(this._targetState=e).valid())throw new Error(e.error());this._options=L({current:v(this)},e.options()),this.$id=r.transitionService._transitionCount++;var i=$e.buildToPath(t,e);this._treeChanges=$e.treeChanges(t,i,this._options.reloadState),this.createTransitionHookRegFns();var o=this._hookBuilder.buildHooksForPhase(d.TransitionHookPhase.CREATE);ze.invokeHooks(o,function(){return null}),this.applyViewConfigs(r)}return e.prototype.onBefore=function(t,e,r){},e.prototype.onStart=function(t,e,r){},e.prototype.onExit=function(t,e,r){},e.prototype.onRetain=function(t,e,r){},e.prototype.onEnter=function(t,e,r){},e.prototype.onFinish=function(t,e,r){},e.prototype.onSuccess=function(t,e,r){},e.prototype.onError=function(t,e,r){},e.prototype.createTransitionHookRegFns=function(){var e=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==d.TransitionHookPhase.CREATE}).forEach(function(t){return Ke(e,e.router.transitionService,t)})},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});$e.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},e.prototype.$from=function(){return Ct(this._treeChanges.from).state},e.prototype.$to=function(){return Ct(this._treeChanges.to).state},e.prototype.from=function(){return this.$from().self},e.prototype.to=function(){return this.$to().self},e.prototype.targetState=function(){return this._targetState},e.prototype.is=function(t){return t instanceof e?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!Je(this.$to(),t.to,this)||t.from&&!Je(this.$from(),t.from,this))},e.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(w("paramValues")).reduce(rt,{}))},e.prototype.paramsChanged=function(){var t=this.params("from"),r=this.params("to"),e=[].concat(this._treeChanges.to).concat(this._treeChanges.from).map(function(t){return t.paramSchema}).reduce(dt,[]).reduce(yt,[]);return ye.changed(e,t,r).reduce(function(t,e){return t[e.id]=r[e.id],t},{})},e.prototype.injector=function(e,t){void 0===t&&(t="to");var r=this._treeChanges[t];return e&&(r=$e.subPath(r,function(t){return t.state===e||t.state.name===e})),new Oe(r).injector()},e.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new Oe(this._treeChanges[t]).getTokens()},e.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=p(Ee)(t)?t:new Ee(t);var r="string"==typeof e?e:e.name,n=this._treeChanges.to,i=st(n,function(t){return t.state.name===r});new Oe(n).addResolvables([t],i.state)},e.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},e.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},e.prototype.options=function(){return this._options},e.prototype.entering=function(){return ft(this._treeChanges.entering,w("state")).map(Ze)},e.prototype.exiting=function(){return ft(this._treeChanges.exiting,w("state")).map(Ze).reverse()},e.prototype.retained=function(){return ft(this._treeChanges.retained,w("state")).map(Ze)},e.prototype.views=function(t,e){void 0===t&&(t="entering");var r=this._treeChanges[t];return(r=e?r.filter(y("state",e)):r).map(w("views")).filter(B).reduce(vt,[])},e.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},e.prototype.redirect=function(t){for(var e=1,r=this;null!=(r=r.redirectedFrom());)if(20<++e)throw new Error("Too many consecutive Transition redirects (20+)");var n={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(n.location="replace");var i=L({},this.options(),t.options(),n);t=t.withOptions(i,!0);var o,a=this.router.transitionService.create(this._treeChanges.from,t),u=this._treeChanges.entering,s=a._treeChanges.entering;return $e.matching(s,u,$e.nonDynamicParams).filter(l((o=t.options().reloadState,function(t){return o&&t.state.includes[o.name]}))).forEach(function(t,e){t.resolvables=u[e].resolvables}),a},e.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&(!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length&&!Rt(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(pt,!1))){var e=t.to.map(function(t){return t.paramSchema}),r=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})});return Rt(e,r[0],r[1]).map(function(t){var e=t[0],r=t[1],n=t[2];return ye.changed(e,r,n)}).reduce(vt,[])}},e.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(pt,!1)},e.prototype.ignored=function(){return!!this._ignoredReason()},e.prototype._ignoredReason=function(){var t=this.router.globals.transition,n=this._options.reloadState,e=function(t,e){if(t.length!==e.length)return!1;var r=$e.matching(t,e);return t.length===r.filter(function(t){return!n||!t.state.includes[n.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&e(i.to,r.to)&&e(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&e(r.from,r.to)?"SameAsCurrent":void 0},e.prototype.run=function(){var e=this,r=ze.runAllHooks,n=function(t){return e._hookBuilder.buildHooksForPhase(t)},t=n(d.TransitionHookPhase.BEFORE);return ze.invokeHooks(t,function(){var t=e.router.globals;return t.lastStartedTransitionId=e.$id,t.transition=e,t.transitionHistory.enqueue(e),ce.traceTransitionStart(e),A.$q.when(void 0)}).then(function(){var t=n(d.TransitionHookPhase.RUN);return ze.invokeHooks(t,function(){return A.$q.when(void 0)})}).then(function(){ce.traceSuccess(e.$to(),e),e.success=!0,e._deferred.resolve(e.to()),r(n(d.TransitionHookPhase.SUCCESS))},function(t){ce.traceError(t,e),e.success=!1,e._deferred.reject(t),e._error=t,r(n(d.TransitionHookPhase.ERROR))}),this.promise},e.prototype.valid=function(){return!this.error()||void 0!==this.success},e.prototype.abort=function(){_(this.success)&&(this._aborted=!0)},e.prototype.error=function(){var t=this.$to();if(t.self.abstract)return At.invalid("Cannot transition to abstract state '"+t.name+"'");var e=t.parameters(),r=this.params(),n=e.filter(function(t){return!t.validates(r[t.id])});if(n.length){var i=n.map(function(t){return"["+t.id+":"+Bt(r[t.id])+"]"}).join(", "),o="The following parameter values are not valid for state '"+t.name+"': "+i;return At.invalid(o)}return!1===this.success?this._error:void 0},e.prototype.toString=function(){var t=this.from(),e=this.to(),r=function(t){return null!==t["#"]&&void 0!==t["#"]?t:ot(t,["#"])};return"Transition#"+this.$id+"( '"+(k(t)?t.name:t)+"'"+Bt(r(this._treeChanges.from.map(w("paramValues")).reduce(rt,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(k(e)?e.name:e)+"'"+Bt(r(this.params()))+" )"},e.diToken=e}();function tr(t,e){var r=["",""],n=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return n;switch(e.squash){case!1:r=["(",")"+(e.isOptional?"?":"")];break;case!0:n=n.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+e.squash+"|",")?"]}return n+r[0]+e.type.pattern.source+r[1]}var er=Zt("/"),rr={state:{params:{}},strict:!0,caseInsensitive:!0},nr=function(){function m(o,a,t,e){var u=this;this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.config=e=et(e,rr),this.pattern=o;for(var r,n,i,s=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f=[],l=0,h=function(t){if(!m.nameValidator.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+o+"'");if(st(u._params,y("id",t)))throw new Error("Duplicate parameter name '"+t+"' in pattern '"+o+"'")},p=function(t,e){var r,n=t[2]||t[3],i=e?t[4]:t[4]||("*"===t[1]?"[\\s\\S]*":null);return{id:n,regexp:i,segment:o.substring(l,t.index),type:i?a.type(i)||(r=i,z(a.type(e?"query":"path"),{pattern:new RegExp(r,u.config.caseInsensitive?"i":void 0)})):null}};(r=s.exec(o))&&!(0<=(n=p(r,!1)).segment.indexOf("?"));)h(n.id),this._params.push(t.fromPath(n.id,n.type,e.state)),this._segments.push(n.segment),f.push([n.segment,Ct(this._params)]),l=s.lastIndex;var v=(i=o.substring(l)).indexOf("?");if(0<=v){var d=i.substring(v);if(i=i.substring(0,v),0<d.length)for(l=0;r=c.exec(d);)h((n=p(r,!0)).id),this._params.push(t.fromSearch(n.id,n.type,e.state)),l=s.lastIndex}this._segments.push(i),this._compiled=f.map(function(t){return tr.apply(null,t)}).concat(tr(i))}return m.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},m.pathSegmentsAndParams=function(t){return Rt(t._segments,t._params.filter(function(t){return t.location===d.DefType.PATH}).concat(void 0)).reduce(vt,[]).filter(function(t){return""!==t&&E(t)})},m.queryParams=function(t){return t._params.filter(function(t){return t.location===d.DefType.SEARCH})},m.compare=function(t,e){var r=function(t){return t._cache.weights=t._cache.weights||(e=t,e._cache.segments=e._cache.segments||e._cache.path.map(m.pathSegmentsAndParams).reduce(vt,[]).reduce(Xt,[]).map(function(t){return P(t)?er(t):t}).reduce(vt,[])).map(function(t){return"/"===t?1:P(t)?2:t instanceof ye?3:void 0});var e},n=r(t),i=r(e);!function(t,e,r){for(var n=Math.max(t.length,e.length);t.length<n;)t.push(r);for(;e.length<n;)e.push(r)}(n,i,0);var o,a,u=Rt(n,i);for(a=0;a<u.length;a++)if(0!==(o=u[a][0]-u[a][1]))return o;return 0},m.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},m.prototype.isRoot=function(){return this._cache.path[0]===this},m.prototype.toString=function(){return this.pattern},m.prototype.exec=function(t,n,e,r){var i=this;void 0===n&&(n={}),void 0===r&&(r={});var o,a,u,s=(o=this._cache,a="pattern",u=function(){return new RegExp(["^",gt(i._cache.path.map(w("_compiled"))).join(""),!1===i.config.strict?"/?":"","$"].join(""),i.config.caseInsensitive?"i":void 0)},o[a]=o[a]||u()).exec(t);if(!s)return null;var c,f=this.parameters(),l=f.filter(function(t){return!t.isSearch()}),h=f.filter(function(t){return t.isSearch()}),p=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),v={};if(p!==s.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var d=0;d<p;d++){for(var m=l[d],y=s[d+1],g=0;g<m.replace.length;g++)m.replace[g].from===y&&(y=m.replace[g].to);y&&!0===m.array&&(void 0,y=ft(ft((c=function(t){return t.split("").reverse().join("")})(y).split(/-(?!\\)/),c),function(t){return t.replace(/\\-/g,"-")}).reverse()),E(y)&&(y=m.type.decode(y)),v[m.id]=m.value(y)}return h.forEach(function(t){for(var e=n[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===e&&(e=t.replace[r].to);E(e)&&(e=t.type.decode(e)),v[t.id]=t.value(e)}),e&&(v["#"]=e),v},m.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:gt(this._cache.path.map(function(t){return t._params}))},m.prototype.parameter=function(n,t){var i=this;void 0===t&&(t={});var e=this._cache.parent;return function(){for(var t=0,e=i._params;t<e.length;t++){var r=e[t];if(r.id===n)return r}}()||!1!==t.inherit&&e&&e.parameter(n,t)||null},m.prototype.validates=function(n){return n=n||{},this.parameters().filter(function(t){return n.hasOwnProperty(t.id)}).map(function(t){return r=n[(e=t).id],!e||e.validates(r);var e,r}).reduce(ht,!0)},m.prototype.format=function(a){void 0===a&&(a={});var t=this._cache.path,e=t.map(m.pathSegmentsAndParams).reduce(vt,[]).map(function(t){return P(t)?t:n(t)}),r=t.map(m.queryParams).reduce(vt,[]).map(n);if(e.concat(r).filter(function(t){return!1===t.isValid}).length)return null;function n(t){var e=t.value(a[t.id]),r=t.validates(e),n=t.isDefaultValue(e),i=!!n&&t.squash,o=t.type.encode(e);return{param:t,value:e,isValid:r,isDefaultValue:n,squash:i,encoded:o}}var i=e.reduce(function(t,e){if(P(e))return t+e;var r=e.squash,n=e.encoded,i=e.param;return!0===r?t.match(/\/$/)?t.slice(0,-1):t:P(r)?t+r:!1!==r?t:null==n?t:O(n)?t+ft(n,m.encodeDashes).join("-"):i.raw?t+n:t+encodeURIComponent(n)},""),o=r.map(function(t){var e=t.param,r=t.squash,n=t.encoded,i=t.isDefaultValue;if(!(null==n||i&&!1!==r)&&(O(n)||(n=[n]),0!==n.length))return e.raw||(n=ft(n,encodeURIComponent)),n.map(function(t){return e.id+"="+t})}).filter(B).reduce(vt,[]).join("&");return i+(o?"?"+o:"")+(a["#"]?"#"+a["#"]:"")},m.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,m}(),ir=function(){return(ir=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},or=function(){function t(t){this.router=t}return t.prototype.fromConfig=function(t,e,r){return new ye(t,e,d.DefType.CONFIG,this.router.urlService.config,r)},t.prototype.fromPath=function(t,e,r){return new ye(t,e,d.DefType.PATH,this.router.urlService.config,r)},t.prototype.fromSearch=function(t,e,r){return new ye(t,e,d.DefType.SEARCH,this.router.urlService.config,r)},t}(),ar=function(){function t(t){var n=this;this.router=t,this.paramFactory=new or(this.router),this.caseInsensitive=function(t){return n.router.urlService.config.caseInsensitive(t)},this.defaultSquashPolicy=function(t){return n.router.urlService.config.defaultSquashPolicy(t)},this.strictMode=function(t){return n.router.urlService.config.strictMode(t)},this.type=function(t,e,r){return n.router.urlService.config.type(t,e,r)||n},L(this,{UrlMatcher:nr,Param:ye})}return t.prototype.compile=function(t,e){var r=this.router.urlService.config,n=e&&!e.state&&e.params;e=n?ir({state:{params:n}},e):e;var i={strict:r._isStrictMode,caseInsensitive:r._isCaseInsensitive};return new nr(t,r.paramTypes,this.paramFactory,L(i,e))},t.prototype.isMatcher=function(r){if(!k(r))return!1;var n=!0;return N(nr.prototype,function(t,e){C(t)&&(n=n&&E(r[e])&&C(r[e]))}),n},t.prototype.$get=function(){var t=this.router.urlService.config;return t.paramTypes.enqueue=!1,t.paramTypes._flushTypeQueue(),this},t}(),ur=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var r=this,n=Le.isState,i=m([[P,function(t){return i(r.compile(t))}],[p(nr),function(t){return r.fromUrlMatcher(t,e)}],[n,function(t){return r.fromState(t,r.router)}],[p(RegExp),function(t){return r.fromRegExp(t,e)}],[C,function(t){return new sr(t,e)}]]),o=i(t);if(!o)throw new Error("invalid 'what' in when()");return o},t.prototype.fromUrlMatcher=function(r,e){var t=e;P(e)&&(e=this.router.urlMatcherFactory.compile(e)),p(nr)(e)&&(t=function(t){return e.format(t)});var n={urlMatcher:r,matchPriority:function(e){var t=r.parameters().filter(function(t){return t.isOptional});return t.length?t.filter(function(t){return e[t.id]}).length/t.length:1e-6},type:"URLMATCHER"};return L(new sr(function(t){var e=r.exec(t.path,t.search,t.hash);return r.validates(e)&&e},t),n)},t.prototype.fromState=function(n,i){var t={state:n,type:"STATE"};return L(this.fromUrlMatcher(n.url,function(t){var e=i.stateService,r=i.globals;e.href(n,t)!==e.href(r.current,r.params)&&e.transitionTo(n,t,{inherit:!0,source:"url"})}),t)},t.prototype.fromRegExp=function(e,t){if(e.global||e.sticky)throw new Error("Rule RegExp must not be global or sticky");var r=P(t)?function(r){return t.replace(/\$(\$|\d{1,2})/,function(t,e){return r["$"===e?0:Number(e)]})}:t,n={regexp:e,type:"REGEXP"};return L(new sr(function(t){return e.exec(t.path)},r),n)},t.isUrlRule=function(e){return e&&["type","match","handler"].every(function(t){return E(e[t])})},t}(),sr=function(t,e){var r=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-r.$id},this.handler=e||B};var cr,fr=function(){function t(t){var n=this;this.router=t,this.sync=function(t){return n.router.urlService.sync(t)},this.listen=function(t){return n.router.urlService.listen(t)},this.deferIntercept=function(t){return n.router.urlService.deferIntercept(t)},this.match=function(t){return n.router.urlService.match(t)},this.initial=function(t){return n.router.urlService.rules.initial(t)},this.otherwise=function(t){return n.router.urlService.rules.otherwise(t)},this.removeRule=function(t){return n.router.urlService.rules.removeRule(t)},this.rule=function(t){return n.router.urlService.rules.rule(t)},this.rules=function(){return n.router.urlService.rules.rules()},this.sort=function(t){return n.router.urlService.rules.sort(t)},this.when=function(t,e,r){return n.router.urlService.rules.when(t,e,r)},this.urlRuleFactory=new ur(t)}return t.prototype.update=function(t){var e=this.router.locationService;t?this.location=e.url():e.url()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,r){var n=r&&!!r.replace;this.router.urlService.url(t.format(e||{}),n)},t.prototype.href=function(t,e,r){var n=t.format(e);if(null==n)return null;r=r||{absolute:!1};var i,o,a,u,s=this.router.urlService.config,c=s.html5Mode();if(c||null===n||(n="#"+s.hashPrefix()+n),i=n,o=c,a=r.absolute,n="/"===(u=s.baseHref())?i:o?zt(u)+i:a?u.slice(1)+i:i,!r.absolute||!n)return n;var f=!c&&n?"/":"",l=s.port(),h=80===l||443===l?"":":"+l;return[s.protocol(),"://",s.host(),h,f,n].join("")},Object.defineProperty(t.prototype,"interceptDeferred",{get:function(){return this.router.urlService.interceptDeferred},enumerable:!0,configurable:!0}),t}(),lr=function(){function s(t){var r=this;this.router=t,this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIView:function(e){return st(r._uiViews,function(t){return r.router.$id+"."+t.id===e})},_registeredUIViews:function(){return r._uiViews},_activeViewConfigs:function(){return r._viewConfigs},_onSync:function(t){return r._listeners.push(t),function(){return K(r._listeners,t)}}}}return s.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var r=e.split("@"),n=r[0]||"$default",i=P(r[1])?r[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(n);o&&(i=o[1],n=o[2]),"!"===n.charAt(0)&&(n=n.substr(1),i="");/^(\^(?:\.\^)*)$/.exec(i)?i=i.split(".").reduce(function(t,e){return t.parent},t).name:"."===i&&(i=t.name);return{uiViewName:n,uiViewContextAnchor:i}},s.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},s.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},s.prototype.createViewConfig=function(t,e){var r=this._viewConfigFactories[e.$type];if(!r)throw new Error("ViewService: No view config factory registered for type "+e.$type);var n=r(t,e);return O(n)?n:[n]},s.prototype.deactivateViewConfig=function(t){ce.traceViewServiceEvent("<- Removing",t),K(this._viewConfigs,t)},s.prototype.activateViewConfig=function(t){ce.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},s.prototype.sync=function(){var r=this,n=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(Et,{});function i(t){for(var e=t.viewDecl.$context,r=0;++r&&e.parent;)e=e.parent;return r}var o=c(function(t,e,r,n){return e*(t(r)-t(n))}),t=this._uiViews.sort(o(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(t){var e=r._viewConfigs.filter(s.matches(n,t));return 1<e.length&&e.sort(o(i,-1)),{uiView:t,viewConfig:e[0]}}),e=t.map(function(t){return t.viewConfig}),a=this._viewConfigs.filter(function(t){return!J(e,t)}).map(function(t){return{uiView:void 0,viewConfig:t}});t.forEach(function(t){-1!==r._uiViews.indexOf(t.uiView)&&t.uiView.configUpdated(t.viewConfig)});var u=t.concat(a);this._listeners.forEach(function(t){return t(u)}),ce.traceViewSync(u)},s.prototype.registerUIView=function(e){ce.traceViewServiceUIViewEvent("-> Registering",e);var t=this._uiViews;return t.filter(function(t){return t.fqn===e.fqn&&t.$type===e.$type}).length&&ce.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",e),t.push(e),this.sync(),function(){-1!==t.indexOf(e)?(ce.traceViewServiceUIViewEvent("<- Deregistering",e),K(t)(e)):ce.traceViewServiceUIViewEvent("Tried removing non-registered uiView",e)}},s.prototype.available=function(){return this._uiViews.map(w("fqn"))},s.prototype.active=function(){return this._uiViews.filter(w("$config")).map(w("name"))},s.matches=function(u,s){return function(t){if(s.$type!==t.viewDecl.$type)return!1;var e=t.viewDecl,r=e.$uiViewName.split("."),n=s.fqn.split(".");if(!M(r,n.slice(0-r.length)))return!1;var i=1-r.length||void 0,o=n.slice(0,i).join("."),a=u[o].creationContext;return e.$uiViewContextAnchor===(a&&a.name)}},s}(),hr=function(){function t(){this.params=new we,this.lastStartedTransitionId=-1,this.transitionHistory=new It([],1),this.successfulTransitions=new It([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}();function pr(t){if(!(C(t)||P(t)||p(Se)(t)||Se.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return C(t)?t:v(t)}cr=function(t,e){var r,n,i,o,a,u,s,c,f=(r=t,(e.priority||0)-(r.priority||0));return 0!==f?f:(n=e,0!==(f=((i={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1})[t.type]||0)-(i[n.type]||0))?f:(a=e,0!==(f=(o=t).urlMatcher&&a.urlMatcher?nr.compare(o.urlMatcher,a.urlMatcher):0)?f:(s=e,(c={STATE:!0,URLMATCHER:!0})[(u=t).type]&&c[s.type]?0:(u.$id||0)-(s.$id||0))))};var vr=function(){function t(t){this.router=t,this._sortFn=cr,this._rules=[],this._id=0,this.urlRuleFactory=new ur(t)}return t.prototype.dispose=function(t){this._rules=[],delete this._otherwiseFn},t.prototype.initial=function(t){var e=pr(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},t.prototype.otherwise=function(t){var e=pr(t);this._otherwiseFn=this.urlRuleFactory.create(v(!0),e),this._sorted=!1},t.prototype.removeRule=function(t){K(this._rules,t)},t.prototype.rule=function(t){var e=this;if(!ur.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.rules=function(){return this.ensureSorted(),this._rules.concat(this._otherwiseFn?[this._otherwiseFn]:[])},t.prototype.sort=function(t){for(var e=this.stableSort(this._rules,this._sortFn=t||this._sortFn),r=0,n=0;n<e.length;n++)e[n]._group=r,n<e.length-1&&0!==this._sortFn(e[n],e[n+1])&&r++;this._rules=e,this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,n){var e=t.map(function(t,e){return{elem:t,idx:e}});return e.sort(function(t,e){var r=n(t.elem,e.elem);return 0===r?t.idx-e.idx:r}),e.map(function(t){return t.elem})},t.prototype.when=function(t,e,r){var n=this.urlRuleFactory.create(t,e);return E(r&&r.priority)&&(n.priority=r.priority),this.rule(n),n},t}(),dr=function(){function t(t){var e=this;this.router=t,this.paramTypes=new ge,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.dispose=function(){return e.paramTypes.dispose()},this.baseHref=function(){return e.router.locationConfig.baseHref()},this.hashPrefix=function(t){return e.router.locationConfig.hashPrefix(t)},this.host=function(){return e.router.locationConfig.host()},this.html5Mode=function(){return e.router.locationConfig.html5Mode()},this.port=function(){return e.router.locationConfig.port()},this.protocol=function(){return e.router.locationConfig.protocol()}}return t.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=E(t)?t:this._isCaseInsensitive},t.prototype.defaultSquashPolicy=function(t){if(E(t)&&!0!==t&&!1!==t&&!P(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=E(t)?t:this._defaultSquashPolicy},t.prototype.strictMode=function(t){return this._isStrictMode=E(t)?t:this._isStrictMode},t.prototype.type=function(t,e,r){var n=this.paramTypes.type(t,e,r);return E(e)?this:n},t}(),mr=function(){function t(t){var n=this;this.router=t,this.interceptDeferred=!1,this.rules=new vr(this.router),this.config=new dr(this.router),this.url=function(t,e,r){return n.router.locationService.url(t,e,r)},this.path=function(){return n.router.locationService.path()},this.search=function(){return n.router.locationService.search()},this.hash=function(){return n.router.locationService.hash()},this.onChange=function(t){return n.router.locationService.onChange(t)}}return t.prototype.dispose=function(){this.listen(!1),this.rules.dispose()},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this.router,r=e.urlService,n=e.stateService,i={path:r.path(),search:r.search(),hash:r.hash()},o=this.match(i);m([[P,function(t){return r.url(t,!0)}],[Se.isDef,function(t){return n.go(t.state,t.params,t.options)}],[p(Se),function(t){return n.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,this.router))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopListeningFn=this._stopListeningFn||this.router.urlService.onChange(function(t){return e.sync(t)});this._stopListeningFn&&this._stopListeningFn(),delete this._stopListeningFn},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t.prototype.match=function(t){var e=this;t=L({path:"",search:{},hash:""},t);for(var r,n,i,o=this.rules.rules(),a=0;a<o.length&&(!r||r.rule._group===o[a]._group);a++){var u=(n=o[a],void 0,(i=n.match(t,e.router))&&{match:i,rule:n,weight:n.matchPriority(i)});r=!r||u&&u.weight>r.weight?u:r}return r},t}(),yr=0,gr=H("LocationServices",["url","path","search","hash","onChange"]),wr=H("LocationConfig",["port","protocol","host","baseHref","html5Mode","hashPrefix"]),_r=function(){function t(t,e){void 0===t&&(t=gr),void 0===e&&(e=wr),this.locationService=t,this.locationConfig=e,this.$id=yr++,this._disposed=!1,this._disposables=[],this.trace=ce,this.viewService=new lr(this),this.globals=new hr,this.transitionService=new Lr(this),this.urlMatcherFactory=new ar(this),this.urlRouter=new fr(this),this.urlService=new mr(this),this.stateRegistry=new Ge(this),this.stateService=new Mr(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlService),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&C(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),K(e._disposables,t)}catch(t){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var r=new t(this,e);if(!r.name)throw new Error("Required property `name` missing on plugin: "+r);return this._disposables.push(r),this._plugins[r.name]=r},t.prototype.getPlugin=function(t){return t?this._plugins[t]:lt(this._plugins)},t}();function Sr(e){e.addResolvable(Ee.fromData(_r,e.router),""),e.addResolvable(Ee.fromData(Xe,e),""),e.addResolvable(Ee.fromData("$transition$",e),""),e.addResolvable(Ee.fromData("$stateParams",e.params()),""),e.entering().forEach(function(t){e.addResolvable(Ee.fromData("$state$",t),t)})}var $r=J(["$transition$",Xe]),br=function(t){var e=lt(t.treeChanges()).reduce(vt,[]).reduce(yt,[]),r=function(t){return $r(t.token)?Ee.fromData(t.token,null):t};e.forEach(function(t){t.resolvables=t.resolvables.map(r)})},Rr=function(e){var t=e.to().redirectTo;if(t){var r=e.router.stateService;return C(t)?A.$q.when(t(e)).then(n):n(t)}function n(t){if(t)return t instanceof Se?t:P(t)?r.target(t,e.params(),e.options()):t.state||t.params?r.target(t.state||e.to(),t.params||e.params(),e.options()):void 0}};function Er(r){return function(t,e){return(0,e.$$state()[r])(t,e)}}var Cr=Er("onExit"),Tr=Er("onRetain"),Pr=Er("onEnter"),kr=function(t){return new Oe(t.treeChanges().to).resolvePath("EAGER",t).then(G)},Or=function(t,e){return new Oe(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(G)},xr=function(t){return new Oe(t.treeChanges().to).resolvePath("LAZY",t).then(G)},jr=function(t){var e=A.$q,r=t.views("entering");if(r.length)return e.all(r.map(function(t){return e.when(t.load())})).then(G)},Vr=function(t){var e=t.views("entering"),r=t.views("exiting");if(e.length||r.length){var n=t.router.viewService;r.forEach(function(t){return n.deactivateViewConfig(t)}),e.forEach(function(t){return n.activateViewConfig(t)}),n.sync()}},Ir=function(t){var e=t.router.globals,r=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,Tt(t.params(),e.params)},{priority:1e4}),t.promise.then(r,r)},Hr=function(t){var e=t.options(),r=t.router.stateService,n=t.router.urlRouter;if("url"!==e.source&&e.location&&r.$current.navigable){var i={replace:"replace"===e.location};n.push(r.$current.navigable.url,r.params,i)}n.update(!0)},Ar=function(a){var u=a.router;var t=a.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(t){return Dr(a,t)});return A.$q.all(t).then(function(){if("url"!==a.originalTransition().options().source){var t=a.targetState();return u.stateService.target(t.identifier(),t.params(),t.options())}var e=u.urlService,r=e.match(e.parts()),n=r&&r.rule;if(n&&"STATE"===n.type){var i=n.state,o=r.match;return u.stateService.target(i,o,a.options())}u.urlService.sync()})};function Dr(e,r){var n=r.$$state().lazyLoad,t=n._promise;if(!t){t=n._promise=A.$q.when(n(e,r)).then(function(t){t&&Array.isArray(t.states)&&t.states.forEach(function(t){return e.router.stateRegistry.register(t)});return t}).then(function(t){return delete r.lazyLoad,delete r.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,A.$q.reject(t)})}return t}var qr=function(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=ze.HANDLE_RESULT),void 0===a&&(a=ze.REJECT_ERROR),void 0===u&&(u=!1),this.name=t,this.hookPhase=e,this.hookOrder=r,this.criteriaMatchPath=n,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=u};function Ur(t){var e=t._ignoredReason();if(e){ce.traceTransitionIgnored(t);var r=t.router.globals.transition;return"SameAsCurrent"===e&&r&&r.abort(),At.ignored().toPromise()}}function Fr(t){if(!t.valid())throw new Error(t.error().toString())}var Nr={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},Lr=function(){function t(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=W(v(this),{},v(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),t.globals.successfulTransitions.onEvict(br)}return t.prototype.onCreate=function(t,e,r){},t.prototype.onBefore=function(t,e,r){},t.prototype.onStart=function(t,e,r){},t.prototype.onExit=function(t,e,r){},t.prototype.onRetain=function(t,e,r){},t.prototype.onEnter=function(t,e,r){},t.prototype.onFinish=function(t,e,r){},t.prototype.onSuccess=function(t,e,r){},t.prototype.onError=function(t,e,r){},t.prototype.dispose=function(t){lt(this._registeredHooks).forEach(function(e){return e.forEach(function(t){t._deregistered=!0,K(e,t)})})},t.prototype.create=function(t,e){return new Xe(t,e,this._router)},t.prototype._defineCoreEvents=function(){var t=d.TransitionHookPhase,e=ze,r=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,r.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,r.to),this._defineEvent("onStart",t.RUN,0,r.to),this._defineEvent("onExit",t.RUN,100,r.exiting,!0),this._defineEvent("onRetain",t.RUN,200,r.retained),this._defineEvent("onEnter",t.RUN,300,r.entering),this._defineEvent("onFinish",t.RUN,400,r.to),this._defineEvent("onSuccess",t.SUCCESS,0,r.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,r.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=d.TransitionHookScope.STATE,e=d.TransitionHookScope.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(t,e,r,n,i,o,a,u){void 0===i&&(i=!1),void 0===o&&(o=ze.HANDLE_RESULT),void 0===a&&(a=ze.REJECT_ERROR),void 0===u&&(u=!1);var s=new qr(t,e,r,n,i,o,a,u);this._eventTypes.push(s),Ke(this,this,s)},t.prototype._getEvents=function(e){return(E(e)?this._eventTypes.filter(function(t){return t.hookPhase===e}):this._eventTypes.slice()).sort(function(t,e){var r=t.hookPhase-e.hookPhase;return 0===r?t.hookOrder-e.hookOrder:r})},t.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(t){return this._registeredHooks[t]},t.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=this.onCreate({},Sr),t.ignored=this.onBefore({},Ur,{priority:-9999}),t.invalid=this.onBefore({},Fr,{priority:-1e4}),t.redirectTo=this.onStart({to:function(t){return!!t.redirectTo}},Rr),t.onExit=this.onExit({exiting:function(t){return!!t.onExit}},Cr),t.onRetain=this.onRetain({retained:function(t){return!!t.onRetain}},Tr),t.onEnter=this.onEnter({entering:function(t){return!!t.onEnter}},Pr),t.eagerResolve=this.onStart({},kr,{priority:1e3}),t.lazyResolve=this.onEnter({entering:v(!0)},Or,{priority:1e3}),t.resolveAll=this.onFinish({},xr,{priority:1e3}),t.loadViews=this.onFinish({},jr),t.activateViews=this.onSuccess({},Vr),t.updateGlobals=this.onCreate({},Ir),t.updateUrl=this.onSuccess({},Hr,{priority:9999}),t.lazyLoad=this.onBefore({entering:function(t){return!!t.lazyLoad}},Ar)},t}(),Mr=function(){function r(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof At?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var e=Object.keys(r.prototype).filter(l(J(["current","$current","params","transition"])));W(v(r.prototype),this,v(this),e)}return Object.defineProperty(r.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this.defaultErrorHandler(G),this.invalidCallbacks=[]},r.prototype._handleInvalidTargetState=function(t,r){var n=this,i=$e.makeTargetState(this.router.stateRegistry,t),e=this.router.globals,o=function(){return e.transitionHistory.peekTail()},a=o(),u=new It(this.invalidCallbacks.slice()),s=new Oe(t).injector(),c=function(t){if(t instanceof Se){var e=t;return(e=n.target(e.identifier(),e.params(),e.options())).valid()?o()!==a?At.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):At.invalid(e.error()).toPromise()}};return function e(){var t=u.dequeue();return void 0===t?At.invalid(r.error()).toPromise():A.$q.when(t(r,i,s)).then(c).then(function(t){return t||e()})}()},r.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){K(this.invalidCallbacks)(t)}.bind(this)},r.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!E(t)||t,inherit:!1,notify:!1})},r.prototype.go=function(t,e,r){var n=et(r,{relative:this.$current,inherit:!0},Nr);return this.transitionTo(t,e,n)},r.prototype.target=function(t,e,r){if(void 0===r&&(r={}),k(r.reload)&&!r.reload.name)throw new Error("Invalid reload state object");var n=this.router.stateRegistry;if(r.reloadState=!0===r.reload?n.root():n.matcher.find(r.reload,r.relative),r.reload&&!r.reloadState)throw new Error("No such reload state '"+(P(r.reload)?r.reload:r.reload.name)+"'");return new Se(this.router.stateRegistry,t,e,r)},r.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new _e(t.router.stateRegistry.root())]},r.prototype.transitionTo=function(t,e,r){var o=this;void 0===e&&(e={}),void 0===r&&(r={});var a=this.router,u=a.globals;r=et(r,Nr);r=L(r,{current:function(){return u.transition}});var n=this.target(t,e,r),i=this.getCurrentPath();if(!n.exists())return this._handleInvalidTargetState(i,n);if(!n.valid())return jt(n.error());var s=function(i){return function(t){if(t instanceof At){var e=a.globals.lastStartedTransitionId<=i.$id;if(t.type===d.RejectType.IGNORED)return e&&a.urlRouter.update(),A.$q.when(u.current);var r=t.detail;if(t.type===d.RejectType.SUPERSEDED&&t.redirected&&r instanceof Se){var n=i.redirect(r);return n.run().catch(s(n))}if(t.type===d.RejectType.ABORTED)return e&&a.urlRouter.update(),A.$q.reject(t)}return o.defaultErrorHandler()(t),A.$q.reject(t)}},c=this.router.transitionService.create(i,n),f=c.run().catch(s(c));return xt(f),L(f,{transition:c})},r.prototype.is=function(t,e,r){r=et(r,{relative:this.$current});var n=this.router.stateRegistry.matcher.find(t,r.relative);if(E(n)){if(this.$current!==n)return!1;if(!e)return!0;var i=n.parameters({inherit:!0,matchingKeys:e});return ye.equals(i,ye.values(i,e),this.params)}},r.prototype.includes=function(t,e,r){r=et(r,{relative:this.$current});var n=P(t)&&Vt.fromString(t);if(n){if(!n.matches(this.$current.name))return!1;t=this.$current.name}var i=this.router.stateRegistry.matcher.find(t,r.relative),o=this.$current.includes;if(E(i)){if(!E(o[i.name]))return!1;if(!e)return!0;var a=i.parameters({inherit:!0,matchingKeys:e});return ye.equals(a,ye.values(a,e),this.params)}},r.prototype.href=function(t,e,r){r=et(r,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),e=e||{};var n=this.router.stateRegistry.matcher.find(t,r.relative);if(!E(n))return null;r.inherit&&(e=this.params.$inherit(e,this.$current,n));var i=n&&r.lossy?n.navigable:n;return i&&void 0!==i.url&&null!==i.url?this.router.urlRouter.href(i.url,e,{absolute:r.absolute}):null},r.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},r.prototype.get=function(t,e){var r=this.router.stateRegistry;return 0===arguments.length?r.get():r.get(t,e||this.$current)},r.prototype.lazyLoad=function(t,e){var r=this.get(t);if(!r||!r.lazyLoad)throw new Error("Can not lazy load "+t);var n=this.getCurrentPath(),i=$e.makeTargetState(this.router.stateRegistry,n);return Dr(e=e||this.router.transitionService.create(n,i),r)},r}(),Br={when:function(r){return new Promise(function(t,e){return t(r)})},reject:function(r){return new Promise(function(t,e){e(r)})},defer:function(){var r={};return r.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),r},all:function(t){if(O(t))return Promise.all(t);if(k(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return Br.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},Gr={},Wr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,zr=/([^\s,]+)/g,Jr={get:function(t){return Gr[t]},has:function(t){return null!=Jr.get(t)},invoke:function(t,e,r){var n=L({},Gr,r||{}),i=Jr.annotate(t),o=_t(function(t){return n.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),a=i.filter(o).map(function(t){return n[t]});return C(t)?t.apply(e,a):t.slice(-1)[0].apply(e,a)},annotate:function(t){if(!V(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(O(t))return t.slice(0,-1);var e=t.toString().replace(Wr,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(zr)||[]}},Qr=function(t,e){var r=e[0],n=e[1];return t.hasOwnProperty(r)?O(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n,t},Kr=function(t){return t.split("&").filter(B).map(Kt).reduce(Qr,{})};function Yr(t){var e=function(t){return t||""},r=Jt(t).map(e),n=r[0],i=r[1],o=Qt(n).map(e);return{path:o[0],search:o[1],hash:i,url:t}}var Zr=function(t){var e=t.path(),r=t.search(),n=t.hash(),i=Object.keys(r).map(function(e){var t=r[e];return(O(t)?t:[t]).map(function(t){return e+"="+t})}).reduce(vt,[]).join("&");return e+(i?"?"+i:"")+(n?"#"+n:"")};function Xr(n,i,o,a){return function(t){var e=t.locationService=new o(t),r=t.locationConfig=new a(t,i);return{name:n,service:e,configuration:r,dispose:function(t){t.dispose(e),t.dispose(r)}}}}var tn,en,rn,nn=function(){function t(t,e){var r=this;this.fireAfterUpdate=e,this._listeners=[],this._listener=function(e){return r._listeners.forEach(function(t){return t(e)})},this.hash=function(){return Yr(r._get()).hash},this.path=function(){return Yr(r._get()).path},this.search=function(){return Kr(Yr(r._get()).search)},this._location=D.location,this._history=D.history}return t.prototype.url=function(e,t){return void 0===t&&(t=!0),E(e)&&e!==this._get()&&(this._set(null,null,e,t),this.fireAfterUpdate&&this._listeners.forEach(function(t){return t({url:e})})),Zr(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return K(e._listeners,t)}},t.prototype.dispose=function(t){tt(this._listeners)},t}(),on=(tn=function(t,e){return(tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}tn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),an=function(r){function t(t){var e=r.call(this,t,!1)||this;return D.addEventListener("hashchange",e._listener,!1),e}return on(t,r),t.prototype._get=function(){return Yt(this._location.hash)},t.prototype._set=function(t,e,r,n){this._location.hash=r},t.prototype.dispose=function(t){r.prototype.dispose.call(this,t),D.removeEventListener("hashchange",this._listener)},t}(nn),un=(en=function(t,e){return(en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}en(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),sn=function(e){function t(t){return e.call(this,t,!0)||this}return un(t,e),t.prototype._get=function(){return this._url},t.prototype._set=function(t,e,r,n){this._url=r},t}(nn),cn=(rn=function(t,e){return(rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}rn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),fn=function(r){function t(t){var e=r.call(this,t,!0)||this;return e._config=t.urlService.config,D.addEventListener("popstate",e._listener,!1),e}return cn(t,r),t.prototype._getBasePrefix=function(){return zt(this._config.baseHref())},t.prototype._get=function(){var t=this._location,e=t.pathname,r=t.hash,n=t.search;n=Qt(n)[1],r=Jt(r)[1];var i=this._getBasePrefix(),o=e===this._config.baseHref(),a=e.substr(0,i.length)===i;return(e=o?"/":a?e.substring(i.length):e)+(n?"?"+n:"")+(r?"#"+r:"")},t.prototype._set=function(t,e,r,n){var i=this._getBasePrefix(),o=r&&"/"!==r[0]?"/":"",a=""===r||"/"===r?this._config.baseHref():i+o+r;n?this._history.replaceState(t,e,a):this._history.pushState(t,e,a)},t.prototype.dispose=function(t){r.prototype.dispose.call(this,t),D.removeEventListener("popstate",this._listener)},t}(nn),ln=function(){var e=this;this.dispose=G,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return e._port},this.protocol=function(){return e._protocol},this.host=function(){return e._host},this.baseHref=function(){return e._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(t){return E(t)?e._hashPrefix=t:e._hashPrefix}},hn=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return E(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return E(t)&&(this._baseHref=t),_(this._baseHref)&&(this._baseHref=this.getBaseHref()),this._baseHref},t.prototype.getBaseHref=function(){var t=document.getElementsByTagName("base")[0];return t&&t.href?t.href.replace(/^([^/:]*:)?\/\/[^/]*/,""):this._isHtml5?"/":location.pathname||"/"},t.prototype.dispose=function(){},t}();function pn(t){return A.$injector=Jr,{name:"vanilla.services",$q:A.$q=Br,$injector:Jr,dispose:function(){return null}}}var vn=Xr("vanilla.hashBangLocation",!1,an,hn),dn=Xr("vanilla.pushStateLocation",!0,fn,hn),mn=Xr("vanilla.memoryLocation",!1,sn,ln),yn=function(){function t(){}return t.prototype.dispose=function(t){},t}(),gn=Object.freeze({root:D,fromJson:U,toJson:F,forEach:N,extend:L,equals:M,identity:B,noop:G,createProxyFunctions:W,inherit:z,inArray:J,_inArray:Q,removeFrom:K,_removeFrom:Y,pushTo:Z,_pushTo:X,deregAll:tt,defaults:et,mergeR:rt,ancestors:nt,pick:it,omit:ot,pluck:at,filter:ut,find:st,mapObj:ct,map:ft,values:lt,allTrueR:ht,anyTrueR:pt,unnestR:vt,flattenR:dt,pushR:mt,uniqR:yt,unnest:gt,flatten:wt,assertPredicate:_t,assertMap:St,assertFn:$t,pairs:bt,arrayTuples:Rt,applyPairs:Et,tail:Ct,copy:Tt,_extend:Pt,silenceUncaughtInPromise:xt,silentRejection:jt,makeStub:H,services:A,Glob:Vt,curry:c,compose:r,pipe:s,prop:w,propEq:y,parse:R,not:l,and:n,or:i,all:f,any:h,is:p,eq:o,val:v,invoke:a,pattern:m,isUndefined:_,isDefined:E,isNull:S,isNullOrUndefined:$,isFunction:C,isNumber:T,isString:P,isObject:k,isArray:O,isDate:x,isRegExp:j,isInjectable:V,isPromise:I,Queue:It,maxLength:Dt,padString:qt,kebobString:Ut,functionToString:Ft,fnToString:Nt,stringify:Bt,beforeAfterSubstr:Gt,hostRegex:Wt,stripLastPathElement:zt,splitHash:Jt,splitQuery:Qt,splitEqual:Kt,trimHashVal:Yt,splitOnDelim:Zt,joinNeighborsR:Xt,get Category(){return d.Category},Trace:se,trace:ce,get DefType(){return d.DefType},Param:ye,ParamTypes:ge,StateParams:we,ParamType:fe,PathNode:_e,PathUtils:$e,resolvePolicies:be,defaultResolvePolicy:Re,Resolvable:Ee,NATIVE_INJECTOR_TOKEN:ke,ResolveContext:Oe,resolvablesBuilder:qe,StateBuilder:Ne,StateObject:Le,StateMatcher:Me,StateQueueManager:Be,StateRegistry:Ge,StateService:Mr,TargetState:Se,get TransitionHookPhase(){return d.TransitionHookPhase},get TransitionHookScope(){return d.TransitionHookScope},HookBuilder:Ye,matchState:Je,RegisteredHook:Qe,makeEvent:Ke,get RejectType(){return d.RejectType},Rejection:At,Transition:Xe,TransitionHook:ze,TransitionEventType:qr,defaultTransOpts:Nr,TransitionService:Lr,UrlRules:vr,UrlConfig:dr,UrlMatcher:nr,ParamFactory:or,UrlMatcherFactory:ar,UrlRouter:fr,UrlRuleFactory:ur,BaseUrlRule:sr,UrlService:mr,ViewService:lr,UIRouterGlobals:hr,UIRouter:_r,$q:Br,$injector:Jr,BaseLocationServices:nn,HashLocationService:an,MemoryLocationService:sn,PushStateLocationService:fn,MemoryLocationConfig:ln,BrowserLocationConfig:hn,keyValsToObjectR:Qr,getParams:Kr,parseUrl:Yr,buildUrl:Zr,locationPluginFactory:Xr,servicesPlugin:pn,hashLocationPlugin:vn,pushStateLocationPlugin:dn,memoryLocationPlugin:mn,UIRouterPluginBase:yn});function wn(){var r=null;return function(t,e){return r=r||A.$injector.get("$templateFactory"),[new bn(t,e,r)]}}var _n=function(t,r){return t.reduce(function(t,e){return t||E(r[e])},!1)};function Sn(n){if(!n.parent)return{};var i=["component","bindings","componentProvider"],o=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),t=i.concat(o);if(E(n.views)&&_n(t,n))throw new Error("State '"+n.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+t.filter(function(t){return E(n[t])}).join(", "));var a={},e=n.views||{$default:it(n,t)};return N(e,function(t,e){if(e=e||"$default",P(t)&&(t={component:t}),t=L({},t),_n(i,t)&&_n(o,t))throw new Error("Cannot combine: "+i.join("|")+" with: "+o.join("|")+" in stateview: '"+e+"@"+n.name+"'");t.resolveAs=t.resolveAs||"$resolve",t.$type="ng1",t.$context=n,t.$name=e;var r=lr.normalizeUIViewTarget(t.$context,t.$name);t.$uiViewName=r.uiViewName,t.$uiViewContextAnchor=r.uiViewContextAnchor,a[e]=t}),a}var $n=0,bn=function(){function t(t,e,r){var n=this;this.path=t,this.viewDecl=e,this.factory=r,this.$id=$n++,this.loaded=!1,this.getTemplate=function(t,e){return n.component?n.factory.makeComponentTemplate(t,e,n.component,n.viewDecl.bindings):n.template}}return t.prototype.load=function(){var e=this,t=A.$q,r=new Oe(this.path),n=this.path.reduce(function(t,e){return L(t,e.paramValues)},{}),i={template:t.when(this.factory.fromConfig(this.viewDecl,n,r)),controller:t.when(this.getController(r))};return t.all(i).then(function(t){return ce.traceViewServiceEvent("Loaded",e),e.controller=t.controller,L(e,t.template),e})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!V(e))return this.viewDecl.controller;var r=A.$injector.annotate(e),n=O(e)?Ct(e):e;return new Ee("",n,r).get(t)},t}(),Rn=function(){function t(){var n=this;this._useHttp=b.version.minor<3,this.$get=["$http","$templateCache","$injector",function(t,e,r){return n.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),n.$http=t,n.$templateCache=e,n}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,r){var n=function(t){return A.$q.when(t).then(function(t){return{template:t}})},i=function(t){return A.$q.when(t).then(function(t){return{component:t}})};return E(t.template)?n(this.fromString(t.template,e)):E(t.templateUrl)?n(this.fromUrl(t.templateUrl,e)):E(t.templateProvider)?n(this.fromProvider(t.templateProvider,e,r)):E(t.component)?i(t.component):E(t.componentProvider)?i(this.fromComponentProvider(t.componentProvider,e,r)):n("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return C(t)?t(e):t},t.prototype.fromUrl=function(t,e){return C(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,r){var n=A.$injector.annotate(t),i=O(t)?Ct(t):t;return new Ee("",i,n).get(r)},t.prototype.fromComponentProvider=function(t,e,r){var n=A.$injector.annotate(t),i=O(t)?Ct(t):t;return new Ee("",i,n).get(r)},t.prototype.makeComponentTemplate=function(s,c,t,f){f=f||{};var l=3<=b.version.minor?"::":"",h=function(t){var e=Ut(t);return/^(x|data)-/.exec(e)?"x-"+e:e},e=function(t){var e=A.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(En).reduce(vt,[])}(t).map(function(t){var e=t.name,r=t.type,n=h(e);if(s.attr(n)&&!f[e])return n+"='"+s.attr(n)+"'";var i=f[e]||e;if("@"===r)return n+"='{{"+l+"$resolve."+i+"}}'";if("&"!==r)return n+"='"+l+"$resolve."+i+"'";var o=c.getResolvable(i),a=o&&o.data,u=a&&A.$injector.annotate(a)||[];return n+"='$resolve."+i+(O(a)?"["+(a.length-1)+"]":"")+"("+u.join(",")+")'"}).join(" "),r=h(t);return"<"+r+" "+e+"></"+r+">"},t}();var En=function(t){return k(t.bindToController)?Cn(t.bindToController):Cn(t.scope)},Cn=function(e){return Object.keys(e||{}).map(function(t){return[t,/^([=<@&])[?]?(.*)/.exec(e[t])]}).filter(function(t){return E(t)&&O(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},Tn=function(){function r(t,e){this.stateRegistry=t,this.stateService=e,W(v(r.prototype),this,v(this))}return r.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},r.prototype.state=function(t,e){return k(t)?e=t:e.name=t,this.stateRegistry.register(e),this},r.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},r}(),Pn=function(r){return function(t,e){var i=t[r],o="onExit"===r?"from":"to";return i?function(t,e){var r=new Oe(t.treeChanges(o)).subContext(e.$$state()),n=L(Gn(r),{$state$:e,$transition$:t});return A.$injector.invoke(i,this,n)}:void 0}},kn=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=v(t);W(e,this,e,["hashPrefix"])}return t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return K(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=k(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.baseHref=function(){return this._baseHref||(this._baseHref=this.$browser.baseHref()||this.$window.location.pathname)},t.prototype.url=function(t,e,r){return void 0===e&&(e=!1),E(t)&&this.$location.url(t),e&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},t.prototype._runtimeServices=function(t,e,r,n,i){var o=this;this.$location=e,this.$sniffer=r,this.$browser=n,this.$window=i,t.$on("$locationChangeSuccess",function(e){return o._urlListeners.forEach(function(t){return t(e)})});var a=v(e);W(a,this,a,["replace","path","search","hash"]),W(a,this,a,["port","protocol","host"])},t}(),On=function(){function r(t){this.router=t}return r.injectableHandler=function(e,r){return function(t){return A.$injector.invoke(r,null,{$match:t,$stateParams:e.globals.params})}},r.prototype.$get=function(){var t=this.router.urlService;return this.router.urlRouter.update(!0),t.interceptDeferred||t.listen(),this.router.urlRouter},r.prototype.rule=function(t){var e=this;if(!C(t))throw new Error("'rule' must be a function");var r=new sr(function(){return t(A.$injector,e.router.locationService)},B);return this.router.urlService.rules.rule(r),this},r.prototype.otherwise=function(t){var e=this,r=this.router.urlService.rules;if(P(t))r.otherwise(t);else{if(!C(t))throw new Error("'rule' must be a string or function");r.otherwise(function(){return t(A.$injector,e.router.locationService)})}return this},r.prototype.when=function(t,e){return(O(e)||C(e))&&(e=r.injectableHandler(this.router,e)),this.router.urlService.rules.when(t,e),this},r.prototype.deferIntercept=function(t){this.router.urlService.deferIntercept(t)},r}();b.module("ui.router.angular1",[]);var xn=b.module("ui.router.init",["ng"]),jn=b.module("ui.router.util",["ui.router.init"]),Vn=b.module("ui.router.router",["ui.router.util"]),In=b.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),Hn=b.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),An=(b.module("ui.router.compat",["ui.router"]),null);function Dn(t){(An=this.router=new _r).stateProvider=new Tn(An.stateRegistry,An.stateService),An.stateRegistry.decorator("views",Sn),An.stateRegistry.decorator("onExit",Pn("onExit")),An.stateRegistry.decorator("onRetain",Pn("onRetain")),An.stateRegistry.decorator("onEnter",Pn("onEnter")),An.viewService._pluginapi._viewConfigFactory("ng1",wn());var u=An.locationService=An.locationConfig=new kn(t);function e(t,e,r,n,i,o,a){return u._runtimeServices(i,t,n,e,r),delete An.router,delete An.$get,An}return kn.monkeyPatchPathParameterType(An),((An.router=An).$get=e).$inject=["$location","$browser","$window","$sniffer","$rootScope","$http","$templateCache"],An}Dn.$inject=["$locationProvider"];var qn=function(r){return["$uiRouterProvider",function(t){var e=t.router[r];return e.$get=function(){return e},e}]};function Un(e,t,r){if(A.$injector=e,A.$q=t,!e.hasOwnProperty("strictDi"))try{e.invoke(function(t){})}catch(t){e.strictDi=!!/strict mode/.exec(t&&t.toString())}r.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(vt,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(t){return t.deps=e.annotate(t.resolveFn,e.strictDi)})}Un.$inject=["$injector","$q","$uiRouter"];function Fn(t){t.$watch(function(){ce.approximateDigests++})}Fn.$inject=["$rootScope"],xn.provider("$uiRouter",Dn),Vn.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new On(t)}]),jn.provider("$urlService",qn("urlService")),jn.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return An.urlMatcherFactory}]),jn.provider("$templateFactory",function(){return new Rn}),In.provider("$stateRegistry",qn("stateRegistry")),In.provider("$uiRouterGlobals",qn("globals")),In.provider("$transitions",qn("transitionService")),In.provider("$state",["$uiRouterProvider",function(){return L(An.stateProvider,{$get:function(){return An.stateService}})}]),In.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),Hn.factory("$view",function(){return An.viewService}),Hn.service("$trace",function(){return ce}),Hn.run(Fn),jn.run(["$urlMatcherFactory",function(t){}]),In.run(["$state",function(t){}]),Vn.run(["$urlRouter",function(t){}]),xn.run(Un);var Nn,Ln,Mn,Bn,Gn=function(r){return r.getTokens().filter(P).map(function(t){var e=r.getResolvable(t);return[t,"NOWAIT"===r.getPolicy(e).async?e.promise:e.data]}).reduce(Et,{})};function Wn(t){var e,r=t.match(/^\s*({[^}]*})\s*$/);if(r&&(t="("+r[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function zn(t){var e=t.parent().inheritedData("$uiView"),r=R("$cfg.path")(e);return r?Ct(r).state.name:void 0}function Jn(t,e,r){var n,i=r.uiState||t.current.name,o=L((n=t,{relative:zn(e)||n.$current,inherit:!0,source:"sref"}),r.uiStateOpts||{}),a=t.href(i,r.uiStateParams,o);return{uiState:i,uiStateParams:r.uiStateParams,uiStateOpts:o,href:a}}function Qn(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),r="FORM"===t[0].nodeName;return{attr:r?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!r}}function Kn(o,a,u,s,c){return function(t){var e=t.which||t.button,r=c();if(!(1<e||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target"))){var n=u(function(){o.attr("disabled")||a.go(r.uiState,r.uiStateParams,r.uiStateOpts)});t.preventDefault();var i=s.isAnchor&&!r.href?1:0;t.preventDefault=function(){i--<=0&&u.cancel(n)}}}}function Yn(i,t,o,e){var a;e&&(a=e.events),O(a)||(a=["click"]);for(var r=i.on?"on":"bind",n=0,u=a;n<u.length;n++){var s=u[n];i[r](s,o)}t.$on("$destroy",function(){for(var t=i.off?"off":"unbind",e=0,r=a;e<r.length;e++){var n=r[e];i[t](n,o)}})}function Zn(n){var t=function(t,e,r){return n.is(t,e,r)};return t.$stateful=!0,t}function Xn(n){var t=function(t,e,r){return n.includes(t,e,r)};return t.$stateful=!0,t}function ti(d,m,y,t,g,e){var w=R("viewDecl.controllerAs"),_=R("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(t){var v=t.html();return t.empty(),function(e,r){var t=r.data("$uiView");if(!t)return r.html(v),void d(r.contents())(e);var n=t.$cfg||{viewDecl:{},getTemplate:G},i=n.path&&new Oe(n.path);r.html(n.getTemplate(r,i)||v),ce.traceUIViewFill(t.$uiView,r.html());var o=d(r.contents()),a=n.controller,u=w(n),s=_(n),c=i&&Gn(i);if(e[s]=c,a){var f=m(a,L({},c,{$scope:e,$element:r}));u&&(e[u]=f,e[u][s]=c),r.data("$ngControllerController",f),r.children().data("$ngControllerController",f),ni(g,y,f,e,n)}if(P(n.component))var l=Ut(n.component),h=new RegExp("^(x-|data-)?"+l+"$","i"),p=e.$watch(function(){var t=[].slice.call(r[0].children).filter(function(t){return t&&t.tagName&&h.exec(t.tagName)});return t&&b.element(t).data("$"+n.component+"Controller")},function(t){t&&(ni(g,y,t,e,n),p())});o(e)}}}}Nn=["$uiRouter","$timeout",function(h,p){var v=h.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(t,e,r,n){var i,o=Qn(e),a=n[1]||n[0],u=null,s={},c=function(){return Jn(v,e,s)},f=Wn(r.uiSref);function l(){var t=c();u&&u(),a&&(u=a.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&r.$set(o.attr,t.href)}s.uiState=f.state,s.uiStateOpts=r.uiSrefOpts?t.$eval(r.uiSrefOpts):{},f.paramExpr&&(t.$watch(f.paramExpr,function(t){s.uiStateParams=L({},t),l()},!0),s.uiStateParams=L({},t.$eval(f.paramExpr))),l(),t.$on("$destroy",h.stateRegistry.onStatesChanged(l)),t.$on("$destroy",h.transitionService.onSuccess({},l)),o.clickable&&(i=Kn(e,v,p,o,c),Yn(e,t,i,s.uiStateOpts))}}}],Ln=["$uiRouter","$timeout",function(p,v){var d=p.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,t,n,e){var i,o=Qn(t),a=e[1]||e[0],u=null,s={},c=function(){return Jn(d,t,s)},f=["uiState","uiStateParams","uiStateOpts"],l=f.reduce(function(t,e){return t[e]=G,t},{});function h(){var t=c();u&&u(),a&&(u=a.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&n.$set(o.attr,t.href)}f.forEach(function(e){s[e]=n[e]?r.$eval(n[e]):null,n.$observe(e,function(t){l[e](),l[e]=r.$watch(t,function(t){s[e]=t,h()},!0)})}),h(),r.$on("$destroy",p.stateRegistry.onStatesChanged(h)),r.$on("$destroy",p.transitionService.onSuccess({},h)),o.clickable&&(i=Kn(t,d,v,o,c),Yn(t,r,i,s.uiStateOpts))}}}],Mn=["$state","$stateParams","$interpolate","$uiRouter",function(v,t,d,m){return{restrict:"A",controller:["$scope","$element","$attrs",function(u,s,t){var c,n,e,r,i,f=[];c=d(t.uiSrefActiveEq||"",!1)(u);try{n=u.$eval(t.uiSrefActive)}catch(t){}function o(t){t.promise.then(p,G)}function a(){l(n)}function l(t){k(t)&&(f=[],N(t,function(t,e){var r=function(t,e){var r=Wn(t);h(r.state,u.$eval(r.paramExpr),e)};P(t)?r(t,e):O(t)&&N(t,function(t){r(t,e)})}))}function h(t,e,r){var n={state:v.get(t,zn(s))||{name:t},params:e,activeClass:r};return f.push(n),function(){K(f)(n)}}function p(){var e=function(t){return t.split(/\s/).filter(B)},t=function(t){return t.map(function(t){return t.activeClass}).map(e).reduce(vt,[])},r=t(f).concat(e(c)).reduce(yt,[]),n=t(f.filter(function(t){return v.includes(t.state.name,t.params)})),i=!!f.filter(function(t){return v.is(t.state.name,t.params)}).length?e(c):[],o=n.concat(i).reduce(yt,[]),a=r.filter(function(t){return!J(o,t)});u.$evalAsync(function(){o.forEach(function(t){return s.addClass(t)}),a.forEach(function(t){return s.removeClass(t)})})}l(n=n||d(t.uiSrefActive||"",!1)(u)),this.$$addStateInfo=function(t,e){if(!(k(n)&&0<f.length)){var r=h(t,e,n);return p(),r}},u.$on("$destroy",(e=m.stateRegistry.onStatesChanged(a),r=m.transitionService.onStart({},o),i=u.$on("$stateChangeSuccess",p),function(){e(),r(),i()})),m.globals.transition&&o(m.globals.transition),p()}]}}],b.module("ui.router.state").directive("uiSref",Nn).directive("uiSrefActive",Mn).directive("uiSrefActiveEq",Mn).directive("uiState",Ln),Zn.$inject=["$state"],Xn.$inject=["$state"],b.module("ui.router.state").filter("isState",Zn).filter("includedByState",Xn),Bn=["$view","$animate","$uiViewScroll","$interpolate","$q",function(i,o,g,w,_){var S={$cfg:{viewDecl:{$context:i._pluginapi._rootViewContext()}},$uiView:{}},$={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(t,e,y){return function(a,u,t){var s,c,f,l,e,h=t.onload||"",p=t.autoscroll,v={enter:function(t,e,r){2<b.version.minor?o.enter(t,null,e).then(r):o.enter(t,null,e,r)},leave:function(t,e){2<b.version.minor?o.leave(t).then(e):o.leave(t,e)}},r=u.inheritedData("$uiView")||S,d=w(t.uiView||t.name||"")(a)||"$default",m={$type:"ng1",id:$.count++,name:d,fqn:r.$uiView.fqn?r.$uiView.fqn+"."+d:d,config:null,configUpdated:function(t){if(t&&!(t instanceof bn))return;if(e=l,r=t,e===r)return;var e,r;ce.traceUIViewConfigUpdated(m,t&&t.viewDecl&&t.viewDecl.$context),n(l=t)},get creationContext(){var t=R("$cfg.viewDecl.$context")(r),e=R("$uiView.creationContext")(r);return t||e}};function n(t){var e=a.$new(),r=_.defer(),n=_.defer(),i={$cfg:t,$uiView:m},o={$animEnter:r.promise,$animLeave:n.promise,$$animLeave:n};e.$emit("$viewContentLoading",d),c=y(e,function(t){t.data("$uiViewAnim",o),t.data("$uiView",i),v.enter(t,u,function(){r.resolve(),f&&f.$emit("$viewContentAnimationEnded"),(E(p)&&!p||a.$eval(p))&&g(t)}),function(){if(s&&(ce.traceUIViewEvent("Removing (previous) el",s.data("$uiView")),s.remove(),s=null),f&&(ce.traceUIViewEvent("Destroying scope",m),f.$destroy(),f=null),c){var t=c.data("$uiViewAnim");ce.traceUIViewEvent("Animate out",t),v.leave(c,function(){t.$$animLeave.resolve(),s=null}),s=c,c=null}}()}),(f=e).$emit("$viewContentLoaded",t||l),f.$eval(h)}ce.traceUIViewEvent("Linking",m),u.data("$uiView",{$uiView:m}),n(),e=i.registerUIView(m),a.$on("$destroy",function(){ce.traceUIViewEvent("Destroying/Unregistering",m),e()})}}};return $}],ti.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var ei="function"==typeof b.module("ui.router").component,ri=0;function ni(n,t,c,e,r){!C(c.$onInit)||r.viewDecl.component&&ei||c.$onInit();var f=Ct(r.path).state.self,i={bind:c};if(C(c.uiOnParamsChanged)){var l=new Oe(r.path).getResolvable("$transition$").data;e.$on("$destroy",t.onSuccess({},function(t){if(t!==l&&-1===t.exiting().indexOf(f)){var r=t.params("to"),n=t.params("from"),e=function(t){return t.paramSchema},i=t.treeChanges("to").map(e).reduce(vt,[]),o=t.treeChanges("from").map(e).reduce(vt,[]),a=i.filter(function(t){var e=o.indexOf(t);return-1===e||!o[e].type.equals(r[t.id],n[t.id])});if(a.length){var u=a.map(function(t){return t.id}),s=ut(r,function(t,e){return-1!==u.indexOf(e)});c.uiOnParamsChanged(s,t)}}},i))}if(C(c.uiCanExit)){var o=ri++,a="_uiCanExitIds",u=function(t){return!!t&&(t[a]&&!0===t[a][o]||u(t.redirectedFrom()))},s={exiting:f.name};e.$on("$destroy",t.onBefore(s,function(t){var e,r=t[a]=t[a]||{};return u(t)||(e=n.when(c.uiCanExit(t))).then(function(t){return r[o]=!1!==t}),e},i))}}b.module("ui.router.state").directive("uiView",Bn),b.module("ui.router.state").directive("uiView",ti),b.module("ui.router.state").provider("$uiViewScroll",function(){var r=!1;this.useAnchorScroll=function(){r=!0},this.$get=["$anchorScroll","$timeout",function(t,e){return r?t:function(t){return e(function(){t[0].scrollIntoView()},0,!1)}}]});d.default="ui.router",d.core=gn,d.watchDigests=Fn,d.getLocals=Gn,d.getNg1ViewConfigFactory=wn,d.ng1ViewsBuilder=Sn,d.Ng1ViewConfig=bn,d.StateProvider=Tn,d.UrlRouterProvider=On,d.root=D,d.fromJson=U,d.toJson=F,d.forEach=N,d.extend=L,d.equals=M,d.identity=B,d.noop=G,d.createProxyFunctions=W,d.inherit=z,d.inArray=J,d._inArray=Q,d.removeFrom=K,d._removeFrom=Y,d.pushTo=Z,d._pushTo=X,d.deregAll=tt,d.defaults=et,d.mergeR=rt,d.ancestors=nt,d.pick=it,d.omit=ot,d.pluck=at,d.filter=ut,d.find=st,d.mapObj=ct,d.map=ft,d.values=lt,d.allTrueR=ht,d.anyTrueR=pt,d.unnestR=vt,d.flattenR=dt,d.pushR=mt,d.uniqR=yt,d.unnest=gt,d.flatten=wt,d.assertPredicate=_t,d.assertMap=St,d.assertFn=$t,d.pairs=bt,d.arrayTuples=Rt,d.applyPairs=Et,d.tail=Ct,d.copy=Tt,d._extend=Pt,d.silenceUncaughtInPromise=xt,d.silentRejection=jt,d.makeStub=H,d.services=A,d.Glob=Vt,d.curry=c,d.compose=r,d.pipe=s,d.prop=w,d.propEq=y,d.parse=R,d.not=l,d.and=n,d.or=i,d.all=f,d.any=h,d.is=p,d.eq=o,d.val=v,d.invoke=a,d.pattern=m,d.isUndefined=_,d.isDefined=E,d.isNull=S,d.isNullOrUndefined=$,d.isFunction=C,d.isNumber=T,d.isString=P,d.isObject=k,d.isArray=O,d.isDate=x,d.isRegExp=j,d.isInjectable=V,d.isPromise=I,d.Queue=It,d.maxLength=Dt,d.padString=qt,d.kebobString=Ut,d.functionToString=Ft,d.fnToString=Nt,d.stringify=Bt,d.beforeAfterSubstr=Gt,d.hostRegex=Wt,d.stripLastPathElement=zt,d.splitHash=Jt,d.splitQuery=Qt,d.splitEqual=Kt,d.trimHashVal=Yt,d.splitOnDelim=Zt,d.joinNeighborsR=Xt,d.Trace=se,d.trace=ce,d.Param=ye,d.ParamTypes=ge,d.StateParams=we,d.ParamType=fe,d.PathNode=_e,d.PathUtils=$e,d.resolvePolicies=be,d.defaultResolvePolicy=Re,d.Resolvable=Ee,d.NATIVE_INJECTOR_TOKEN=ke,d.ResolveContext=Oe,d.resolvablesBuilder=qe,d.StateBuilder=Ne,d.StateObject=Le,d.StateMatcher=Me,d.StateQueueManager=Be,d.StateRegistry=Ge,d.StateService=Mr,d.TargetState=Se,d.HookBuilder=Ye,d.matchState=Je,d.RegisteredHook=Qe,d.makeEvent=Ke,d.Rejection=At,d.Transition=Xe,d.TransitionHook=ze,d.TransitionEventType=qr,d.defaultTransOpts=Nr,d.TransitionService=Lr,d.UrlRules=vr,d.UrlConfig=dr,d.UrlMatcher=nr,d.ParamFactory=or,d.UrlMatcherFactory=ar,d.UrlRouter=fr,d.UrlRuleFactory=ur,d.BaseUrlRule=sr,d.UrlService=mr,d.ViewService=lr,d.UIRouterGlobals=hr,d.UIRouter=_r,d.$q=Br,d.$injector=Jr,d.BaseLocationServices=nn,d.HashLocationService=an,d.MemoryLocationService=sn,d.PushStateLocationService=fn,d.MemoryLocationConfig=ln,d.BrowserLocationConfig=hn,d.keyValsToObjectR=Qr,d.getParams=Kr,d.parseUrl=Yr,d.buildUrl=Zr,d.locationPluginFactory=Xr,d.servicesPlugin=pn,d.hashLocationPlugin=vn,d.pushStateLocationPlugin=dn,d.memoryLocationPlugin=mn,d.UIRouterPluginBase=yn,Object.defineProperty(d,"__esModule",{value:!0})});
//# sourceMappingURL=angular-ui-router.min.js.map

/*! ngstorage 0.3.10 | Copyright (c) 2016 Gias Kay Lee | MIT License */!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):a.hasOwnProperty("angular")?b(a.angular):"object"==typeof exports&&(module.exports=b(require("angular")))}(this,function(a){"use strict";function b(a,b){var c;try{c=a[b]}catch(d){c=!1}if(c){var e="__"+Math.round(1e7*Math.random());try{a[b].setItem(e,e),a[b].removeItem(e,e)}catch(d){c=!1}}return c}function c(c){var d=b(window,c);return function(){var e="ngStorage-";this.setKeyPrefix=function(a){if("string"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setKeyPrefix() expects a String.");e=a};var f=a.toJson,g=a.fromJson;this.setSerializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setSerializer expects a function.");f=a},this.setDeserializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setDeserializer expects a function.");g=a},this.supported=function(){return!!d},this.get=function(a){return d&&g(d.getItem(e+a))},this.set=function(a,b){return d&&d.setItem(e+a,f(b))},this.remove=function(a){d&&d.removeItem(e+a)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(d,h,i,j,k){var l,m,n=e.length,o=b(h,c),p=o||(i.warn("This browser does not support Web Storage!"),{setItem:a.noop,getItem:a.noop,removeItem:a.noop}),q={$default:function(b){for(var c in b)a.isDefined(q[c])||(q[c]=a.copy(b[c]));return q.$sync(),q},$reset:function(a){for(var b in q)"$"===b[0]||delete q[b]&&p.removeItem(e+b);return q.$default(a)},$sync:function(){for(var a,b=0,c=p.length;c>b;b++)(a=p.key(b))&&e===a.slice(0,n)&&(q[a.slice(n)]=g(p.getItem(a)))},$apply:function(){var b;if(m=null,!a.equals(q,l)){b=a.copy(l),a.forEach(q,function(c,d){a.isDefined(c)&&"$"!==d[0]&&(p.setItem(e+d,f(c)),delete b[d])});for(var c in b)p.removeItem(e+c);l=a.copy(q)}},$supported:function(){return!!o}};return q.$sync(),l=a.copy(q),d.$watch(function(){m||(m=j(q.$apply,100,!1))}),h.addEventListener&&h.addEventListener("storage",function(b){if(b.key){var c=k[0];c.hasFocus&&c.hasFocus()||e!==b.key.slice(0,n)||(b.newValue?q[b.key.slice(n)]=g(b.newValue):delete q[b.key.slice(n)],l=a.copy(q),d.$apply())}}),h.addEventListener&&h.addEventListener("beforeunload",function(){q.$apply()}),q}]}}return a=a&&a.module?a:window.angular,a.module("ngStorage",[]).provider("$localStorage",c("localStorage")).provider("$sessionStorage",c("sessionStorage"))});
/**
 * @license AngularJS v1.7.8
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(window, angular) {

'use strict';

/* global routeToRegExp: true */

/**
 * @param {string} path - The path to parse. (It is assumed to have query and hash stripped off.)
 * @param {Object} opts - Options.
 * @return {Object} - An object containing an array of path parameter names (`keys`) and a regular
 *     expression (`regexp`) that can be used to identify a matching URL and extract the path
 *     parameter values.
 *
 * @description
 * Parses the given path, extracting path parameter names and a regular expression to match URLs.
 *
 * Originally inspired by `pathRexp` in `visionmedia/express/lib/utils.js`.
 */
function routeToRegExp(path, opts) {
  var keys = [];

  var pattern = path
    .replace(/([().])/g, '\\$1')
    .replace(/(\/)?:(\w+)(\*\?|[?*])?/g, function(_, slash, key, option) {
      var optional = option === '?' || option === '*?';
      var star = option === '*' || option === '*?';
      keys.push({name: key, optional: optional});
      slash = slash || '';
      return (
        (optional ? '(?:' + slash : slash + '(?:') +
        (star ? '(.+?)' : '([^/]+)') +
        (optional ? '?)?' : ')')
      );
    })
    .replace(/([/$*])/g, '\\$1');

  if (opts.ignoreTrailingSlashes) {
    pattern = pattern.replace(/\/+$/, '') + '/*';
  }

  return {
    keys: keys,
    regexp: new RegExp(
      '^' + pattern + '(?:[?#]|$)',
      opts.caseInsensitiveMatch ? 'i' : ''
    )
  };
}

'use strict';

/* global routeToRegExp: false */

/**
 * @ngdoc object
 * @name angular.mock
 * @description
 *
 * Namespace from 'angular-mocks.js' which contains testing related code.
 *
 */
angular.mock = {};

/**
 * ! This is a private undocumented service !
 *
 * @name $browser
 *
 * @description
 * This service is a mock implementation of {@link ng.$browser}. It provides fake
 * implementation for commonly used browser apis that are hard to test, e.g. setTimeout, xhr,
 * cookies, etc.
 *
 * The api of this service is the same as that of the real {@link ng.$browser $browser}, except
 * that there are several helper methods available which can be used in tests.
 */
angular.mock.$BrowserProvider = function() {
  this.$get = [
    '$log', '$$taskTrackerFactory',
    function($log, $$taskTrackerFactory) {
      return new angular.mock.$Browser($log, $$taskTrackerFactory);
    }
  ];
};

angular.mock.$Browser = function($log, $$taskTrackerFactory) {
  var self = this;
  var taskTracker = $$taskTrackerFactory($log);

  this.isMock = true;
  self.$$url = 'http://server/';
  self.$$lastUrl = self.$$url; // used by url polling fn
  self.pollFns = [];

  // Task-tracking API
  self.$$completeOutstandingRequest = taskTracker.completeTask;
  self.$$incOutstandingRequestCount = taskTracker.incTaskCount;
  self.notifyWhenNoOutstandingRequests = taskTracker.notifyWhenNoPendingTasks;

  // register url polling fn

  self.onUrlChange = function(listener) {
    self.pollFns.push(
      function() {
        if (self.$$lastUrl !== self.$$url || self.$$state !== self.$$lastState) {
          self.$$lastUrl = self.$$url;
          self.$$lastState = self.$$state;
          listener(self.$$url, self.$$state);
        }
      }
    );

    return listener;
  };

  self.$$applicationDestroyed = angular.noop;
  self.$$checkUrlChange = angular.noop;

  self.deferredFns = [];
  self.deferredNextId = 0;

  self.defer = function(fn, delay, taskType) {
    var timeoutId = self.deferredNextId++;

    delay = delay || 0;
    taskType = taskType || taskTracker.DEFAULT_TASK_TYPE;

    taskTracker.incTaskCount(taskType);
    self.deferredFns.push({
      id: timeoutId,
      type: taskType,
      time: (self.defer.now + delay),
      fn: fn
    });
    self.deferredFns.sort(function(a, b) { return a.time - b.time; });

    return timeoutId;
  };


  /**
   * @name $browser#defer.now
   *
   * @description
   * Current milliseconds mock time.
   */
  self.defer.now = 0;


  self.defer.cancel = function(deferId) {
    var taskIndex;

    angular.forEach(self.deferredFns, function(task, index) {
      if (task.id === deferId) taskIndex = index;
    });

    if (angular.isDefined(taskIndex)) {
      var task = self.deferredFns.splice(taskIndex, 1)[0];
      taskTracker.completeTask(angular.noop, task.type);
      return true;
    }

    return false;
  };


  /**
   * @name $browser#defer.flush
   *
   * @description
   * Flushes all pending requests and executes the defer callbacks.
   *
   * See {@link ngMock.$flushPendingsTasks} for more info.
   *
   * @param {number=} number of milliseconds to flush. See {@link #defer.now}
   */
  self.defer.flush = function(delay) {
    var nextTime;

    if (angular.isDefined(delay)) {
      // A delay was passed so compute the next time
      nextTime = self.defer.now + delay;
    } else if (self.deferredFns.length) {
      // No delay was passed so set the next time so that it clears the deferred queue
      nextTime = self.deferredFns[self.deferredFns.length - 1].time;
    } else {
      // No delay passed, but there are no deferred tasks so flush - indicates an error!
      throw new Error('No deferred tasks to be flushed');
    }

    while (self.deferredFns.length && self.deferredFns[0].time <= nextTime) {
      // Increment the time and call the next deferred function
      self.defer.now = self.deferredFns[0].time;
      var task = self.deferredFns.shift();
      taskTracker.completeTask(task.fn, task.type);
    }

    // Ensure that the current time is correct
    self.defer.now = nextTime;
  };

  /**
   * @name $browser#defer.getPendingTasks
   *
   * @description
   * Returns the currently pending tasks that need to be flushed.
   * You can request a specific type of tasks only, by specifying a `taskType`.
   *
   * @param {string=} taskType - The type tasks to return.
   */
  self.defer.getPendingTasks = function(taskType) {
    return !taskType
        ? self.deferredFns
        : self.deferredFns.filter(function(task) { return task.type === taskType; });
  };

  /**
   * @name $browser#defer.formatPendingTasks
   *
   * @description
   * Formats each task in a list of pending tasks as a string, suitable for use in error messages.
   *
   * @param {Array<Object>} pendingTasks - A list of task objects.
   * @return {Array<string>} A list of stringified tasks.
   */
  self.defer.formatPendingTasks = function(pendingTasks) {
    return pendingTasks.map(function(task) {
      return '{id: ' + task.id + ', type: ' + task.type + ', time: ' + task.time + '}';
    });
  };

  /**
   * @name $browser#defer.verifyNoPendingTasks
   *
   * @description
   * Verifies that there are no pending tasks that need to be flushed.
   * You can check for a specific type of tasks only, by specifying a `taskType`.
   *
   * See {@link $verifyNoPendingTasks} for more info.
   *
   * @param {string=} taskType - The type tasks to check for.
   */
  self.defer.verifyNoPendingTasks = function(taskType) {
    var pendingTasks = self.defer.getPendingTasks(taskType);

    if (pendingTasks.length) {
      var formattedTasks = self.defer.formatPendingTasks(pendingTasks).join('\n  ');
      throw new Error('Deferred tasks to flush (' + pendingTasks.length + '):\n  ' +
          formattedTasks);
    }
  };

  self.$$baseHref = '/';
  self.baseHref = function() {
    return this.$$baseHref;
  };
};
angular.mock.$Browser.prototype = {

  /**
   * @name $browser#poll
   *
   * @description
   * run all fns in pollFns
   */
  poll: function poll() {
    angular.forEach(this.pollFns, function(pollFn) {
      pollFn();
    });
  },

  url: function(url, replace, state) {
    if (angular.isUndefined(state)) {
      state = null;
    }
    if (url) {
      // The `$browser` service trims empty hashes; simulate it.
      this.$$url = url.replace(/#$/, '');
      // Native pushState serializes & copies the object; simulate it.
      this.$$state = angular.copy(state);
      return this;
    }

    return this.$$url;
  },

  state: function() {
    return this.$$state;
  }
};

/**
 * @ngdoc service
 * @name $flushPendingTasks
 *
 * @description
 * Flushes all currently pending tasks and executes the corresponding callbacks.
 *
 * Optionally, you can also pass a `delay` argument to only flush tasks that are scheduled to be
 * executed within `delay` milliseconds. Currently, `delay` only applies to timeouts, since all
 * other tasks have a delay of 0 (i.e. they are scheduled to be executed as soon as possible, but
 * still asynchronously).
 *
 * If no delay is specified, it uses a delay such that all currently pending tasks are flushed.
 *
 * The types of tasks that are flushed include:
 *
 * - Pending timeouts (via {@link $timeout}).
 * - Pending tasks scheduled via {@link ng.$rootScope.Scope#$applyAsync $applyAsync}.
 * - Pending tasks scheduled via {@link ng.$rootScope.Scope#$evalAsync $evalAsync}.
 *   These include tasks scheduled via `$evalAsync()` indirectly (such as {@link $q} promises).
 *
 * <div class="alert alert-info">
 *   Periodic tasks scheduled via {@link $interval} use a different queue and are not flushed by
 *   `$flushPendingTasks()`. Use {@link ngMock.$interval#flush $interval.flush(millis)} instead.
 * </div>
 *
 * @param {number=} delay - The number of milliseconds to flush.
 */
angular.mock.$FlushPendingTasksProvider = function() {
  this.$get = [
    '$browser',
    function($browser) {
      return function $flushPendingTasks(delay) {
        return $browser.defer.flush(delay);
      };
    }
  ];
};

/**
 * @ngdoc service
 * @name $verifyNoPendingTasks
 *
 * @description
 * Verifies that there are no pending tasks that need to be flushed. It throws an error if there are
 * still pending tasks.
 *
 * You can check for a specific type of tasks only, by specifying a `taskType`.
 *
 * Available task types:
 *
 * - `$timeout`: Pending timeouts (via {@link $timeout}).
 * - `$http`: Pending HTTP requests (via {@link $http}).
 * - `$route`: In-progress route transitions (via {@link $route}).
 * - `$applyAsync`: Pending tasks scheduled via {@link ng.$rootScope.Scope#$applyAsync $applyAsync}.
 * - `$evalAsync`: Pending tasks scheduled via {@link ng.$rootScope.Scope#$evalAsync $evalAsync}.
 *   These include tasks scheduled via `$evalAsync()` indirectly (such as {@link $q} promises).
 *
 * <div class="alert alert-info">
 *   Periodic tasks scheduled via {@link $interval} use a different queue and are not taken into
 *   account by `$verifyNoPendingTasks()`. There is currently no way to verify that there are no
 *   pending {@link $interval} tasks.
 * </div>
 *
 * @param {string=} taskType - The type of tasks to check for.
 */
angular.mock.$VerifyNoPendingTasksProvider = function() {
  this.$get = [
    '$browser',
    function($browser) {
      return function $verifyNoPendingTasks(taskType) {
        return $browser.defer.verifyNoPendingTasks(taskType);
      };
    }
  ];
};

/**
 * @ngdoc provider
 * @name $exceptionHandlerProvider
 *
 * @description
 * Configures the mock implementation of {@link ng.$exceptionHandler} to rethrow or to log errors
 * passed to the `$exceptionHandler`.
 */

/**
 * @ngdoc service
 * @name $exceptionHandler
 *
 * @description
 * Mock implementation of {@link ng.$exceptionHandler} that rethrows or logs errors passed
 * to it. See {@link ngMock.$exceptionHandlerProvider $exceptionHandlerProvider} for configuration
 * information.
 *
 *
 * ```js
 *   describe('$exceptionHandlerProvider', function() {
 *
 *     it('should capture log messages and exceptions', function() {
 *
 *       module(function($exceptionHandlerProvider) {
 *         $exceptionHandlerProvider.mode('log');
 *       });
 *
 *       inject(function($log, $exceptionHandler, $timeout) {
 *         $timeout(function() { $log.log(1); });
 *         $timeout(function() { $log.log(2); throw 'banana peel'; });
 *         $timeout(function() { $log.log(3); });
 *         expect($exceptionHandler.errors).toEqual([]);
 *         expect($log.assertEmpty());
 *         $timeout.flush();
 *         expect($exceptionHandler.errors).toEqual(['banana peel']);
 *         expect($log.log.logs).toEqual([[1], [2], [3]]);
 *       });
 *     });
 *   });
 * ```
 */

angular.mock.$ExceptionHandlerProvider = function() {
  var handler;

  /**
   * @ngdoc method
   * @name $exceptionHandlerProvider#mode
   *
   * @description
   * Sets the logging mode.
   *
   * @param {string} mode Mode of operation, defaults to `rethrow`.
   *
   *   - `log`: Sometimes it is desirable to test that an error is thrown, for this case the `log`
   *     mode stores an array of errors in `$exceptionHandler.errors`, to allow later assertion of
   *     them. See {@link ngMock.$log#assertEmpty assertEmpty()} and
   *     {@link ngMock.$log#reset reset()}.
   *   - `rethrow`: If any errors are passed to the handler in tests, it typically means that there
   *     is a bug in the application or test, so this mock will make these tests fail. For any
   *     implementations that expect exceptions to be thrown, the `rethrow` mode will also maintain
   *     a log of thrown errors in `$exceptionHandler.errors`.
   */
  this.mode = function(mode) {

    switch (mode) {
      case 'log':
      case 'rethrow':
        var errors = [];
        handler = function(e) {
          if (arguments.length === 1) {
            errors.push(e);
          } else {
            errors.push([].slice.call(arguments, 0));
          }
          if (mode === 'rethrow') {
            throw e;
          }
        };
        handler.errors = errors;
        break;
      default:
        throw new Error('Unknown mode \'' + mode + '\', only \'log\'/\'rethrow\' modes are allowed!');
    }
  };

  this.$get = function() {
    return handler;
  };

  this.mode('rethrow');
};


/**
 * @ngdoc service
 * @name $log
 *
 * @description
 * Mock implementation of {@link ng.$log} that gathers all logged messages in arrays
 * (one array per logging level). These arrays are exposed as `logs` property of each of the
 * level-specific log function, e.g. for level `error` the array is exposed as `$log.error.logs`.
 *
 */
angular.mock.$LogProvider = function() {
  var debug = true;

  function concat(array1, array2, index) {
    return array1.concat(Array.prototype.slice.call(array2, index));
  }

  this.debugEnabled = function(flag) {
    if (angular.isDefined(flag)) {
      debug = flag;
      return this;
    } else {
      return debug;
    }
  };

  this.$get = function() {
    var $log = {
      log: function() { $log.log.logs.push(concat([], arguments, 0)); },
      warn: function() { $log.warn.logs.push(concat([], arguments, 0)); },
      info: function() { $log.info.logs.push(concat([], arguments, 0)); },
      error: function() { $log.error.logs.push(concat([], arguments, 0)); },
      debug: function() {
        if (debug) {
          $log.debug.logs.push(concat([], arguments, 0));
        }
      }
    };

    /**
     * @ngdoc method
     * @name $log#reset
     *
     * @description
     * Reset all of the logging arrays to empty.
     */
    $log.reset = function() {
      /**
       * @ngdoc property
       * @name $log#log.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#log `log()`}.
       *
       * @example
       * ```js
       * $log.log('Some Log');
       * var first = $log.log.logs.unshift();
       * ```
       */
      $log.log.logs = [];
      /**
       * @ngdoc property
       * @name $log#info.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#info `info()`}.
       *
       * @example
       * ```js
       * $log.info('Some Info');
       * var first = $log.info.logs.unshift();
       * ```
       */
      $log.info.logs = [];
      /**
       * @ngdoc property
       * @name $log#warn.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#warn `warn()`}.
       *
       * @example
       * ```js
       * $log.warn('Some Warning');
       * var first = $log.warn.logs.unshift();
       * ```
       */
      $log.warn.logs = [];
      /**
       * @ngdoc property
       * @name $log#error.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#error `error()`}.
       *
       * @example
       * ```js
       * $log.error('Some Error');
       * var first = $log.error.logs.unshift();
       * ```
       */
      $log.error.logs = [];
        /**
       * @ngdoc property
       * @name $log#debug.logs
       *
       * @description
       * Array of messages logged using {@link ng.$log#debug `debug()`}.
       *
       * @example
       * ```js
       * $log.debug('Some Error');
       * var first = $log.debug.logs.unshift();
       * ```
       */
      $log.debug.logs = [];
    };

    /**
     * @ngdoc method
     * @name $log#assertEmpty
     *
     * @description
     * Assert that all of the logging methods have no logged messages. If any messages are present,
     * an exception is thrown.
     */
    $log.assertEmpty = function() {
      var errors = [];
      angular.forEach(['error', 'warn', 'info', 'log', 'debug'], function(logLevel) {
        angular.forEach($log[logLevel].logs, function(log) {
          angular.forEach(log, function(logItem) {
            errors.push('MOCK $log (' + logLevel + '): ' + String(logItem) + '\n' +
                        (logItem.stack || ''));
          });
        });
      });
      if (errors.length) {
        errors.unshift('Expected $log to be empty! Either a message was logged unexpectedly, or ' +
          'an expected log message was not checked and removed:');
        errors.push('');
        throw new Error(errors.join('\n---------\n'));
      }
    };

    $log.reset();
    return $log;
  };
};


/**
 * @ngdoc service
 * @name $interval
 *
 * @description
 * Mock implementation of the $interval service.
 *
 * Use {@link ngMock.$interval#flush `$interval.flush(millis)`} to
 * move forward by `millis` milliseconds and trigger any functions scheduled to run in that
 * time.
 *
 * @param {function()} fn A function that should be called repeatedly.
 * @param {number} delay Number of milliseconds between each function call.
 * @param {number=} [count=0] Number of times to repeat. If not set, or 0, will repeat
 *   indefinitely.
 * @param {boolean=} [invokeApply=true] If set to `false` skips model dirty checking, otherwise
 *   will invoke `fn` within the {@link ng.$rootScope.Scope#$apply $apply} block.
 * @param {...*=} Pass additional parameters to the executed function.
 * @returns {promise} A promise which will be notified on each iteration.
 */
angular.mock.$IntervalProvider = function() {
  this.$get = ['$browser', '$$intervalFactory',
       function($browser,   $$intervalFactory) {
    var repeatFns = [],
        nextRepeatId = 0,
        now = 0,
        setIntervalFn = function(tick, delay, deferred, skipApply) {
          var id = nextRepeatId++;
          var fn = !skipApply ? tick : function() {
            tick();
            $browser.defer.flush();
          };

          repeatFns.push({
            nextTime: (now + (delay || 0)),
            delay: delay || 1,
            fn: fn,
            id: id,
            deferred: deferred
          });
          repeatFns.sort(function(a, b) { return a.nextTime - b.nextTime; });

          return id;
        },
        clearIntervalFn = function(id) {
          for (var fnIndex = repeatFns.length - 1; fnIndex >= 0; fnIndex--) {
            if (repeatFns[fnIndex].id === id) {
              repeatFns.splice(fnIndex, 1);
              break;
            }
          }
        };

    var $interval = $$intervalFactory(setIntervalFn, clearIntervalFn);

    /**
     * @ngdoc method
     * @name $interval#cancel
     *
     * @description
     * Cancels a task associated with the `promise`.
     *
     * @param {promise} promise A promise from calling the `$interval` function.
     * @returns {boolean} Returns `true` if the task was successfully cancelled.
     */
    $interval.cancel = function(promise) {
      if (!promise) return false;

      for (var fnIndex = repeatFns.length - 1; fnIndex >= 0; fnIndex--) {
        if (repeatFns[fnIndex].id === promise.$$intervalId) {
          var deferred = repeatFns[fnIndex].deferred;
          deferred.promise.then(undefined, function() {});
          deferred.reject('canceled');
          repeatFns.splice(fnIndex, 1);
          return true;
        }
      }

      return false;
    };

    /**
     * @ngdoc method
     * @name $interval#flush
     * @description
     *
     * Runs interval tasks scheduled to be run in the next `millis` milliseconds.
     *
     * @param {number} millis maximum timeout amount to flush up until.
     *
     * @return {number} The amount of time moved forward.
     */
    $interval.flush = function(millis) {
      var before = now;
      now += millis;
      while (repeatFns.length && repeatFns[0].nextTime <= now) {
        var task = repeatFns[0];
        task.fn();
        if (task.nextTime === before) {
          // this can only happen the first time
          // a zero-delay interval gets triggered
          task.nextTime++;
        }
        task.nextTime += task.delay;
        repeatFns.sort(function(a, b) { return a.nextTime - b.nextTime;});
      }
      return millis;
    };

    return $interval;
  }];
};


function jsonStringToDate(string) {
  // The R_ISO8061_STR regex is never going to fit into the 100 char limit!
  // eslit-disable-next-line max-len
  var R_ISO8061_STR = /^(-?\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;

  var match;
  if ((match = string.match(R_ISO8061_STR))) {
    var date = new Date(0),
        tzHour = 0,
        tzMin  = 0;
    if (match[9]) {
      tzHour = toInt(match[9] + match[10]);
      tzMin = toInt(match[9] + match[11]);
    }
    date.setUTCFullYear(toInt(match[1]), toInt(match[2]) - 1, toInt(match[3]));
    date.setUTCHours(toInt(match[4] || 0) - tzHour,
                     toInt(match[5] || 0) - tzMin,
                     toInt(match[6] || 0),
                     toInt(match[7] || 0));
    return date;
  }
  return string;
}

function toInt(str) {
  return parseInt(str, 10);
}

function padNumberInMock(num, digits, trim) {
  var neg = '';
  if (num < 0) {
    neg =  '-';
    num = -num;
  }
  num = '' + num;
  while (num.length < digits) num = '0' + num;
  if (trim) {
    num = num.substr(num.length - digits);
  }
  return neg + num;
}


/**
 * @ngdoc type
 * @name angular.mock.TzDate
 * @description
 *
 * *NOTE*: this is not an injectable instance, just a globally available mock class of `Date`.
 *
 * Mock of the Date type which has its timezone specified via constructor arg.
 *
 * The main purpose is to create Date-like instances with timezone fixed to the specified timezone
 * offset, so that we can test code that depends on local timezone settings without dependency on
 * the time zone settings of the machine where the code is running.
 *
 * @param {number} offset Offset of the *desired* timezone in hours (fractions will be honored)
 * @param {(number|string)} timestamp Timestamp representing the desired time in *UTC*
 *
 * @example
 * !!!! WARNING !!!!!
 * This is not a complete Date object so only methods that were implemented can be called safely.
 * To make matters worse, TzDate instances inherit stuff from Date via a prototype.
 *
 * We do our best to intercept calls to "unimplemented" methods, but since the list of methods is
 * incomplete we might be missing some non-standard methods. This can result in errors like:
 * "Date.prototype.foo called on incompatible Object".
 *
 * ```js
 * var newYearInBratislava = new TzDate(-1, '2009-12-31T23:00:00Z');
 * newYearInBratislava.getTimezoneOffset() => -60;
 * newYearInBratislava.getFullYear() => 2010;
 * newYearInBratislava.getMonth() => 0;
 * newYearInBratislava.getDate() => 1;
 * newYearInBratislava.getHours() => 0;
 * newYearInBratislava.getMinutes() => 0;
 * newYearInBratislava.getSeconds() => 0;
 * ```
 *
 */
angular.mock.TzDate = function(offset, timestamp) {
  var self = new Date(0);
  if (angular.isString(timestamp)) {
    var tsStr = timestamp;

    self.origDate = jsonStringToDate(timestamp);

    timestamp = self.origDate.getTime();
    if (isNaN(timestamp)) {
      // eslint-disable-next-line no-throw-literal
      throw {
        name: 'Illegal Argument',
        message: 'Arg \'' + tsStr + '\' passed into TzDate constructor is not a valid date string'
      };
    }
  } else {
    self.origDate = new Date(timestamp);
  }

  var localOffset = new Date(timestamp).getTimezoneOffset();
  self.offsetDiff = localOffset * 60 * 1000 - offset * 1000 * 60 * 60;
  self.date = new Date(timestamp + self.offsetDiff);

  self.getTime = function() {
    return self.date.getTime() - self.offsetDiff;
  };

  self.toLocaleDateString = function() {
    return self.date.toLocaleDateString();
  };

  self.getFullYear = function() {
    return self.date.getFullYear();
  };

  self.getMonth = function() {
    return self.date.getMonth();
  };

  self.getDate = function() {
    return self.date.getDate();
  };

  self.getHours = function() {
    return self.date.getHours();
  };

  self.getMinutes = function() {
    return self.date.getMinutes();
  };

  self.getSeconds = function() {
    return self.date.getSeconds();
  };

  self.getMilliseconds = function() {
    return self.date.getMilliseconds();
  };

  self.getTimezoneOffset = function() {
    return offset * 60;
  };

  self.getUTCFullYear = function() {
    return self.origDate.getUTCFullYear();
  };

  self.getUTCMonth = function() {
    return self.origDate.getUTCMonth();
  };

  self.getUTCDate = function() {
    return self.origDate.getUTCDate();
  };

  self.getUTCHours = function() {
    return self.origDate.getUTCHours();
  };

  self.getUTCMinutes = function() {
    return self.origDate.getUTCMinutes();
  };

  self.getUTCSeconds = function() {
    return self.origDate.getUTCSeconds();
  };

  self.getUTCMilliseconds = function() {
    return self.origDate.getUTCMilliseconds();
  };

  self.getDay = function() {
    return self.date.getDay();
  };

  // provide this method only on browsers that already have it
  if (self.toISOString) {
    self.toISOString = function() {
      return padNumberInMock(self.origDate.getUTCFullYear(), 4) + '-' +
            padNumberInMock(self.origDate.getUTCMonth() + 1, 2) + '-' +
            padNumberInMock(self.origDate.getUTCDate(), 2) + 'T' +
            padNumberInMock(self.origDate.getUTCHours(), 2) + ':' +
            padNumberInMock(self.origDate.getUTCMinutes(), 2) + ':' +
            padNumberInMock(self.origDate.getUTCSeconds(), 2) + '.' +
            padNumberInMock(self.origDate.getUTCMilliseconds(), 3) + 'Z';
    };
  }

  //hide all methods not implemented in this mock that the Date prototype exposes
  var unimplementedMethods = ['getUTCDay',
      'getYear', 'setDate', 'setFullYear', 'setHours', 'setMilliseconds',
      'setMinutes', 'setMonth', 'setSeconds', 'setTime', 'setUTCDate', 'setUTCFullYear',
      'setUTCHours', 'setUTCMilliseconds', 'setUTCMinutes', 'setUTCMonth', 'setUTCSeconds',
      'setYear', 'toDateString', 'toGMTString', 'toJSON', 'toLocaleFormat', 'toLocaleString',
      'toLocaleTimeString', 'toSource', 'toString', 'toTimeString', 'toUTCString', 'valueOf'];

  angular.forEach(unimplementedMethods, function(methodName) {
    self[methodName] = function() {
      throw new Error('Method \'' + methodName + '\' is not implemented in the TzDate mock');
    };
  });

  return self;
};

//make "tzDateInstance instanceof Date" return true
angular.mock.TzDate.prototype = Date.prototype;


/**
 * @ngdoc service
 * @name $animate
 *
 * @description
 * Mock implementation of the {@link ng.$animate `$animate`} service. Exposes two additional methods
 * for testing animations.
 *
 * You need to require the `ngAnimateMock` module in your test suite for instance `beforeEach(module('ngAnimateMock'))`
 */
angular.mock.animate = angular.module('ngAnimateMock', ['ng'])
  .info({ angularVersion: '1.7.8' })

  .config(['$provide', function($provide) {

    $provide.factory('$$forceReflow', function() {
      function reflowFn() {
        reflowFn.totalReflows++;
      }
      reflowFn.totalReflows = 0;
      return reflowFn;
    });

    $provide.factory('$$animateAsyncRun', function() {
      var queue = [];
      var queueFn = function() {
        return function(fn) {
          queue.push(fn);
        };
      };
      queueFn.flush = function() {
        if (queue.length === 0) return false;

        for (var i = 0; i < queue.length; i++) {
          queue[i]();
        }
        queue = [];

        return true;
      };
      return queueFn;
    });

    $provide.decorator('$$animateJs', ['$delegate', function($delegate) {
      var runners = [];

      var animateJsConstructor = function() {
        var animator = $delegate.apply($delegate, arguments);
        // If no javascript animation is found, animator is undefined
        if (animator) {
          runners.push(animator);
        }
        return animator;
      };

      animateJsConstructor.$closeAndFlush = function() {
        runners.forEach(function(runner) {
          runner.end();
        });
        runners = [];
      };

      return animateJsConstructor;
    }]);

    $provide.decorator('$animateCss', ['$delegate', function($delegate) {
      var runners = [];

      var animateCssConstructor = function(element, options) {
        var animator = $delegate(element, options);
        runners.push(animator);
        return animator;
      };

      animateCssConstructor.$closeAndFlush = function() {
        runners.forEach(function(runner) {
          runner.end();
        });
        runners = [];
      };

      return animateCssConstructor;
    }]);

    $provide.decorator('$animate', ['$delegate', '$timeout', '$browser', '$$rAF', '$animateCss', '$$animateJs',
                                    '$$forceReflow', '$$animateAsyncRun', '$rootScope',
                            function($delegate,   $timeout,   $browser,   $$rAF,   $animateCss,   $$animateJs,
                                     $$forceReflow,   $$animateAsyncRun,  $rootScope) {
      var animate = {
        queue: [],
        cancel: $delegate.cancel,
        on: $delegate.on,
        off: $delegate.off,
        pin: $delegate.pin,
        get reflows() {
          return $$forceReflow.totalReflows;
        },
        enabled: $delegate.enabled,
        /**
         * @ngdoc method
         * @name $animate#closeAndFlush
         * @description
         *
         * This method will close all pending animations (both {@link ngAnimate#javascript-based-animations Javascript}
         * and {@link ngAnimate.$animateCss CSS}) and it will also flush any remaining animation frames and/or callbacks.
         */
        closeAndFlush: function() {
          // we allow the flush command to swallow the errors
          // because depending on whether CSS or JS animations are
          // used, there may not be a RAF flush. The primary flush
          // at the end of this function must throw an exception
          // because it will track if there were pending animations
          this.flush(true);
          $animateCss.$closeAndFlush();
          $$animateJs.$closeAndFlush();
          this.flush();
        },
        /**
         * @ngdoc method
         * @name $animate#flush
         * @description
         *
         * This method is used to flush the pending callbacks and animation frames to either start
         * an animation or conclude an animation. Note that this will not actually close an
         * actively running animation (see {@link ngMock.$animate#closeAndFlush `closeAndFlush()`} for that).
         */
        flush: function(hideErrors) {
          $rootScope.$digest();

          var doNextRun, somethingFlushed = false;
          do {
            doNextRun = false;

            if ($$rAF.queue.length) {
              $$rAF.flush();
              doNextRun = somethingFlushed = true;
            }

            if ($$animateAsyncRun.flush()) {
              doNextRun = somethingFlushed = true;
            }
          } while (doNextRun);

          if (!somethingFlushed && !hideErrors) {
            throw new Error('No pending animations ready to be closed or flushed');
          }

          $rootScope.$digest();
        }
      };

      angular.forEach(
        ['animate','enter','leave','move','addClass','removeClass','setClass'], function(method) {
        animate[method] = function() {
          animate.queue.push({
            event: method,
            element: arguments[0],
            options: arguments[arguments.length - 1],
            args: arguments
          });
          return $delegate[method].apply($delegate, arguments);
        };
      });

      return animate;
    }]);

  }]);


/**
 * @ngdoc function
 * @name angular.mock.dump
 * @description
 *
 * *NOTE*: This is not an injectable instance, just a globally available function.
 *
 * Method for serializing common AngularJS objects (scope, elements, etc..) into strings.
 * It is useful for logging objects to the console when debugging.
 *
 * @param {*} object - any object to turn into string.
 * @return {string} a serialized string of the argument
 */
angular.mock.dump = function(object) {
  return serialize(object);

  function serialize(object) {
    var out;

    if (angular.isElement(object)) {
      object = angular.element(object);
      out = angular.element('<div></div>');
      angular.forEach(object, function(element) {
        out.append(angular.element(element).clone());
      });
      out = out.html();
    } else if (angular.isArray(object)) {
      out = [];
      angular.forEach(object, function(o) {
        out.push(serialize(o));
      });
      out = '[ ' + out.join(', ') + ' ]';
    } else if (angular.isObject(object)) {
      if (angular.isFunction(object.$eval) && angular.isFunction(object.$apply)) {
        out = serializeScope(object);
      } else if (object instanceof Error) {
        out = object.stack || ('' + object.name + ': ' + object.message);
      } else {
        // TODO(i): this prevents methods being logged,
        // we should have a better way to serialize objects
        out = angular.toJson(object, true);
      }
    } else {
      out = String(object);
    }

    return out;
  }

  function serializeScope(scope, offset) {
    offset = offset ||  '  ';
    var log = [offset + 'Scope(' + scope.$id + '): {'];
    for (var key in scope) {
      if (Object.prototype.hasOwnProperty.call(scope, key) && !key.match(/^(\$|this)/)) {
        log.push('  ' + key + ': ' + angular.toJson(scope[key]));
      }
    }
    var child = scope.$$childHead;
    while (child) {
      log.push(serializeScope(child, offset + '  '));
      child = child.$$nextSibling;
    }
    log.push('}');
    return log.join('\n' + offset);
  }
};

/**
 * @ngdoc service
 * @name $httpBackend
 * @description
 * Fake HTTP backend implementation suitable for unit testing applications that use the
 * {@link ng.$http $http service}.
 *
 * <div class="alert alert-info">
 * **Note**: For fake HTTP backend implementation suitable for end-to-end testing or backend-less
 * development please see {@link ngMockE2E.$httpBackend e2e $httpBackend mock}.
 * </div>
 *
 * During unit testing, we want our unit tests to run quickly and have no external dependencies so
 * we dont want to send [XHR](https://developer.mozilla.org/en/xmlhttprequest) or
 * [JSONP](http://en.wikipedia.org/wiki/JSONP) requests to a real server. All we really need is
 * to verify whether a certain request has been sent or not, or alternatively just let the
 * application make requests, respond with pre-trained responses and assert that the end result is
 * what we expect it to be.
 *
 * This mock implementation can be used to respond with static or dynamic responses via the
 * `expect` and `when` apis and their shortcuts (`expectGET`, `whenPOST`, etc).
 *
 * When an AngularJS application needs some data from a server, it calls the $http service, which
 * sends the request to a real server using $httpBackend service. With dependency injection, it is
 * easy to inject $httpBackend mock (which has the same API as $httpBackend) and use it to verify
 * the requests and respond with some testing data without sending a request to a real server.
 *
 * There are two ways to specify what test data should be returned as http responses by the mock
 * backend when the code under test makes http requests:
 *
 * - `$httpBackend.expect` - specifies a request expectation
 * - `$httpBackend.when` - specifies a backend definition
 *
 *
 * ## Request Expectations vs Backend Definitions
 *
 * Request expectations provide a way to make assertions about requests made by the application and
 * to define responses for those requests. The test will fail if the expected requests are not made
 * or they are made in the wrong order.
 *
 * Backend definitions allow you to define a fake backend for your application which doesn't assert
 * if a particular request was made or not, it just returns a trained response if a request is made.
 * The test will pass whether or not the request gets made during testing.
 *
 *
 * <table class="table">
 *   <tr><th width="220px"></th><th>Request expectations</th><th>Backend definitions</th></tr>
 *   <tr>
 *     <th>Syntax</th>
 *     <td>.expect(...).respond(...)</td>
 *     <td>.when(...).respond(...)</td>
 *   </tr>
 *   <tr>
 *     <th>Typical usage</th>
 *     <td>strict unit tests</td>
 *     <td>loose (black-box) unit testing</td>
 *   </tr>
 *   <tr>
 *     <th>Fulfills multiple requests</th>
 *     <td>NO</td>
 *     <td>YES</td>
 *   </tr>
 *   <tr>
 *     <th>Order of requests matters</th>
 *     <td>YES</td>
 *     <td>NO</td>
 *   </tr>
 *   <tr>
 *     <th>Request required</th>
 *     <td>YES</td>
 *     <td>NO</td>
 *   </tr>
 *   <tr>
 *     <th>Response required</th>
 *     <td>optional (see below)</td>
 *     <td>YES</td>
 *   </tr>
 * </table>
 *
 * In cases where both backend definitions and request expectations are specified during unit
 * testing, the request expectations are evaluated first.
 *
 * If a request expectation has no response specified, the algorithm will search your backend
 * definitions for an appropriate response.
 *
 * If a request didn't match any expectation or if the expectation doesn't have the response
 * defined, the backend definitions are evaluated in sequential order to see if any of them match
 * the request. The response from the first matched definition is returned.
 *
 *
 * ## Flushing HTTP requests
 *
 * The $httpBackend used in production always responds to requests asynchronously. If we preserved
 * this behavior in unit testing, we'd have to create async unit tests, which are hard to write,
 * to follow and to maintain. But neither can the testing mock respond synchronously; that would
 * change the execution of the code under test. For this reason, the mock $httpBackend has a
 * `flush()` method, which allows the test to explicitly flush pending requests. This preserves
 * the async api of the backend, while allowing the test to execute synchronously.
 *
 *
 * ## Unit testing with mock $httpBackend
 * The following code shows how to setup and use the mock backend when unit testing a controller.
 * First we create the controller under test:
 *
  ```js
  // The module code
  angular
    .module('MyApp', [])
    .controller('MyController', MyController);

  // The controller code
  function MyController($scope, $http) {
    var authToken;

    $http.get('/auth.py').then(function(response) {
      authToken = response.headers('A-Token');
      $scope.user = response.data;
    }).catch(function() {
      $scope.status = 'Failed...';
    });

    $scope.saveMessage = function(message) {
      var headers = { 'Authorization': authToken };
      $scope.status = 'Saving...';

      $http.post('/add-msg.py', message, { headers: headers } ).then(function(response) {
        $scope.status = '';
      }).catch(function() {
        $scope.status = 'Failed...';
      });
    };
  }
  ```
 *
 * Now we setup the mock backend and create the test specs:
 *
  ```js
    // testing controller
    describe('MyController', function() {
       var $httpBackend, $rootScope, createController, authRequestHandler;

       // Set up the module
       beforeEach(module('MyApp'));

       beforeEach(inject(function($injector) {
         // Set up the mock http service responses
         $httpBackend = $injector.get('$httpBackend');
         // backend definition common for all tests
         authRequestHandler = $httpBackend.when('GET', '/auth.py')
                                .respond({userId: 'userX'}, {'A-Token': 'xxx'});

         // Get hold of a scope (i.e. the root scope)
         $rootScope = $injector.get('$rootScope');
         // The $controller service is used to create instances of controllers
         var $controller = $injector.get('$controller');

         createController = function() {
           return $controller('MyController', {'$scope' : $rootScope });
         };
       }));


       afterEach(function() {
         $httpBackend.verifyNoOutstandingExpectation();
         $httpBackend.verifyNoOutstandingRequest();
       });


       it('should fetch authentication token', function() {
         $httpBackend.expectGET('/auth.py');
         var controller = createController();
         $httpBackend.flush();
       });


       it('should fail authentication', function() {

         // Notice how you can change the response even after it was set
         authRequestHandler.respond(401, '');

         $httpBackend.expectGET('/auth.py');
         var controller = createController();
         $httpBackend.flush();
         expect($rootScope.status).toBe('Failed...');
       });


       it('should send msg to server', function() {
         var controller = createController();
         $httpBackend.flush();

         // now you dont care about the authentication, but
         // the controller will still send the request and
         // $httpBackend will respond without you having to
         // specify the expectation and response for this request

         $httpBackend.expectPOST('/add-msg.py', 'message content').respond(201, '');
         $rootScope.saveMessage('message content');
         expect($rootScope.status).toBe('Saving...');
         $httpBackend.flush();
         expect($rootScope.status).toBe('');
       });


       it('should send auth header', function() {
         var controller = createController();
         $httpBackend.flush();

         $httpBackend.expectPOST('/add-msg.py', undefined, function(headers) {
           // check if the header was sent, if it wasn't the expectation won't
           // match the request and the test will fail
           return headers['Authorization'] === 'xxx';
         }).respond(201, '');

         $rootScope.saveMessage('whatever');
         $httpBackend.flush();
       });
    });
  ```
 *
 * ## Dynamic responses
 *
 * You define a response to a request by chaining a call to `respond()` onto a definition or expectation.
 * If you provide a **callback** as the first parameter to `respond(callback)` then you can dynamically generate
 * a response based on the properties of the request.
 *
 * The `callback` function should be of the form `function(method, url, data, headers, params)`.
 *
 * ### Query parameters
 *
 * By default, query parameters on request URLs are parsed into the `params` object. So a request URL
 * of `/list?q=searchstr&orderby=-name` would set `params` to be `{q: 'searchstr', orderby: '-name'}`.
 *
 * ### Regex parameter matching
 *
 * If an expectation or definition uses a **regex** to match the URL, you can provide an array of **keys** via a
 * `params` argument. The index of each **key** in the array will match the index of a **group** in the
 * **regex**.
 *
 * The `params` object in the **callback** will now have properties with these keys, which hold the value of the
 * corresponding **group** in the **regex**.
 *
 * This also applies to the `when` and `expect` shortcut methods.
 *
 *
 * ```js
 *   $httpBackend.expect('GET', /\/user\/(.+)/, undefined, undefined, ['id'])
 *     .respond(function(method, url, data, headers, params) {
 *       // for requested url of '/user/1234' params is {id: '1234'}
 *     });
 *
 *   $httpBackend.whenPATCH(/\/user\/(.+)\/article\/(.+)/, undefined, undefined, ['user', 'article'])
 *     .respond(function(method, url, data, headers, params) {
 *       // for url of '/user/1234/article/567' params is {user: '1234', article: '567'}
 *     });
 * ```
 *
 * ## Matching route requests
 *
 * For extra convenience, `whenRoute` and `expectRoute` shortcuts are available. These methods offer colon
 * delimited matching of the url path, ignoring the query string and trailing slashes. This allows declarations
 * similar to how application routes are configured with `$routeProvider`. Because these methods convert
 * the definition url to regex, declaration order is important. Combined with query parameter parsing,
 * the following is possible:
 *
  ```js
    $httpBackend.whenRoute('GET', '/users/:id')
      .respond(function(method, url, data, headers, params) {
        return [200, MockUserList[Number(params.id)]];
      });

    $httpBackend.whenRoute('GET', '/users')
      .respond(function(method, url, data, headers, params) {
        var userList = angular.copy(MockUserList),
          defaultSort = 'lastName',
          count, pages, isPrevious, isNext;

        // paged api response '/v1/users?page=2'
        params.page = Number(params.page) || 1;

        // query for last names '/v1/users?q=Archer'
        if (params.q) {
          userList = $filter('filter')({lastName: params.q});
        }

        pages = Math.ceil(userList.length / pagingLength);
        isPrevious = params.page > 1;
        isNext = params.page < pages;

        return [200, {
          count:    userList.length,
          previous: isPrevious,
          next:     isNext,
          // sort field -> '/v1/users?sortBy=firstName'
          results:  $filter('orderBy')(userList, params.sortBy || defaultSort)
                      .splice((params.page - 1) * pagingLength, pagingLength)
        }];
      });
  ```
 */
angular.mock.$httpBackendDecorator =
  ['$rootScope', '$timeout', '$delegate', createHttpBackendMock];

/**
 * General factory function for $httpBackend mock.
 * Returns instance for unit testing (when no arguments specified):
 *   - passing through is disabled
 *   - auto flushing is disabled
 *
 * Returns instance for e2e testing (when `$delegate` and `$browser` specified):
 *   - passing through (delegating request to real backend) is enabled
 *   - auto flushing is enabled
 *
 * @param {Object=} $delegate Real $httpBackend instance (allow passing through if specified)
 * @param {Object=} $browser Auto-flushing enabled if specified
 * @return {Object} Instance of $httpBackend mock
 */
function createHttpBackendMock($rootScope, $timeout, $delegate, $browser) {
  var definitions = [],
      expectations = [],
      matchLatestDefinition = false,
      responses = [],
      responsesPush = angular.bind(responses, responses.push),
      copy = angular.copy,
      // We cache the original backend so that if both ngMock and ngMockE2E override the
      // service the ngMockE2E version can pass through to the real backend
      originalHttpBackend = $delegate.$$originalHttpBackend || $delegate;

  function createResponse(status, data, headers, statusText) {
    if (angular.isFunction(status)) return status;

    return function() {
      return angular.isNumber(status)
          ? [status, data, headers, statusText, 'complete']
          : [200, status, data, headers, 'complete'];
    };
  }

  // TODO(vojta): change params to: method, url, data, headers, callback
  function $httpBackend(method, url, data, callback, headers, timeout, withCredentials, responseType, eventHandlers, uploadEventHandlers) {

    var xhr = new MockXhr(),
        expectation = expectations[0],
        wasExpected = false;

    xhr.$$events = eventHandlers;
    xhr.upload.$$events = uploadEventHandlers;

    function prettyPrint(data) {
      return (angular.isString(data) || angular.isFunction(data) || data instanceof RegExp)
          ? data
          : angular.toJson(data);
    }

    function wrapResponse(wrapped) {
      if (!$browser && timeout) {
        if (timeout.then) {
          timeout.then(function() {
            handlePrematureEnd(angular.isDefined(timeout.$$timeoutId) ? 'timeout' : 'abort');
          });
        } else {
          $timeout(function() {
            handlePrematureEnd('timeout');
          }, timeout);
        }
      }

      handleResponse.description = method + ' ' + url;
      return handleResponse;

      function handleResponse() {
        var response = wrapped.response(method, url, data, headers, wrapped.params(url));
        xhr.$$respHeaders = response[2];
        callback(copy(response[0]), copy(response[1]), xhr.getAllResponseHeaders(),
                 copy(response[3] || ''), copy(response[4]));
      }

      function handlePrematureEnd(reason) {
        for (var i = 0, ii = responses.length; i < ii; i++) {
          if (responses[i] === handleResponse) {
            responses.splice(i, 1);
            callback(-1, undefined, '', undefined, reason);
            break;
          }
        }
      }
    }

    function createFatalError(message) {
      var error = new Error(message);
      // In addition to being converted to a rejection, these errors also need to be passed to
      // the $exceptionHandler and be rethrown (so that the test fails).
      error.$$passToExceptionHandler = true;
      return error;
    }

    if (expectation && expectation.match(method, url)) {
      if (!expectation.matchData(data)) {
        throw createFatalError('Expected ' + expectation + ' with different data\n' +
          'EXPECTED: ' + prettyPrint(expectation.data) + '\n' +
          'GOT:      ' + data);
      }

      if (!expectation.matchHeaders(headers)) {
        throw createFatalError('Expected ' + expectation + ' with different headers\n' +
          'EXPECTED: ' + prettyPrint(expectation.headers) + '\n' +
          'GOT:      ' + prettyPrint(headers));
      }

      expectations.shift();

      if (expectation.response) {
        responses.push(wrapResponse(expectation));
        return;
      }
      wasExpected = true;
    }

    var i = matchLatestDefinition ? definitions.length : -1, definition;

    while ((definition = definitions[matchLatestDefinition ? --i : ++i])) {
      if (definition.match(method, url, data, headers || {})) {
        if (definition.response) {
          // if $browser specified, we do auto flush all requests
          ($browser ? $browser.defer : responsesPush)(wrapResponse(definition));
        } else if (definition.passThrough) {
          originalHttpBackend(method, url, data, callback, headers, timeout, withCredentials, responseType, eventHandlers, uploadEventHandlers);
        } else throw createFatalError('No response defined !');
        return;
      }
    }

    if (wasExpected) {
      throw createFatalError('No response defined !');
    }

    throw createFatalError('Unexpected request: ' + method + ' ' + url + '\n' +
      (expectation ? 'Expected ' + expectation : 'No more request expected'));
  }

  /**
   * @ngdoc method
   * @name $httpBackend#when
   * @description
   * Creates a new backend definition.
   *
   * @param {string} method HTTP method.
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
   *   data string and returns true if the data is as expected.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   *
   *  - respond 
   *      ```js
   *      {function([status,] data[, headers, statusText])
   *      | function(function(method, url, data, headers, params)}
   *      ```
   *     The respond method takes a set of static data to be returned or a function that can
   *    return an array containing response status (number), response data (Array|Object|string),
   *    response headers (Object), HTTP status text (string), and XMLHttpRequest status (string:
   *    `complete`, `error`, `timeout` or `abort`). The respond method returns the `requestHandler`
   *    object for possible overrides.
   */
  $httpBackend.when = function(method, url, data, headers, keys) {

    assertArgDefined(arguments, 1, 'url');

    var definition = new MockHttpExpectation(method, url, data, headers, keys),
        chain = {
          respond: function(status, data, headers, statusText) {
            definition.passThrough = undefined;
            definition.response = createResponse(status, data, headers, statusText);
            return chain;
          }
        };

    if ($browser) {
      chain.passThrough = function() {
        definition.response = undefined;
        definition.passThrough = true;
        return chain;
      };
    }

    definitions.push(definition);
    return chain;
  };

  /**
   * @ngdoc method
   * @name  $httpBackend#matchLatestDefinitionEnabled
   * @description
   * This method can be used to change which mocked responses `$httpBackend` returns, when defining
   * them with {@link ngMock.$httpBackend#when $httpBackend.when()} (and shortcut methods).
   * By default, `$httpBackend` returns the first definition that matches. When setting
   * `$http.matchLatestDefinitionEnabled(true)`, it will use the last response that matches, i.e. the
   * one that was added last.
   *
   * ```js
   * hb.when('GET', '/url1').respond(200, 'content', {});
   * hb.when('GET', '/url1').respond(201, 'another', {});
   * hb('GET', '/url1'); // receives "content"
   *
   * $http.matchLatestDefinitionEnabled(true)
   * hb('GET', '/url1'); // receives "another"
   *
   * hb.when('GET', '/url1').respond(201, 'onemore', {});
   * hb('GET', '/url1'); // receives "onemore"
   * ```
   *
   * This is useful if a you have a default response that is overriden inside specific tests.
   *
   * Note that different from config methods on providers, `matchLatestDefinitionEnabled()` can be changed
   * even when the application is already running.
   *
   * @param  {Boolean=} value value to set, either `true` or `false`. Default is `false`.
   *                          If omitted, it will return the current value.
   * @return {$httpBackend|Boolean} self when used as a setter, and the current value when used
   *                                as a getter
   */
  $httpBackend.matchLatestDefinitionEnabled = function(value) {
    if (angular.isDefined(value)) {
      matchLatestDefinition = value;
      return this;
    } else {
      return matchLatestDefinition;
    }
  };

  /**
   * @ngdoc method
   * @name $httpBackend#whenGET
   * @description
   * Creates a new backend definition for GET requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenHEAD
   * @description
   * Creates a new backend definition for HEAD requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenDELETE
   * @description
   * Creates a new backend definition for DELETE requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenPOST
   * @description
   * Creates a new backend definition for POST requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
   *   data string and returns true if the data is as expected.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenPUT
   * @description
   * Creates a new backend definition for PUT requests.  For more info see `when()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
   *   data string and returns true if the data is as expected.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#whenJSONP
   * @description
   * Creates a new backend definition for JSONP requests. For more info see `when()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   */
  createShortMethods('when');

  /**
   * @ngdoc method
   * @name $httpBackend#whenRoute
   * @description
   * Creates a new backend definition that compares only with the requested route.
   *
   * @param {string} method HTTP method.
   * @param {string} url HTTP url string that supports colon param matching.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   * See {@link ngMock.$httpBackend#when `when`} for more info.
   */
  $httpBackend.whenRoute = function(method, url) {
    var parsed = parseRouteUrl(url);
    return $httpBackend.when(method, parsed.regexp, undefined, undefined, parsed.keys);
  };

  /**
   * @ngdoc method
   * @name $httpBackend#expect
   * @description
   * Creates a new request expectation.
   *
   * @param {string} method HTTP method.
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current definition.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *  request is handled. You can save this object for later use and invoke `respond` again in
   *  order to change how a matched request is handled.
   *
   *  - respond 
   *      ```js
   *      {function([status,] data[, headers, statusText])
   *      | function(function(method, url, data, headers, params)}
   *      ```
   *     The respond method takes a set of static data to be returned or a function that can
   *    return an array containing response status (number), response data (Array|Object|string),
   *    response headers (Object), HTTP status text (string), and XMLHttpRequest status (string:
   *    `complete`, `error`, `timeout` or `abort`). The respond method returns the `requestHandler`
   *    object for possible overrides.
   */
  $httpBackend.expect = function(method, url, data, headers, keys) {

    assertArgDefined(arguments, 1, 'url');

    var expectation = new MockHttpExpectation(method, url, data, headers, keys),
        chain = {
          respond: function(status, data, headers, statusText) {
            expectation.response = createResponse(status, data, headers, statusText);
            return chain;
          }
        };

    expectations.push(expectation);
    return chain;
  };

  /**
   * @ngdoc method
   * @name $httpBackend#expectGET
   * @description
   * Creates a new request expectation for GET requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current expectation.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled. See #expect for more info.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectHEAD
   * @description
   * Creates a new request expectation for HEAD requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current expectation.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectDELETE
   * @description
   * Creates a new request expectation for DELETE requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current expectation.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectPOST
   * @description
   * Creates a new request expectation for POST requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current expectation.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectPUT
   * @description
   * Creates a new request expectation for PUT requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current expectation.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectPATCH
   * @description
   * Creates a new request expectation for PATCH requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
   *   and returns true if the url matches the current expectation.
   * @param {(string|RegExp|function(string)|Object)=} data HTTP request body or function that
   *  receives data string and returns true if the data is as expected, or Object if request body
   *  is in JSON format.
   * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
   *   object and returns true if the headers match the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */

  /**
   * @ngdoc method
   * @name $httpBackend#expectJSONP
   * @description
   * Creates a new request expectation for JSONP requests. For more info see `expect()`.
   *
   * @param {string|RegExp|function(string)=} url HTTP url or function that receives an url
   *   and returns true if the url matches the current expectation.
   * @param {(Array)=} keys Array of keys to assign to regex matches in request url described above.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   *   request is handled. You can save this object for later use and invoke `respond` again in
   *   order to change how a matched request is handled.
   */
  createShortMethods('expect');

  /**
   * @ngdoc method
   * @name $httpBackend#expectRoute
   * @description
   * Creates a new request expectation that compares only with the requested route.
   *
   * @param {string} method HTTP method.
   * @param {string} url HTTP url string that supports colon param matching.
   * @returns {requestHandler} Returns an object with `respond` method that controls how a matched
   * request is handled. You can save this object for later use and invoke `respond` again in
   * order to change how a matched request is handled.
   * See {@link ngMock.$httpBackend#expect `expect`} for more info.
   */
  $httpBackend.expectRoute = function(method, url) {
    var parsed = parseRouteUrl(url);
    return $httpBackend.expect(method, parsed.regexp, undefined, undefined, parsed.keys);
  };


  /**
   * @ngdoc method
   * @name $httpBackend#flush
   * @description
   * Flushes pending requests using the trained responses. Requests are flushed in the order they
   * were made, but it is also possible to skip one or more requests (for example to have them
   * flushed later). This is useful for simulating scenarios where responses arrive from the server
   * in any order.
   *
   * If there are no pending requests to flush when the method is called, an exception is thrown (as
   * this is typically a sign of programming error).
   *
   * @param {number=} count - Number of responses to flush. If undefined/null, all pending requests
   *     (starting after `skip`) will be flushed.
   * @param {number=} [skip=0] - Number of pending requests to skip. For example, a value of `5`
   *     would skip the first 5 pending requests and start flushing from the 6th onwards.
   */
  $httpBackend.flush = function(count, skip, digest) {
    if (digest !== false) $rootScope.$digest();

    skip = skip || 0;
    if (skip >= responses.length) throw new Error('No pending request to flush !');

    if (angular.isDefined(count) && count !== null) {
      while (count--) {
        var part = responses.splice(skip, 1);
        if (!part.length) throw new Error('No more pending request to flush !');
        part[0]();
      }
    } else {
      while (responses.length > skip) {
        responses.splice(skip, 1)[0]();
      }
    }
    $httpBackend.verifyNoOutstandingExpectation(digest);
  };


  /**
   * @ngdoc method
   * @name $httpBackend#verifyNoOutstandingExpectation
   * @description
   * Verifies that all of the requests defined via the `expect` api were made. If any of the
   * requests were not made, verifyNoOutstandingExpectation throws an exception.
   *
   * Typically, you would call this method following each test case that asserts requests using an
   * "afterEach" clause.
   *
   * ```js
   *   afterEach($httpBackend.verifyNoOutstandingExpectation);
   * ```
   */
  $httpBackend.verifyNoOutstandingExpectation = function(digest) {
    if (digest !== false) $rootScope.$digest();
    if (expectations.length) {
      throw new Error('Unsatisfied requests: ' + expectations.join(', '));
    }
  };


  /**
   * @ngdoc method
   * @name $httpBackend#verifyNoOutstandingRequest
   * @description
   * Verifies that there are no outstanding requests that need to be flushed.
   *
   * Typically, you would call this method following each test case that asserts requests using an
   * "afterEach" clause.
   *
   * ```js
   *   afterEach($httpBackend.verifyNoOutstandingRequest);
   * ```
   */
  $httpBackend.verifyNoOutstandingRequest = function(digest) {
    if (digest !== false) $rootScope.$digest();
    if (responses.length) {
      var unflushedDescriptions = responses.map(function(res) { return res.description; });
      throw new Error('Unflushed requests: ' + responses.length + '\n  ' +
                      unflushedDescriptions.join('\n  '));
    }
  };


  /**
   * @ngdoc method
   * @name $httpBackend#resetExpectations
   * @description
   * Resets all request expectations, but preserves all backend definitions. Typically, you would
   * call resetExpectations during a multiple-phase test when you want to reuse the same instance of
   * $httpBackend mock.
   */
  $httpBackend.resetExpectations = function() {
    expectations.length = 0;
    responses.length = 0;
  };

  $httpBackend.$$originalHttpBackend = originalHttpBackend;

  return $httpBackend;


  function createShortMethods(prefix) {
    angular.forEach(['GET', 'DELETE', 'JSONP', 'HEAD'], function(method) {
     $httpBackend[prefix + method] = function(url, headers, keys) {
        assertArgDefined(arguments, 0, 'url');

        // Change url to `null` if `undefined` to stop it throwing an exception further down
        if (angular.isUndefined(url)) url = null;

       return $httpBackend[prefix](method, url, undefined, headers, keys);
     };
    });

    angular.forEach(['PUT', 'POST', 'PATCH'], function(method) {
      $httpBackend[prefix + method] = function(url, data, headers, keys) {
        assertArgDefined(arguments, 0, 'url');

        // Change url to `null` if `undefined` to stop it throwing an exception further down
        if (angular.isUndefined(url)) url = null;

        return $httpBackend[prefix](method, url, data, headers, keys);
      };
    });
  }

  function parseRouteUrl(url) {
    var strippedUrl = stripQueryAndHash(url);
    var parseOptions = {caseInsensitiveMatch: true, ignoreTrailingSlashes: true};
    return routeToRegExp(strippedUrl, parseOptions);
  }
}

function assertArgDefined(args, index, name) {
  if (args.length > index && angular.isUndefined(args[index])) {
    throw new Error('Undefined argument `' + name + '`; the argument is provided but not defined');
  }
}

function stripQueryAndHash(url) {
  return url.replace(/[?#].*$/, '');
}

function MockHttpExpectation(expectedMethod, expectedUrl, expectedData, expectedHeaders,
                             expectedKeys) {

  this.data = expectedData;
  this.headers = expectedHeaders;

  this.match = function(method, url, data, headers) {
    if (expectedMethod !== method) return false;
    if (!this.matchUrl(url)) return false;
    if (angular.isDefined(data) && !this.matchData(data)) return false;
    if (angular.isDefined(headers) && !this.matchHeaders(headers)) return false;
    return true;
  };

  this.matchUrl = function(url) {
    if (!expectedUrl) return true;
    if (angular.isFunction(expectedUrl.test)) return expectedUrl.test(url);
    if (angular.isFunction(expectedUrl)) return expectedUrl(url);
    return (expectedUrl === url || compareUrlWithQuery(url));
  };

  this.matchHeaders = function(headers) {
    if (angular.isUndefined(expectedHeaders)) return true;
    if (angular.isFunction(expectedHeaders)) return expectedHeaders(headers);
    return angular.equals(expectedHeaders, headers);
  };

  this.matchData = function(data) {
    if (angular.isUndefined(expectedData)) return true;
    if (expectedData && angular.isFunction(expectedData.test)) return expectedData.test(data);
    if (expectedData && angular.isFunction(expectedData)) return expectedData(data);
    if (expectedData && !angular.isString(expectedData)) {
      return angular.equals(angular.fromJson(angular.toJson(expectedData)), angular.fromJson(data));
    }
    // eslint-disable-next-line eqeqeq
    return expectedData == data;
  };

  this.toString = function() {
    return expectedMethod + ' ' + expectedUrl;
  };

  this.params = function(url) {
    var queryStr = url.indexOf('?') === -1 ? '' : url.substring(url.indexOf('?') + 1);
    var strippedUrl = stripQueryAndHash(url);

    return angular.extend(extractParamsFromQuery(queryStr), extractParamsFromPath(strippedUrl));
  };

  function compareUrlWithQuery(url) {
    var urlWithQueryRe = /^([^?]*)\?(.*)$/;

    var expectedMatch = urlWithQueryRe.exec(expectedUrl);
    var actualMatch = urlWithQueryRe.exec(url);

    return !!(expectedMatch && actualMatch) &&
      (expectedMatch[1] === actualMatch[1]) &&
      (normalizeQuery(expectedMatch[2]) === normalizeQuery(actualMatch[2]));
  }

  function normalizeQuery(queryStr) {
    return queryStr.split('&').sort().join('&');
  }

  function extractParamsFromPath(strippedUrl) {
    var keyObj = {};

    if (!expectedUrl || !angular.isFunction(expectedUrl.test) ||
        !expectedKeys || !expectedKeys.length) return keyObj;

    var match = expectedUrl.exec(strippedUrl);
    if (!match) return keyObj;

    for (var i = 1, len = match.length; i < len; ++i) {
      var key = expectedKeys[i - 1];
      var val = match[i];
      if (key && val) {
        keyObj[key.name || key] = val;
      }
    }

    return keyObj;
  }

  function extractParamsFromQuery(queryStr) {
    var obj = {},
        keyValuePairs = queryStr.split('&').
            filter(angular.identity).  // Ignore empty segments.
            map(function(keyValue) { return keyValue.replace(/\+/g, '%20').split('='); });

    angular.forEach(keyValuePairs, function(pair) {
      var key = tryDecodeURIComponent(pair[0]);
      if (angular.isDefined(key)) {
        var val = angular.isDefined(pair[1]) ? tryDecodeURIComponent(pair[1]) : true;
        if (!hasOwnProperty.call(obj, key)) {
          obj[key] = val;
        } else if (angular.isArray(obj[key])) {
          obj[key].push(val);
        } else {
          obj[key] = [obj[key], val];
        }
      }
    });

    return obj;
  }

  function tryDecodeURIComponent(value) {
    try {
      return decodeURIComponent(value);
    } catch (e) {
      // Ignore any invalid uri component
    }
  }
}

function createMockXhr() {
  return new MockXhr();
}

function MockXhr() {

  // hack for testing $http, $httpBackend
  MockXhr.$$lastInstance = this;

  this.open = function(method, url, async) {
    this.$$method = method;
    this.$$url = url;
    this.$$async = async;
    this.$$reqHeaders = {};
    this.$$respHeaders = {};
  };

  this.send = function(data) {
    this.$$data = data;
  };

  this.setRequestHeader = function(key, value) {
    this.$$reqHeaders[key] = value;
  };

  this.getResponseHeader = function(name) {
    // the lookup must be case insensitive,
    // that's why we try two quick lookups first and full scan last
    var header = this.$$respHeaders[name];
    if (header) return header;

    name = angular.$$lowercase(name);
    header = this.$$respHeaders[name];
    if (header) return header;

    header = undefined;
    angular.forEach(this.$$respHeaders, function(headerVal, headerName) {
      if (!header && angular.$$lowercase(headerName) === name) header = headerVal;
    });
    return header;
  };

  this.getAllResponseHeaders = function() {
    var lines = [];

    angular.forEach(this.$$respHeaders, function(value, key) {
      lines.push(key + ': ' + value);
    });
    return lines.join('\n');
  };

  this.abort = function() {
    if (isFunction(this.onabort)) {
      this.onabort();
    }
  };

  // This section simulates the events on a real XHR object (and the upload object)
  // When we are testing $httpBackend (inside the AngularJS project) we make partial use of this
  // but store the events directly ourselves on `$$events`, instead of going through the `addEventListener`
  this.$$events = {};
  this.addEventListener = function(name, listener) {
    if (angular.isUndefined(this.$$events[name])) this.$$events[name] = [];
    this.$$events[name].push(listener);
  };

  this.upload = {
    $$events: {},
    addEventListener: this.addEventListener
  };
}


/**
 * @ngdoc service
 * @name $timeout
 * @description
 *
 * This service is just a simple decorator for {@link ng.$timeout $timeout} service
 * that adds a "flush" and "verifyNoPendingTasks" methods.
 */

angular.mock.$TimeoutDecorator = ['$delegate', '$browser', function($delegate, $browser) {

  /**
   * @ngdoc method
   * @name $timeout#flush
   *
   * @deprecated
   * sinceVersion="1.7.3"
   *
   * This method flushes all types of tasks (not only timeouts), which is unintuitive.
   * It is recommended to use {@link ngMock.$flushPendingTasks} instead.
   *
   * @description
   *
   * Flushes the queue of pending tasks.
   *
   * _This method is essentially an alias of {@link ngMock.$flushPendingTasks}._
   *
   * <div class="alert alert-warning">
   *   For historical reasons, this method will also flush non-`$timeout` pending tasks, such as
   *   {@link $q} promises and tasks scheduled via
   *   {@link ng.$rootScope.Scope#$applyAsync $applyAsync} and
   *   {@link ng.$rootScope.Scope#$evalAsync $evalAsync}.
   * </div>
   *
   * @param {number=} delay maximum timeout amount to flush up until
   */
  $delegate.flush = function(delay) {
    // For historical reasons, `$timeout.flush()` flushes all types of pending tasks.
    // Keep the same behavior for backwards compatibility (and because it doesn't make sense to
    // selectively flush scheduled events out of order).
    $browser.defer.flush(delay);
  };

  /**
   * @ngdoc method
   * @name $timeout#verifyNoPendingTasks
   *
   * @deprecated
   * sinceVersion="1.7.3"
   *
   * This method takes all types of tasks (not only timeouts) into account, which is unintuitive.
   * It is recommended to use {@link ngMock.$verifyNoPendingTasks} instead, which additionally
   * allows checking for timeouts only (with `$verifyNoPendingTasks('$timeout')`).
   *
   * @description
   *
   * Verifies that there are no pending tasks that need to be flushed. It throws an error if there
   * are still pending tasks.
   *
   * _This method is essentially an alias of {@link ngMock.$verifyNoPendingTasks} (called with no
   * arguments)._
   *
   * <div class="alert alert-warning">
   *   <p>
   *     For historical reasons, this method will also verify non-`$timeout` pending tasks, such as
   *     pending {@link $http} requests, in-progress {@link $route} transitions, unresolved
   *     {@link $q} promises and tasks scheduled via
   *     {@link ng.$rootScope.Scope#$applyAsync $applyAsync} and
   *     {@link ng.$rootScope.Scope#$evalAsync $evalAsync}.
   *   </p>
   *   <p>
   *     It is recommended to use {@link ngMock.$verifyNoPendingTasks} instead, which additionally
   *     supports verifying a specific type of tasks. For example, you can verify there are no
   *     pending timeouts with `$verifyNoPendingTasks('$timeout')`.
   *   </p>
   * </div>
   */
  $delegate.verifyNoPendingTasks = function() {
    // For historical reasons, `$timeout.verifyNoPendingTasks()` takes all types of pending tasks
    // into account. Keep the same behavior for backwards compatibility.
    var pendingTasks = $browser.defer.getPendingTasks();

    if (pendingTasks.length) {
      var formattedTasks = $browser.defer.formatPendingTasks(pendingTasks).join('\n  ');
      var hasPendingTimeout = pendingTasks.some(function(task) { return task.type === '$timeout'; });
      var extraMessage = hasPendingTimeout ? '' : '\n\nNone of the pending tasks are timeouts. ' +
          'If you only want to verify pending timeouts, use ' +
          '`$verifyNoPendingTasks(\'$timeout\')` instead.';

      throw new Error('Deferred tasks to flush (' + pendingTasks.length + '):\n  ' +
          formattedTasks + extraMessage);
    }
  };

  return $delegate;
}];

angular.mock.$RAFDecorator = ['$delegate', function($delegate) {
  var rafFn = function(fn) {
    var index = rafFn.queue.length;
    rafFn.queue.push(fn);
    return function() {
      rafFn.queue.splice(index, 1);
    };
  };

  rafFn.queue = [];
  rafFn.supported = $delegate.supported;

  rafFn.flush = function() {
    if (rafFn.queue.length === 0) {
      throw new Error('No rAF callbacks present');
    }

    var length = rafFn.queue.length;
    for (var i = 0; i < length; i++) {
      rafFn.queue[i]();
    }

    rafFn.queue = rafFn.queue.slice(i);
  };

  return rafFn;
}];

/**
 *
 */
var originalRootElement;
angular.mock.$RootElementProvider = function() {
  this.$get = ['$injector', function($injector) {
    originalRootElement = angular.element('<div ng-app></div>').data('$injector', $injector);
    return originalRootElement;
  }];
};

/**
 * @ngdoc service
 * @name $controller
 * @description
 * A decorator for {@link ng.$controller} with additional `bindings` parameter, useful when testing
 * controllers of directives that use {@link $compile#-bindtocontroller- `bindToController`}.
 *
 * ## Example
 *
 * ```js
 *
 * // Directive definition ...
 *
 * myMod.directive('myDirective', {
 *   controller: 'MyDirectiveController',
 *   bindToController: {
 *     name: '@'
 *   }
 * });
 *
 *
 * // Controller definition ...
 *
 * myMod.controller('MyDirectiveController', ['$log', function($log) {
 *   this.log = function() {
 *     $log.info(this.name);
 *   };
 * }]);
 *
 *
 * // In a test ...
 *
 * describe('myDirectiveController', function() {
 *   describe('log()', function() {
 *     it('should write the bound name to the log', inject(function($controller, $log) {
 *       var ctrl = $controller('MyDirectiveController', { /* no locals &#42;/ }, { name: 'Clark Kent' });
 *       ctrl.log();
 *
 *       expect(ctrl.name).toEqual('Clark Kent');
 *       expect($log.info.logs).toEqual(['Clark Kent']);
 *     }));
 *   });
 * });
 *
 * ```
 *
 * @param {Function|string} constructor If called with a function then it's considered to be the
 *    controller constructor function. Otherwise it's considered to be a string which is used
 *    to retrieve the controller constructor using the following steps:
 *
 *    * check if a controller with given name is registered via `$controllerProvider`
 *    * check if evaluating the string on the current scope returns a constructor
 *
 *    The string can use the `controller as property` syntax, where the controller instance is published
 *    as the specified property on the `scope`; the `scope` must be injected into `locals` param for this
 *    to work correctly.
 *
 * @param {Object} locals Injection locals for Controller.
 * @param {Object=} bindings Properties to add to the controller instance. This is used to simulate
 *                           the `bindToController` feature and simplify certain kinds of tests.
 * @return {Object} Instance of given controller.
 */
function createControllerDecorator() {
  angular.mock.$ControllerDecorator = ['$delegate', function($delegate) {
    return function(expression, locals, later, ident) {
      if (later && typeof later === 'object') {
        var instantiate = $delegate(expression, locals, true, ident);
        var instance = instantiate();
        angular.extend(instance, later);
        return instance;
      }
      return $delegate(expression, locals, later, ident);
    };
  }];

  return angular.mock.$ControllerDecorator;
}

/**
 * @ngdoc service
 * @name $componentController
 * @description
 * A service that can be used to create instances of component controllers. Useful for unit-testing.
 *
 * Be aware that the controller will be instantiated and attached to the scope as specified in
 * the component definition object. If you do not provide a `$scope` object in the `locals` param
 * then the helper will create a new isolated scope as a child of `$rootScope`.
 *
 * If you are using `$element` or `$attrs` in the controller, make sure to provide them as `locals`.
 * The `$element` must be a jqLite-wrapped DOM element, and `$attrs` should be an object that
 * has all properties / functions that you are using in the controller. If this is getting too complex,
 * you should compile the component instead and access the component's controller via the
 * {@link angular.element#methods `controller`} function.
 *
 * See also the section on {@link guide/component#unit-testing-component-controllers unit-testing component controllers}
 * in the guide.
 *
 * @param {string} componentName the name of the component whose controller we want to instantiate
 * @param {Object} locals Injection locals for Controller.
 * @param {Object=} bindings Properties to add to the controller before invoking the constructor. This is used
 *                           to simulate the `bindToController` feature and simplify certain kinds of tests.
 * @param {string=} ident Override the property name to use when attaching the controller to the scope.
 * @return {Object} Instance of requested controller.
 */
angular.mock.$ComponentControllerProvider = ['$compileProvider',
    function ComponentControllerProvider($compileProvider) {
  this.$get = ['$controller','$injector', '$rootScope', function($controller, $injector, $rootScope) {
    return function $componentController(componentName, locals, bindings, ident) {
      // get all directives associated to the component name
      var directives = $injector.get(componentName + 'Directive');
      // look for those directives that are components
      var candidateDirectives = directives.filter(function(directiveInfo) {
        // components have controller, controllerAs and restrict:'E'
        return directiveInfo.controller && directiveInfo.controllerAs && directiveInfo.restrict === 'E';
      });
      // check if valid directives found
      if (candidateDirectives.length === 0) {
        throw new Error('No component found');
      }
      if (candidateDirectives.length > 1) {
        throw new Error('Too many components found');
      }
      // get the info of the component
      var directiveInfo = candidateDirectives[0];
      // create a scope if needed
      locals = locals || {};
      locals.$scope = locals.$scope || $rootScope.$new(true);
      return $controller(directiveInfo.controller, locals, bindings, ident || directiveInfo.controllerAs);
    };
  }];
}];


/**
 * @ngdoc module
 * @name ngMock
 * @packageName angular-mocks
 * @description
 *
 * The `ngMock` module provides support to inject and mock AngularJS services into unit tests.
 * In addition, ngMock also extends various core AngularJS services such that they can be
 * inspected and controlled in a synchronous manner within test code.
 *
 * @installation
 *
 *  First, download the file:
 *  * [Google CDN](https://developers.google.com/speed/libraries/devguide#angularjs) e.g.
 *    `"//ajax.googleapis.com/ajax/libs/angularjs/X.Y.Z/angular-mocks.js"`
 *  * [NPM](https://www.npmjs.com/) e.g. `npm install angular-mocks@X.Y.Z`
 *  * [Yarn](https://yarnpkg.com) e.g. `yarn add angular-mocks@X.Y.Z`
 *  * [Bower](http://bower.io) e.g. `bower install angular-mocks#X.Y.Z`
 *  * [code.angularjs.org](https://code.angularjs.org/) (discouraged for production use)  e.g.
 *    `"//code.angularjs.org/X.Y.Z/angular-mocks.js"`
 *
 * where X.Y.Z is the AngularJS version you are running.
 *
 * Then, configure your test runner to load `angular-mocks.js` after `angular.js`.
 * This example uses <a href="http://karma-runner.github.io/">Karma</a>:
 *
 * ```
 * config.set({
 *   files: [
 *     'build/angular.js', // and other module files you need
 *     'build/angular-mocks.js',
 *     '<path/to/application/files>',
 *     '<path/to/spec/files>'
 *   ]
 * });
 * ```
 *
 * Including the `angular-mocks.js` file automatically adds the `ngMock` module, so your tests
 *  are ready to go!
 */
angular.module('ngMock', ['ng']).provider({
  $browser: angular.mock.$BrowserProvider,
  $exceptionHandler: angular.mock.$ExceptionHandlerProvider,
  $log: angular.mock.$LogProvider,
  $interval: angular.mock.$IntervalProvider,
  $rootElement: angular.mock.$RootElementProvider,
  $componentController: angular.mock.$ComponentControllerProvider,
  $flushPendingTasks: angular.mock.$FlushPendingTasksProvider,
  $verifyNoPendingTasks: angular.mock.$VerifyNoPendingTasksProvider
}).config(['$provide', '$compileProvider', function($provide, $compileProvider) {
  $provide.decorator('$timeout', angular.mock.$TimeoutDecorator);
  $provide.decorator('$$rAF', angular.mock.$RAFDecorator);
  $provide.decorator('$rootScope', angular.mock.$RootScopeDecorator);
  $provide.decorator('$controller', createControllerDecorator($compileProvider));
  $provide.decorator('$httpBackend', angular.mock.$httpBackendDecorator);
}]).info({ angularVersion: '1.7.8' });

/**
 * @ngdoc module
 * @name ngMockE2E
 * @module ngMockE2E
 * @packageName angular-mocks
 * @description
 *
 * The `ngMockE2E` is an AngularJS module which contains mocks suitable for end-to-end testing.
 * Currently there is only one mock present in this module -
 * the {@link ngMockE2E.$httpBackend e2e $httpBackend} mock.
 */
angular.module('ngMockE2E', ['ng']).config(['$provide', function($provide) {
  $provide.decorator('$httpBackend', angular.mock.e2e.$httpBackendDecorator);
}]).info({ angularVersion: '1.7.8' });

/**
 * @ngdoc service
 * @name $httpBackend
 * @module ngMockE2E
 * @description
 * Fake HTTP backend implementation suitable for end-to-end testing or backend-less development of
 * applications that use the {@link ng.$http $http service}.
 *
 * <div class="alert alert-info">
 * **Note**: For fake http backend implementation suitable for unit testing please see
 * {@link ngMock.$httpBackend unit-testing $httpBackend mock}.
 * </div>
 *
 * This implementation can be used to respond with static or dynamic responses via the `when` api
 * and its shortcuts (`whenGET`, `whenPOST`, etc) and optionally pass through requests to the
 * real $httpBackend for specific requests (e.g. to interact with certain remote apis or to fetch
 * templates from a webserver).
 *
 * As opposed to unit-testing, in an end-to-end testing scenario or in scenario when an application
 * is being developed with the real backend api replaced with a mock, it is often desirable for
 * certain category of requests to bypass the mock and issue a real http request (e.g. to fetch
 * templates or static files from the webserver). To configure the backend with this behavior
 * use the `passThrough` request handler of `when` instead of `respond`.
 *
 * Additionally, we don't want to manually have to flush mocked out requests like we do during unit
 * testing. For this reason the e2e $httpBackend flushes mocked out requests
 * automatically, closely simulating the behavior of the XMLHttpRequest object.
 *
 * To setup the application to run with this http backend, you have to create a module that depends
 * on the `ngMockE2E` and your application modules and defines the fake backend:
 *
 * ```js
 *   var myAppDev = angular.module('myAppDev', ['myApp', 'ngMockE2E']);
 *   myAppDev.run(function($httpBackend) {
 *     var phones = [{name: 'phone1'}, {name: 'phone2'}];
 *
 *     // returns the current list of phones
 *     $httpBackend.whenGET('/phones').respond(phones);
 *
 *     // adds a new phone to the phones array
 *     $httpBackend.whenPOST('/phones').respond(function(method, url, data) {
 *       var phone = angular.fromJson(data);
 *       phones.push(phone);
 *       return [200, phone, {}];
 *     });
 *     $httpBackend.whenGET(/^\/templates\//).passThrough(); // Requests for templates are handled by the real server
 *     //...
 *   });
 * ```
 *
 * Afterwards, bootstrap your app with this new module.
 *
 * @example
 * <example name="httpbackend-e2e-testing" module="myAppE2E" deps="angular-mocks.js">
 * <file name="app.js">
 *   var myApp = angular.module('myApp', []);
 *
 *   myApp.controller('MainCtrl', function MainCtrl($http) {
 *     var ctrl = this;
 *
 *     ctrl.phones = [];
 *     ctrl.newPhone = {
 *       name: ''
 *     };
 *
 *     ctrl.getPhones = function() {
 *       $http.get('/phones').then(function(response) {
 *         ctrl.phones = response.data;
 *       });
 *     };
 *
 *     ctrl.addPhone = function(phone) {
 *       $http.post('/phones', phone).then(function() {
 *         ctrl.newPhone = {name: ''};
 *         return ctrl.getPhones();
 *       });
 *     };
 *
 *     ctrl.getPhones();
 *   });
 * </file>
 * <file name="e2e.js">
 *   var myAppDev = angular.module('myAppE2E', ['myApp', 'ngMockE2E']);
 *
 *   myAppDev.run(function($httpBackend) {
 *     var phones = [{name: 'phone1'}, {name: 'phone2'}];
 *
 *     // returns the current list of phones
 *     $httpBackend.whenGET('/phones').respond(phones);
 *
 *     // adds a new phone to the phones array
 *     $httpBackend.whenPOST('/phones').respond(function(method, url, data) {
 *       var phone = angular.fromJson(data);
 *       phones.push(phone);
 *       return [200, phone, {}];
 *     });
 *   });
 * </file>
 * <file name="index.html">
 *   <div ng-controller="MainCtrl as $ctrl">
 *   <form name="newPhoneForm" ng-submit="$ctrl.addPhone($ctrl.newPhone)">
 *     <input type="text" ng-model="$ctrl.newPhone.name">
 *     <input type="submit" value="Add Phone">
 *   </form>
 *   <h1>Phones</h1>
 *   <ul>
 *     <li ng-repeat="phone in $ctrl.phones">{{phone.name}}</li>
 *   </ul>
 *   </div>
 * </file>
 * </example>
 *
 *
 */

/**
 * @ngdoc method
 * @name $httpBackend#when
 * @module ngMockE2E
 * @description
 * Creates a new backend definition.
 *
 * @param {string} method HTTP method.
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
 *   data string and returns true if the data is as expected.
 * @param {(Object|function(Object))=} headers HTTP headers or function that receives http header
 *   object and returns true if the headers match the current definition.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 *
 *  - respond 
 *    ```
 *    { function([status,] data[, headers, statusText])
 *    | function(function(method, url, data, headers, params)}
 *    ```
 *     The respond method takes a set of static data to be returned or a function that can return
 *    an array containing response status (number), response data (Array|Object|string), response
 *    headers (Object), and the text for the status (string).
 *  - passThrough  `{function()}`  Any request matching a backend definition with
 *    `passThrough` handler will be passed through to the real backend (an XHR request will be made
 *    to the server.)
 *  - Both methods return the `requestHandler` object for possible overrides.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenGET
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for GET requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenHEAD
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for HEAD requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenDELETE
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for DELETE requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenPOST
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for POST requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
 *   data string and returns true if the data is as expected.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenPUT
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for PUT requests.  For more info see `when()`.
 *
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
 *   data string and returns true if the data is as expected.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenPATCH
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for PATCH requests.  For more info see `when()`.
 *
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(string|RegExp|function(string))=} data HTTP request body or function that receives
 *   data string and returns true if the data is as expected.
 * @param {(Object|function(Object))=} headers HTTP headers.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */

/**
 * @ngdoc method
 * @name $httpBackend#whenJSONP
 * @module ngMockE2E
 * @description
 * Creates a new backend definition for JSONP requests. For more info see `when()`.
 *
 * @param {string|RegExp|function(string)=} url HTTP url or function that receives a url
 *   and returns true if the url matches the current definition.
 * @param {(Array)=} keys Array of keys to assign to regex matches in request url described on
 *   {@link ngMock.$httpBackend $httpBackend mock}.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */
/**
 * @ngdoc method
 * @name $httpBackend#whenRoute
 * @module ngMockE2E
 * @description
 * Creates a new backend definition that compares only with the requested route.
 *
 * @param {string} method HTTP method.
 * @param {string} url HTTP url string that supports colon param matching.
 * @returns {requestHandler} Returns an object with `respond` and `passThrough` methods that
 *   control how a matched request is handled. You can save this object for later use and invoke
 *   `respond` or `passThrough` again in order to change how a matched request is handled.
 */
/**
 * @ngdoc method
 * @name  $httpBackend#matchLatestDefinitionEnabled
 * @module ngMockE2E
 * @description
 * This method can be used to change which mocked responses `$httpBackend` returns, when defining
 * them with {@link ngMock.$httpBackend#when $httpBackend.when()} (and shortcut methods).
 * By default, `$httpBackend` returns the first definition that matches. When setting
 * `$http.matchLatestDefinitionEnabled(true)`, it will use the last response that matches, i.e. the
 * one that was added last.
 *
 * ```js
 * hb.when('GET', '/url1').respond(200, 'content', {});
 * hb.when('GET', '/url1').respond(201, 'another', {});
 * hb('GET', '/url1'); // receives "content"
 *
 * $http.matchLatestDefinitionEnabled(true)
 * hb('GET', '/url1'); // receives "another"
 *
 * hb.when('GET', '/url1').respond(201, 'onemore', {});
 * hb('GET', '/url1'); // receives "onemore"
 * ```
 *
 * This is useful if a you have a default response that is overriden inside specific tests.
 *
 * Note that different from config methods on providers, `matchLatestDefinitionEnabled()` can be changed
 * even when the application is already running.
 *
 * @param  {Boolean=} value value to set, either `true` or `false`. Default is `false`.
 *                          If omitted, it will return the current value.
 * @return {$httpBackend|Boolean} self when used as a setter, and the current value when used
 *                                as a getter
 */
angular.mock.e2e = {};
angular.mock.e2e.$httpBackendDecorator =
  ['$rootScope', '$timeout', '$delegate', '$browser', createHttpBackendMock];


/**
 * @ngdoc type
 * @name $rootScope.Scope
 * @module ngMock
 * @description
 * {@link ng.$rootScope.Scope Scope} type decorated with helper methods useful for testing. These
 * methods are automatically available on any {@link ng.$rootScope.Scope Scope} instance when
 * `ngMock` module is loaded.
 *
 * In addition to all the regular `Scope` methods, the following helper methods are available:
 */
angular.mock.$RootScopeDecorator = ['$delegate', function($delegate) {

  var $rootScopePrototype = Object.getPrototypeOf($delegate);

  $rootScopePrototype.$countChildScopes = countChildScopes;
  $rootScopePrototype.$countWatchers = countWatchers;

  return $delegate;

  // ------------------------------------------------------------------------------------------ //

  /**
   * @ngdoc method
   * @name $rootScope.Scope#$countChildScopes
   * @module ngMock
   * @this $rootScope.Scope
   * @description
   * Counts all the direct and indirect child scopes of the current scope.
   *
   * The current scope is excluded from the count. The count includes all isolate child scopes.
   *
   * @returns {number} Total number of child scopes.
   */
  function countChildScopes() {
    var count = 0; // exclude the current scope
    var pendingChildHeads = [this.$$childHead];
    var currentScope;

    while (pendingChildHeads.length) {
      currentScope = pendingChildHeads.shift();

      while (currentScope) {
        count += 1;
        pendingChildHeads.push(currentScope.$$childHead);
        currentScope = currentScope.$$nextSibling;
      }
    }

    return count;
  }


  /**
   * @ngdoc method
   * @name $rootScope.Scope#$countWatchers
   * @this $rootScope.Scope
   * @module ngMock
   * @description
   * Counts all the watchers of direct and indirect child scopes of the current scope.
   *
   * The watchers of the current scope are included in the count and so are all the watchers of
   * isolate child scopes.
   *
   * @returns {number} Total number of watchers.
   */
  function countWatchers() {
    var count = this.$$watchers ? this.$$watchers.length : 0; // include the current scope
    var pendingChildHeads = [this.$$childHead];
    var currentScope;

    while (pendingChildHeads.length) {
      currentScope = pendingChildHeads.shift();

      while (currentScope) {
        count += currentScope.$$watchers ? currentScope.$$watchers.length : 0;
        pendingChildHeads.push(currentScope.$$childHead);
        currentScope = currentScope.$$nextSibling;
      }
    }

    return count;
  }
}];


(function(jasmineOrMocha) {

  if (!jasmineOrMocha) {
    return;
  }

  var currentSpec = null,
      injectorState = new InjectorState(),
      annotatedFunctions = [],
      wasInjectorCreated = function() {
        return !!currentSpec;
      };

  angular.mock.$$annotate = angular.injector.$$annotate;
  angular.injector.$$annotate = function(fn) {
    if (typeof fn === 'function' && !fn.$inject) {
      annotatedFunctions.push(fn);
    }
    return angular.mock.$$annotate.apply(this, arguments);
  };

  /**
   * @ngdoc function
   * @name angular.mock.module
   * @description
   *
   * *NOTE*: This function is also published on window for easy access.<br>
   * *NOTE*: This function is declared ONLY WHEN running tests with jasmine or mocha
   *
   * This function registers a module configuration code. It collects the configuration information
   * which will be used when the injector is created by {@link angular.mock.inject inject}.
   *
   * See {@link angular.mock.inject inject} for usage example
   *
   * @param {...(string|Function|Object)} fns any number of modules which are represented as string
   *        aliases or as anonymous module initialization functions. The modules are used to
   *        configure the injector. The 'ng' and 'ngMock' modules are automatically loaded. If an
   *        object literal is passed each key-value pair will be registered on the module via
   *        {@link auto.$provide $provide}.value, the key being the string name (or token) to associate
   *        with the value on the injector.
   */
  var module = window.module = angular.mock.module = function() {
    var moduleFns = Array.prototype.slice.call(arguments, 0);
    return wasInjectorCreated() ? workFn() : workFn;
    /////////////////////
    function workFn() {
      if (currentSpec.$injector) {
        throw new Error('Injector already created, can not register a module!');
      } else {
        var fn, modules = currentSpec.$modules || (currentSpec.$modules = []);
        angular.forEach(moduleFns, function(module) {
          if (angular.isObject(module) && !angular.isArray(module)) {
            fn = ['$provide', function($provide) {
              angular.forEach(module, function(value, key) {
                $provide.value(key, value);
              });
            }];
          } else {
            fn = module;
          }
          if (currentSpec.$providerInjector) {
            currentSpec.$providerInjector.invoke(fn);
          } else {
            modules.push(fn);
          }
        });
      }
    }
  };

  module.$$beforeAllHook = (window.before || window.beforeAll);
  module.$$afterAllHook = (window.after || window.afterAll);

  // purely for testing ngMock itself
  module.$$currentSpec = function(to) {
    if (arguments.length === 0) return to;
    currentSpec = to;
  };

  /**
   * @ngdoc function
   * @name angular.mock.module.sharedInjector
   * @description
   *
   * *NOTE*: This function is declared ONLY WHEN running tests with jasmine or mocha
   *
   * This function ensures a single injector will be used for all tests in a given describe context.
   * This contrasts with the default behaviour where a new injector is created per test case.
   *
   * Use sharedInjector when you want to take advantage of Jasmine's `beforeAll()`, or mocha's
   * `before()` methods. Call `module.sharedInjector()` before you setup any other hooks that
   * will create (i.e call `module()`) or use (i.e call `inject()`) the injector.
   *
   * You cannot call `sharedInjector()` from within a context already using `sharedInjector()`.
   *
   * ## Example
   *
   * Typically beforeAll is used to make many assertions about a single operation. This can
   * cut down test run-time as the test setup doesn't need to be re-run, and enabling focussed
   * tests each with a single assertion.
   *
   * ```js
   * describe("Deep Thought", function() {
   *
   *   module.sharedInjector();
   *
   *   beforeAll(module("UltimateQuestion"));
   *
   *   beforeAll(inject(function(DeepThought) {
   *     expect(DeepThought.answer).toBeUndefined();
   *     DeepThought.generateAnswer();
   *   }));
   *
   *   it("has calculated the answer correctly", inject(function(DeepThought) {
   *     // Because of sharedInjector, we have access to the instance of the DeepThought service
   *     // that was provided to the beforeAll() hook. Therefore we can test the generated answer
   *     expect(DeepThought.answer).toBe(42);
   *   }));
   *
   *   it("has calculated the answer within the expected time", inject(function(DeepThought) {
   *     expect(DeepThought.runTimeMillennia).toBeLessThan(8000);
   *   }));
   *
   *   it("has double checked the answer", inject(function(DeepThought) {
   *     expect(DeepThought.absolutelySureItIsTheRightAnswer).toBe(true);
   *   }));
   *
   * });
   *
   * ```
   */
  module.sharedInjector = function() {
    if (!(module.$$beforeAllHook && module.$$afterAllHook)) {
      throw Error('sharedInjector() cannot be used unless your test runner defines beforeAll/afterAll');
    }

    var initialized = false;

    module.$$beforeAllHook(/** @this */ function() {
      if (injectorState.shared) {
        injectorState.sharedError = Error('sharedInjector() cannot be called inside a context that has already called sharedInjector()');
        throw injectorState.sharedError;
      }
      initialized = true;
      currentSpec = this;
      injectorState.shared = true;
    });

    module.$$afterAllHook(function() {
      if (initialized) {
        injectorState = new InjectorState();
        module.$$cleanup();
      } else {
        injectorState.sharedError = null;
      }
    });
  };

  module.$$beforeEach = function() {
    if (injectorState.shared && currentSpec && currentSpec !== this) {
      var state = currentSpec;
      currentSpec = this;
      angular.forEach(['$injector','$modules','$providerInjector', '$injectorStrict'], function(k) {
        currentSpec[k] = state[k];
        state[k] = null;
      });
    } else {
      currentSpec = this;
      originalRootElement = null;
      annotatedFunctions = [];
    }
  };

  module.$$afterEach = function() {
    if (injectorState.cleanupAfterEach()) {
      module.$$cleanup();
    }
  };

  module.$$cleanup = function() {
    var injector = currentSpec.$injector;

    annotatedFunctions.forEach(function(fn) {
      delete fn.$inject;
    });

    currentSpec.$injector = null;
    currentSpec.$modules = null;
    currentSpec.$providerInjector = null;
    currentSpec = null;

    if (injector) {
      // Ensure `$rootElement` is instantiated, before checking `originalRootElement`
      var $rootElement = injector.get('$rootElement');
      var rootNode = $rootElement && $rootElement[0];
      var cleanUpNodes = !originalRootElement ? [] : [originalRootElement[0]];
      if (rootNode && (!originalRootElement || rootNode !== originalRootElement[0])) {
        cleanUpNodes.push(rootNode);
      }
      angular.element.cleanData(cleanUpNodes);

      // Ensure `$destroy()` is available, before calling it
      // (a mocked `$rootScope` might not implement it (or not even be an object at all))
      var $rootScope = injector.get('$rootScope');
      if ($rootScope && $rootScope.$destroy) $rootScope.$destroy();
    }

    // clean up jquery's fragment cache
    angular.forEach(angular.element.fragments, function(val, key) {
      delete angular.element.fragments[key];
    });

    MockXhr.$$lastInstance = null;

    angular.forEach(angular.callbacks, function(val, key) {
      delete angular.callbacks[key];
    });
    angular.callbacks.$$counter = 0;
  };

  (window.beforeEach || window.setup)(module.$$beforeEach);
  (window.afterEach || window.teardown)(module.$$afterEach);

  /**
   * @ngdoc function
   * @name angular.mock.inject
   * @description
   *
   * *NOTE*: This function is also published on window for easy access.<br>
   * *NOTE*: This function is declared ONLY WHEN running tests with jasmine or mocha
   *
   * The inject function wraps a function into an injectable function. The inject() creates new
   * instance of {@link auto.$injector $injector} per test, which is then used for
   * resolving references.
   *
   *
   * ## Resolving References (Underscore Wrapping)
   * Often, we would like to inject a reference once, in a `beforeEach()` block and reuse this
   * in multiple `it()` clauses. To be able to do this we must assign the reference to a variable
   * that is declared in the scope of the `describe()` block. Since we would, most likely, want
   * the variable to have the same name of the reference we have a problem, since the parameter
   * to the `inject()` function would hide the outer variable.
   *
   * To help with this, the injected parameters can, optionally, be enclosed with underscores.
   * These are ignored by the injector when the reference name is resolved.
   *
   * For example, the parameter `_myService_` would be resolved as the reference `myService`.
   * Since it is available in the function body as `_myService_`, we can then assign it to a variable
   * defined in an outer scope.
   *
   * ```
   * // Defined out reference variable outside
   * var myService;
   *
   * // Wrap the parameter in underscores
   * beforeEach( inject( function(_myService_){
   *   myService = _myService_;
   * }));
   *
   * // Use myService in a series of tests.
   * it('makes use of myService', function() {
   *   myService.doStuff();
   * });
   *
   * ```
   *
   * See also {@link angular.mock.module angular.mock.module}
   *
   * ## Example
   * Example of what a typical jasmine tests looks like with the inject method.
   * ```js
   *
   *   angular.module('myApplicationModule', [])
   *       .value('mode', 'app')
   *       .value('version', 'v1.0.1');
   *
   *
   *   describe('MyApp', function() {
   *
   *     // You need to load modules that you want to test,
   *     // it loads only the "ng" module by default.
   *     beforeEach(module('myApplicationModule'));
   *
   *
   *     // inject() is used to inject arguments of all given functions
   *     it('should provide a version', inject(function(mode, version) {
   *       expect(version).toEqual('v1.0.1');
   *       expect(mode).toEqual('app');
   *     }));
   *
   *
   *     // The inject and module method can also be used inside of the it or beforeEach
   *     it('should override a version and test the new version is injected', function() {
   *       // module() takes functions or strings (module aliases)
   *       module(function($provide) {
   *         $provide.value('version', 'overridden'); // override version here
   *       });
   *
   *       inject(function(version) {
   *         expect(version).toEqual('overridden');
   *       });
   *     });
   *   });
   *
   * ```
   *
   * @param {...Function} fns any number of functions which will be injected using the injector.
   */



  var ErrorAddingDeclarationLocationStack = function ErrorAddingDeclarationLocationStack(e, errorForStack) {
    this.message = e.message;
    this.name = e.name;
    if (e.line) this.line = e.line;
    if (e.sourceId) this.sourceId = e.sourceId;
    if (e.stack && errorForStack)
      this.stack = e.stack + '\n' + errorForStack.stack;
    if (e.stackArray) this.stackArray = e.stackArray;
  };
  ErrorAddingDeclarationLocationStack.prototype = Error.prototype;

  window.inject = angular.mock.inject = function() {
    var blockFns = Array.prototype.slice.call(arguments, 0);
    var errorForStack = new Error('Declaration Location');
    // IE10+ and PhanthomJS do not set stack trace information, until the error is thrown
    if (!errorForStack.stack) {
      try {
        throw errorForStack;
      } catch (e) { /* empty */ }
    }
    return wasInjectorCreated() ? WorkFn.call(currentSpec) : WorkFn;
    /////////////////////
    function WorkFn() {
      var modules = currentSpec.$modules || [];
      var strictDi = !!currentSpec.$injectorStrict;
      modules.unshift(['$injector', function($injector) {
        currentSpec.$providerInjector = $injector;
      }]);
      modules.unshift('ngMock');
      modules.unshift('ng');
      var injector = currentSpec.$injector;
      if (!injector) {
        if (strictDi) {
          // If strictDi is enabled, annotate the providerInjector blocks
          angular.forEach(modules, function(moduleFn) {
            if (typeof moduleFn === 'function') {
              angular.injector.$$annotate(moduleFn);
            }
          });
        }
        injector = currentSpec.$injector = angular.injector(modules, strictDi);
        currentSpec.$injectorStrict = strictDi;
      }
      for (var i = 0, ii = blockFns.length; i < ii; i++) {
        if (currentSpec.$injectorStrict) {
          // If the injector is strict / strictDi, and the spec wants to inject using automatic
          // annotation, then annotate the function here.
          injector.annotate(blockFns[i]);
        }
        try {
          injector.invoke(blockFns[i] || angular.noop, this);
        } catch (e) {
          if (e.stack && errorForStack) {
            throw new ErrorAddingDeclarationLocationStack(e, errorForStack);
          }
          throw e;
        } finally {
          errorForStack = null;
        }
      }
    }
  };


  angular.mock.inject.strictDi = function(value) {
    value = arguments.length ? !!value : true;
    return wasInjectorCreated() ? workFn() : workFn;

    function workFn() {
      if (value !== currentSpec.$injectorStrict) {
        if (currentSpec.$injector) {
          throw new Error('Injector already created, can not modify strict annotations');
        } else {
          currentSpec.$injectorStrict = value;
        }
      }
    }
  };

  function InjectorState() {
    this.shared = false;
    this.sharedError = null;

    this.cleanupAfterEach = function() {
      return !this.shared || this.sharedError;
    };
  }
})(window.jasmine || window.mocha);

'use strict';

(function() {
  /**
   * @ngdoc function
   * @name browserTrigger
   * @description
   *
   * This is a global (window) function that is only available when the {@link ngMock} module is
   * included.
   *
   * It can be used to trigger a native browser event on an element, which is useful for unit testing.
   *
   *
   * @param {Object} element Either a wrapped jQuery/jqLite node or a DOMElement
   * @param {string=} eventType Optional event type. If none is specified, the function tries
   *                            to determine the right event type for the element, e.g. `change` for
   *                            `input[text]`.
   * @param {Object=} eventData An optional object which contains additional event data that is used
   *                            when creating the event:
   *
   *  - `bubbles`: [Event.bubbles](https://developer.mozilla.org/docs/Web/API/Event/bubbles).
   *    Not applicable to all events.
   *
   *  - `cancelable`: [Event.cancelable](https://developer.mozilla.org/docs/Web/API/Event/cancelable).
   *    Not applicable to all events.
   *
   *  - `charcode`: [charCode](https://developer.mozilla.org/docs/Web/API/KeyboardEvent/charcode)
   *    for keyboard events (keydown, keypress, and keyup).
   *
   *  - `data`: [data](https://developer.mozilla.org/en-US/docs/Web/API/CompositionEvent/data) for
   *    [CompositionEvents](https://developer.mozilla.org/en-US/docs/Web/API/CompositionEvent).
   *
   *  - `elapsedTime`: the elapsedTime for
   *    [TransitionEvent](https://developer.mozilla.org/docs/Web/API/TransitionEvent)
   *    and [AnimationEvent](https://developer.mozilla.org/docs/Web/API/AnimationEvent).
   *
   *  - `keycode`: [keyCode](https://developer.mozilla.org/docs/Web/API/KeyboardEvent/keycode)
   *    for keyboard events (keydown, keypress, and keyup).
   *
   *  - `keys`: an array of possible modifier keys (ctrl, alt, shift, meta) for
   *    [MouseEvent](https://developer.mozilla.org/docs/Web/API/MouseEvent) and
   *    keyboard events (keydown, keypress, and keyup).
   *
   *  - `relatedTarget`: the
   *    [relatedTarget](https://developer.mozilla.org/docs/Web/API/MouseEvent/relatedTarget)
   *    for [MouseEvent](https://developer.mozilla.org/docs/Web/API/MouseEvent).
   *
   *  - `which`: [which](https://developer.mozilla.org/docs/Web/API/KeyboardEvent/which)
   *    for keyboard events (keydown, keypress, and keyup).
   *
   *  - `x`: x-coordinates for [MouseEvent](https://developer.mozilla.org/docs/Web/API/MouseEvent)
   *    and [TouchEvent](https://developer.mozilla.org/docs/Web/API/TouchEvent).
   *
   *  - `y`: y-coordinates for [MouseEvent](https://developer.mozilla.org/docs/Web/API/MouseEvent)
   *    and [TouchEvent](https://developer.mozilla.org/docs/Web/API/TouchEvent).
   *
   */
  window.browserTrigger = function browserTrigger(element, eventType, eventData) {
    if (element && !element.nodeName) element = element[0];
    if (!element) return;

    eventData = eventData || {};
    var relatedTarget = eventData.relatedTarget || element;
    var keys = eventData.keys;
    var x = eventData.x;
    var y = eventData.y;

    var inputType = (element.type) ? element.type.toLowerCase() : null,
        nodeName = element.nodeName.toLowerCase();
    if (!eventType) {
      eventType = {
        'text':            'change',
        'textarea':        'change',
        'hidden':          'change',
        'password':        'change',
        'button':          'click',
        'submit':          'click',
        'reset':           'click',
        'image':           'click',
        'checkbox':        'click',
        'radio':           'click',
        'select-one':      'change',
        'select-multiple': 'change',
        '_default_':       'click'
      }[inputType || '_default_'];
    }

    if (nodeName === 'option') {
      element.parentNode.value = element.value;
      element = element.parentNode;
      eventType = 'change';
    }

    keys = keys || [];
    function pressed(key) {
      return keys.indexOf(key) !== -1;
    }

    var evnt;
    if (/transitionend/.test(eventType)) {
      if (window.WebKitTransitionEvent) {
        evnt = new window.WebKitTransitionEvent(eventType, eventData);
        evnt.initEvent(eventType, eventData.bubbles, true);
      } else {
        try {
          evnt = new window.TransitionEvent(eventType, eventData);
        } catch (e) {
          evnt = window.document.createEvent('TransitionEvent');
          evnt.initTransitionEvent(eventType, eventData.bubbles, null, null, eventData.elapsedTime || 0);
        }
      }
    } else if (/animationend/.test(eventType)) {
      if (window.WebKitAnimationEvent) {
        evnt = new window.WebKitAnimationEvent(eventType, eventData);
        evnt.initEvent(eventType, eventData.bubbles, true);
      } else {
        try {
          evnt = new window.AnimationEvent(eventType, eventData);
        } catch (e) {
          evnt = window.document.createEvent('AnimationEvent');
          evnt.initAnimationEvent(eventType, eventData.bubbles, null, null, eventData.elapsedTime || 0);
        }
      }
    } else if (/touch/.test(eventType) && supportsTouchEvents()) {
      evnt = createTouchEvent(element, eventType, x, y);
    } else if (/key/.test(eventType)) {
      evnt = window.document.createEvent('Events');
      evnt.initEvent(eventType, eventData.bubbles, eventData.cancelable);
      evnt.view = window;
      evnt.ctrlKey = pressed('ctrl');
      evnt.altKey = pressed('alt');
      evnt.shiftKey = pressed('shift');
      evnt.metaKey = pressed('meta');
      evnt.keyCode = eventData.keyCode;
      evnt.charCode = eventData.charCode;
      evnt.which = eventData.which;
    } else if (/composition/.test(eventType)) {
      try {
        evnt = new window.CompositionEvent(eventType, {
          data: eventData.data
        });
      } catch (e) {
        // Support: IE9+
        evnt = window.document.createEvent('CompositionEvent', {});
        evnt.initCompositionEvent(
          eventType,
          eventData.bubbles,
          eventData.cancelable,
          window,
          eventData.data,
          null
        );
      }

    } else {
      evnt = window.document.createEvent('MouseEvents');
      x = x || 0;
      y = y || 0;
      evnt.initMouseEvent(eventType, true, true, window, 0, x, y, x, y, pressed('ctrl'),
          pressed('alt'), pressed('shift'), pressed('meta'), 0, relatedTarget);
    }

    /* we're unable to change the timeStamp value directly so this
     * is only here to allow for testing where the timeStamp value is
     * read */
    evnt.$manualTimeStamp = eventData.timeStamp;

    if (!evnt) return;

    if (!eventData.bubbles || supportsEventBubblingInDetachedTree() || isAttachedToDocument(element)) {
      return element.dispatchEvent(evnt);
    } else {
      triggerForPath(element, evnt);
    }
  };

  function supportsTouchEvents() {
    if ('_cached' in supportsTouchEvents) {
      return supportsTouchEvents._cached;
    }
    if (!window.document.createTouch || !window.document.createTouchList) {
      supportsTouchEvents._cached = false;
      return false;
    }
    try {
      window.document.createEvent('TouchEvent');
    } catch (e) {
      supportsTouchEvents._cached = false;
      return false;
    }
    supportsTouchEvents._cached = true;
    return true;
  }

  function createTouchEvent(element, eventType, x, y) {
    var evnt = new window.Event(eventType);
    x = x || 0;
    y = y || 0;

    var touch = window.document.createTouch(window, element, Date.now(), x, y, x, y);
    var touches = window.document.createTouchList(touch);

    evnt.touches = touches;

    return evnt;
  }

  function supportsEventBubblingInDetachedTree() {
    if ('_cached' in supportsEventBubblingInDetachedTree) {
      return supportsEventBubblingInDetachedTree._cached;
    }
    supportsEventBubblingInDetachedTree._cached = false;
    var doc = window.document;
    if (doc) {
      var parent = doc.createElement('div'),
          child = parent.cloneNode();
      parent.appendChild(child);
      parent.addEventListener('e', function() {
        supportsEventBubblingInDetachedTree._cached = true;
      });
      var evnt = window.document.createEvent('Events');
      evnt.initEvent('e', true, true);
      child.dispatchEvent(evnt);
    }
    return supportsEventBubblingInDetachedTree._cached;
  }

  function triggerForPath(element, evnt) {
    var stop = false;

    var _stopPropagation = evnt.stopPropagation;
    evnt.stopPropagation = function() {
      stop = true;
      _stopPropagation.apply(evnt, arguments);
    };
    patchEventTargetForBubbling(evnt, element);
    do {
      element.dispatchEvent(evnt);
      // eslint-disable-next-line no-unmodified-loop-condition
    } while (!stop && (element = element.parentNode));
  }

  function patchEventTargetForBubbling(event, target) {
    event._target = target;
    Object.defineProperty(event, 'target', {get: function() { return this._target;}});
  }

  function isAttachedToDocument(element) {
    while ((element = element.parentNode)) {
        if (element === window) {
            return true;
        }
    }
    return false;
  }
})();


})(window, window.angular);

// const configure = ($stateProvider, $urlRouterProvider) => {
//     // config state
//     const home = {
//         url: '/',
//         templateUrl: 'home/index.view.html',
//         controller: 'Home.IndexController',
//         controllerAs: 'vm'
//     };
//
//     const login = {
//         url: '/login',
//         templateUrl: 'login/index.view.html',
//         controller: 'Login.IndexController',
//         controllerAs: 'vm'
//     };
//
//     // default route
//     $urlRouterProvider.otherwise('/');
//
//     // app route
//     $stateProvider
//         .state('home', home)
//         .state('login', login);
// };

// const run = ($rootScope, $http, $location, $localStorage) => {
//     // keep user logged after page refresh
//     if ($localStorage.currentUser) {
//         $http.defaults.headers.common.Authorization = 'Bearer ' + $localStorage.currentUser.token;
//     }
//
//     // redirect to login page if not logged in and trying to access a restricted page
//     $rootScope.$on('$locationChangeStart',function (event, next, current) {
//         const publicPages = ['/login'];
//         const restrictedPage = publicPages.indexOf($location.path()) === -1;
//
//         if (restrictedPage && !$localStorage.currentUser) {
//             $location.path('/login');
//         }
//     });
// };

angular
    .module("myAuth",['ui.router', 'ngMessages', 'ngStorage', 'ngMockE2E'])
    .config(function($stateProvider, $urlRouterProvider) {
        // config state
        const home = {
            url: '/',
            templateUrl: 'home/index.view.html',
            controller: 'Home.IndexController',
            controllerAs: 'vm'
        };

        const login = {
            url: '/login',
            templateUrl: 'login/index.view.html',
            controller: 'Login.IndexController',
            controllerAs: 'vm'
        };

        // default route
        $urlRouterProvider.otherwise('/');

        // app route
        $stateProvider
            .state('home', home)
            .state('login', login);
    })
    .run(function ($rootScope, $http, $location, $localStorage) {
        // keep user logged after page refresh
        if ($localStorage.currentUser) {
            $http.defaults.headers.common.Authorization = 'Bearer ' + $localStorage.currentUser.token;
        }

        // redirect to login page if not logged in and trying to access a restricted page
        $rootScope.$on('$locationChangeStart',function (event, next, current) {
            const publicPages = ['/login'];
            const restrictedPage = publicPages.indexOf($location.path()) === -1;

            if (restrictedPage && !$localStorage.currentUser) {
                $location.path('/login');
            }
        });
    });
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXIubWluLmpzIiwiYW5ndWxhci1tZXNzYWdlcy5taW4uanMiLCJhbmd1bGFyLXVpLXJvdXRlci5taW4uanMiLCJuZ1N0b3JhZ2UubWluLmpzIiwiYW5ndWxhci1tb2Nrcy5qcyIsImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5VkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDWkE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN3FIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoicmVxdWlyZUpTLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiBBbmd1bGFySlMgdjEuNy44XG4gKGMpIDIwMTAtMjAxOCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiBMaWNlbnNlOiBNSVRcbiovXG4oZnVuY3Rpb24oQyl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIHJlKGEpe2lmKEQoYSkpdyhhLm9iamVjdE1heERlcHRoKSYmKFdiLm9iamVjdE1heERlcHRoPVhiKGEub2JqZWN0TWF4RGVwdGgpP2Eub2JqZWN0TWF4RGVwdGg6TmFOKSx3KGEudXJsRXJyb3JQYXJhbXNFbmFibGVkKSYmR2EoYS51cmxFcnJvclBhcmFtc0VuYWJsZWQpJiYoV2IudXJsRXJyb3JQYXJhbXNFbmFibGVkPWEudXJsRXJyb3JQYXJhbXNFbmFibGVkKTtlbHNlIHJldHVybiBXYn1mdW5jdGlvbiBYYihhKXtyZXR1cm4gVyhhKSYmMDxhfWZ1bmN0aW9uIEYoYSxiKXtiPWJ8fEVycm9yO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWFyZ3VtZW50c1swXSxjO2M9XCJbXCIrKGE/YStcIjpcIjpcIlwiKStkK1wiXSBodHRwOi8vZXJyb3JzLmFuZ3VsYXJqcy5vcmcvMS43LjgvXCIrKGE/YStcIi9cIjpcIlwiKStkO2ZvcihkPTE7ZDxhcmd1bWVudHMubGVuZ3RoO2QrKyl7Yz1jKygxPT1kP1wiP1wiOlwiJlwiKStcInBcIisoZC0xKStcIj1cIjt2YXIgZT1lbmNvZGVVUklDb21wb25lbnQsXG5mO2Y9YXJndW1lbnRzW2RdO2Y9XCJmdW5jdGlvblwiPT10eXBlb2YgZj9mLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLFwiXCIpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBmP1widW5kZWZpbmVkXCI6XCJzdHJpbmdcIiE9dHlwZW9mIGY/SlNPTi5zdHJpbmdpZnkoZik6ZjtjKz1lKGYpfXJldHVybiBuZXcgYihjKX19ZnVuY3Rpb24geWEoYSl7aWYobnVsbD09YXx8JGEoYSkpcmV0dXJuITE7aWYoSChhKXx8QShhKXx8eCYmYSBpbnN0YW5jZW9mIHgpcmV0dXJuITA7dmFyIGI9XCJsZW5ndGhcImluIE9iamVjdChhKSYmYS5sZW5ndGg7cmV0dXJuIFcoYikmJigwPD1iJiZiLTEgaW4gYXx8XCJmdW5jdGlvblwiPT09dHlwZW9mIGEuaXRlbSl9ZnVuY3Rpb24gcihhLGIsZCl7dmFyIGMsZTtpZihhKWlmKEIoYSkpZm9yKGMgaW4gYSlcInByb3RvdHlwZVwiIT09YyYmXCJsZW5ndGhcIiE9PWMmJlwibmFtZVwiIT09YyYmYS5oYXNPd25Qcm9wZXJ0eShjKSYmYi5jYWxsKGQsYVtjXSxjLGEpO2Vsc2UgaWYoSChhKXx8XG55YShhKSl7dmFyIGY9XCJvYmplY3RcIiE9PXR5cGVvZiBhO2M9MDtmb3IoZT1hLmxlbmd0aDtjPGU7YysrKShmfHxjIGluIGEpJiZiLmNhbGwoZCxhW2NdLGMsYSl9ZWxzZSBpZihhLmZvckVhY2gmJmEuZm9yRWFjaCE9PXIpYS5mb3JFYWNoKGIsZCxhKTtlbHNlIGlmKE5jKGEpKWZvcihjIGluIGEpYi5jYWxsKGQsYVtjXSxjLGEpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEuaGFzT3duUHJvcGVydHkpZm9yKGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiZiLmNhbGwoZCxhW2NdLGMsYSk7ZWxzZSBmb3IoYyBpbiBhKXRhLmNhbGwoYSxjKSYmYi5jYWxsKGQsYVtjXSxjLGEpO3JldHVybiBhfWZ1bmN0aW9uIE9jKGEsYixkKXtmb3IodmFyIGM9T2JqZWN0LmtleXMoYSkuc29ydCgpLGU9MDtlPGMubGVuZ3RoO2UrKyliLmNhbGwoZCxhW2NbZV1dLGNbZV0pO3JldHVybiBjfWZ1bmN0aW9uIFliKGEpe3JldHVybiBmdW5jdGlvbihiLGQpe2EoZCxiKX19ZnVuY3Rpb24gc2UoKXtyZXR1cm4rK3BifVxuZnVuY3Rpb24gWmIoYSxiLGQpe2Zvcih2YXIgYz1hLiQkaGFzaEtleSxlPTAsZj1iLmxlbmd0aDtlPGY7KytlKXt2YXIgZz1iW2VdO2lmKEQoZyl8fEIoZykpZm9yKHZhciBrPU9iamVjdC5rZXlzKGcpLGg9MCxsPWsubGVuZ3RoO2g8bDtoKyspe3ZhciBtPWtbaF0scD1nW21dO2QmJkQocCk/aGEocCk/YVttXT1uZXcgRGF0ZShwLnZhbHVlT2YoKSk6YWIocCk/YVttXT1uZXcgUmVnRXhwKHApOnAubm9kZU5hbWU/YVttXT1wLmNsb25lTm9kZSghMCk6JGIocCk/YVttXT1wLmNsb25lKCk6KEQoYVttXSl8fChhW21dPUgocCk/W106e30pLFpiKGFbbV0sW3BdLCEwKSk6YVttXT1wfX1jP2EuJCRoYXNoS2V5PWM6ZGVsZXRlIGEuJCRoYXNoS2V5O3JldHVybiBhfWZ1bmN0aW9uIFMoYSl7cmV0dXJuIFpiKGEsSGEuY2FsbChhcmd1bWVudHMsMSksITEpfWZ1bmN0aW9uIHRlKGEpe3JldHVybiBaYihhLEhhLmNhbGwoYXJndW1lbnRzLDEpLCEwKX1mdW5jdGlvbiBmYShhKXtyZXR1cm4gcGFyc2VJbnQoYSxcbjEwKX1mdW5jdGlvbiBhYyhhLGIpe3JldHVybiBTKE9iamVjdC5jcmVhdGUoYSksYil9ZnVuY3Rpb24gRSgpe31mdW5jdGlvbiBUYShhKXtyZXR1cm4gYX1mdW5jdGlvbiBpYShhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19ZnVuY3Rpb24gYmMoYSl7cmV0dXJuIEIoYS50b1N0cmluZykmJmEudG9TdHJpbmchPT1sYX1mdW5jdGlvbiB6KGEpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYX1mdW5jdGlvbiB3KGEpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgYX1mdW5jdGlvbiBEKGEpe3JldHVybiBudWxsIT09YSYmXCJvYmplY3RcIj09PXR5cGVvZiBhfWZ1bmN0aW9uIE5jKGEpe3JldHVybiBudWxsIT09YSYmXCJvYmplY3RcIj09PXR5cGVvZiBhJiYhUGMoYSl9ZnVuY3Rpb24gQShhKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGF9ZnVuY3Rpb24gVyhhKXtyZXR1cm5cIm51bWJlclwiPT09dHlwZW9mIGF9ZnVuY3Rpb24gaGEoYSl7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1sYS5jYWxsKGEpfVxuZnVuY3Rpb24gSChhKXtyZXR1cm4gQXJyYXkuaXNBcnJheShhKXx8YSBpbnN0YW5jZW9mIEFycmF5fWZ1bmN0aW9uIGNjKGEpe3N3aXRjaChsYS5jYWxsKGEpKXtjYXNlIFwiW29iamVjdCBFcnJvcl1cIjpyZXR1cm4hMDtjYXNlIFwiW29iamVjdCBFeGNlcHRpb25dXCI6cmV0dXJuITA7Y2FzZSBcIltvYmplY3QgRE9NRXhjZXB0aW9uXVwiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuIGEgaW5zdGFuY2VvZiBFcnJvcn19ZnVuY3Rpb24gQihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT10eXBlb2YgYX1mdW5jdGlvbiBhYihhKXtyZXR1cm5cIltvYmplY3QgUmVnRXhwXVwiPT09bGEuY2FsbChhKX1mdW5jdGlvbiAkYShhKXtyZXR1cm4gYSYmYS53aW5kb3c9PT1hfWZ1bmN0aW9uIGJiKGEpe3JldHVybiBhJiZhLiRldmFsQXN5bmMmJmEuJHdhdGNofWZ1bmN0aW9uIEdhKGEpe3JldHVyblwiYm9vbGVhblwiPT09dHlwZW9mIGF9ZnVuY3Rpb24gdWUoYSl7cmV0dXJuIGEmJlcoYS5sZW5ndGgpJiZ2ZS50ZXN0KGxhLmNhbGwoYSkpfVxuZnVuY3Rpb24gJGIoYSl7cmV0dXJuISghYXx8IShhLm5vZGVOYW1lfHxhLnByb3AmJmEuYXR0ciYmYS5maW5kKSl9ZnVuY3Rpb24gd2UoYSl7dmFyIGI9e307YT1hLnNwbGl0KFwiLFwiKTt2YXIgZDtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWJbYVtkXV09ITA7cmV0dXJuIGJ9ZnVuY3Rpb24gdWEoYSl7cmV0dXJuIEsoYS5ub2RlTmFtZXx8YVswXSYmYVswXS5ub2RlTmFtZSl9ZnVuY3Rpb24gY2IoYSxiKXt2YXIgZD1hLmluZGV4T2YoYik7MDw9ZCYmYS5zcGxpY2UoZCwxKTtyZXR1cm4gZH1mdW5jdGlvbiBJYShhLGIsZCl7ZnVuY3Rpb24gYyhhLGIsYyl7Yy0tO2lmKDA+YylyZXR1cm5cIi4uLlwiO3ZhciBkPWIuJCRoYXNoS2V5LGY7aWYoSChhKSl7Zj0wO2Zvcih2YXIgZz1hLmxlbmd0aDtmPGc7ZisrKWIucHVzaChlKGFbZl0sYykpfWVsc2UgaWYoTmMoYSkpZm9yKGYgaW4gYSliW2ZdPWUoYVtmXSxjKTtlbHNlIGlmKGEmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBhLmhhc093blByb3BlcnR5KWZvcihmIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShmKSYmXG4oYltmXT1lKGFbZl0sYykpO2Vsc2UgZm9yKGYgaW4gYSl0YS5jYWxsKGEsZikmJihiW2ZdPWUoYVtmXSxjKSk7ZD9iLiQkaGFzaEtleT1kOmRlbGV0ZSBiLiQkaGFzaEtleTtyZXR1cm4gYn1mdW5jdGlvbiBlKGEsYil7aWYoIUQoYSkpcmV0dXJuIGE7dmFyIGQ9Zy5pbmRleE9mKGEpO2lmKC0xIT09ZClyZXR1cm4ga1tkXTtpZigkYShhKXx8YmIoYSkpdGhyb3cgcGEoXCJjcHdzXCIpO3ZhciBkPSExLGU9ZihhKTt2b2lkIDA9PT1lJiYoZT1IKGEpP1tdOk9iamVjdC5jcmVhdGUoUGMoYSkpLGQ9ITApO2cucHVzaChhKTtrLnB1c2goZSk7cmV0dXJuIGQ/YyhhLGUsYik6ZX1mdW5jdGlvbiBmKGEpe3N3aXRjaChsYS5jYWxsKGEpKXtjYXNlIFwiW29iamVjdCBJbnQ4QXJyYXldXCI6Y2FzZSBcIltvYmplY3QgSW50MTZBcnJheV1cIjpjYXNlIFwiW29iamVjdCBJbnQzMkFycmF5XVwiOmNhc2UgXCJbb2JqZWN0IEZsb2F0MzJBcnJheV1cIjpjYXNlIFwiW29iamVjdCBGbG9hdDY0QXJyYXldXCI6Y2FzZSBcIltvYmplY3QgVWludDhBcnJheV1cIjpjYXNlIFwiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV1cIjpjYXNlIFwiW29iamVjdCBVaW50MTZBcnJheV1cIjpjYXNlIFwiW29iamVjdCBVaW50MzJBcnJheV1cIjpyZXR1cm4gbmV3IGEuY29uc3RydWN0b3IoZShhLmJ1ZmZlciksXG5hLmJ5dGVPZmZzZXQsYS5sZW5ndGgpO2Nhc2UgXCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiOmlmKCFhLnNsaWNlKXt2YXIgYj1uZXcgQXJyYXlCdWZmZXIoYS5ieXRlTGVuZ3RoKTsobmV3IFVpbnQ4QXJyYXkoYikpLnNldChuZXcgVWludDhBcnJheShhKSk7cmV0dXJuIGJ9cmV0dXJuIGEuc2xpY2UoMCk7Y2FzZSBcIltvYmplY3QgQm9vbGVhbl1cIjpjYXNlIFwiW29iamVjdCBOdW1iZXJdXCI6Y2FzZSBcIltvYmplY3QgU3RyaW5nXVwiOmNhc2UgXCJbb2JqZWN0IERhdGVdXCI6cmV0dXJuIG5ldyBhLmNvbnN0cnVjdG9yKGEudmFsdWVPZigpKTtjYXNlIFwiW29iamVjdCBSZWdFeHBdXCI6cmV0dXJuIGI9bmV3IFJlZ0V4cChhLnNvdXJjZSxhLnRvU3RyaW5nKCkubWF0Y2goL1teL10qJC8pWzBdKSxiLmxhc3RJbmRleD1hLmxhc3RJbmRleCxiO2Nhc2UgXCJbb2JqZWN0IEJsb2JdXCI6cmV0dXJuIG5ldyBhLmNvbnN0cnVjdG9yKFthXSx7dHlwZTphLnR5cGV9KX1pZihCKGEuY2xvbmVOb2RlKSlyZXR1cm4gYS5jbG9uZU5vZGUoITApfVxudmFyIGc9W10saz1bXTtkPVhiKGQpP2Q6TmFOO2lmKGIpe2lmKHVlKGIpfHxcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1sYS5jYWxsKGIpKXRocm93IHBhKFwiY3B0YVwiKTtpZihhPT09Yil0aHJvdyBwYShcImNwaVwiKTtIKGIpP2IubGVuZ3RoPTA6cihiLGZ1bmN0aW9uKGEsYyl7XCIkJGhhc2hLZXlcIiE9PWMmJmRlbGV0ZSBiW2NdfSk7Zy5wdXNoKGEpO2sucHVzaChiKTtyZXR1cm4gYyhhLGIsZCl9cmV0dXJuIGUoYSxkKX1mdW5jdGlvbiBkYyhhLGIpe3JldHVybiBhPT09Ynx8YSE9PWEmJmIhPT1ifWZ1bmN0aW9uIHZhKGEsYil7aWYoYT09PWIpcmV0dXJuITA7aWYobnVsbD09PWF8fG51bGw9PT1iKXJldHVybiExO2lmKGEhPT1hJiZiIT09YilyZXR1cm4hMDt2YXIgZD10eXBlb2YgYSxjO2lmKGQ9PT10eXBlb2YgYiYmXCJvYmplY3RcIj09PWQpaWYoSChhKSl7aWYoIUgoYikpcmV0dXJuITE7aWYoKGQ9YS5sZW5ndGgpPT09Yi5sZW5ndGgpe2ZvcihjPTA7YzxkO2MrKylpZighdmEoYVtjXSxcbmJbY10pKXJldHVybiExO3JldHVybiEwfX1lbHNle2lmKGhhKGEpKXJldHVybiBoYShiKT9kYyhhLmdldFRpbWUoKSxiLmdldFRpbWUoKSk6ITE7aWYoYWIoYSkpcmV0dXJuIGFiKGIpP2EudG9TdHJpbmcoKT09PWIudG9TdHJpbmcoKTohMTtpZihiYihhKXx8YmIoYil8fCRhKGEpfHwkYShiKXx8SChiKXx8aGEoYil8fGFiKGIpKXJldHVybiExO2Q9VCgpO2ZvcihjIGluIGEpaWYoXCIkXCIhPT1jLmNoYXJBdCgwKSYmIUIoYVtjXSkpe2lmKCF2YShhW2NdLGJbY10pKXJldHVybiExO2RbY109ITB9Zm9yKGMgaW4gYilpZighKGMgaW4gZCkmJlwiJFwiIT09Yy5jaGFyQXQoMCkmJncoYltjXSkmJiFCKGJbY10pKXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGRiKGEsYixkKXtyZXR1cm4gYS5jb25jYXQoSGEuY2FsbChiLGQpKX1mdW5jdGlvbiBWYShhLGIpe3ZhciBkPTI8YXJndW1lbnRzLmxlbmd0aD9IYS5jYWxsKGFyZ3VtZW50cywyKTpbXTtyZXR1cm4hQihiKXx8YiBpbnN0YW5jZW9mXG5SZWdFeHA/YjpkLmxlbmd0aD9mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2IuYXBwbHkoYSxkYihkLGFyZ3VtZW50cywwKSk6Yi5hcHBseShhLGQpfTpmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2IuYXBwbHkoYSxhcmd1bWVudHMpOmIuY2FsbChhKX19ZnVuY3Rpb24gUWMoYSxiKXt2YXIgZD1iO1wic3RyaW5nXCI9PT10eXBlb2YgYSYmXCIkXCI9PT1hLmNoYXJBdCgwKSYmXCIkXCI9PT1hLmNoYXJBdCgxKT9kPXZvaWQgMDokYShiKT9kPVwiJFdJTkRPV1wiOmImJkMuZG9jdW1lbnQ9PT1iP2Q9XCIkRE9DVU1FTlRcIjpiYihiKSYmKGQ9XCIkU0NPUEVcIik7cmV0dXJuIGR9ZnVuY3Rpb24gZWIoYSxiKXtpZigheihhKSlyZXR1cm4gVyhiKXx8KGI9Yj8yOm51bGwpLEpTT04uc3RyaW5naWZ5KGEsUWMsYil9ZnVuY3Rpb24gUmMoYSl7cmV0dXJuIEEoYSk/SlNPTi5wYXJzZShhKTphfWZ1bmN0aW9uIGVjKGEsYil7YT1hLnJlcGxhY2UoeGUsXCJcIik7dmFyIGQ9RGF0ZS5wYXJzZShcIkphbiAwMSwgMTk3MCAwMDowMDowMCBcIitcbmEpLzZFNDtyZXR1cm4gWChkKT9iOmR9ZnVuY3Rpb24gU2MoYSxiKXthPW5ldyBEYXRlKGEuZ2V0VGltZSgpKTthLnNldE1pbnV0ZXMoYS5nZXRNaW51dGVzKCkrYik7cmV0dXJuIGF9ZnVuY3Rpb24gZmMoYSxiLGQpe2Q9ZD8tMToxO3ZhciBjPWEuZ2V0VGltZXpvbmVPZmZzZXQoKTtiPWVjKGIsYyk7cmV0dXJuIFNjKGEsZCooYi1jKSl9ZnVuY3Rpb24gemEoYSl7YT14KGEpLmNsb25lKCkuZW1wdHkoKTt2YXIgYj14KFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKGEpLmh0bWwoKTt0cnl7cmV0dXJuIGFbMF0ubm9kZVR5cGU9PT1QYT9LKGIpOmIubWF0Y2goL14oPFtePl0rPikvKVsxXS5yZXBsYWNlKC9ePChbXFx3LV0rKS8sZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxcIitLKGIpfSl9Y2F0Y2goZCl7cmV0dXJuIEsoYil9fWZ1bmN0aW9uIFRjKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpfWNhdGNoKGIpe319ZnVuY3Rpb24gZ2MoYSl7dmFyIGI9e307cigoYXx8XCJcIikuc3BsaXQoXCImXCIpLFxuZnVuY3Rpb24oYSl7dmFyIGMsZSxmO2EmJihlPWE9YS5yZXBsYWNlKC9cXCsvZyxcIiUyMFwiKSxjPWEuaW5kZXhPZihcIj1cIiksLTEhPT1jJiYoZT1hLnN1YnN0cmluZygwLGMpLGY9YS5zdWJzdHJpbmcoYysxKSksZT1UYyhlKSx3KGUpJiYoZj13KGYpP1RjKGYpOiEwLHRhLmNhbGwoYixlKT9IKGJbZV0pP2JbZV0ucHVzaChmKTpiW2VdPVtiW2VdLGZdOmJbZV09ZikpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24geWUoYSl7dmFyIGI9W107cihhLGZ1bmN0aW9uKGEsYyl7SChhKT9yKGEsZnVuY3Rpb24oYSl7Yi5wdXNoKGJhKGMsITApKyghMD09PWE/XCJcIjpcIj1cIitiYShhLCEwKSkpfSk6Yi5wdXNoKGJhKGMsITApKyghMD09PWE/XCJcIjpcIj1cIitiYShhLCEwKSkpfSk7cmV0dXJuIGIubGVuZ3RoP2Iuam9pbihcIiZcIik6XCJcIn1mdW5jdGlvbiBoYyhhKXtyZXR1cm4gYmEoYSwhMCkucmVwbGFjZSgvJTI2L2dpLFwiJlwiKS5yZXBsYWNlKC8lM0QvZ2ksXCI9XCIpLnJlcGxhY2UoLyUyQi9naSxcIitcIil9ZnVuY3Rpb24gYmEoYSxcbmIpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYSkucmVwbGFjZSgvJTQwL2dpLFwiQFwiKS5yZXBsYWNlKC8lM0EvZ2ksXCI6XCIpLnJlcGxhY2UoLyUyNC9nLFwiJFwiKS5yZXBsYWNlKC8lMkMvZ2ksXCIsXCIpLnJlcGxhY2UoLyUzQi9naSxcIjtcIikucmVwbGFjZSgvJTIwL2csYj9cIiUyMFwiOlwiK1wiKX1mdW5jdGlvbiB6ZShhLGIpe3ZhciBkLGMsZT1RYS5sZW5ndGg7Zm9yKGM9MDtjPGU7KytjKWlmKGQ9UWFbY10rYixBKGQ9YS5nZXRBdHRyaWJ1dGUoZCkpKXJldHVybiBkO3JldHVybiBudWxsfWZ1bmN0aW9uIEFlKGEsYil7dmFyIGQsYyxlPXt9O3IoUWEsZnVuY3Rpb24oYil7Yis9XCJhcHBcIjshZCYmYS5oYXNBdHRyaWJ1dGUmJmEuaGFzQXR0cmlidXRlKGIpJiYoZD1hLGM9YS5nZXRBdHRyaWJ1dGUoYikpfSk7cihRYSxmdW5jdGlvbihiKXtiKz1cImFwcFwiO3ZhciBlOyFkJiYoZT1hLnF1ZXJ5U2VsZWN0b3IoXCJbXCIrYi5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIikrXCJdXCIpKSYmKGQ9ZSxjPWUuZ2V0QXR0cmlidXRlKGIpKX0pO1xuZCYmKEJlPyhlLnN0cmljdERpPW51bGwhPT16ZShkLFwic3RyaWN0LWRpXCIpLGIoZCxjP1tjXTpbXSxlKSk6Qy5jb25zb2xlLmVycm9yKFwiQW5ndWxhckpTOiBkaXNhYmxpbmcgYXV0b21hdGljIGJvb3RzdHJhcC4gPHNjcmlwdD4gcHJvdG9jb2wgaW5kaWNhdGVzIGFuIGV4dGVuc2lvbiwgZG9jdW1lbnQubG9jYXRpb24uaHJlZiBkb2VzIG5vdCBtYXRjaC5cIikpfWZ1bmN0aW9uIFVjKGEsYixkKXtEKGQpfHwoZD17fSk7ZD1TKHtzdHJpY3REaTohMX0sZCk7dmFyIGM9ZnVuY3Rpb24oKXthPXgoYSk7aWYoYS5pbmplY3RvcigpKXt2YXIgYz1hWzBdPT09Qy5kb2N1bWVudD9cImRvY3VtZW50XCI6emEoYSk7dGhyb3cgcGEoXCJidHN0cnBkXCIsYy5yZXBsYWNlKC88LyxcIiZsdDtcIikucmVwbGFjZSgvPi8sXCImZ3Q7XCIpKTt9Yj1ifHxbXTtiLnVuc2hpZnQoW1wiJHByb3ZpZGVcIixmdW5jdGlvbihiKXtiLnZhbHVlKFwiJHJvb3RFbGVtZW50XCIsYSl9XSk7ZC5kZWJ1Z0luZm9FbmFibGVkJiZiLnB1c2goW1wiJGNvbXBpbGVQcm92aWRlclwiLFxuZnVuY3Rpb24oYSl7YS5kZWJ1Z0luZm9FbmFibGVkKCEwKX1dKTtiLnVuc2hpZnQoXCJuZ1wiKTtjPWZiKGIsZC5zdHJpY3REaSk7Yy5pbnZva2UoW1wiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkY29tcGlsZVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oYSxiLGMsZCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtiLmRhdGEoXCIkaW5qZWN0b3JcIixkKTtjKGIpKGEpfSl9XSk7cmV0dXJuIGN9LGU9L15OR19FTkFCTEVfREVCVUdfSU5GTyEvLGY9L15OR19ERUZFUl9CT09UU1RSQVAhLztDJiZlLnRlc3QoQy5uYW1lKSYmKGQuZGVidWdJbmZvRW5hYmxlZD0hMCxDLm5hbWU9Qy5uYW1lLnJlcGxhY2UoZSxcIlwiKSk7aWYoQyYmIWYudGVzdChDLm5hbWUpKXJldHVybiBjKCk7Qy5uYW1lPUMubmFtZS5yZXBsYWNlKGYsXCJcIik7Y2EucmVzdW1lQm9vdHN0cmFwPWZ1bmN0aW9uKGEpe3IoYSxmdW5jdGlvbihhKXtiLnB1c2goYSl9KTtyZXR1cm4gYygpfTtCKGNhLnJlc3VtZURlZmVycmVkQm9vdHN0cmFwKSYmXG5jYS5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCgpfWZ1bmN0aW9uIENlKCl7Qy5uYW1lPVwiTkdfRU5BQkxFX0RFQlVHX0lORk8hXCIrQy5uYW1lO0MubG9jYXRpb24ucmVsb2FkKCl9ZnVuY3Rpb24gRGUoYSl7YT1jYS5lbGVtZW50KGEpLmluamVjdG9yKCk7aWYoIWEpdGhyb3cgcGEoXCJ0ZXN0XCIpO3JldHVybiBhLmdldChcIiQkdGVzdGFiaWxpdHlcIil9ZnVuY3Rpb24gVmMoYSxiKXtiPWJ8fFwiX1wiO3JldHVybiBhLnJlcGxhY2UoRWUsZnVuY3Rpb24oYSxjKXtyZXR1cm4oYz9iOlwiXCIpK2EudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIEZlKCl7dmFyIGE7aWYoIVdjKXt2YXIgYj1xYigpOyhyYj16KGIpP0MualF1ZXJ5OmI/Q1tiXTp2b2lkIDApJiZyYi5mbi5vbj8oeD1yYixTKHJiLmZuLHtzY29wZTpXYS5zY29wZSxpc29sYXRlU2NvcGU6V2EuaXNvbGF0ZVNjb3BlLGNvbnRyb2xsZXI6V2EuY29udHJvbGxlcixpbmplY3RvcjpXYS5pbmplY3Rvcixpbmhlcml0ZWREYXRhOldhLmluaGVyaXRlZERhdGF9KSk6XG54PVk7YT14LmNsZWFuRGF0YTt4LmNsZWFuRGF0YT1mdW5jdGlvbihiKXtmb3IodmFyIGMsZT0wLGY7bnVsbCE9KGY9YltlXSk7ZSsrKShjPSh4Ll9kYXRhKGYpfHx7fSkuZXZlbnRzKSYmYy4kZGVzdHJveSYmeChmKS50cmlnZ2VySGFuZGxlcihcIiRkZXN0cm95XCIpO2EoYil9O2NhLmVsZW1lbnQ9eDtXYz0hMH19ZnVuY3Rpb24gZ2IoYSxiLGQpe2lmKCFhKXRocm93IHBhKFwiYXJlcVwiLGJ8fFwiP1wiLGR8fFwicmVxdWlyZWRcIik7cmV0dXJuIGF9ZnVuY3Rpb24gc2IoYSxiLGQpe2QmJkgoYSkmJihhPWFbYS5sZW5ndGgtMV0pO2diKEIoYSksYixcIm5vdCBhIGZ1bmN0aW9uLCBnb3QgXCIrKGEmJlwib2JqZWN0XCI9PT10eXBlb2YgYT9hLmNvbnN0cnVjdG9yLm5hbWV8fFwiT2JqZWN0XCI6dHlwZW9mIGEpKTtyZXR1cm4gYX1mdW5jdGlvbiBKYShhLGIpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWEpdGhyb3cgcGEoXCJiYWRuYW1lXCIsYik7fWZ1bmN0aW9uIEdlKGEsYixkKXtpZighYilyZXR1cm4gYTtiPWIuc3BsaXQoXCIuXCIpO1xuZm9yKHZhciBjLGU9YSxmPWIubGVuZ3RoLGc9MDtnPGY7ZysrKWM9YltnXSxhJiYoYT0oZT1hKVtjXSk7cmV0dXJuIWQmJkIoYSk/VmEoZSxhKTphfWZ1bmN0aW9uIHRiKGEpe2Zvcih2YXIgYj1hWzBdLGQ9YVthLmxlbmd0aC0xXSxjLGU9MTtiIT09ZCYmKGI9Yi5uZXh0U2libGluZyk7ZSsrKWlmKGN8fGFbZV0hPT1iKWN8fChjPXgoSGEuY2FsbChhLDAsZSkpKSxjLnB1c2goYik7cmV0dXJuIGN8fGF9ZnVuY3Rpb24gVCgpe3JldHVybiBPYmplY3QuY3JlYXRlKG51bGwpfWZ1bmN0aW9uIGljKGEpe2lmKG51bGw9PWEpcmV0dXJuXCJcIjtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJzdHJpbmdcIjpicmVhaztjYXNlIFwibnVtYmVyXCI6YT1cIlwiK2E7YnJlYWs7ZGVmYXVsdDphPSFiYyhhKXx8SChhKXx8aGEoYSk/ZWIoYSk6YS50b1N0cmluZygpfXJldHVybiBhfWZ1bmN0aW9uIEhlKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe3JldHVybiBhW2JdfHwoYVtiXT1jKCkpfXZhciBkPUYoXCIkaW5qZWN0b3JcIiksXG5jPUYoXCJuZ1wiKTthPWIoYSxcImFuZ3VsYXJcIixPYmplY3QpO2EuJCRtaW5FcnI9YS4kJG1pbkVycnx8RjtyZXR1cm4gYihhLFwibW9kdWxlXCIsZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm4gZnVuY3Rpb24oZixnLGspe3ZhciBoPXt9O2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWYpdGhyb3cgYyhcImJhZG5hbWVcIixcIm1vZHVsZVwiKTtnJiZhLmhhc093blByb3BlcnR5KGYpJiYoYVtmXT1udWxsKTtyZXR1cm4gYihhLGYsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGIsYyxkLGYpe2Z8fChmPWUpO3JldHVybiBmdW5jdGlvbigpe2ZbZHx8XCJwdXNoXCJdKFtiLGMsYXJndW1lbnRzXSk7cmV0dXJuIHR9fWZ1bmN0aW9uIGIoYSxjLGQpe2R8fChkPWUpO3JldHVybiBmdW5jdGlvbihiLGUpe2UmJkIoZSkmJihlLiQkbW9kdWxlTmFtZT1mKTtkLnB1c2goW2EsYyxhcmd1bWVudHNdKTtyZXR1cm4gdH19aWYoIWcpdGhyb3cgZChcIm5vbW9kXCIsZik7dmFyIGU9W10sbj1bXSxzPVtdLEc9YShcIiRpbmplY3RvclwiLFwiaW52b2tlXCIsXG5cInB1c2hcIixuKSx0PXtfaW52b2tlUXVldWU6ZSxfY29uZmlnQmxvY2tzOm4sX3J1bkJsb2NrczpzLGluZm86ZnVuY3Rpb24oYSl7aWYodyhhKSl7aWYoIUQoYSkpdGhyb3cgYyhcImFvYmpcIixcInZhbHVlXCIpO2g9YTtyZXR1cm4gdGhpc31yZXR1cm4gaH0scmVxdWlyZXM6ZyxuYW1lOmYscHJvdmlkZXI6YihcIiRwcm92aWRlXCIsXCJwcm92aWRlclwiKSxmYWN0b3J5OmIoXCIkcHJvdmlkZVwiLFwiZmFjdG9yeVwiKSxzZXJ2aWNlOmIoXCIkcHJvdmlkZVwiLFwic2VydmljZVwiKSx2YWx1ZTphKFwiJHByb3ZpZGVcIixcInZhbHVlXCIpLGNvbnN0YW50OmEoXCIkcHJvdmlkZVwiLFwiY29uc3RhbnRcIixcInVuc2hpZnRcIiksZGVjb3JhdG9yOmIoXCIkcHJvdmlkZVwiLFwiZGVjb3JhdG9yXCIsbiksYW5pbWF0aW9uOmIoXCIkYW5pbWF0ZVByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxmaWx0ZXI6YihcIiRmaWx0ZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksY29udHJvbGxlcjpiKFwiJGNvbnRyb2xsZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZGlyZWN0aXZlOmIoXCIkY29tcGlsZVByb3ZpZGVyXCIsXG5cImRpcmVjdGl2ZVwiKSxjb21wb25lbnQ6YihcIiRjb21waWxlUHJvdmlkZXJcIixcImNvbXBvbmVudFwiKSxjb25maWc6RyxydW46ZnVuY3Rpb24oYSl7cy5wdXNoKGEpO3JldHVybiB0aGlzfX07ayYmRyhrKTtyZXR1cm4gdH0pfX0pfWZ1bmN0aW9uIGphKGEsYil7aWYoSChhKSl7Yj1ifHxbXTtmb3IodmFyIGQ9MCxjPWEubGVuZ3RoO2Q8YztkKyspYltkXT1hW2RdfWVsc2UgaWYoRChhKSlmb3IoZCBpbiBiPWJ8fHt9LGEpaWYoXCIkXCIhPT1kLmNoYXJBdCgwKXx8XCIkXCIhPT1kLmNoYXJBdCgxKSliW2RdPWFbZF07cmV0dXJuIGJ8fGF9ZnVuY3Rpb24gSWUoYSxiKXt2YXIgZD1bXTtYYihiKSYmKGE9Y2EuY29weShhLG51bGwsYikpO3JldHVybiBKU09OLnN0cmluZ2lmeShhLGZ1bmN0aW9uKGEsYil7Yj1RYyhhLGIpO2lmKEQoYikpe2lmKDA8PWQuaW5kZXhPZihiKSlyZXR1cm5cIi4uLlwiO2QucHVzaChiKX1yZXR1cm4gYn0pfWZ1bmN0aW9uIEplKGEpe1MoYSx7ZXJyb3JIYW5kbGluZ0NvbmZpZzpyZSxcbmJvb3RzdHJhcDpVYyxjb3B5OklhLGV4dGVuZDpTLG1lcmdlOnRlLGVxdWFsczp2YSxlbGVtZW50OngsZm9yRWFjaDpyLGluamVjdG9yOmZiLG5vb3A6RSxiaW5kOlZhLHRvSnNvbjplYixmcm9tSnNvbjpSYyxpZGVudGl0eTpUYSxpc1VuZGVmaW5lZDp6LGlzRGVmaW5lZDp3LGlzU3RyaW5nOkEsaXNGdW5jdGlvbjpCLGlzT2JqZWN0OkQsaXNOdW1iZXI6Vyxpc0VsZW1lbnQ6JGIsaXNBcnJheTpILHZlcnNpb246S2UsaXNEYXRlOmhhLGNhbGxiYWNrczp7JCRjb3VudGVyOjB9LGdldFRlc3RhYmlsaXR5OkRlLHJlbG9hZFdpdGhEZWJ1Z0luZm86Q2UsJCRtaW5FcnI6RiwkJGNzcDpBYSwkJGVuY29kZVVyaVNlZ21lbnQ6aGMsJCRlbmNvZGVVcmlRdWVyeTpiYSwkJGxvd2VyY2FzZTpLLCQkc3RyaW5naWZ5OmljLCQkdXBwZXJjYXNlOnVifSk7a2M9SGUoQyk7a2MoXCJuZ1wiLFtcIm5nTG9jYWxlXCJdLFtcIiRwcm92aWRlXCIsZnVuY3Rpb24oYSl7YS5wcm92aWRlcih7JCRzYW5pdGl6ZVVyaTpMZX0pO1xuYS5wcm92aWRlcihcIiRjb21waWxlXCIsWGMpLmRpcmVjdGl2ZSh7YTpNZSxpbnB1dDpZYyx0ZXh0YXJlYTpZYyxmb3JtOk5lLHNjcmlwdDpPZSxzZWxlY3Q6UGUsb3B0aW9uOlFlLG5nQmluZDpSZSxuZ0JpbmRIdG1sOlNlLG5nQmluZFRlbXBsYXRlOlRlLG5nQ2xhc3M6VWUsbmdDbGFzc0V2ZW46VmUsbmdDbGFzc09kZDpXZSxuZ0Nsb2FrOlhlLG5nQ29udHJvbGxlcjpZZSxuZ0Zvcm06WmUsbmdIaWRlOiRlLG5nSWY6YWYsbmdJbmNsdWRlOmJmLG5nSW5pdDpjZixuZ05vbkJpbmRhYmxlOmRmLG5nUGx1cmFsaXplOmVmLG5nUmVmOmZmLG5nUmVwZWF0OmdmLG5nU2hvdzpoZixuZ1N0eWxlOmpmLG5nU3dpdGNoOmtmLG5nU3dpdGNoV2hlbjpsZixuZ1N3aXRjaERlZmF1bHQ6bWYsbmdPcHRpb25zOm5mLG5nVHJhbnNjbHVkZTpvZixuZ01vZGVsOnBmLG5nTGlzdDpxZixuZ0NoYW5nZTpyZixwYXR0ZXJuOlpjLG5nUGF0dGVybjpaYyxyZXF1aXJlZDokYyxuZ1JlcXVpcmVkOiRjLG1pbmxlbmd0aDphZCxcbm5nTWlubGVuZ3RoOmFkLG1heGxlbmd0aDpiZCxuZ01heGxlbmd0aDpiZCxuZ1ZhbHVlOnNmLG5nTW9kZWxPcHRpb25zOnRmfSkuZGlyZWN0aXZlKHtuZ0luY2x1ZGU6dWYsaW5wdXQ6dmZ9KS5kaXJlY3RpdmUodmIpLmRpcmVjdGl2ZShjZCk7YS5wcm92aWRlcih7JGFuY2hvclNjcm9sbDp3ZiwkYW5pbWF0ZTp4ZiwkYW5pbWF0ZUNzczp5ZiwkJGFuaW1hdGVKczp6ZiwkJGFuaW1hdGVRdWV1ZTpBZiwkJEFuaW1hdGVSdW5uZXI6QmYsJCRhbmltYXRlQXN5bmNSdW46Q2YsJGJyb3dzZXI6RGYsJGNhY2hlRmFjdG9yeTpFZiwkY29udHJvbGxlcjpGZiwkZG9jdW1lbnQ6R2YsJCRpc0RvY3VtZW50SGlkZGVuOkhmLCRleGNlcHRpb25IYW5kbGVyOklmLCRmaWx0ZXI6ZGQsJCRmb3JjZVJlZmxvdzpKZiwkaW50ZXJwb2xhdGU6S2YsJGludGVydmFsOkxmLCQkaW50ZXJ2YWxGYWN0b3J5Ok1mLCRodHRwOk5mLCRodHRwUGFyYW1TZXJpYWxpemVyOk9mLCRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlOlBmLFxuJGh0dHBCYWNrZW5kOlFmLCR4aHJGYWN0b3J5OlJmLCRqc29ucENhbGxiYWNrczpTZiwkbG9jYXRpb246VGYsJGxvZzpVZiwkcGFyc2U6VmYsJHJvb3RTY29wZTpXZiwkcTpYZiwkJHE6WWYsJHNjZTpaZiwkc2NlRGVsZWdhdGU6JGYsJHNuaWZmZXI6YWcsJCR0YXNrVHJhY2tlckZhY3Rvcnk6YmcsJHRlbXBsYXRlQ2FjaGU6Y2csJHRlbXBsYXRlUmVxdWVzdDpkZywkJHRlc3RhYmlsaXR5OmVnLCR0aW1lb3V0OmZnLCR3aW5kb3c6Z2csJCRyQUY6aGcsJCRqcUxpdGU6aWcsJCRNYXA6amcsJCRjb29raWVSZWFkZXI6a2d9KX1dKS5pbmZvKHthbmd1bGFyVmVyc2lvbjpcIjEuNy44XCJ9KX1mdW5jdGlvbiB3YihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9ZnVuY3Rpb24geGIoYSl7cmV0dXJuIGEucmVwbGFjZShsZyx3Yil9ZnVuY3Rpb24gbGMoYSl7YT1hLm5vZGVUeXBlO3JldHVybiAxPT09YXx8IWF8fDk9PT1hfWZ1bmN0aW9uIGVkKGEsYil7dmFyIGQsYyxlPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuZj1bXTtpZihtYy50ZXN0KGEpKXtkPWUuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtjPShtZy5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKTtjPW9hW2NdfHxvYS5fZGVmYXVsdDtkLmlubmVySFRNTD1jWzFdK2EucmVwbGFjZShuZyxcIjwkMT48LyQyPlwiKStjWzJdO2ZvcihjPWNbMF07Yy0tOylkPWQubGFzdENoaWxkO2Y9ZGIoZixkLmNoaWxkTm9kZXMpO2Q9ZS5maXJzdENoaWxkO2QudGV4dENvbnRlbnQ9XCJcIn1lbHNlIGYucHVzaChiLmNyZWF0ZVRleHROb2RlKGEpKTtlLnRleHRDb250ZW50PVwiXCI7ZS5pbm5lckhUTUw9XCJcIjtyKGYsZnVuY3Rpb24oYSl7ZS5hcHBlbmRDaGlsZChhKX0pO3JldHVybiBlfWZ1bmN0aW9uIFkoYSl7aWYoYSBpbnN0YW5jZW9mIFkpcmV0dXJuIGE7dmFyIGI7QShhKSYmKGE9VShhKSxiPSEwKTtpZighKHRoaXMgaW5zdGFuY2VvZiBZKSl7aWYoYiYmXCI8XCIhPT1hLmNoYXJBdCgwKSl0aHJvdyBuYyhcIm5vc2VsXCIpO3JldHVybiBuZXcgWShhKX1pZihiKXtiPVxuQy5kb2N1bWVudDt2YXIgZDthPShkPW9nLmV4ZWMoYSkpP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPWVkKGEsYikpP2QuY2hpbGROb2RlczpbXTtvYyh0aGlzLGEpfWVsc2UgQihhKT9mZChhKTpvYyh0aGlzLGEpfWZ1bmN0aW9uIHBjKGEpe3JldHVybiBhLmNsb25lTm9kZSghMCl9ZnVuY3Rpb24geWIoYSxiKXshYiYmbGMoYSkmJnguY2xlYW5EYXRhKFthXSk7YS5xdWVyeVNlbGVjdG9yQWxsJiZ4LmNsZWFuRGF0YShhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpKX1mdW5jdGlvbiBnZChhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBoZChhKXt2YXIgYj1hLm5nMzM5LGQ9YiYmS2FbYl0sYz1kJiZkLmV2ZW50cyxkPWQmJmQuZGF0YTtkJiYhZ2QoZCl8fGMmJiFnZChjKXx8KGRlbGV0ZSBLYVtiXSxhLm5nMzM5PXZvaWQgMCl9ZnVuY3Rpb24gaWQoYSxiLGQsYyl7aWYodyhjKSl0aHJvdyBuYyhcIm9mZmFyZ3NcIik7dmFyIGU9KGM9emIoYSkpJiZjLmV2ZW50cyxcbmY9YyYmYy5oYW5kbGU7aWYoZil7aWYoYil7dmFyIGc9ZnVuY3Rpb24oYil7dmFyIGM9ZVtiXTt3KGQpJiZjYihjfHxbXSxkKTt3KGQpJiZjJiYwPGMubGVuZ3RofHwoYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsZiksZGVsZXRlIGVbYl0pfTtyKGIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2coYSk7QWJbYV0mJmcoQWJbYV0pfSl9ZWxzZSBmb3IoYiBpbiBlKVwiJGRlc3Ryb3lcIiE9PWImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGYpLGRlbGV0ZSBlW2JdO2hkKGEpfX1mdW5jdGlvbiBxYyhhLGIpe3ZhciBkPWEubmczMzk7aWYoZD1kJiZLYVtkXSliP2RlbGV0ZSBkLmRhdGFbYl06ZC5kYXRhPXt9LGhkKGEpfWZ1bmN0aW9uIHpiKGEsYil7dmFyIGQ9YS5uZzMzOSxkPWQmJkthW2RdO2ImJiFkJiYoYS5uZzMzOT1kPSsrcGcsZD1LYVtkXT17ZXZlbnRzOnt9LGRhdGE6e30saGFuZGxlOnZvaWQgMH0pO3JldHVybiBkfWZ1bmN0aW9uIHJjKGEsYixkKXtpZihsYyhhKSl7dmFyIGMsZT13KGQpLFxuZj0hZSYmYiYmIUQoYiksZz0hYjthPShhPXpiKGEsIWYpKSYmYS5kYXRhO2lmKGUpYVt4YihiKV09ZDtlbHNle2lmKGcpcmV0dXJuIGE7aWYoZilyZXR1cm4gYSYmYVt4YihiKV07Zm9yKGMgaW4gYilhW3hiKGMpXT1iW2NdfX19ZnVuY3Rpb24gQmIoYSxiKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGU/LTE8KFwiIFwiKyhhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikuaW5kZXhPZihcIiBcIitiK1wiIFwiKTohMX1mdW5jdGlvbiBDYihhLGIpe2lmKGImJmEuc2V0QXR0cmlidXRlKXt2YXIgZD0oXCIgXCIrKGEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKSxjPWQ7cihiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXthPVUoYSk7Yz1jLnJlcGxhY2UoXCIgXCIrYStcIiBcIixcIiBcIil9KTtjIT09ZCYmYS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFUoYykpfX1mdW5jdGlvbiBEYihhLGIpe2lmKGImJmEuc2V0QXR0cmlidXRlKXt2YXIgZD1cbihcIiBcIisoYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpLGM9ZDtyKGIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2E9VShhKTstMT09PWMuaW5kZXhPZihcIiBcIithK1wiIFwiKSYmKGMrPWErXCIgXCIpfSk7YyE9PWQmJmEuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixVKGMpKX19ZnVuY3Rpb24gb2MoYSxiKXtpZihiKWlmKGIubm9kZVR5cGUpYVthLmxlbmd0aCsrXT1iO2Vsc2V7dmFyIGQ9Yi5sZW5ndGg7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBkJiZiLndpbmRvdyE9PWIpe2lmKGQpZm9yKHZhciBjPTA7YzxkO2MrKylhW2EubGVuZ3RoKytdPWJbY119ZWxzZSBhW2EubGVuZ3RoKytdPWJ9fWZ1bmN0aW9uIGpkKGEsYil7cmV0dXJuIEViKGEsXCIkXCIrKGJ8fFwibmdDb250cm9sbGVyXCIpK1wiQ29udHJvbGxlclwiKX1mdW5jdGlvbiBFYihhLGIsZCl7OT09PWEubm9kZVR5cGUmJihhPWEuZG9jdW1lbnRFbGVtZW50KTtmb3IoYj1IKGIpP2I6W2JdO2E7KXtmb3IodmFyIGM9XG4wLGU9Yi5sZW5ndGg7YzxlO2MrKylpZih3KGQ9eC5kYXRhKGEsYltjXSkpKXJldHVybiBkO2E9YS5wYXJlbnROb2RlfHwxMT09PWEubm9kZVR5cGUmJmEuaG9zdH19ZnVuY3Rpb24ga2QoYSl7Zm9yKHliKGEsITApO2EuZmlyc3RDaGlsZDspYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpfWZ1bmN0aW9uIEZiKGEsYil7Ynx8eWIoYSk7dmFyIGQ9YS5wYXJlbnROb2RlO2QmJmQucmVtb3ZlQ2hpbGQoYSl9ZnVuY3Rpb24gcWcoYSxiKXtiPWJ8fEM7aWYoXCJjb21wbGV0ZVwiPT09Yi5kb2N1bWVudC5yZWFkeVN0YXRlKWIuc2V0VGltZW91dChhKTtlbHNlIHgoYikub24oXCJsb2FkXCIsYSl9ZnVuY3Rpb24gZmQoYSl7ZnVuY3Rpb24gYigpe0MuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixiKTtDLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsYik7YSgpfVwiY29tcGxldGVcIj09PUMuZG9jdW1lbnQucmVhZHlTdGF0ZT9DLnNldFRpbWVvdXQoYSk6KEMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixcbmIpLEMuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixiKSl9ZnVuY3Rpb24gbGQoYSxiKXt2YXIgZD1HYltiLnRvTG93ZXJDYXNlKCldO3JldHVybiBkJiZtZFt1YShhKV0mJmR9ZnVuY3Rpb24gcmcoYSxiKXt2YXIgZD1mdW5jdGlvbihjLGQpe2MuaXNEZWZhdWx0UHJldmVudGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVmYXVsdFByZXZlbnRlZH07dmFyIGY9YltkfHxjLnR5cGVdLGc9Zj9mLmxlbmd0aDowO2lmKGcpe2lmKHooYy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQpKXt2YXIgaz1jLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtjLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbj1mdW5jdGlvbigpe2MuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPSEwO2Muc3RvcFByb3BhZ2F0aW9uJiZjLnN0b3BQcm9wYWdhdGlvbigpO2smJmsuY2FsbChjKX19Yy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1mdW5jdGlvbigpe3JldHVybiEwPT09Yy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWR9O1xudmFyIGg9Zi5zcGVjaWFsSGFuZGxlcldyYXBwZXJ8fHNnOzE8ZyYmKGY9amEoZikpO2Zvcih2YXIgbD0wO2w8ZztsKyspYy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpfHxoKGEsYyxmW2xdKX19O2QuZWxlbT1hO3JldHVybiBkfWZ1bmN0aW9uIHNnKGEsYixkKXtkLmNhbGwoYSxiKX1mdW5jdGlvbiB0ZyhhLGIsZCl7dmFyIGM9Yi5yZWxhdGVkVGFyZ2V0O2MmJihjPT09YXx8dWcuY2FsbChhLGMpKXx8ZC5jYWxsKGEsYil9ZnVuY3Rpb24gaWcoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gUyhZLHtoYXNDbGFzczpmdW5jdGlvbihhLGIpe2EuYXR0ciYmKGE9YVswXSk7cmV0dXJuIEJiKGEsYil9LGFkZENsYXNzOmZ1bmN0aW9uKGEsYil7YS5hdHRyJiYoYT1hWzBdKTtyZXR1cm4gRGIoYSxiKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxiKXthLmF0dHImJihhPWFbMF0pO3JldHVybiBDYihhLGIpfX0pfX1mdW5jdGlvbiBMYShhLGIpe3ZhciBkPWEmJmEuJCRoYXNoS2V5O1xuaWYoZClyZXR1cm5cImZ1bmN0aW9uXCI9PT10eXBlb2YgZCYmKGQ9YS4kJGhhc2hLZXkoKSksZDtkPXR5cGVvZiBhO3JldHVybiBkPVwiZnVuY3Rpb25cIj09PWR8fFwib2JqZWN0XCI9PT1kJiZudWxsIT09YT9hLiQkaGFzaEtleT1kK1wiOlwiKyhifHxzZSkoKTpkK1wiOlwiK2F9ZnVuY3Rpb24gbmQoKXt0aGlzLl9rZXlzPVtdO3RoaXMuX3ZhbHVlcz1bXTt0aGlzLl9sYXN0S2V5PU5hTjt0aGlzLl9sYXN0SW5kZXg9LTF9ZnVuY3Rpb24gb2QoYSl7YT1GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKS5yZXBsYWNlKHZnLFwiXCIpO3JldHVybiBhLm1hdGNoKHdnKXx8YS5tYXRjaCh4Zyl9ZnVuY3Rpb24geWcoYSl7cmV0dXJuKGE9b2QoYSkpP1wiZnVuY3Rpb24oXCIrKGFbMV18fFwiXCIpLnJlcGxhY2UoL1tcXHNcXHJcXG5dKy8sXCIgXCIpK1wiKVwiOlwiZm5cIn1mdW5jdGlvbiBmYihhLGIpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYoRChiKSlyKGIsWWIoYSkpO2Vsc2UgcmV0dXJuIGEoYixcbmMpfX1mdW5jdGlvbiBjKGEsYil7SmEoYSxcInNlcnZpY2VcIik7aWYoQihiKXx8SChiKSliPW4uaW5zdGFudGlhdGUoYik7aWYoIWIuJGdldCl0aHJvdyBCYShcInBnZXRcIixhKTtyZXR1cm4gcFthK1wiUHJvdmlkZXJcIl09Yn1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9dC5pbnZva2UoYix0aGlzKTtpZih6KGMpKXRocm93IEJhKFwidW5kZWZcIixhKTtyZXR1cm4gY319ZnVuY3Rpb24gZihhLGIsZCl7cmV0dXJuIGMoYSx7JGdldDohMSE9PWQ/ZShhLGIpOmJ9KX1mdW5jdGlvbiBnKGEpe2diKHooYSl8fEgoYSksXCJtb2R1bGVzVG9Mb2FkXCIsXCJub3QgYW4gYXJyYXlcIik7dmFyIGI9W10sYztyKGEsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChhKXt2YXIgYixjO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZT1hW2JdLGY9bi5nZXQoZVswXSk7ZltlWzFdXS5hcHBseShmLGVbMl0pfX1pZighbS5nZXQoYSkpe20uc2V0KGEsITApO3RyeXtBKGEpPyhjPWtjKGEpLFxudC5tb2R1bGVzW2FdPWMsYj1iLmNvbmNhdChnKGMucmVxdWlyZXMpKS5jb25jYXQoYy5fcnVuQmxvY2tzKSxkKGMuX2ludm9rZVF1ZXVlKSxkKGMuX2NvbmZpZ0Jsb2NrcykpOkIoYSk/Yi5wdXNoKG4uaW52b2tlKGEpKTpIKGEpP2IucHVzaChuLmludm9rZShhKSk6c2IoYSxcIm1vZHVsZVwiKX1jYXRjaChlKXt0aHJvdyBIKGEpJiYoYT1hW2EubGVuZ3RoLTFdKSxlLm1lc3NhZ2UmJmUuc3RhY2smJi0xPT09ZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkmJihlPWUubWVzc2FnZStcIlxcblwiK2Uuc3RhY2spLEJhKFwibW9kdWxlcnJcIixhLGUuc3RhY2t8fGUubWVzc2FnZXx8ZSk7fX19KTtyZXR1cm4gYn1mdW5jdGlvbiBrKGEsYyl7ZnVuY3Rpb24gZChiLGUpe2lmKGEuaGFzT3duUHJvcGVydHkoYikpe2lmKGFbYl09PT1oKXRocm93IEJhKFwiY2RlcFwiLGIrXCIgPC0gXCIrbC5qb2luKFwiIDwtIFwiKSk7cmV0dXJuIGFbYl19dHJ5e3JldHVybiBsLnVuc2hpZnQoYiksYVtiXT1oLGFbYl09YyhiLGUpLFxuYVtiXX1jYXRjaChmKXt0aHJvdyBhW2JdPT09aCYmZGVsZXRlIGFbYl0sZjt9ZmluYWxseXtsLnNoaWZ0KCl9fWZ1bmN0aW9uIGUoYSxjLGYpe3ZhciBnPVtdO2E9ZmIuJCRhbm5vdGF0ZShhLGIsZik7Zm9yKHZhciBoPTAsaz1hLmxlbmd0aDtoPGs7aCsrKXt2YXIgbD1hW2hdO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgbCl0aHJvdyBCYShcIml0a25cIixsKTtnLnB1c2goYyYmYy5oYXNPd25Qcm9wZXJ0eShsKT9jW2xdOmQobCxmKSl9cmV0dXJuIGd9cmV0dXJue2ludm9rZTpmdW5jdGlvbihhLGIsYyxkKXtcInN0cmluZ1wiPT09dHlwZW9mIGMmJihkPWMsYz1udWxsKTtjPWUoYSxjLGQpO0goYSkmJihhPWFbYS5sZW5ndGgtMV0pO2Q9YTtpZihDYXx8XCJmdW5jdGlvblwiIT09dHlwZW9mIGQpZD0hMTtlbHNle3ZhciBmPWQuJCRuZ0lzQ2xhc3M7R2EoZil8fChmPWQuJCRuZ0lzQ2xhc3M9L15jbGFzc1xcYi8udGVzdChGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkKSkpO2Q9Zn1yZXR1cm4gZD9cbihjLnVuc2hpZnQobnVsbCksbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShhLGMpKSk6YS5hcHBseShiLGMpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9SChhKT9hW2EubGVuZ3RoLTFdOmE7YT1lKGEsYixjKTthLnVuc2hpZnQobnVsbCk7cmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZCxhKSl9LGdldDpkLGFubm90YXRlOmZiLiQkYW5ub3RhdGUsaGFzOmZ1bmN0aW9uKGIpe3JldHVybiBwLmhhc093blByb3BlcnR5KGIrXCJQcm92aWRlclwiKXx8YS5oYXNPd25Qcm9wZXJ0eShiKX19fWI9ITA9PT1iO3ZhciBoPXt9LGw9W10sbT1uZXcgSGIscD17JHByb3ZpZGU6e3Byb3ZpZGVyOmQoYyksZmFjdG9yeTpkKGYpLHNlcnZpY2U6ZChmdW5jdGlvbihhLGIpe3JldHVybiBmKGEsW1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5zdGFudGlhdGUoYil9XSl9KSx2YWx1ZTpkKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSxcbmlhKGIpLCExKX0pLGNvbnN0YW50OmQoZnVuY3Rpb24oYSxiKXtKYShhLFwiY29uc3RhbnRcIik7cFthXT1iO3NbYV09Yn0pLGRlY29yYXRvcjpmdW5jdGlvbihhLGIpe3ZhciBjPW4uZ2V0KGErXCJQcm92aWRlclwiKSxkPWMuJGdldDtjLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgYT10Lmludm9rZShkLGMpO3JldHVybiB0Lmludm9rZShiLG51bGwseyRkZWxlZ2F0ZTphfSl9fX19LG49cC4kaW5qZWN0b3I9ayhwLGZ1bmN0aW9uKGEsYil7Y2EuaXNTdHJpbmcoYikmJmwucHVzaChiKTt0aHJvdyBCYShcInVucHJcIixsLmpvaW4oXCIgPC0gXCIpKTt9KSxzPXt9LEc9ayhzLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5nZXQoYStcIlByb3ZpZGVyXCIsYik7cmV0dXJuIHQuaW52b2tlKGMuJGdldCxjLHZvaWQgMCxhKX0pLHQ9RztwLiRpbmplY3RvclByb3ZpZGVyPXskZ2V0OmlhKEcpfTt0Lm1vZHVsZXM9bi5tb2R1bGVzPVQoKTt2YXIgTj1nKGEpLHQ9Ry5nZXQoXCIkaW5qZWN0b3JcIik7dC5zdHJpY3REaT1iO3IoTixcbmZ1bmN0aW9uKGEpe2EmJnQuaW52b2tlKGEpfSk7dC5sb2FkTmV3TW9kdWxlcz1mdW5jdGlvbihhKXtyKGcoYSksZnVuY3Rpb24oYSl7YSYmdC5pbnZva2UoYSl9KX07cmV0dXJuIHR9ZnVuY3Rpb24gd2YoKXt2YXIgYT0hMDt0aGlzLmRpc2FibGVBdXRvU2Nyb2xsaW5nPWZ1bmN0aW9uKCl7YT0hMX07dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRsb2NhdGlvblwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGIsZCxjKXtmdW5jdGlvbiBlKGEpe3ZhciBiPW51bGw7QXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhLGZ1bmN0aW9uKGEpe2lmKFwiYVwiPT09dWEoYSkpcmV0dXJuIGI9YSwhMH0pO3JldHVybiBifWZ1bmN0aW9uIGYoYSl7aWYoYSl7YS5zY3JvbGxJbnRvVmlldygpO3ZhciBjO2M9Zy55T2Zmc2V0O0IoYyk/Yz1jKCk6JGIoYyk/KGM9Y1swXSxjPVwiZml4ZWRcIiE9PWIuZ2V0Q29tcHV0ZWRTdHlsZShjKS5wb3NpdGlvbj8wOmMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tKTpXKGMpfHxcbihjPTApO2MmJihhPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLGIuc2Nyb2xsQnkoMCxhLWMpKX1lbHNlIGIuc2Nyb2xsVG8oMCwwKX1mdW5jdGlvbiBnKGEpe2E9QShhKT9hOlcoYSk/YS50b1N0cmluZygpOmQuaGFzaCgpO3ZhciBiO2E/KGI9ay5nZXRFbGVtZW50QnlJZChhKSk/ZihiKTooYj1lKGsuZ2V0RWxlbWVudHNCeU5hbWUoYSkpKT9mKGIpOlwidG9wXCI9PT1hJiZmKG51bGwpOmYobnVsbCl9dmFyIGs9Yi5kb2N1bWVudDthJiZjLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBkLmhhc2goKX0sZnVuY3Rpb24oYSxiKXthPT09YiYmXCJcIj09PWF8fHFnKGZ1bmN0aW9uKCl7Yy4kZXZhbEFzeW5jKGcpfSl9KTtyZXR1cm4gZ31dfWZ1bmN0aW9uIGhiKGEsYil7aWYoIWEmJiFiKXJldHVyblwiXCI7aWYoIWEpcmV0dXJuIGI7aWYoIWIpcmV0dXJuIGE7SChhKSYmKGE9YS5qb2luKFwiIFwiKSk7SChiKSYmKGI9Yi5qb2luKFwiIFwiKSk7cmV0dXJuIGErXCIgXCIrYn1mdW5jdGlvbiB6ZyhhKXtBKGEpJiZcbihhPWEuc3BsaXQoXCIgXCIpKTt2YXIgYj1UKCk7cihhLGZ1bmN0aW9uKGEpe2EubGVuZ3RoJiYoYlthXT0hMCl9KTtyZXR1cm4gYn1mdW5jdGlvbiByYShhKXtyZXR1cm4gRChhKT9hOnt9fWZ1bmN0aW9uIEFnKGEsYixkLGMsZSl7ZnVuY3Rpb24gZigpe3FhPW51bGw7aygpfWZ1bmN0aW9uIGcoKXt0PXkoKTt0PXoodCk/bnVsbDp0O3ZhKHQsUCkmJih0PVApO049UD10fWZ1bmN0aW9uIGsoKXt2YXIgYT1OO2coKTtpZih2IT09aC51cmwoKXx8YSE9PXQpdj1oLnVybCgpLE49dCxyKEosZnVuY3Rpb24oYSl7YShoLnVybCgpLHQpfSl9dmFyIGg9dGhpcyxsPWEubG9jYXRpb24sbT1hLmhpc3RvcnkscD1hLnNldFRpbWVvdXQsbj1hLmNsZWFyVGltZW91dCxzPXt9LEc9ZShkKTtoLmlzTW9jaz0hMTtoLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9Ry5jb21wbGV0ZVRhc2s7aC4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50PUcuaW5jVGFza0NvdW50O2gubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1cbkcubm90aWZ5V2hlbk5vUGVuZGluZ1Rhc2tzO3ZhciB0LE4sdj1sLmhyZWYsamM9Yi5maW5kKFwiYmFzZVwiKSxxYT1udWxsLHk9Yy5oaXN0b3J5P2Z1bmN0aW9uKCl7dHJ5e3JldHVybiBtLnN0YXRlfWNhdGNoKGEpe319OkU7ZygpO2gudXJsPWZ1bmN0aW9uKGIsZCxlKXt6KGUpJiYoZT1udWxsKTtsIT09YS5sb2NhdGlvbiYmKGw9YS5sb2NhdGlvbik7bSE9PWEuaGlzdG9yeSYmKG09YS5oaXN0b3J5KTtpZihiKXt2YXIgZj1OPT09ZTtiPWdhKGIpLmhyZWY7aWYodj09PWImJighYy5oaXN0b3J5fHxmKSlyZXR1cm4gaDt2YXIgaz12JiZEYSh2KT09PURhKGIpO3Y9YjtOPWU7IWMuaGlzdG9yeXx8ayYmZj8oa3x8KHFhPWIpLGQ/bC5yZXBsYWNlKGIpOms/KGQ9bCxlPWIsZj1lLmluZGV4T2YoXCIjXCIpLGU9LTE9PT1mP1wiXCI6ZS5zdWJzdHIoZiksZC5oYXNoPWUpOmwuaHJlZj1iLGwuaHJlZiE9PWImJihxYT1iKSk6KG1bZD9cInJlcGxhY2VTdGF0ZVwiOlwicHVzaFN0YXRlXCJdKGUsXCJcIixiKSxnKCkpO1xucWEmJihxYT1iKTtyZXR1cm4gaH1yZXR1cm4ocWF8fGwuaHJlZikucmVwbGFjZSgvIyQvLFwiXCIpfTtoLnN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHR9O3ZhciBKPVtdLEk9ITEsUD1udWxsO2gub25VcmxDaGFuZ2U9ZnVuY3Rpb24oYil7aWYoIUkpe2lmKGMuaGlzdG9yeSl4KGEpLm9uKFwicG9wc3RhdGVcIixmKTt4KGEpLm9uKFwiaGFzaGNoYW5nZVwiLGYpO0k9ITB9Si5wdXNoKGIpO3JldHVybiBifTtoLiQkYXBwbGljYXRpb25EZXN0cm95ZWQ9ZnVuY3Rpb24oKXt4KGEpLm9mZihcImhhc2hjaGFuZ2UgcG9wc3RhdGVcIixmKX07aC4kJGNoZWNrVXJsQ2hhbmdlPWs7aC5iYXNlSHJlZj1mdW5jdGlvbigpe3ZhciBhPWpjLmF0dHIoXCJocmVmXCIpO3JldHVybiBhP2EucmVwbGFjZSgvXihodHRwcz86KT9cXC9cXC9bXi9dKi8sXCJcIik6XCJcIn07aC5kZWZlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7Yj1ifHwwO2M9Y3x8Ry5ERUZBVUxUX1RBU0tfVFlQRTtHLmluY1Rhc2tDb3VudChjKTtkPXAoZnVuY3Rpb24oKXtkZWxldGUgc1tkXTtcbkcuY29tcGxldGVUYXNrKGEsYyl9LGIpO3NbZF09YztyZXR1cm4gZH07aC5kZWZlci5jYW5jZWw9ZnVuY3Rpb24oYSl7aWYocy5oYXNPd25Qcm9wZXJ0eShhKSl7dmFyIGI9c1thXTtkZWxldGUgc1thXTtuKGEpO0cuY29tcGxldGVUYXNrKEUsYik7cmV0dXJuITB9cmV0dXJuITF9fWZ1bmN0aW9uIERmKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRsb2dcIixcIiRzbmlmZmVyXCIsXCIkZG9jdW1lbnRcIixcIiQkdGFza1RyYWNrZXJGYWN0b3J5XCIsZnVuY3Rpb24oYSxiLGQsYyxlKXtyZXR1cm4gbmV3IEFnKGEsYyxiLGQsZSl9XX1mdW5jdGlvbiBFZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxjKXtmdW5jdGlvbiBlKGEpe2EhPT1wJiYobj9uPT09YSYmKG49YS5uKTpuPWEsZihhLm4sYS5wKSxmKGEscCkscD1hLHAubj1udWxsKX1mdW5jdGlvbiBmKGEsYil7YSE9PWImJihhJiYoYS5wPWIpLGImJihiLm49YSkpfWlmKGEgaW4gYil0aHJvdyBGKFwiJGNhY2hlRmFjdG9yeVwiKShcImlpZFwiLFxuYSk7dmFyIGc9MCxrPVMoe30sYyx7aWQ6YX0pLGg9VCgpLGw9YyYmYy5jYXBhY2l0eXx8TnVtYmVyLk1BWF9WQUxVRSxtPVQoKSxwPW51bGwsbj1udWxsO3JldHVybiBiW2FdPXtwdXQ6ZnVuY3Rpb24oYSxiKXtpZigheihiKSl7aWYobDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYz1tW2FdfHwobVthXT17a2V5OmF9KTtlKGMpfWEgaW4gaHx8ZysrO2hbYV09YjtnPmwmJnRoaXMucmVtb3ZlKG4ua2V5KTtyZXR1cm4gYn19LGdldDpmdW5jdGlvbihhKXtpZihsPE51bWJlci5NQVhfVkFMVUUpe3ZhciBiPW1bYV07aWYoIWIpcmV0dXJuO2UoYil9cmV0dXJuIGhbYV19LHJlbW92ZTpmdW5jdGlvbihhKXtpZihsPE51bWJlci5NQVhfVkFMVUUpe3ZhciBiPW1bYV07aWYoIWIpcmV0dXJuO2I9PT1wJiYocD1iLnApO2I9PT1uJiYobj1iLm4pO2YoYi5uLGIucCk7ZGVsZXRlIG1bYV19YSBpbiBoJiYoZGVsZXRlIGhbYV0sZy0tKX0scmVtb3ZlQWxsOmZ1bmN0aW9uKCl7aD1UKCk7Zz0wO209VCgpO1xucD1uPW51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXttPWs9aD1udWxsO2RlbGV0ZSBiW2FdfSxpbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIFMoe30sayx7c2l6ZTpnfSl9fX12YXIgYj17fTthLmluZm89ZnVuY3Rpb24oKXt2YXIgYT17fTtyKGIsZnVuY3Rpb24oYixlKXthW2VdPWIuaW5mbygpfSk7cmV0dXJuIGF9O2EuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBiW2FdfTtyZXR1cm4gYX19ZnVuY3Rpb24gY2coKXt0aGlzLiRnZXQ9W1wiJGNhY2hlRmFjdG9yeVwiLGZ1bmN0aW9uKGEpe3JldHVybiBhKFwidGVtcGxhdGVzXCIpfV19ZnVuY3Rpb24gWGMoYSxiKXtmdW5jdGlvbiBkKGEsYixjKXt2YXIgZD0vXihbQCZdfFs9PF0oXFwqPykpKFxcPz8pXFxzKihbXFx3JF0qKSQvLGU9VCgpO3IoYSxmdW5jdGlvbihhLGYpe2E9YS50cmltKCk7aWYoYSBpbiBwKWVbZl09cFthXTtlbHNle3ZhciBnPWEubWF0Y2goZCk7aWYoIWcpdGhyb3cgJChcImlzY3BcIixiLGYsYSxjP1wiY29udHJvbGxlciBiaW5kaW5ncyBkZWZpbml0aW9uXCI6XG5cImlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvblwiKTtlW2ZdPXttb2RlOmdbMV1bMF0sY29sbGVjdGlvbjpcIipcIj09PWdbMl0sb3B0aW9uYWw6XCI/XCI9PT1nWzNdLGF0dHJOYW1lOmdbNF18fGZ9O2dbNF0mJihwW2FdPWVbZl0pfX0pO3JldHVybiBlfWZ1bmN0aW9uIGMoYSl7dmFyIGI9YS5jaGFyQXQoMCk7aWYoIWJ8fGIhPT1LKGIpKXRocm93ICQoXCJiYWRkaXJcIixhKTtpZihhIT09YS50cmltKCkpdGhyb3cgJChcImJhZGRpclwiLGEpO31mdW5jdGlvbiBlKGEpe3ZhciBiPWEucmVxdWlyZXx8YS5jb250cm9sbGVyJiZhLm5hbWU7IUgoYikmJkQoYikmJnIoYixmdW5jdGlvbihhLGMpe3ZhciBkPWEubWF0Y2gobCk7YS5zdWJzdHJpbmcoZFswXS5sZW5ndGgpfHwoYltjXT1kWzBdK2MpfSk7cmV0dXJuIGJ9dmFyIGY9e30sZz0vXlxccypkaXJlY3RpdmU6XFxzKihbXFx3LV0rKVxccysoLiopJC8saz0vKChbXFx3LV0rKSg/OjooW147XSspKT87PykvLGg9d2UoXCJuZ1NyYyxuZ1NyY3NldCxzcmMsc3Jjc2V0XCIpLFxubD0vXig/OihcXF5cXF4/KT8oXFw/KT8oXFxeXFxePyk/KT8vLG09L14ob25bYS16XSt8Zm9ybWFjdGlvbikkLyxwPVQoKTt0aGlzLmRpcmVjdGl2ZT1mdW5jdGlvbiBxYShiLGQpe2diKGIsXCJuYW1lXCIpO0phKGIsXCJkaXJlY3RpdmVcIik7QShiKT8oYyhiKSxnYihkLFwiZGlyZWN0aXZlRmFjdG9yeVwiKSxmLmhhc093blByb3BlcnR5KGIpfHwoZltiXT1bXSxhLmZhY3RvcnkoYitcIkRpcmVjdGl2ZVwiLFtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihhLGMpe3ZhciBkPVtdO3IoZltiXSxmdW5jdGlvbihmLGcpe3RyeXt2YXIgaD1hLmludm9rZShmKTtCKGgpP2g9e2NvbXBpbGU6aWEoaCl9OiFoLmNvbXBpbGUmJmgubGluayYmKGguY29tcGlsZT1pYShoLmxpbmspKTtoLnByaW9yaXR5PWgucHJpb3JpdHl8fDA7aC5pbmRleD1nO2gubmFtZT1oLm5hbWV8fGI7aC5yZXF1aXJlPWUoaCk7dmFyIGs9aCxsPWgucmVzdHJpY3Q7aWYobCYmKCFBKGwpfHwhL1tFQUNNXS8udGVzdChsKSkpdGhyb3cgJChcImJhZHJlc3RyaWN0XCIsXG5sLGIpO2sucmVzdHJpY3Q9bHx8XCJFQVwiO2guJCRtb2R1bGVOYW1lPWYuJCRtb2R1bGVOYW1lO2QucHVzaChoKX1jYXRjaChtKXtjKG0pfX0pO3JldHVybiBkfV0pKSxmW2JdLnB1c2goZCkpOnIoYixZYihxYSkpO3JldHVybiB0aGlzfTt0aGlzLmNvbXBvbmVudD1mdW5jdGlvbiB5KGEsYil7ZnVuY3Rpb24gYyhhKXtmdW5jdGlvbiBlKGIpe3JldHVybiBCKGIpfHxIKGIpP2Z1bmN0aW9uKGMsZCl7cmV0dXJuIGEuaW52b2tlKGIsdGhpcyx7JGVsZW1lbnQ6YywkYXR0cnM6ZH0pfTpifXZhciBmPWIudGVtcGxhdGV8fGIudGVtcGxhdGVVcmw/Yi50ZW1wbGF0ZTpcIlwiLGc9e2NvbnRyb2xsZXI6ZCxjb250cm9sbGVyQXM6QmcoYi5jb250cm9sbGVyKXx8Yi5jb250cm9sbGVyQXN8fFwiJGN0cmxcIix0ZW1wbGF0ZTplKGYpLHRlbXBsYXRlVXJsOmUoYi50ZW1wbGF0ZVVybCksdHJhbnNjbHVkZTpiLnRyYW5zY2x1ZGUsc2NvcGU6e30sYmluZFRvQ29udHJvbGxlcjpiLmJpbmRpbmdzfHx7fSxyZXN0cmljdDpcIkVcIixcbnJlcXVpcmU6Yi5yZXF1aXJlfTtyKGIsZnVuY3Rpb24oYSxiKXtcIiRcIj09PWIuY2hhckF0KDApJiYoZ1tiXT1hKX0pO3JldHVybiBnfWlmKCFBKGEpKXJldHVybiByKGEsWWIoVmEodGhpcyx5KSkpLHRoaXM7dmFyIGQ9Yi5jb250cm9sbGVyfHxmdW5jdGlvbigpe307cihiLGZ1bmN0aW9uKGEsYil7XCIkXCI9PT1iLmNoYXJBdCgwKSYmKGNbYl09YSxCKGQpJiYoZFtiXT1hKSl9KTtjLiRpbmplY3Q9W1wiJGluamVjdG9yXCJdO3JldHVybiB0aGlzLmRpcmVjdGl2ZShhLGMpfTt0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGEpe3JldHVybiB3KGEpPyhiLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KGEpLHRoaXMpOmIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHcoYSk/KGIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KGEpLHRoaXMpOmIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O1xudmFyIG49ITA7dGhpcy5kZWJ1Z0luZm9FbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB3KGEpPyhuPWEsdGhpcyk6bn07dmFyIHM9ITE7dGhpcy5zdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHcoYSk/KHM9YSx0aGlzKTpzfTt2YXIgRz0xMDt0aGlzLm9uQ2hhbmdlc1R0bD1mdW5jdGlvbihhKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oRz1hLHRoaXMpOkd9O3ZhciB0PSEwO3RoaXMuY29tbWVudERpcmVjdGl2ZXNFbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PWEsdGhpcyk6dH07dmFyIE49ITA7dGhpcy5jc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhOPWEsdGhpcyk6Tn07dmFyIHY9VCgpO3RoaXMuYWRkUHJvcGVydHlTZWN1cml0eUNvbnRleHQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEudG9Mb3dlckNhc2UoKStcInxcIitiLnRvTG93ZXJDYXNlKCk7XG5pZihkIGluIHYmJnZbZF0hPT1jKXRocm93ICQoXCJjdHhvdmVycmlkZVwiLGEsYix2W2RdLGMpO3ZbZF09YztyZXR1cm4gdGhpc307KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe3IoYyxmdW5jdGlvbihhKXt2W2EudG9Mb3dlckNhc2UoKV09Yn0pfWEoVi5IVE1MLFtcImlmcmFtZXxzcmNkb2NcIixcIip8aW5uZXJIVE1MXCIsXCIqfG91dGVySFRNTFwiXSk7YShWLkNTUyxbXCIqfHN0eWxlXCJdKTthKFYuVVJMLFwiYXJlYXxocmVmIGFyZWF8cGluZyBhfGhyZWYgYXxwaW5nIGJsb2NrcXVvdGV8Y2l0ZSBib2R5fGJhY2tncm91bmQgZGVsfGNpdGUgaW5wdXR8c3JjIGluc3xjaXRlIHF8Y2l0ZVwiLnNwbGl0KFwiIFwiKSk7YShWLk1FRElBX1VSTCxcImF1ZGlvfHNyYyBpbWd8c3JjIGltZ3xzcmNzZXQgc291cmNlfHNyYyBzb3VyY2V8c3Jjc2V0IHRyYWNrfHNyYyB2aWRlb3xzcmMgdmlkZW98cG9zdGVyXCIuc3BsaXQoXCIgXCIpKTthKFYuUkVTT1VSQ0VfVVJMLFwiKnxmb3JtQWN0aW9uIGFwcGxldHxjb2RlIGFwcGxldHxjb2RlYmFzZSBiYXNlfGhyZWYgZW1iZWR8c3JjIGZyYW1lfHNyYyBmb3JtfGFjdGlvbiBoZWFkfHByb2ZpbGUgaHRtbHxtYW5pZmVzdCBpZnJhbWV8c3JjIGxpbmt8aHJlZiBtZWRpYXxzcmMgb2JqZWN0fGNvZGViYXNlIG9iamVjdHxkYXRhIHNjcmlwdHxzcmNcIi5zcGxpdChcIiBcIikpfSkoKTtcbnRoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiR0ZW1wbGF0ZVJlcXVlc3RcIixcIiRwYXJzZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb290U2NvcGVcIixcIiRzY2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxiLGMsZSxwLE0sTCx1LFIpe2Z1bmN0aW9uIHEoKXt0cnl7aWYoIS0tSmEpdGhyb3cgVWE9dm9pZCAwLCQoXCJpbmZjaG5nXCIsRyk7TC4kYXBwbHkoZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPVVhLmxlbmd0aDthPGI7KythKXRyeXtVYVthXSgpfWNhdGNoKGQpe2MoZCl9VWE9dm9pZCAwfSl9ZmluYWxseXtKYSsrfX1mdW5jdGlvbiBtYShhLGIpe2lmKCFhKXJldHVybiBhO2lmKCFBKGEpKXRocm93ICQoXCJzcmNzZXRcIixiLGEudG9TdHJpbmcoKSk7Zm9yKHZhciBjPVwiXCIsZD1VKGEpLGU9LyhcXHMrXFxkK3hcXHMqLHxcXHMrXFxkK3dcXHMqLHxcXHMrLHwsXFxzKykvLGU9L1xccy8udGVzdChkKT9lOi8oLCkvLGQ9ZC5zcGxpdChlKSxlPU1hdGguZmxvb3IoZC5sZW5ndGgvXG4yKSxmPTA7ZjxlO2YrKyl2YXIgZz0yKmYsYz1jK3UuZ2V0VHJ1c3RlZE1lZGlhVXJsKFUoZFtnXSkpLGM9YysoXCIgXCIrVShkW2crMV0pKTtkPVUoZFsyKmZdKS5zcGxpdCgvXFxzLyk7Yys9dS5nZXRUcnVzdGVkTWVkaWFVcmwoVShkWzBdKSk7Mj09PWQubGVuZ3RoJiYoYys9XCIgXCIrVShkWzFdKSk7cmV0dXJuIGN9ZnVuY3Rpb24gdyhhLGIpe2lmKGIpe3ZhciBjPU9iamVjdC5rZXlzKGIpLGQsZSxmO2Q9MDtmb3IoZT1jLmxlbmd0aDtkPGU7ZCsrKWY9Y1tkXSx0aGlzW2ZdPWJbZl19ZWxzZSB0aGlzLiRhdHRyPXt9O3RoaXMuJCRlbGVtZW50PWF9ZnVuY3Rpb24gTyhhLGIsYyl7RmEuaW5uZXJIVE1MPVwiPHNwYW4gXCIrYitcIj5cIjtiPUZhLmZpcnN0Q2hpbGQuYXR0cmlidXRlczt2YXIgZD1iWzBdO2IucmVtb3ZlTmFtZWRJdGVtKGQubmFtZSk7ZC52YWx1ZT1jO2EuYXR0cmlidXRlcy5zZXROYW1lZEl0ZW0oZCl9ZnVuY3Rpb24gc2EoYSxiKXt0cnl7YS5hZGRDbGFzcyhiKX1jYXRjaChjKXt9fVxuZnVuY3Rpb24gZGEoYSxiLGMsZCxlKXthIGluc3RhbmNlb2YgeHx8KGE9eChhKSk7dmFyIGY9WGEoYSxiLGEsYyxkLGUpO2RhLiQkYWRkU2NvcGVDbGFzcyhhKTt2YXIgZz1udWxsO3JldHVybiBmdW5jdGlvbihiLGMsZCl7aWYoIWEpdGhyb3cgJChcIm11bHRpbGlua1wiKTtnYihiLFwic2NvcGVcIik7ZSYmZS5uZWVkc05ld1Njb3BlJiYoYj1iLiRwYXJlbnQuJG5ldygpKTtkPWR8fHt9O3ZhciBoPWQucGFyZW50Qm91bmRUcmFuc2NsdWRlRm4saz1kLnRyYW5zY2x1ZGVDb250cm9sbGVycztkPWQuZnV0dXJlUGFyZW50RWxlbWVudDtoJiZoLiQkYm91bmRUcmFuc2NsdWRlJiYoaD1oLiQkYm91bmRUcmFuc2NsdWRlKTtnfHwoZz0oZD1kJiZkWzBdKT9cImZvcmVpZ25vYmplY3RcIiE9PXVhKGQpJiZsYS5jYWxsKGQpLm1hdGNoKC9TVkcvKT9cInN2Z1wiOlwiaHRtbFwiOlwiaHRtbFwiKTtkPVwiaHRtbFwiIT09Zz94KGphKGcseChcIjxkaXY+PC9kaXY+XCIpLmFwcGVuZChhKS5odG1sKCkpKTpjP1dhLmNsb25lLmNhbGwoYSk6XG5hO2lmKGspZm9yKHZhciBsIGluIGspZC5kYXRhKFwiJFwiK2wrXCJDb250cm9sbGVyXCIsa1tsXS5pbnN0YW5jZSk7ZGEuJCRhZGRTY29wZUluZm8oZCxiKTtjJiZjKGQsYik7ZiYmZihiLGQsZCxoKTtjfHwoYT1mPW51bGwpO3JldHVybiBkfX1mdW5jdGlvbiBYYShhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGMsZCxlKXt2YXIgZixrLGwsbSxwLEksdDtpZihuKWZvcih0PUFycmF5KGMubGVuZ3RoKSxtPTA7bTxoLmxlbmd0aDttKz0zKWY9aFttXSx0W2ZdPWNbZl07ZWxzZSB0PWM7bT0wO2ZvcihwPWgubGVuZ3RoO208cDspaz10W2hbbSsrXV0sYz1oW20rK10sZj1oW20rK10sYz8oYy5zY29wZT8obD1hLiRuZXcoKSxkYS4kJGFkZFNjb3BlSW5mbyh4KGspLGwpKTpsPWEsST1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P2thKGEsYy50cmFuc2NsdWRlLGUpOiFjLnRlbXBsYXRlT25UaGlzRWxlbWVudCYmZT9lOiFlJiZiP2thKGEsYik6bnVsbCxjKGYsbCxrLGQsSSkpOmYmJmYoYSxrLmNoaWxkTm9kZXMsXG52b2lkIDAsZSl9Zm9yKHZhciBoPVtdLGs9SChhKXx8YSBpbnN0YW5jZW9mIHgsbCxtLHAsSSxuLHQ9MDt0PGEubGVuZ3RoO3QrKyl7bD1uZXcgdzsxMT09PUNhJiZpYihhLHQsayk7bT1zYyhhW3RdLFtdLGwsMD09PXQ/ZDp2b2lkIDAsZSk7KGY9bS5sZW5ndGg/YWEobSxhW3RdLGwsYixjLG51bGwsW10sW10sZik6bnVsbCkmJmYuc2NvcGUmJmRhLiQkYWRkU2NvcGVDbGFzcyhsLiQkZWxlbWVudCk7bD1mJiZmLnRlcm1pbmFsfHwhKHA9YVt0XS5jaGlsZE5vZGVzKXx8IXAubGVuZ3RoP251bGw6WGEocCxmPyhmLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50fHwhZi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpJiZmLnRyYW5zY2x1ZGU6Yik7aWYoZnx8bCloLnB1c2godCxmLGwpLEk9ITAsbj1ufHxmO2Y9bnVsbH1yZXR1cm4gST9nOm51bGx9ZnVuY3Rpb24gaWIoYSxiLGMpe3ZhciBkPWFbYl0sZT1kLnBhcmVudE5vZGUsZjtpZihkLm5vZGVUeXBlPT09UGEpZm9yKDs7KXtmPWU/ZC5uZXh0U2libGluZzpcbmFbYisxXTtpZighZnx8Zi5ub2RlVHlwZSE9PVBhKWJyZWFrO2Qubm9kZVZhbHVlKz1mLm5vZGVWYWx1ZTtmLnBhcmVudE5vZGUmJmYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmKTtjJiZmPT09YVtiKzFdJiZhLnNwbGljZShiKzEsMSl9fWZ1bmN0aW9uIGthKGEsYixjKXtmdW5jdGlvbiBkKGUsZixnLGgsayl7ZXx8KGU9YS4kbmV3KCExLGspLGUuJCR0cmFuc2NsdWRlZD0hMCk7cmV0dXJuIGIoZSxmLHtwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbjpjLHRyYW5zY2x1ZGVDb250cm9sbGVyczpnLGZ1dHVyZVBhcmVudEVsZW1lbnQ6aH0pfXZhciBlPWQuJCRzbG90cz1UKCksZjtmb3IoZiBpbiBiLiQkc2xvdHMpZVtmXT1iLiQkc2xvdHNbZl0/a2EoYSxiLiQkc2xvdHNbZl0sYyk6bnVsbDtyZXR1cm4gZH1mdW5jdGlvbiBzYyhhLGIsZCxlLGYpe3ZhciBnPWQuJGF0dHIsaDtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSAxOmg9dWEoYSk7WChiLHdhKGgpLFwiRVwiLGUsZik7Zm9yKHZhciBsLG0sXG5uLHQsSixzPWEuYXR0cmlidXRlcyx2PTAsRz1zJiZzLmxlbmd0aDt2PEc7disrKXt2YXIgUD0hMSxOPSExLHI9ITEseT0hMSx1PSExLE07bD1zW3ZdO209bC5uYW1lO3Q9bC52YWx1ZTtuPXdhKG0udG9Mb3dlckNhc2UoKSk7KEo9bi5tYXRjaChSYSkpPyhyPVwiQXR0clwiPT09SlsxXSx5PVwiUHJvcFwiPT09SlsxXSx1PVwiT25cIj09PUpbMV0sbT1tLnJlcGxhY2UocGQsXCJcIikudG9Mb3dlckNhc2UoKS5zdWJzdHIoNCtKWzFdLmxlbmd0aCkucmVwbGFjZSgvXyguKS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pKTooTT1uLm1hdGNoKFNhKSkmJmNhKE1bMV0pJiYoUD1tLE49bS5zdWJzdHIoMCxtLmxlbmd0aC01KStcImVuZFwiLG09bS5zdWJzdHIoMCxtLmxlbmd0aC02KSk7aWYoeXx8dSlkW25dPXQsZ1tuXT1sLm5hbWUseT9FYShhLGIsbixtKTpiLnB1c2gocWQocCxMLGMsbixtLCExKSk7ZWxzZXtuPXdhKG0udG9Mb3dlckNhc2UoKSk7Z1tuXT1tO2lmKHJ8fCFkLmhhc093blByb3BlcnR5KG4pKWRbbl09XG50LGxkKGEsbikmJihkW25dPSEwKTtJYShhLGIsdCxuLHIpO1goYixuLFwiQVwiLGUsZixQLE4pfX1cImlucHV0XCI9PT1oJiZcImhpZGRlblwiPT09YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpJiZhLnNldEF0dHJpYnV0ZShcImF1dG9jb21wbGV0ZVwiLFwib2ZmXCIpO2lmKCFRYSlicmVhaztnPWEuY2xhc3NOYW1lO0QoZykmJihnPWcuYW5pbVZhbCk7aWYoQShnKSYmXCJcIiE9PWcpZm9yKDthPWsuZXhlYyhnKTspbj13YShhWzJdKSxYKGIsbixcIkNcIixlLGYpJiYoZFtuXT1VKGFbM10pKSxnPWcuc3Vic3RyKGEuaW5kZXgrYVswXS5sZW5ndGgpO2JyZWFrO2Nhc2UgUGE6bmEoYixhLm5vZGVWYWx1ZSk7YnJlYWs7Y2FzZSA4OmlmKCFPYSlicmVhaztGKGEsYixkLGUsZil9Yi5zb3J0KGlhKTtyZXR1cm4gYn1mdW5jdGlvbiBGKGEsYixjLGQsZSl7dHJ5e3ZhciBmPWcuZXhlYyhhLm5vZGVWYWx1ZSk7aWYoZil7dmFyIGg9d2EoZlsxXSk7WChiLGgsXCJNXCIsZCxlKSYmKGNbaF09VShmWzJdKSl9fWNhdGNoKGspe319XG5mdW5jdGlvbiBWKGEsYixjKXt2YXIgZD1bXSxlPTA7aWYoYiYmYS5oYXNBdHRyaWJ1dGUmJmEuaGFzQXR0cmlidXRlKGIpKXtkb3tpZighYSl0aHJvdyAkKFwidXRlcmRpclwiLGIsYyk7MT09PWEubm9kZVR5cGUmJihhLmhhc0F0dHJpYnV0ZShiKSYmZSsrLGEuaGFzQXR0cmlidXRlKGMpJiZlLS0pO2QucHVzaChhKTthPWEubmV4dFNpYmxpbmd9d2hpbGUoMDxlKX1lbHNlIGQucHVzaChhKTtyZXR1cm4geChkKX1mdW5jdGlvbiBZKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXtlPVYoZVswXSxiLGMpO3JldHVybiBhKGQsZSxmLGcsaCl9fWZ1bmN0aW9uIFooYSxiLGMsZCxlLGYpe3ZhciBnO3JldHVybiBhP2RhKGIsYyxkLGUsZik6ZnVuY3Rpb24oKXtnfHwoZz1kYShiLGMsZCxlLGYpLGI9Yz1mPW51bGwpO3JldHVybiBnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gYWEoYSxiLGQsZSxmLGcsaCxrLGwpe2Z1bmN0aW9uIG0oYSxiLGMsZCl7aWYoYSl7YyYmKGE9XG5ZKGEsYyxkKSk7YS5yZXF1aXJlPXUucmVxdWlyZTthLmRpcmVjdGl2ZU5hbWU9UTtpZihzPT09dXx8dS4kJGlzb2xhdGVTY29wZSlhPUFhKGEse2lzb2xhdGVTY29wZTohMH0pO2gucHVzaChhKX1pZihiKXtjJiYoYj1ZKGIsYyxkKSk7Yi5yZXF1aXJlPXUucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9UTtpZihzPT09dXx8dS4kJGlzb2xhdGVTY29wZSliPUFhKGIse2lzb2xhdGVTY29wZTohMH0pO2sucHVzaChiKX19ZnVuY3Rpb24gcChhLGUsZixnLGwpe2Z1bmN0aW9uIG0oYSxiLGMsZCl7dmFyIGU7YmIoYSl8fChkPWMsYz1iLGI9YSxhPXZvaWQgMCk7TiYmKGU9UCk7Y3x8KGM9Tj9RLnBhcmVudCgpOlEpO2lmKGQpe3ZhciBmPWwuJCRzbG90c1tkXTtpZihmKXJldHVybiBmKGEsYixlLGMsUik7aWYoeihmKSl0aHJvdyAkKFwibm9zbG90XCIsZCx6YShRKSk7fWVsc2UgcmV0dXJuIGwoYSxiLGUsYyxSKX12YXIgbix1LEwseSxHLFAsTSxRO2I9PT1mPyhnPWQsUT1kLiQkZWxlbWVudCk6KFE9XG54KGYpLGc9bmV3IHcoUSxkKSk7Rz1lO3M/eT1lLiRuZXcoITApOnQmJihHPWUuJHBhcmVudCk7bCYmKE09bSxNLiQkYm91bmRUcmFuc2NsdWRlPWwsTS5pc1Nsb3RGaWxsZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuISFsLiQkc2xvdHNbYV19KTtKJiYoUD1lYShRLGcsTSxKLHksZSxzKSk7cyYmKGRhLiQkYWRkU2NvcGVJbmZvKFEseSwhMCwhKHYmJih2PT09c3x8dj09PXMuJCRvcmlnaW5hbERpcmVjdGl2ZSkpKSxkYS4kJGFkZFNjb3BlQ2xhc3MoUSwhMCkseS4kJGlzb2xhdGVCaW5kaW5ncz1zLiQkaXNvbGF0ZUJpbmRpbmdzLHU9RGEoZSxnLHkseS4kJGlzb2xhdGVCaW5kaW5ncyxzKSx1LnJlbW92ZVdhdGNoZXMmJnkuJG9uKFwiJGRlc3Ryb3lcIix1LnJlbW92ZVdhdGNoZXMpKTtmb3IobiBpbiBQKXt1PUpbbl07TD1QW25dO3ZhciBDZz11LiQkYmluZGluZ3MuYmluZFRvQ29udHJvbGxlcjtMLmluc3RhbmNlPUwoKTtRLmRhdGEoXCIkXCIrdS5uYW1lK1wiQ29udHJvbGxlclwiLEwuaW5zdGFuY2UpO1xuTC5iaW5kaW5nSW5mbz1EYShHLGcsTC5pbnN0YW5jZSxDZyx1KX1yKEosZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnJlcXVpcmU7YS5iaW5kVG9Db250cm9sbGVyJiYhSChjKSYmRChjKSYmUyhQW2JdLmluc3RhbmNlLFcoYixjLFEsUCkpfSk7cihQLGZ1bmN0aW9uKGEpe3ZhciBiPWEuaW5zdGFuY2U7aWYoQihiLiRvbkNoYW5nZXMpKXRyeXtiLiRvbkNoYW5nZXMoYS5iaW5kaW5nSW5mby5pbml0aWFsQ2hhbmdlcyl9Y2F0Y2goZCl7YyhkKX1pZihCKGIuJG9uSW5pdCkpdHJ5e2IuJG9uSW5pdCgpfWNhdGNoKGUpe2MoZSl9QihiLiRkb0NoZWNrKSYmKEcuJHdhdGNoKGZ1bmN0aW9uKCl7Yi4kZG9DaGVjaygpfSksYi4kZG9DaGVjaygpKTtCKGIuJG9uRGVzdHJveSkmJkcuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2IuJG9uRGVzdHJveSgpfSl9KTtuPTA7Zm9yKHU9aC5sZW5ndGg7bjx1O24rKylMPWhbbl0sQmEoTCxMLmlzb2xhdGVTY29wZT95OmUsUSxnLEwucmVxdWlyZSYmVyhMLmRpcmVjdGl2ZU5hbWUsXG5MLnJlcXVpcmUsUSxQKSxNKTt2YXIgUj1lO3MmJihzLnRlbXBsYXRlfHxudWxsPT09cy50ZW1wbGF0ZVVybCkmJihSPXkpO2EmJmEoUixmLmNoaWxkTm9kZXMsdm9pZCAwLGwpO2ZvcihuPWsubGVuZ3RoLTE7MDw9bjtuLS0pTD1rW25dLEJhKEwsTC5pc29sYXRlU2NvcGU/eTplLFEsZyxMLnJlcXVpcmUmJlcoTC5kaXJlY3RpdmVOYW1lLEwucmVxdWlyZSxRLFApLE0pO3IoUCxmdW5jdGlvbihhKXthPWEuaW5zdGFuY2U7QihhLiRwb3N0TGluaykmJmEuJHBvc3RMaW5rKCl9KX1sPWx8fHt9O2Zvcih2YXIgbj0tTnVtYmVyLk1BWF9WQUxVRSx0PWwubmV3U2NvcGVEaXJlY3RpdmUsSj1sLmNvbnRyb2xsZXJEaXJlY3RpdmVzLHM9bC5uZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsdj1sLnRlbXBsYXRlRGlyZWN0aXZlLEw9bC5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLEc9ITEsUD0hMSxOPWwuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUseT1kLiQkZWxlbWVudD14KGIpLHUsUSxcbk0sUj1lLHEsbWE9ITEsSWI9ITEsTyxzYT0wLEE9YS5sZW5ndGg7c2E8QTtzYSsrKXt1PWFbc2FdO3ZhciBFPXUuJCRzdGFydCxpYj11LiQkZW5kO0UmJih5PVYoYixFLGliKSk7TT12b2lkIDA7aWYobj51LnByaW9yaXR5KWJyZWFrO2lmKE89dS5zY29wZSl1LnRlbXBsYXRlVXJsfHwoRChPKT8oYmEoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixzfHx0LHUseSkscz11KTpiYShcIm5ldy9pc29sYXRlZCBzY29wZVwiLHMsdSx5KSksdD10fHx1O1E9dS5uYW1lO2lmKCFtYSYmKHUucmVwbGFjZSYmKHUudGVtcGxhdGVVcmx8fHUudGVtcGxhdGUpfHx1LnRyYW5zY2x1ZGUmJiF1LiQkdGxiKSl7Zm9yKE89c2ErMTttYT1hW08rK107KWlmKG1hLnRyYW5zY2x1ZGUmJiFtYS4kJHRsYnx8bWEucmVwbGFjZSYmKG1hLnRlbXBsYXRlVXJsfHxtYS50ZW1wbGF0ZSkpe0liPSEwO2JyZWFrfW1hPSEwfSF1LnRlbXBsYXRlVXJsJiZ1LmNvbnRyb2xsZXImJihKPUp8fFQoKSxiYShcIidcIitRK1wiJyBjb250cm9sbGVyXCIsXG5KW1FdLHUseSksSltRXT11KTtpZihPPXUudHJhbnNjbHVkZSlpZihHPSEwLHUuJCR0bGJ8fChiYShcInRyYW5zY2x1c2lvblwiLEwsdSx5KSxMPXUpLFwiZWxlbWVudFwiPT09TylOPSEwLG49dS5wcmlvcml0eSxNPXkseT1kLiQkZWxlbWVudD14KGRhLiQkY3JlYXRlQ29tbWVudChRLGRbUV0pKSxiPXlbMF0scGEoZixIYS5jYWxsKE0sMCksYiksUj1aKEliLE0sZSxuLGcmJmcubmFtZSx7bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpMfSk7ZWxzZXt2YXIga2E9VCgpO2lmKEQoTykpe009Qy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dmFyIFhhPVQoKSxGPVQoKTtyKE8sZnVuY3Rpb24oYSxiKXt2YXIgYz1cIj9cIj09PWEuY2hhckF0KDApO2E9Yz9hLnN1YnN0cmluZygxKTphO1hhW2FdPWI7a2FbYl09bnVsbDtGW2JdPWN9KTtyKHkuY29udGVudHMoKSxmdW5jdGlvbihhKXt2YXIgYj1YYVt3YSh1YShhKSldO2I/KEZbYl09ITAsa2FbYl09a2FbYl18fEMuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxua2FbYl0uYXBwZW5kQ2hpbGQoYSkpOk0uYXBwZW5kQ2hpbGQoYSl9KTtyKEYsZnVuY3Rpb24oYSxiKXtpZighYSl0aHJvdyAkKFwicmVxc2xvdFwiLGIpO30pO2Zvcih2YXIgSyBpbiBrYSlrYVtLXSYmKFI9eChrYVtLXS5jaGlsZE5vZGVzKSxrYVtLXT1aKEliLFIsZSkpO009eChNLmNoaWxkTm9kZXMpfWVsc2UgTT14KHBjKGIpKS5jb250ZW50cygpO3kuZW1wdHkoKTtSPVooSWIsTSxlLHZvaWQgMCx2b2lkIDAse25lZWRzTmV3U2NvcGU6dS4kJGlzb2xhdGVTY29wZXx8dS4kJG5ld1Njb3BlfSk7Ui4kJHNsb3RzPWthfWlmKHUudGVtcGxhdGUpaWYoUD0hMCxiYShcInRlbXBsYXRlXCIsdix1LHkpLHY9dSxPPUIodS50ZW1wbGF0ZSk/dS50ZW1wbGF0ZSh5LGQpOnUudGVtcGxhdGUsTz1OYShPKSx1LnJlcGxhY2Upe2c9dTtNPW1jLnRlc3QoTyk/cmQoamEodS50ZW1wbGF0ZU5hbWVzcGFjZSxVKE8pKSk6W107Yj1NWzBdO2lmKDEhPT1NLmxlbmd0aHx8MSE9PWIubm9kZVR5cGUpdGhyb3cgJChcInRwbHJ0XCIsXG5RLFwiXCIpO3BhKGYseSxiKTtBPXskYXR0cjp7fX07Tz1zYyhiLFtdLEEpO3ZhciBEZz1hLnNwbGljZShzYSsxLGEubGVuZ3RoLShzYSsxKSk7KHN8fHQpJiZmYShPLHMsdCk7YT1hLmNvbmNhdChPKS5jb25jYXQoRGcpO2dhKGQsQSk7QT1hLmxlbmd0aH1lbHNlIHkuaHRtbChPKTtpZih1LnRlbXBsYXRlVXJsKVA9ITAsYmEoXCJ0ZW1wbGF0ZVwiLHYsdSx5KSx2PXUsdS5yZXBsYWNlJiYoZz11KSxwPWhhKGEuc3BsaWNlKHNhLGEubGVuZ3RoLXNhKSx5LGQsZixHJiZSLGgsayx7Y29udHJvbGxlckRpcmVjdGl2ZXM6SixuZXdTY29wZURpcmVjdGl2ZTp0IT09dSYmdCxuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6cyx0ZW1wbGF0ZURpcmVjdGl2ZTp2LG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6TH0pLEE9YS5sZW5ndGg7ZWxzZSBpZih1LmNvbXBpbGUpdHJ5e3E9dS5jb21waWxlKHksZCxSKTt2YXIgWD11LiQkb3JpZ2luYWxEaXJlY3RpdmV8fHU7QihxKT9tKG51bGwsVmEoWCxxKSxFLGliKTpcbnEmJm0oVmEoWCxxLnByZSksVmEoWCxxLnBvc3QpLEUsaWIpfWNhdGNoKGNhKXtjKGNhLHphKHkpKX11LnRlcm1pbmFsJiYocC50ZXJtaW5hbD0hMCxuPU1hdGgubWF4KG4sdS5wcmlvcml0eSkpfXAuc2NvcGU9dCYmITA9PT10LnNjb3BlO3AudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ9RztwLnRlbXBsYXRlT25UaGlzRWxlbWVudD1QO3AudHJhbnNjbHVkZT1SO2wuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU9TjtyZXR1cm4gcH1mdW5jdGlvbiBXKGEsYixjLGQpe3ZhciBlO2lmKEEoYikpe3ZhciBmPWIubWF0Y2gobCk7Yj1iLnN1YnN0cmluZyhmWzBdLmxlbmd0aCk7dmFyIGc9ZlsxXXx8ZlszXSxmPVwiP1wiPT09ZlsyXTtcIl5eXCI9PT1nP2M9Yy5wYXJlbnQoKTplPShlPWQmJmRbYl0pJiZlLmluc3RhbmNlO2lmKCFlKXt2YXIgaD1cIiRcIitiK1wiQ29udHJvbGxlclwiO2U9XCJeXlwiPT09ZyYmY1swXSYmOT09PWNbMF0ubm9kZVR5cGU/bnVsbDpnP2MuaW5oZXJpdGVkRGF0YShoKTpjLmRhdGEoaCl9aWYoIWUmJlxuIWYpdGhyb3cgJChcImN0cmVxXCIsYixhKTt9ZWxzZSBpZihIKGIpKWZvcihlPVtdLGc9MCxmPWIubGVuZ3RoO2c8ZjtnKyspZVtnXT1XKGEsYltnXSxjLGQpO2Vsc2UgRChiKSYmKGU9e30scihiLGZ1bmN0aW9uKGIsZil7ZVtmXT1XKGEsYixjLGQpfSkpO3JldHVybiBlfHxudWxsfWZ1bmN0aW9uIGVhKGEsYixjLGQsZSxmLGcpe3ZhciBoPVQoKSxrO2ZvcihrIGluIGQpe3ZhciBsPWRba10sbT17JHNjb3BlOmw9PT1nfHxsLiQkaXNvbGF0ZVNjb3BlP2U6ZiwkZWxlbWVudDphLCRhdHRyczpiLCR0cmFuc2NsdWRlOmN9LHA9bC5jb250cm9sbGVyO1wiQFwiPT09cCYmKHA9YltsLm5hbWVdKTttPU0ocCxtLCEwLGwuY29udHJvbGxlckFzKTtoW2wubmFtZV09bTthLmRhdGEoXCIkXCIrbC5uYW1lK1wiQ29udHJvbGxlclwiLG0uaW5zdGFuY2UpfXJldHVybiBofWZ1bmN0aW9uIGZhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspYVtkXT1hYyhhW2RdLHskJGlzb2xhdGVTY29wZTpiLFxuJCRuZXdTY29wZTpjfSl9ZnVuY3Rpb24gWChiLGMsZSxnLGgsayxsKXtpZihjPT09aClyZXR1cm4gbnVsbDt2YXIgbT1udWxsO2lmKGYuaGFzT3duUHJvcGVydHkoYykpe2g9YS5nZXQoYytcIkRpcmVjdGl2ZVwiKTtmb3IodmFyIHA9MCxuPWgubGVuZ3RoO3A8bjtwKyspaWYoYz1oW3BdLCh6KGcpfHxnPmMucHJpb3JpdHkpJiYtMSE9PWMucmVzdHJpY3QuaW5kZXhPZihlKSl7ayYmKGM9YWMoYyx7JCRzdGFydDprLCQkZW5kOmx9KSk7aWYoIWMuJCRiaW5kaW5ncyl7dmFyIEk9bT1jLHQ9Yy5uYW1lLHU9e2lzb2xhdGVTY29wZTpudWxsLGJpbmRUb0NvbnRyb2xsZXI6bnVsbH07RChJLnNjb3BlKSYmKCEwPT09SS5iaW5kVG9Db250cm9sbGVyPyh1LmJpbmRUb0NvbnRyb2xsZXI9ZChJLnNjb3BlLHQsITApLHUuaXNvbGF0ZVNjb3BlPXt9KTp1Lmlzb2xhdGVTY29wZT1kKEkuc2NvcGUsdCwhMSkpO0QoSS5iaW5kVG9Db250cm9sbGVyKSYmKHUuYmluZFRvQ29udHJvbGxlcj1kKEkuYmluZFRvQ29udHJvbGxlcixcbnQsITApKTtpZih1LmJpbmRUb0NvbnRyb2xsZXImJiFJLmNvbnRyb2xsZXIpdGhyb3cgJChcIm5vY3RybFwiLHQpO209bS4kJGJpbmRpbmdzPXU7RChtLmlzb2xhdGVTY29wZSkmJihjLiQkaXNvbGF0ZUJpbmRpbmdzPW0uaXNvbGF0ZVNjb3BlKX1iLnB1c2goYyk7bT1jfX1yZXR1cm4gbX1mdW5jdGlvbiBjYShiKXtpZihmLmhhc093blByb3BlcnR5KGIpKWZvcih2YXIgYz1hLmdldChiK1wiRGlyZWN0aXZlXCIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspaWYoYj1jW2RdLGIubXVsdGlFbGVtZW50KXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGdhKGEsYil7dmFyIGM9Yi4kYXR0cixkPWEuJGF0dHI7cihhLGZ1bmN0aW9uKGQsZSl7XCIkXCIhPT1lLmNoYXJBdCgwKSYmKGJbZV0mJmJbZV0hPT1kJiYoZD1kLmxlbmd0aD9kKygoXCJzdHlsZVwiPT09ZT9cIjtcIjpcIiBcIikrYltlXSk6YltlXSksYS4kc2V0KGUsZCwhMCxjW2VdKSl9KTtyKGIsZnVuY3Rpb24oYixlKXthLmhhc093blByb3BlcnR5KGUpfHxcblwiJFwiPT09ZS5jaGFyQXQoMCl8fChhW2VdPWIsXCJjbGFzc1wiIT09ZSYmXCJzdHlsZVwiIT09ZSYmKGRbZV09Y1tlXSkpfSl9ZnVuY3Rpb24gaGEoYSxiLGQsZixnLGgsayxsKXt2YXIgbT1bXSxwLG4sdD1iWzBdLHU9YS5zaGlmdCgpLEo9YWModSx7dGVtcGxhdGVVcmw6bnVsbCx0cmFuc2NsdWRlOm51bGwscmVwbGFjZTpudWxsLCQkb3JpZ2luYWxEaXJlY3RpdmU6dX0pLHM9Qih1LnRlbXBsYXRlVXJsKT91LnRlbXBsYXRlVXJsKGIsZCk6dS50ZW1wbGF0ZVVybCxMPXUudGVtcGxhdGVOYW1lc3BhY2U7Yi5lbXB0eSgpO2UocykudGhlbihmdW5jdGlvbihjKXt2YXIgZSxJO2M9TmEoYyk7aWYodS5yZXBsYWNlKXtjPW1jLnRlc3QoYyk/cmQoamEoTCxVKGMpKSk6W107ZT1jWzBdO2lmKDEhPT1jLmxlbmd0aHx8MSE9PWUubm9kZVR5cGUpdGhyb3cgJChcInRwbHJ0XCIsdS5uYW1lLHMpO2M9eyRhdHRyOnt9fTtwYShmLGIsZSk7dmFyIHY9c2MoZSxbXSxjKTtEKHUuc2NvcGUpJiZmYSh2LCEwKTthPVxudi5jb25jYXQoYSk7Z2EoZCxjKX1lbHNlIGU9dCxiLmh0bWwoYyk7YS51bnNoaWZ0KEopO3A9YWEoYSxlLGQsZyxiLHUsaCxrLGwpO3IoZixmdW5jdGlvbihhLGMpe2E9PT1lJiYoZltjXT1iWzBdKX0pO2ZvcihuPVhhKGJbMF0uY2hpbGROb2RlcyxnKTttLmxlbmd0aDspe2M9bS5zaGlmdCgpO0k9bS5zaGlmdCgpO3ZhciB5PW0uc2hpZnQoKSxQPW0uc2hpZnQoKSx2PWJbMF07aWYoIWMuJCRkZXN0cm95ZWQpe2lmKEkhPT10KXt2YXIgRz1JLmNsYXNzTmFtZTtsLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlJiZ1LnJlcGxhY2V8fCh2PXBjKGUpKTtwYSh5LHgoSSksdik7c2EoeCh2KSxHKX1JPXAudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/a2EoYyxwLnRyYW5zY2x1ZGUsUCk6UDtwKG4sYyx2LGYsSSl9fW09bnVsbH0pLmNhdGNoKGZ1bmN0aW9uKGEpe2NjKGEpJiZjKGEpfSk7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQsZSl7YT1lO2IuJCRkZXN0cm95ZWR8fChtP20ucHVzaChiLFxuYyxkLGEpOihwLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50JiYoYT1rYShiLHAudHJhbnNjbHVkZSxlKSkscChuLGIsYyxkLGEpKSl9fWZ1bmN0aW9uIGlhKGEsYil7dmFyIGM9Yi5wcmlvcml0eS1hLnByaW9yaXR5O3JldHVybiAwIT09Yz9jOmEubmFtZSE9PWIubmFtZT9hLm5hbWU8Yi5uYW1lPy0xOjE6YS5pbmRleC1iLmluZGV4fWZ1bmN0aW9uIGJhKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuIGE/XCIgKG1vZHVsZTogXCIrYStcIilcIjpcIlwifWlmKGIpdGhyb3cgJChcIm11bHRpZGlyXCIsYi5uYW1lLGUoYi4kJG1vZHVsZU5hbWUpLGMubmFtZSxlKGMuJCRtb2R1bGVOYW1lKSxhLHphKGQpKTt9ZnVuY3Rpb24gbmEoYSxjKXt2YXIgZD1iKGMsITApO2QmJmEucHVzaCh7cHJpb3JpdHk6MCxjb21waWxlOmZ1bmN0aW9uKGEpe2E9YS5wYXJlbnQoKTt2YXIgYj0hIWEubGVuZ3RoO2ImJmRhLiQkYWRkQmluZGluZ0NsYXNzKGEpO3JldHVybiBmdW5jdGlvbihhLGMpe3ZhciBlPWMucGFyZW50KCk7XG5ifHxkYS4kJGFkZEJpbmRpbmdDbGFzcyhlKTtkYS4kJGFkZEJpbmRpbmdJbmZvKGUsZC5leHByZXNzaW9ucyk7YS4kd2F0Y2goZCxmdW5jdGlvbihhKXtjWzBdLm5vZGVWYWx1ZT1hfSl9fX0pfWZ1bmN0aW9uIGphKGEsYil7YT1LKGF8fFwiaHRtbFwiKTtzd2l0Y2goYSl7Y2FzZSBcInN2Z1wiOmNhc2UgXCJtYXRoXCI6dmFyIGM9Qy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuaW5uZXJIVE1MPVwiPFwiK2ErXCI+XCIrYitcIjwvXCIrYStcIj5cIjtyZXR1cm4gYy5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7ZGVmYXVsdDpyZXR1cm4gYn19ZnVuY3Rpb24gb2EoYSxiKXtpZihcInNyY2RvY1wiPT09YilyZXR1cm4gdS5IVE1MO2lmKFwic3JjXCI9PT1ifHxcIm5nU3JjXCI9PT1iKXJldHVybi0xPT09W1wiaW1nXCIsXCJ2aWRlb1wiLFwiYXVkaW9cIixcInNvdXJjZVwiLFwidHJhY2tcIl0uaW5kZXhPZihhKT91LlJFU09VUkNFX1VSTDp1Lk1FRElBX1VSTDtpZihcInhsaW5rSHJlZlwiPT09YilyZXR1cm5cImltYWdlXCI9PT1hP3UuTUVESUFfVVJMOlxuXCJhXCI9PT1hP3UuVVJMOnUuUkVTT1VSQ0VfVVJMO2lmKFwiZm9ybVwiPT09YSYmXCJhY3Rpb25cIj09PWJ8fFwiYmFzZVwiPT09YSYmXCJocmVmXCI9PT1ifHxcImxpbmtcIj09PWEmJlwiaHJlZlwiPT09YilyZXR1cm4gdS5SRVNPVVJDRV9VUkw7aWYoXCJhXCI9PT1hJiYoXCJocmVmXCI9PT1ifHxcIm5nSHJlZlwiPT09YikpcmV0dXJuIHUuVVJMfWZ1bmN0aW9uIHhhKGEsYil7dmFyIGM9Yi50b0xvd2VyQ2FzZSgpO3JldHVybiB2W2ErXCJ8XCIrY118fHZbXCIqfFwiK2NdfWZ1bmN0aW9uIHlhKGEpe3JldHVybiBtYSh1LnZhbHVlT2YoYSksXCJuZy1wcm9wLXNyY3NldFwiKX1mdW5jdGlvbiBFYShhLGIsYyxkKXtpZihtLnRlc3QoZCkpdGhyb3cgJChcIm5vZG9tZXZlbnRzXCIpO2E9dWEoYSk7dmFyIGU9eGEoYSxkKSxmPVRhO1wic3Jjc2V0XCIhPT1kfHxcImltZ1wiIT09YSYmXCJzb3VyY2VcIiE9PWE/ZSYmKGY9dS5nZXRUcnVzdGVkLmJpbmQodSxlKSk6Zj15YTtiLnB1c2goe3ByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGEsYil7dmFyIGU9XG5wKGJbY10pLGc9cChiW2NdLGZ1bmN0aW9uKGEpe3JldHVybiB1LnZhbHVlT2YoYSl9KTtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe3ZhciBnPWUoYSk7YlswXVtkXT1mKGcpfWMoKTthLiR3YXRjaChnLGMpfX19fSl9ZnVuY3Rpb24gSWEoYSxjLGQsZSxmKXt2YXIgZz11YShhKSxrPW9hKGcsZSksbD1oW2VdfHxmLHA9YihkLCFmLGssbCk7aWYocCl7aWYoXCJtdWx0aXBsZVwiPT09ZSYmXCJzZWxlY3RcIj09PWcpdGhyb3cgJChcInNlbG11bHRpXCIsemEoYSkpO2lmKG0udGVzdChlKSl0aHJvdyAkKFwibm9kb21ldmVudHNcIik7Yy5wdXNoKHtwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxjLGYpe2M9Zi4kJG9ic2VydmVyc3x8KGYuJCRvYnNlcnZlcnM9VCgpKTt2YXIgZz1mW2VdO2chPT1kJiYocD1nJiZiKGcsITAsayxsKSxkPWcpO3AmJihmW2VdPXAoYSksKGNbZV18fChjW2VdPVtdKSkuJCRpbnRlcj0hMCwoZi4kJG9ic2VydmVycyYmXG5mLiQkb2JzZXJ2ZXJzW2VdLiQkc2NvcGV8fGEpLiR3YXRjaChwLGZ1bmN0aW9uKGEsYil7XCJjbGFzc1wiPT09ZSYmYSE9PWI/Zi4kdXBkYXRlQ2xhc3MoYSxiKTpmLiRzZXQoZSxhKX0pKX19fX0pfX1mdW5jdGlvbiBwYShhLGIsYyl7dmFyIGQ9YlswXSxlPWIubGVuZ3RoLGY9ZC5wYXJlbnROb2RlLGcsaDtpZihhKWZvcihnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWlmKGFbZ109PT1kKXthW2crK109YztoPWcrZS0xO2Zvcih2YXIgaz1hLmxlbmd0aDtnPGs7ZysrLGgrKyloPGs/YVtnXT1hW2hdOmRlbGV0ZSBhW2ddO2EubGVuZ3RoLT1lLTE7YS5jb250ZXh0PT09ZCYmKGEuY29udGV4dD1jKTticmVha31mJiZmLnJlcGxhY2VDaGlsZChjLGQpO2E9Qy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yKGc9MDtnPGU7ZysrKWEuYXBwZW5kQ2hpbGQoYltnXSk7eC5oYXNEYXRhKGQpJiYoeC5kYXRhKGMseC5kYXRhKGQpKSx4KGQpLm9mZihcIiRkZXN0cm95XCIpKTt4LmNsZWFuRGF0YShhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpKTtcbmZvcihnPTE7ZzxlO2crKylkZWxldGUgYltnXTtiWzBdPWM7Yi5sZW5ndGg9MX1mdW5jdGlvbiBBYShhLGIpe3JldHVybiBTKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhLGIpfWZ1bmN0aW9uIEJhKGEsYixkLGUsZixnKXt0cnl7YShiLGQsZSxmLGcpfWNhdGNoKGgpe2MoaCx6YShkKSl9fWZ1bmN0aW9uIHJhKGEsYil7aWYocyl0aHJvdyAkKFwibWlzc2luZ2F0dHJcIixhLGIpO31mdW5jdGlvbiBEYShhLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYixjLGUpe0IoZC4kb25DaGFuZ2VzKSYmIWRjKGMsZSkmJihVYXx8KGEuJCRwb3N0RGlnZXN0KHEpLFVhPVtdKSxtfHwobT17fSxVYS5wdXNoKGgpKSxtW2JdJiYoZT1tW2JdLnByZXZpb3VzVmFsdWUpLG1bYl09bmV3IEpiKGUsYykpfWZ1bmN0aW9uIGgoKXtkLiRvbkNoYW5nZXMobSk7bT12b2lkIDB9dmFyIGs9W10sbD17fSxtO3IoZSxmdW5jdGlvbihlLGgpe3ZhciBtPWUuYXR0ck5hbWUsbj1lLm9wdGlvbmFsLFxuSSx0LHUscztzd2l0Y2goZS5tb2RlKXtjYXNlIFwiQFwiOm58fHRhLmNhbGwoYyxtKXx8KHJhKG0sZi5uYW1lKSxkW2hdPWNbbV09dm9pZCAwKTtuPWMuJG9ic2VydmUobSxmdW5jdGlvbihhKXtpZihBKGEpfHxHYShhKSlnKGgsYSxkW2hdKSxkW2hdPWF9KTtjLiQkb2JzZXJ2ZXJzW21dLiQkc2NvcGU9YTtJPWNbbV07QShJKT9kW2hdPWIoSSkoYSk6R2EoSSkmJihkW2hdPUkpO2xbaF09bmV3IEpiKHRjLGRbaF0pO2sucHVzaChuKTticmVhaztjYXNlIFwiPVwiOmlmKCF0YS5jYWxsKGMsbSkpe2lmKG4pYnJlYWs7cmEobSxmLm5hbWUpO2NbbV09dm9pZCAwfWlmKG4mJiFjW21dKWJyZWFrO3Q9cChjW21dKTtzPXQubGl0ZXJhbD92YTpkYzt1PXQuYXNzaWdufHxmdW5jdGlvbigpe0k9ZFtoXT10KGEpO3Rocm93ICQoXCJub25hc3NpZ25cIixjW21dLG0sZi5uYW1lKTt9O0k9ZFtoXT10KGEpO249ZnVuY3Rpb24oYil7cyhiLGRbaF0pfHwocyhiLEkpP3UoYSxiPWRbaF0pOmRbaF09Yik7cmV0dXJuIEk9XG5ifTtuLiRzdGF0ZWZ1bD0hMDtuPWUuY29sbGVjdGlvbj9hLiR3YXRjaENvbGxlY3Rpb24oY1ttXSxuKTphLiR3YXRjaChwKGNbbV0sbiksbnVsbCx0LmxpdGVyYWwpO2sucHVzaChuKTticmVhaztjYXNlIFwiPFwiOmlmKCF0YS5jYWxsKGMsbSkpe2lmKG4pYnJlYWs7cmEobSxmLm5hbWUpO2NbbV09dm9pZCAwfWlmKG4mJiFjW21dKWJyZWFrO3Q9cChjW21dKTt2YXIgdj10LmxpdGVyYWwsTD1kW2hdPXQoYSk7bFtoXT1uZXcgSmIodGMsZFtoXSk7bj1hW2UuY29sbGVjdGlvbj9cIiR3YXRjaENvbGxlY3Rpb25cIjpcIiR3YXRjaFwiXSh0LGZ1bmN0aW9uKGEsYil7aWYoYj09PWEpe2lmKGI9PT1MfHx2JiZ2YShiLEwpKXJldHVybjtiPUx9ZyhoLGEsYik7ZFtoXT1hfSk7ay5wdXNoKG4pO2JyZWFrO2Nhc2UgXCImXCI6bnx8dGEuY2FsbChjLG0pfHxyYShtLGYubmFtZSk7dD1jLmhhc093blByb3BlcnR5KG0pP3AoY1ttXSk6RTtpZih0PT09RSYmbilicmVhaztkW2hdPWZ1bmN0aW9uKGIpe3JldHVybiB0KGEsXG5iKX19fSk7cmV0dXJue2luaXRpYWxDaGFuZ2VzOmwscmVtb3ZlV2F0Y2hlczprLmxlbmd0aCYmZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPWsubGVuZ3RoO2E8YjsrK2Epa1thXSgpfX19dmFyIE1hPS9eXFx3LyxGYT1DLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksT2E9dCxRYT1OLEphPUcsVWE7dy5wcm90b3R5cGU9eyRub3JtYWxpemU6d2EsJGFkZENsYXNzOmZ1bmN0aW9uKGEpe2EmJjA8YS5sZW5ndGgmJlIuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsYSl9LCRyZW1vdmVDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZSLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkdXBkYXRlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1zZChhLGIpO2MmJmMubGVuZ3RoJiZSLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGMpOyhjPXNkKGIsYSkpJiZjLmxlbmd0aCYmUi5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxjKX0sJHNldDpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1cbmxkKHRoaXMuJCRlbGVtZW50WzBdLGEpLGc9dGRbYV0saD1hO2Y/KHRoaXMuJCRlbGVtZW50LnByb3AoYSxiKSxlPWYpOmcmJih0aGlzW2ddPWIsaD1nKTt0aGlzW2FdPWI7ZT90aGlzLiRhdHRyW2FdPWU6KGU9dGhpcy4kYXR0clthXSl8fCh0aGlzLiRhdHRyW2FdPWU9VmMoYSxcIi1cIikpO1wiaW1nXCI9PT11YSh0aGlzLiQkZWxlbWVudCkmJlwic3Jjc2V0XCI9PT1hJiYodGhpc1thXT1iPW1hKGIsXCIkc2V0KCdzcmNzZXQnLCB2YWx1ZSlcIikpOyExIT09ZCYmKG51bGw9PT1ifHx6KGIpP3RoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoZSk6TWEudGVzdChlKT9mJiYhMT09PWI/dGhpcy4kJGVsZW1lbnQucmVtb3ZlQXR0cihlKTp0aGlzLiQkZWxlbWVudC5hdHRyKGUsYik6Tyh0aGlzLiQkZWxlbWVudFswXSxlLGIpKTsoYT10aGlzLiQkb2JzZXJ2ZXJzKSYmcihhW2hdLGZ1bmN0aW9uKGEpe3RyeXthKGIpfWNhdGNoKGQpe2MoZCl9fSl9LCRvYnNlcnZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxcbmQ9Yy4kJG9ic2VydmVyc3x8KGMuJCRvYnNlcnZlcnM9VCgpKSxlPWRbYV18fChkW2FdPVtdKTtlLnB1c2goYik7TC4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7ZS4kJGludGVyfHwhYy5oYXNPd25Qcm9wZXJ0eShhKXx8eihjW2FdKXx8YihjW2FdKX0pO3JldHVybiBmdW5jdGlvbigpe2NiKGUsYil9fX07dmFyIEthPWIuc3RhcnRTeW1ib2woKSxMYT1iLmVuZFN5bWJvbCgpLE5hPVwie3tcIj09PUthJiZcIn19XCI9PT1MYT9UYTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHtcXHsvZyxLYSkucmVwbGFjZSgvfX0vZyxMYSl9LFJhPS9ebmcoQXR0cnxQcm9wfE9uKShbQS1aXS4qKSQvLFNhPS9eKC4rKVN0YXJ0JC87ZGEuJCRhZGRCaW5kaW5nSW5mbz1uP2Z1bmN0aW9uKGEsYil7dmFyIGM9YS5kYXRhKFwiJGJpbmRpbmdcIil8fFtdO0goYik/Yz1jLmNvbmNhdChiKTpjLnB1c2goYik7YS5kYXRhKFwiJGJpbmRpbmdcIixjKX06RTtkYS4kJGFkZEJpbmRpbmdDbGFzcz1uP2Z1bmN0aW9uKGEpe3NhKGEsXG5cIm5nLWJpbmRpbmdcIil9OkU7ZGEuJCRhZGRTY29wZUluZm89bj9mdW5jdGlvbihhLGIsYyxkKXthLmRhdGEoYz9kP1wiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIjpcIiRpc29sYXRlU2NvcGVcIjpcIiRzY29wZVwiLGIpfTpFO2RhLiQkYWRkU2NvcGVDbGFzcz1uP2Z1bmN0aW9uKGEsYil7c2EoYSxiP1wibmctaXNvbGF0ZS1zY29wZVwiOlwibmctc2NvcGVcIil9OkU7ZGEuJCRjcmVhdGVDb21tZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9XCJcIjtuJiYoYz1cIiBcIisoYXx8XCJcIikrXCI6IFwiLGImJihjKz1iK1wiIFwiKSk7cmV0dXJuIEMuZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjKX07cmV0dXJuIGRhfV19ZnVuY3Rpb24gSmIoYSxiKXt0aGlzLnByZXZpb3VzVmFsdWU9YTt0aGlzLmN1cnJlbnRWYWx1ZT1ifWZ1bmN0aW9uIHdhKGEpe3JldHVybiBhLnJlcGxhY2UocGQsXCJcIikucmVwbGFjZShFZyxmdW5jdGlvbihhLGQsYyl7cmV0dXJuIGM/ZC50b1VwcGVyQ2FzZSgpOmR9KX1mdW5jdGlvbiBzZChhLGIpe3ZhciBkPVxuXCJcIixjPWEuc3BsaXQoL1xccysvKSxlPWIuc3BsaXQoL1xccysvKSxmPTA7YTpmb3IoO2Y8Yy5sZW5ndGg7ZisrKXtmb3IodmFyIGc9Y1tmXSxrPTA7azxlLmxlbmd0aDtrKyspaWYoZz09PWVba10pY29udGludWUgYTtkKz0oMDxkLmxlbmd0aD9cIiBcIjpcIlwiKStnfXJldHVybiBkfWZ1bmN0aW9uIHJkKGEpe2E9eChhKTt2YXIgYj1hLmxlbmd0aDtpZigxPj1iKXJldHVybiBhO2Zvcig7Yi0tOyl7dmFyIGQ9YVtiXTsoOD09PWQubm9kZVR5cGV8fGQubm9kZVR5cGU9PT1QYSYmXCJcIj09PWQubm9kZVZhbHVlLnRyaW0oKSkmJkZnLmNhbGwoYSxiLDEpfXJldHVybiBhfWZ1bmN0aW9uIEJnKGEsYil7aWYoYiYmQShiKSlyZXR1cm4gYjtpZihBKGEpKXt2YXIgZD11ZC5leGVjKGEpO2lmKGQpcmV0dXJuIGRbM119fWZ1bmN0aW9uIEZmKCl7dmFyIGE9e307dGhpcy5oYXM9ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFzT3duUHJvcGVydHkoYil9O3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYixkKXtKYShiLFxuXCJjb250cm9sbGVyXCIpO0QoYik/UyhhLGIpOmFbYl09ZH07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGQoYSxiLGQsZyl7aWYoIWF8fCFEKGEuJHNjb3BlKSl0aHJvdyBGKFwiJGNvbnRyb2xsZXJcIikoXCJub3NjcFwiLGcsYik7YS4kc2NvcGVbYl09ZH1yZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7dmFyIGssaCxsO2Y9ITA9PT1mO2cmJkEoZykmJihsPWcpO2lmKEEoYykpe2c9Yy5tYXRjaCh1ZCk7aWYoIWcpdGhyb3cgdmQoXCJjdHJsZm10XCIsYyk7aD1nWzFdO2w9bHx8Z1szXTtjPWEuaGFzT3duUHJvcGVydHkoaCk/YVtoXTpHZShlLiRzY29wZSxoLCEwKTtpZighYyl0aHJvdyB2ZChcImN0cmxyZWdcIixoKTtzYihjLGgsITApfWlmKGYpcmV0dXJuIGY9KEgoYyk/Y1tjLmxlbmd0aC0xXTpjKS5wcm90b3R5cGUsaz1PYmplY3QuY3JlYXRlKGZ8fG51bGwpLGwmJmQoZSxsLGssaHx8Yy5uYW1lKSxTKGZ1bmN0aW9uKCl7dmFyIGE9Yi5pbnZva2UoYyxrLGUsaCk7XG5hIT09ayYmKEQoYSl8fEIoYSkpJiYoaz1hLGwmJmQoZSxsLGssaHx8Yy5uYW1lKSk7cmV0dXJuIGt9LHtpbnN0YW5jZTprLGlkZW50aWZpZXI6bH0pO2s9Yi5pbnN0YW50aWF0ZShjLGUsaCk7bCYmZChlLGwsayxofHxjLm5hbWUpO3JldHVybiBrfX1dfWZ1bmN0aW9uIEdmKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixmdW5jdGlvbihhKXtyZXR1cm4geChhLmRvY3VtZW50KX1dfWZ1bmN0aW9uIEhmKCl7dGhpcy4kZ2V0PVtcIiRkb2N1bWVudFwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZCgpe2U9Yy5oaWRkZW59dmFyIGM9YVswXSxlPWMmJmMuaGlkZGVuO2Eub24oXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsZCk7Yi4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7YS5vZmYoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsZCl9KTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZX19XX1mdW5jdGlvbiBJZigpe3RoaXMuJGdldD1bXCIkbG9nXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsXG5kKXthLmVycm9yLmFwcGx5KGEsYXJndW1lbnRzKX19XX1mdW5jdGlvbiB1YyhhKXtyZXR1cm4gRChhKT9oYShhKT9hLnRvSVNPU3RyaW5nKCk6ZWIoYSk6YX1mdW5jdGlvbiBPZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtpZighYSlyZXR1cm5cIlwiO3ZhciBiPVtdO09jKGEsZnVuY3Rpb24oYSxjKXtudWxsPT09YXx8eihhKXx8QihhKXx8KEgoYSk/cihhLGZ1bmN0aW9uKGEpe2IucHVzaChiYShjKStcIj1cIitiYSh1YyhhKSkpfSk6Yi5wdXNoKGJhKGMpK1wiPVwiK2JhKHVjKGEpKSkpfSk7cmV0dXJuIGIuam9pbihcIiZcIil9fX1mdW5jdGlvbiBQZigpe3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsZSxmKXtIKGEpP3IoYSxmdW5jdGlvbihhLGMpe2IoYSxlK1wiW1wiKyhEKGEpP2M6XCJcIikrXCJdXCIpfSk6RChhKSYmIWhhKGEpP09jKGEsZnVuY3Rpb24oYSxjKXtiKGEsZSsoZj9cIlwiOlwiW1wiKStjKyhmP1wiXCI6XCJdXCIpKX0pOlxuKEIoYSkmJihhPWEoKSksZC5wdXNoKGJhKGUpK1wiPVwiKyhudWxsPT1hP1wiXCI6YmEodWMoYSkpKSkpfWlmKCFhKXJldHVyblwiXCI7dmFyIGQ9W107YihhLFwiXCIsITApO3JldHVybiBkLmpvaW4oXCImXCIpfX19ZnVuY3Rpb24gdmMoYSxiKXtpZihBKGEpKXt2YXIgZD1hLnJlcGxhY2UoR2csXCJcIikudHJpbSgpO2lmKGQpe3ZhciBjPWIoXCJDb250ZW50LVR5cGVcIiksYz1jJiYwPT09Yy5pbmRleE9mKHdkKSxlOyhlPWMpfHwoZT0oZT1kLm1hdGNoKEhnKSkmJklnW2VbMF1dLnRlc3QoZCkpO2lmKGUpdHJ5e2E9UmMoZCl9Y2F0Y2goZil7aWYoIWMpcmV0dXJuIGE7dGhyb3cgS2IoXCJiYWRkYXRhXCIsYSxmKTt9fX1yZXR1cm4gYX1mdW5jdGlvbiB4ZChhKXt2YXIgYj1UKCksZDtBKGEpP3IoYS5zcGxpdChcIlxcblwiKSxmdW5jdGlvbihhKXtkPWEuaW5kZXhPZihcIjpcIik7dmFyIGU9SyhVKGEuc3Vic3RyKDAsZCkpKTthPVUoYS5zdWJzdHIoZCsxKSk7ZSYmKGJbZV09YltlXT9iW2VdK1wiLCBcIithOmEpfSk6RChhKSYmXG5yKGEsZnVuY3Rpb24oYSxkKXt2YXIgZj1LKGQpLGc9VShhKTtmJiYoYltmXT1iW2ZdP2JbZl0rXCIsIFwiK2c6Zyl9KTtyZXR1cm4gYn1mdW5jdGlvbiB5ZChhKXt2YXIgYjtyZXR1cm4gZnVuY3Rpb24oZCl7Ynx8KGI9eGQoYSkpO3JldHVybiBkPyhkPWJbSyhkKV0sdm9pZCAwPT09ZCYmKGQ9bnVsbCksZCk6Yn19ZnVuY3Rpb24gemQoYSxiLGQsYyl7aWYoQihjKSlyZXR1cm4gYyhhLGIsZCk7cihjLGZ1bmN0aW9uKGMpe2E9YyhhLGIsZCl9KTtyZXR1cm4gYX1mdW5jdGlvbiBOZigpe3ZhciBhPXRoaXMuZGVmYXVsdHM9e3RyYW5zZm9ybVJlc3BvbnNlOlt2Y10sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSkmJlwiW29iamVjdCBGaWxlXVwiIT09bGEuY2FsbChhKSYmXCJbb2JqZWN0IEJsb2JdXCIhPT1sYS5jYWxsKGEpJiZcIltvYmplY3QgRm9ybURhdGFdXCIhPT1sYS5jYWxsKGEpP2ViKGEpOmF9XSxoZWFkZXJzOntjb21tb246e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKlwifSxcbnBvc3Q6amEod2MpLHB1dDpqYSh3YykscGF0Y2g6amEod2MpfSx4c3JmQ29va2llTmFtZTpcIlhTUkYtVE9LRU5cIix4c3JmSGVhZGVyTmFtZTpcIlgtWFNSRi1UT0tFTlwiLHBhcmFtU2VyaWFsaXplcjpcIiRodHRwUGFyYW1TZXJpYWxpemVyXCIsanNvbnBDYWxsYmFja1BhcmFtOlwiY2FsbGJhY2tcIn0sYj0hMTt0aGlzLnVzZUFwcGx5QXN5bmM9ZnVuY3Rpb24oYSl7cmV0dXJuIHcoYSk/KGI9ISFhLHRoaXMpOmJ9O3ZhciBkPXRoaXMuaW50ZXJjZXB0b3JzPVtdLGM9dGhpcy54c3JmV2hpdGVsaXN0ZWRPcmlnaW5zPVtdO3RoaXMuJGdldD1bXCIkYnJvd3NlclwiLFwiJGh0dHBCYWNrZW5kXCIsXCIkJGNvb2tpZVJlYWRlclwiLFwiJGNhY2hlRmFjdG9yeVwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRpbmplY3RvclwiLFwiJHNjZVwiLGZ1bmN0aW9uKGUsZixnLGssaCxsLG0scCl7ZnVuY3Rpb24gbihiKXtmdW5jdGlvbiBjKGEsYil7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7KXt2YXIgZj1iW2QrK10sZz1iW2QrK107XG5hPWEudGhlbihmLGcpfWIubGVuZ3RoPTA7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIpe3ZhciBjLGU9e307cihhLGZ1bmN0aW9uKGEsZCl7QihhKT8oYz1hKGIpLG51bGwhPWMmJihlW2RdPWMpKTplW2RdPWF9KTtyZXR1cm4gZX1mdW5jdGlvbiBmKGEpe3ZhciBiPVMoe30sYSk7Yi5kYXRhPXpkKGEuZGF0YSxhLmhlYWRlcnMsYS5zdGF0dXMsZy50cmFuc2Zvcm1SZXNwb25zZSk7YT1hLnN0YXR1cztyZXR1cm4gMjAwPD1hJiYzMDA+YT9iOmwucmVqZWN0KGIpfWlmKCFEKGIpKXRocm93IEYoXCIkaHR0cFwiKShcImJhZHJlcVwiLGIpO2lmKCFBKHAudmFsdWVPZihiLnVybCkpKXRocm93IEYoXCIkaHR0cFwiKShcImJhZHJlcVwiLGIudXJsKTt2YXIgZz1TKHttZXRob2Q6XCJnZXRcIix0cmFuc2Zvcm1SZXF1ZXN0OmEudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTphLnRyYW5zZm9ybVJlc3BvbnNlLHBhcmFtU2VyaWFsaXplcjphLnBhcmFtU2VyaWFsaXplcixqc29ucENhbGxiYWNrUGFyYW06YS5qc29ucENhbGxiYWNrUGFyYW19LFxuYik7Zy5oZWFkZXJzPWZ1bmN0aW9uKGIpe3ZhciBjPWEuaGVhZGVycyxlPVMoe30sYi5oZWFkZXJzKSxmLGcsaCxjPVMoe30sYy5jb21tb24sY1tLKGIubWV0aG9kKV0pO2E6Zm9yKGYgaW4gYyl7Zz1LKGYpO2ZvcihoIGluIGUpaWYoSyhoKT09PWcpY29udGludWUgYTtlW2ZdPWNbZl19cmV0dXJuIGQoZSxqYShiKSl9KGIpO2cubWV0aG9kPXViKGcubWV0aG9kKTtnLnBhcmFtU2VyaWFsaXplcj1BKGcucGFyYW1TZXJpYWxpemVyKT9tLmdldChnLnBhcmFtU2VyaWFsaXplcik6Zy5wYXJhbVNlcmlhbGl6ZXI7ZS4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50KFwiJGh0dHBcIik7dmFyIGg9W10saz1bXTtiPWwucmVzb2x2ZShnKTtyKHYsZnVuY3Rpb24oYSl7KGEucmVxdWVzdHx8YS5yZXF1ZXN0RXJyb3IpJiZoLnVuc2hpZnQoYS5yZXF1ZXN0LGEucmVxdWVzdEVycm9yKTsoYS5yZXNwb25zZXx8YS5yZXNwb25zZUVycm9yKSYmay5wdXNoKGEucmVzcG9uc2UsYS5yZXNwb25zZUVycm9yKX0pO1xuYj1jKGIsaCk7Yj1iLnRoZW4oZnVuY3Rpb24oYil7dmFyIGM9Yi5oZWFkZXJzLGQ9emQoYi5kYXRhLHlkKGMpLHZvaWQgMCxiLnRyYW5zZm9ybVJlcXVlc3QpO3ooZCkmJnIoYyxmdW5jdGlvbihhLGIpe1wiY29udGVudC10eXBlXCI9PT1LKGIpJiZkZWxldGUgY1tiXX0pO3ooYi53aXRoQ3JlZGVudGlhbHMpJiYheihhLndpdGhDcmVkZW50aWFscykmJihiLndpdGhDcmVkZW50aWFscz1hLndpdGhDcmVkZW50aWFscyk7cmV0dXJuIHMoYixkKS50aGVuKGYsZil9KTtiPWMoYixrKTtyZXR1cm4gYj1iLmZpbmFsbHkoZnVuY3Rpb24oKXtlLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoRSxcIiRodHRwXCIpfSl9ZnVuY3Rpb24gcyhjLGQpe2Z1bmN0aW9uIGUoYSl7aWYoYSl7dmFyIGM9e307cihhLGZ1bmN0aW9uKGEsZCl7Y1tkXT1mdW5jdGlvbihjKXtmdW5jdGlvbiBkKCl7YShjKX1iP2guJGFwcGx5QXN5bmMoZCk6aC4kJHBoYXNlP2QoKTpoLiRhcHBseShkKX19KTtyZXR1cm4gY319ZnVuY3Rpb24gayhhLFxuYyxkLGUsZil7ZnVuY3Rpb24gZygpe20oYyxhLGQsZSxmKX1SJiYoMjAwPD1hJiYzMDA+YT9SLnB1dChPLFthLGMseGQoZCksZSxmXSk6Ui5yZW1vdmUoTykpO2I/aC4kYXBwbHlBc3luYyhnKTooZygpLGguJCRwaGFzZXx8aC4kYXBwbHkoKSl9ZnVuY3Rpb24gbShhLGIsZCxlLGYpe2I9LTE8PWI/YjowOygyMDA8PWImJjMwMD5iP0wucmVzb2x2ZTpMLnJlamVjdCkoe2RhdGE6YSxzdGF0dXM6YixoZWFkZXJzOnlkKGQpLGNvbmZpZzpjLHN0YXR1c1RleHQ6ZSx4aHJTdGF0dXM6Zn0pfWZ1bmN0aW9uIHMoYSl7bShhLmRhdGEsYS5zdGF0dXMsamEoYS5oZWFkZXJzKCkpLGEuc3RhdHVzVGV4dCxhLnhoclN0YXR1cyl9ZnVuY3Rpb24gdigpe3ZhciBhPW4ucGVuZGluZ1JlcXVlc3RzLmluZGV4T2YoYyk7LTEhPT1hJiZuLnBlbmRpbmdSZXF1ZXN0cy5zcGxpY2UoYSwxKX12YXIgTD1sLmRlZmVyKCksdT1MLnByb21pc2UsUixxLG1hPWMuaGVhZGVycyx4PVwianNvbnBcIj09PUsoYy5tZXRob2QpLFxuTz1jLnVybDt4P089cC5nZXRUcnVzdGVkUmVzb3VyY2VVcmwoTyk6QShPKXx8KE89cC52YWx1ZU9mKE8pKTtPPUcoTyxjLnBhcmFtU2VyaWFsaXplcihjLnBhcmFtcykpO3gmJihPPXQoTyxjLmpzb25wQ2FsbGJhY2tQYXJhbSkpO24ucGVuZGluZ1JlcXVlc3RzLnB1c2goYyk7dS50aGVuKHYsdik7IWMuY2FjaGUmJiFhLmNhY2hlfHwhMT09PWMuY2FjaGV8fFwiR0VUXCIhPT1jLm1ldGhvZCYmXCJKU09OUFwiIT09Yy5tZXRob2R8fChSPUQoYy5jYWNoZSk/Yy5jYWNoZTpEKGEuY2FjaGUpP2EuY2FjaGU6Tik7UiYmKHE9Ui5nZXQoTyksdyhxKT9xJiZCKHEudGhlbik/cS50aGVuKHMscyk6SChxKT9tKHFbMV0scVswXSxqYShxWzJdKSxxWzNdLHFbNF0pOm0ocSwyMDAse30sXCJPS1wiLFwiY29tcGxldGVcIik6Ui5wdXQoTyx1KSk7eihxKSYmKChxPWpjKGMudXJsKT9nKClbYy54c3JmQ29va2llTmFtZXx8YS54c3JmQ29va2llTmFtZV06dm9pZCAwKSYmKG1hW2MueHNyZkhlYWRlck5hbWV8fGEueHNyZkhlYWRlck5hbWVdPVxucSksZihjLm1ldGhvZCxPLGQsayxtYSxjLnRpbWVvdXQsYy53aXRoQ3JlZGVudGlhbHMsYy5yZXNwb25zZVR5cGUsZShjLmV2ZW50SGFuZGxlcnMpLGUoYy51cGxvYWRFdmVudEhhbmRsZXJzKSkpO3JldHVybiB1fWZ1bmN0aW9uIEcoYSxiKXswPGIubGVuZ3RoJiYoYSs9KC0xPT09YS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIikrYik7cmV0dXJuIGF9ZnVuY3Rpb24gdChhLGIpe3ZhciBjPWEuc3BsaXQoXCI/XCIpO2lmKDI8Yy5sZW5ndGgpdGhyb3cgS2IoXCJiYWRqc29ucFwiLGEpO2M9Z2MoY1sxXSk7cihjLGZ1bmN0aW9uKGMsZCl7aWYoXCJKU09OX0NBTExCQUNLXCI9PT1jKXRocm93IEtiKFwiYmFkanNvbnBcIixhKTtpZihkPT09Yil0aHJvdyBLYihcImJhZGpzb25wXCIsYixhKTt9KTtyZXR1cm4gYSs9KC0xPT09YS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIikrYitcIj1KU09OX0NBTExCQUNLXCJ9dmFyIE49ayhcIiRodHRwXCIpO2EucGFyYW1TZXJpYWxpemVyPUEoYS5wYXJhbVNlcmlhbGl6ZXIpP20uZ2V0KGEucGFyYW1TZXJpYWxpemVyKTpcbmEucGFyYW1TZXJpYWxpemVyO3ZhciB2PVtdO3IoZCxmdW5jdGlvbihhKXt2LnVuc2hpZnQoQShhKT9tLmdldChhKTptLmludm9rZShhKSl9KTt2YXIgamM9SmcoYyk7bi5wZW5kaW5nUmVxdWVzdHM9W107KGZ1bmN0aW9uKGEpe3IoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe25bYV09ZnVuY3Rpb24oYixjKXtyZXR1cm4gbihTKHt9LGN8fHt9LHttZXRob2Q6YSx1cmw6Yn0pKX19KX0pKFwiZ2V0XCIsXCJkZWxldGVcIixcImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtyKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtuW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gbihTKHt9LGR8fHt9LHttZXRob2Q6YSx1cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIik7bi5kZWZhdWx0cz1hO3JldHVybiBufV19ZnVuY3Rpb24gUmYoKXt0aGlzLiRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEMuWE1MSHR0cFJlcXVlc3R9fX1mdW5jdGlvbiBRZigpe3RoaXMuJGdldD1cbltcIiRicm93c2VyXCIsXCIkanNvbnBDYWxsYmFja3NcIixcIiRkb2N1bWVudFwiLFwiJHhockZhY3RvcnlcIixmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gS2coYSxjLGEuZGVmZXIsYixkWzBdKX1dfWZ1bmN0aW9uIEtnKGEsYixkLGMsZSl7ZnVuY3Rpb24gZihhLGIsZCl7YT1hLnJlcGxhY2UoXCJKU09OX0NBTExCQUNLXCIsYik7dmFyIGY9ZS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLG09bnVsbDtmLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjtmLnNyYz1hO2YuYXN5bmM9ITA7bT1mdW5jdGlvbihhKXtmLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbSk7Zi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixtKTtlLmJvZHkucmVtb3ZlQ2hpbGQoZik7Zj1udWxsO3ZhciBnPS0xLHM9XCJ1bmtub3duXCI7YSYmKFwibG9hZFwiIT09YS50eXBlfHxjLndhc0NhbGxlZChiKXx8KGE9e3R5cGU6XCJlcnJvclwifSkscz1hLnR5cGUsZz1cImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCk7ZCYmZChnLHMpfTtmLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsXG5tKTtmLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLG0pO2UuYm9keS5hcHBlbmRDaGlsZChmKTtyZXR1cm4gbX1yZXR1cm4gZnVuY3Rpb24oZSxrLGgsbCxtLHAsbixzLEcsdCl7ZnVuY3Rpb24gTihhKXtKPVwidGltZW91dFwiPT09YTtxYSYmcWEoKTt5JiZ5LmFib3J0KCl9ZnVuY3Rpb24gdihhLGIsYyxlLGYsZyl7dyhQKSYmZC5jYW5jZWwoUCk7cWE9eT1udWxsO2EoYixjLGUsZixnKX1rPWt8fGEudXJsKCk7aWYoXCJqc29ucFwiPT09SyhlKSl2YXIgcT1jLmNyZWF0ZUNhbGxiYWNrKGspLHFhPWYoayxxLGZ1bmN0aW9uKGEsYil7dmFyIGQ9MjAwPT09YSYmYy5nZXRSZXNwb25zZShxKTt2KGwsYSxkLFwiXCIsYixcImNvbXBsZXRlXCIpO2MucmVtb3ZlQ2FsbGJhY2socSl9KTtlbHNle3ZhciB5PWIoZSxrKSxKPSExO3kub3BlbihlLGssITApO3IobSxmdW5jdGlvbihhLGIpe3coYSkmJnkuc2V0UmVxdWVzdEhlYWRlcihiLGEpfSk7eS5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgYT15LnN0YXR1c1RleHR8fFxuXCJcIixiPVwicmVzcG9uc2VcImluIHk/eS5yZXNwb25zZTp5LnJlc3BvbnNlVGV4dCxjPTEyMjM9PT15LnN0YXR1cz8yMDQ6eS5zdGF0dXM7MD09PWMmJihjPWI/MjAwOlwiZmlsZVwiPT09Z2EoaykucHJvdG9jb2w/NDA0OjApO3YobCxjLGIseS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxhLFwiY29tcGxldGVcIil9O3kub25lcnJvcj1mdW5jdGlvbigpe3YobCwtMSxudWxsLG51bGwsXCJcIixcImVycm9yXCIpfTt5Lm9udGltZW91dD1mdW5jdGlvbigpe3YobCwtMSxudWxsLG51bGwsXCJcIixcInRpbWVvdXRcIil9O3kub25hYm9ydD1mdW5jdGlvbigpe3YobCwtMSxudWxsLG51bGwsXCJcIixKP1widGltZW91dFwiOlwiYWJvcnRcIil9O3IoRyxmdW5jdGlvbihhLGIpe3kuYWRkRXZlbnRMaXN0ZW5lcihiLGEpfSk7cih0LGZ1bmN0aW9uKGEsYil7eS51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihiLGEpfSk7biYmKHkud2l0aENyZWRlbnRpYWxzPSEwKTtpZihzKXRyeXt5LnJlc3BvbnNlVHlwZT1zfWNhdGNoKEkpe2lmKFwianNvblwiIT09XG5zKXRocm93IEk7fXkuc2VuZCh6KGgpP251bGw6aCl9aWYoMDxwKXZhciBQPWQoZnVuY3Rpb24oKXtOKFwidGltZW91dFwiKX0scCk7ZWxzZSBwJiZCKHAudGhlbikmJnAudGhlbihmdW5jdGlvbigpe04odyhwLiQkdGltZW91dElkKT9cInRpbWVvdXRcIjpcImFib3J0XCIpfSl9fWZ1bmN0aW9uIEtmKCl7dmFyIGE9XCJ7e1wiLGI9XCJ9fVwiO3RoaXMuc3RhcnRTeW1ib2w9ZnVuY3Rpb24oYil7cmV0dXJuIGI/KGE9Yix0aGlzKTphfTt0aGlzLmVuZFN5bWJvbD1mdW5jdGlvbihhKXtyZXR1cm4gYT8oYj1hLHRoaXMpOmJ9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkc2NlXCIsZnVuY3Rpb24oZCxjLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuXCJcXFxcXFxcXFxcXFxcIithfWZ1bmN0aW9uIGcoYyl7cmV0dXJuIGMucmVwbGFjZShwLGEpLnJlcGxhY2UobixiKX1mdW5jdGlvbiBrKGEsYixjLGQpe3ZhciBlPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe2UoKTtyZXR1cm4gZChhKX0sYixjKTtyZXR1cm4gZX1cbmZ1bmN0aW9uIGgoZixoLG4scCl7ZnVuY3Rpb24gdihhKXt0cnl7cmV0dXJuIGE9biYmIXI/ZS5nZXRUcnVzdGVkKG4sYSk6ZS52YWx1ZU9mKGEpLHAmJiF3KGEpP2E6aWMoYSl9Y2F0Y2goYil7YyhNYS5pbnRlcnIoZixiKSl9fXZhciByPW49PT1lLlVSTHx8bj09PWUuTUVESUFfVVJMO2lmKCFmLmxlbmd0aHx8LTE9PT1mLmluZGV4T2YoYSkpe2lmKGgpcmV0dXJuO2g9ZyhmKTtyJiYoaD1lLmdldFRydXN0ZWQobixoKSk7aD1pYShoKTtoLmV4cD1mO2guZXhwcmVzc2lvbnM9W107aC4kJHdhdGNoRGVsZWdhdGU9aztyZXR1cm4gaH1wPSEhcDtmb3IodmFyIHEseSxKPTAsST1bXSxQLFE9Zi5sZW5ndGgsTT1bXSxMPVtdLHU7SjxROylpZigtMSE9PShxPWYuaW5kZXhPZihhLEopKSYmLTEhPT0oeT1mLmluZGV4T2YoYixxK2wpKSlKIT09cSYmTS5wdXNoKGcoZi5zdWJzdHJpbmcoSixxKSkpLEo9Zi5zdWJzdHJpbmcocStsLHkpLEkucHVzaChKKSxKPXkrbSxMLnB1c2goTS5sZW5ndGgpLFxuTS5wdXNoKFwiXCIpO2Vsc2V7SiE9PVEmJk0ucHVzaChnKGYuc3Vic3RyaW5nKEopKSk7YnJlYWt9dT0xPT09TS5sZW5ndGgmJjE9PT1MLmxlbmd0aDt2YXIgUj1yJiZ1P3ZvaWQgMDp2O1A9SS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSxSKX0pO2lmKCFofHxJLmxlbmd0aCl7dmFyIHg9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1JLmxlbmd0aDtiPGM7YisrKXtpZihwJiZ6KGFbYl0pKXJldHVybjtNW0xbYl1dPWFbYl19aWYocilyZXR1cm4gZS5nZXRUcnVzdGVkKG4sdT9NWzBdOk0uam9pbihcIlwiKSk7biYmMTxNLmxlbmd0aCYmTWEudGhyb3dOb2NvbmNhdChmKTtyZXR1cm4gTS5qb2luKFwiXCIpfTtyZXR1cm4gUyhmdW5jdGlvbihhKXt2YXIgYj0wLGQ9SS5sZW5ndGgsZT1BcnJheShkKTt0cnl7Zm9yKDtiPGQ7YisrKWVbYl09UFtiXShhKTtyZXR1cm4geChlKX1jYXRjaChnKXtjKE1hLmludGVycihmLGcpKX19LHtleHA6ZixleHByZXNzaW9uczpJLCQkd2F0Y2hEZWxlZ2F0ZTpmdW5jdGlvbihhLFxuYil7dmFyIGM7cmV0dXJuIGEuJHdhdGNoR3JvdXAoUCxmdW5jdGlvbihkLGUpe3ZhciBmPXgoZCk7Yi5jYWxsKHRoaXMsZixkIT09ZT9jOmYsYSk7Yz1mfSl9fSl9fXZhciBsPWEubGVuZ3RoLG09Yi5sZW5ndGgscD1uZXcgUmVnRXhwKGEucmVwbGFjZSgvLi9nLGYpLFwiZ1wiKSxuPW5ldyBSZWdFeHAoYi5yZXBsYWNlKC8uL2csZiksXCJnXCIpO2guc3RhcnRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYX07aC5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYn07cmV0dXJuIGh9XX1mdW5jdGlvbiBMZigpe3RoaXMuJGdldD1bXCIkJGludGVydmFsRmFjdG9yeVwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGEsYil7dmFyIGQ9e30sYz1mdW5jdGlvbihhKXtiLmNsZWFySW50ZXJ2YWwoYSk7ZGVsZXRlIGRbYV19LGU9YShmdW5jdGlvbihhLGMsZSl7YT1iLnNldEludGVydmFsKGEsYyk7ZFthXT1lO3JldHVybiBhfSxjKTtlLmNhbmNlbD1mdW5jdGlvbihhKXtpZighYSlyZXR1cm4hMTtpZighYS5oYXNPd25Qcm9wZXJ0eShcIiQkaW50ZXJ2YWxJZFwiKSl0aHJvdyBMZyhcImJhZHByb21cIik7XG5pZighZC5oYXNPd25Qcm9wZXJ0eShhLiQkaW50ZXJ2YWxJZCkpcmV0dXJuITE7YT1hLiQkaW50ZXJ2YWxJZDt2YXIgYj1kW2FdLGU9Yi5wcm9taXNlO2UuJCRzdGF0ZSYmKGUuJCRzdGF0ZS5wdXI9ITApO2IucmVqZWN0KFwiY2FuY2VsZWRcIik7YyhhKTtyZXR1cm4hMH07cmV0dXJuIGV9XX1mdW5jdGlvbiBNZigpe3RoaXMuJGdldD1bXCIkYnJvd3NlclwiLFwiJHFcIixcIiQkcVwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEsYixkLGMpe3JldHVybiBmdW5jdGlvbihlLGYpe3JldHVybiBmdW5jdGlvbihnLGssaCxsKXtmdW5jdGlvbiBtKCl7cD9nLmFwcGx5KG51bGwsbik6ZyhzKX12YXIgcD00PGFyZ3VtZW50cy5sZW5ndGgsbj1wP0hhLmNhbGwoYXJndW1lbnRzLDQpOltdLHM9MCxHPXcobCkmJiFsLHQ9KEc/ZDpiKS5kZWZlcigpLHI9dC5wcm9taXNlO2g9dyhoKT9oOjA7ci4kJGludGVydmFsSWQ9ZShmdW5jdGlvbigpe0c/YS5kZWZlcihtKTpjLiRldmFsQXN5bmMobSk7dC5ub3RpZnkocysrKTtcbjA8aCYmcz49aCYmKHQucmVzb2x2ZShzKSxmKHIuJCRpbnRlcnZhbElkKSk7R3x8Yy4kYXBwbHkoKX0sayx0LEcpO3JldHVybiByfX19XX1mdW5jdGlvbiBBZChhLGIpe3ZhciBkPWdhKGEpO2IuJCRwcm90b2NvbD1kLnByb3RvY29sO2IuJCRob3N0PWQuaG9zdG5hbWU7Yi4kJHBvcnQ9ZmEoZC5wb3J0KXx8TWdbZC5wcm90b2NvbF18fG51bGx9ZnVuY3Rpb24gQmQoYSxiLGQpe2lmKE5nLnRlc3QoYSkpdGhyb3cgamIoXCJiYWRwYXRoXCIsYSk7dmFyIGM9XCIvXCIhPT1hLmNoYXJBdCgwKTtjJiYoYT1cIi9cIithKTthPWdhKGEpO2Zvcih2YXIgYz0oYyYmXCIvXCI9PT1hLnBhdGhuYW1lLmNoYXJBdCgwKT9hLnBhdGhuYW1lLnN1YnN0cmluZygxKTphLnBhdGhuYW1lKS5zcGxpdChcIi9cIiksZT1jLmxlbmd0aDtlLS07KWNbZV09ZGVjb2RlVVJJQ29tcG9uZW50KGNbZV0pLGQmJihjW2VdPWNbZV0ucmVwbGFjZSgvXFwvL2csXCIlMkZcIikpO2Q9Yy5qb2luKFwiL1wiKTtiLiQkcGF0aD1kO2IuJCRzZWFyY2g9Z2MoYS5zZWFyY2gpO1xuYi4kJGhhc2g9ZGVjb2RlVVJJQ29tcG9uZW50KGEuaGFzaCk7Yi4kJHBhdGgmJlwiL1wiIT09Yi4kJHBhdGguY2hhckF0KDApJiYoYi4kJHBhdGg9XCIvXCIrYi4kJHBhdGgpfWZ1bmN0aW9uIHhjKGEsYil7cmV0dXJuIGEuc2xpY2UoMCxiLmxlbmd0aCk9PT1ifWZ1bmN0aW9uIHhhKGEsYil7aWYoeGMoYixhKSlyZXR1cm4gYi5zdWJzdHIoYS5sZW5ndGgpfWZ1bmN0aW9uIERhKGEpe3ZhciBiPWEuaW5kZXhPZihcIiNcIik7cmV0dXJuLTE9PT1iP2E6YS5zdWJzdHIoMCxiKX1mdW5jdGlvbiB5YyhhLGIsZCl7dGhpcy4kJGh0bWw1PSEwO2Q9ZHx8XCJcIjtBZChhLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihhKXt2YXIgZD14YShiLGEpO2lmKCFBKGQpKXRocm93IGpiKFwiaXB0aHByZnhcIixhLGIpO0JkKGQsdGhpcywhMCk7dGhpcy4kJHBhdGh8fCh0aGlzLiQkcGF0aD1cIi9cIik7dGhpcy4kJGNvbXBvc2UoKX07dGhpcy4kJG5vcm1hbGl6ZVVybD1mdW5jdGlvbihhKXtyZXR1cm4gYithLnN1YnN0cigxKX07XG50aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGMsZSl7aWYoZSYmXCIjXCI9PT1lWzBdKXJldHVybiB0aGlzLmhhc2goZS5zbGljZSgxKSksITA7dmFyIGYsZzt3KGY9eGEoYSxjKSk/KGc9ZixnPWQmJncoZj14YShkLGYpKT9iKyh4YShcIi9cIixmKXx8Zik6YStnKTp3KGY9eGEoYixjKSk/Zz1iK2Y6Yj09PWMrXCIvXCImJihnPWIpO2cmJnRoaXMuJCRwYXJzZShnKTtyZXR1cm4hIWd9fWZ1bmN0aW9uIHpjKGEsYixkKXtBZChhLHRoaXMpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihjKXt2YXIgZT14YShhLGMpfHx4YShiLGMpLGY7eihlKXx8XCIjXCIhPT1lLmNoYXJBdCgwKT90aGlzLiQkaHRtbDU/Zj1lOihmPVwiXCIseihlKSYmKGE9Yyx0aGlzLnJlcGxhY2UoKSkpOihmPXhhKGQsZSkseihmKSYmKGY9ZSkpO0JkKGYsdGhpcywhMSk7Yz10aGlzLiQkcGF0aDt2YXIgZT1hLGc9L15cXC9bQS1aXTooXFwvLiopLzt4YyhmLGUpJiYoZj1mLnJlcGxhY2UoZSxcIlwiKSk7Zy5leGVjKGYpfHwoYz0oZj1nLmV4ZWMoYykpP1xuZlsxXTpjKTt0aGlzLiQkcGF0aD1jO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRub3JtYWxpemVVcmw9ZnVuY3Rpb24oYil7cmV0dXJuIGErKGI/ZCtiOlwiXCIpfTt0aGlzLiQkcGFyc2VMaW5rVXJsPWZ1bmN0aW9uKGIsZCl7cmV0dXJuIERhKGEpPT09RGEoYik/KHRoaXMuJCRwYXJzZShiKSwhMCk6ITF9fWZ1bmN0aW9uIENkKGEsYixkKXt0aGlzLiQkaHRtbDU9ITA7emMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuJCRwYXJzZUxpbmtVcmw9ZnVuY3Rpb24oYyxlKXtpZihlJiZcIiNcIj09PWVbMF0pcmV0dXJuIHRoaXMuaGFzaChlLnNsaWNlKDEpKSwhMDt2YXIgZixnO2E9PT1EYShjKT9mPWM6KGc9eGEoYixjKSk/Zj1hK2QrZzpiPT09YytcIi9cIiYmKGY9Yik7ZiYmdGhpcy4kJHBhcnNlKGYpO3JldHVybiEhZn07dGhpcy4kJG5vcm1hbGl6ZVVybD1mdW5jdGlvbihiKXtyZXR1cm4gYStkK2J9fWZ1bmN0aW9uIExiKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2FdfX1mdW5jdGlvbiBEZChhLFxuYil7cmV0dXJuIGZ1bmN0aW9uKGQpe2lmKHooZCkpcmV0dXJuIHRoaXNbYV07dGhpc1thXT1iKGQpO3RoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9fWZ1bmN0aW9uIFRmKCl7dmFyIGE9XCIhXCIsYj17ZW5hYmxlZDohMSxyZXF1aXJlQmFzZTohMCxyZXdyaXRlTGlua3M6ITB9O3RoaXMuaGFzaFByZWZpeD1mdW5jdGlvbihiKXtyZXR1cm4gdyhiKT8oYT1iLHRoaXMpOmF9O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKGEpe2lmKEdhKGEpKXJldHVybiBiLmVuYWJsZWQ9YSx0aGlzO2lmKEQoYSkpe0dhKGEuZW5hYmxlZCkmJihiLmVuYWJsZWQ9YS5lbmFibGVkKTtHYShhLnJlcXVpcmVCYXNlKSYmKGIucmVxdWlyZUJhc2U9YS5yZXF1aXJlQmFzZSk7aWYoR2EoYS5yZXdyaXRlTGlua3MpfHxBKGEucmV3cml0ZUxpbmtzKSliLnJld3JpdGVMaW5rcz1hLnJld3JpdGVMaW5rcztyZXR1cm4gdGhpc31yZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFxuXCIkcm9vdEVsZW1lbnRcIixcIiR3aW5kb3dcIixmdW5jdGlvbihkLGMsZSxmLGcpe2Z1bmN0aW9uIGsoYSxiKXtyZXR1cm4gYT09PWJ8fGdhKGEpLmhyZWY9PT1nYShiKS5ocmVmfWZ1bmN0aW9uIGgoYSxiLGQpe3ZhciBlPW0udXJsKCksZj1tLiQkc3RhdGU7dHJ5e2MudXJsKGEsYixkKSxtLiQkc3RhdGU9Yy5zdGF0ZSgpfWNhdGNoKGcpe3Rocm93IG0udXJsKGUpLG0uJCRzdGF0ZT1mLGc7fX1mdW5jdGlvbiBsKGEsYil7ZC4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLG0uYWJzVXJsKCksYSxtLiQkc3RhdGUsYil9dmFyIG0scDtwPWMuYmFzZUhyZWYoKTt2YXIgbj1jLnVybCgpLHM7aWYoYi5lbmFibGVkKXtpZighcCYmYi5yZXF1aXJlQmFzZSl0aHJvdyBqYihcIm5vYmFzZVwiKTtzPW4uc3Vic3RyaW5nKDAsbi5pbmRleE9mKFwiL1wiLG4uaW5kZXhPZihcIi8vXCIpKzIpKSsocHx8XCIvXCIpO3A9ZS5oaXN0b3J5P3ljOkNkfWVsc2Ugcz1EYShuKSxwPXpjO3ZhciByPXMuc3Vic3RyKDAsXG5EYShzKS5sYXN0SW5kZXhPZihcIi9cIikrMSk7bT1uZXcgcChzLHIsXCIjXCIrYSk7bS4kJHBhcnNlTGlua1VybChuLG4pO20uJCRzdGF0ZT1jLnN0YXRlKCk7dmFyIHQ9L15cXHMqKGphdmFzY3JpcHR8bWFpbHRvKTovaTtmLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXt2YXIgZT1iLnJld3JpdGVMaW5rcztpZihlJiYhYS5jdHJsS2V5JiYhYS5tZXRhS2V5JiYhYS5zaGlmdEtleSYmMiE9PWEud2hpY2gmJjIhPT1hLmJ1dHRvbil7Zm9yKHZhciBnPXgoYS50YXJnZXQpO1wiYVwiIT09dWEoZ1swXSk7KWlmKGdbMF09PT1mWzBdfHwhKGc9Zy5wYXJlbnQoKSlbMF0pcmV0dXJuO2lmKCFBKGUpfHwheihnLmF0dHIoZSkpKXt2YXIgZT1nLnByb3AoXCJocmVmXCIpLGg9Zy5hdHRyKFwiaHJlZlwiKXx8Zy5hdHRyKFwieGxpbms6aHJlZlwiKTtEKGUpJiZcIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT1lLnRvU3RyaW5nKCkmJihlPWdhKGUuYW5pbVZhbCkuaHJlZik7dC50ZXN0KGUpfHwhZXx8Zy5hdHRyKFwidGFyZ2V0XCIpfHxcbmEuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFtLiQkcGFyc2VMaW5rVXJsKGUsaCl8fChhLnByZXZlbnREZWZhdWx0KCksbS5hYnNVcmwoKSE9PWMudXJsKCkmJmQuJGFwcGx5KCkpfX19KTttLmFic1VybCgpIT09biYmYy51cmwobS5hYnNVcmwoKSwhMCk7dmFyIE49ITA7Yy5vblVybENoYW5nZShmdW5jdGlvbihhLGIpe3hjKGEscik/KGQuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBjPW0uYWJzVXJsKCksZT1tLiQkc3RhdGUsZjttLiQkcGFyc2UoYSk7bS4kJHN0YXRlPWI7Zj1kLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdGFydFwiLGEsYyxiLGUpLmRlZmF1bHRQcmV2ZW50ZWQ7bS5hYnNVcmwoKT09PWEmJihmPyhtLiQkcGFyc2UoYyksbS4kJHN0YXRlPWUsaChjLCExLGUpKTooTj0hMSxsKGMsZSkpKX0pLGQuJCRwaGFzZXx8ZC4kZGlnZXN0KCkpOmcubG9jYXRpb24uaHJlZj1hfSk7ZC4kd2F0Y2goZnVuY3Rpb24oKXtpZihOfHxtLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24pe20uJCR1cmxVcGRhdGVkQnlMb2NhdGlvbj1cbiExO3ZhciBhPWMudXJsKCksYj1tLmFic1VybCgpLGY9Yy5zdGF0ZSgpLGc9bS4kJHJlcGxhY2Usbj0hayhhLGIpfHxtLiQkaHRtbDUmJmUuaGlzdG9yeSYmZiE9PW0uJCRzdGF0ZTtpZihOfHxuKU49ITEsZC4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7dmFyIGI9bS5hYnNVcmwoKSxjPWQuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsYixhLG0uJCRzdGF0ZSxmKS5kZWZhdWx0UHJldmVudGVkO20uYWJzVXJsKCk9PT1iJiYoYz8obS4kJHBhcnNlKGEpLG0uJCRzdGF0ZT1mKToobiYmaChiLGcsZj09PW0uJCRzdGF0ZT9udWxsOm0uJCRzdGF0ZSksbChhLGYpKSl9KX1tLiQkcmVwbGFjZT0hMX0pO3JldHVybiBtfV19ZnVuY3Rpb24gVWYoKXt2YXIgYT0hMCxiPXRoaXM7dGhpcy5kZWJ1Z0VuYWJsZWQ9ZnVuY3Rpb24oYil7cmV0dXJuIHcoYik/KGE9Yix0aGlzKTphfTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGMoYSl7Y2MoYSkmJihhLnN0YWNrJiZcbmY/YT1hLm1lc3NhZ2UmJi0xPT09YS5zdGFjay5pbmRleE9mKGEubWVzc2FnZSk/XCJFcnJvcjogXCIrYS5tZXNzYWdlK1wiXFxuXCIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYoYT1hLm1lc3NhZ2UrXCJcXG5cIithLnNvdXJjZVVSTCtcIjpcIithLmxpbmUpKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3ZhciBiPWQuY29uc29sZXx8e30sZT1iW2FdfHxiLmxvZ3x8RTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1bXTtyKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthLnB1c2goYyhiKSl9KTtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoZSxiLGEpfX12YXIgZj1DYXx8L1xcYkVkZ2VcXC8vLnRlc3QoZC5uYXZpZ2F0b3ImJmQubmF2aWdhdG9yLnVzZXJBZ2VudCk7cmV0dXJue2xvZzplKFwibG9nXCIpLGluZm86ZShcImluZm9cIiksd2FybjplKFwid2FyblwiKSxlcnJvcjplKFwiZXJyb3JcIiksZGVidWc6ZnVuY3Rpb24oKXt2YXIgYz1lKFwiZGVidWdcIik7cmV0dXJuIGZ1bmN0aW9uKCl7YSYmYy5hcHBseShiLFxuYXJndW1lbnRzKX19KCl9fV19ZnVuY3Rpb24gT2coYSl7cmV0dXJuIGErXCJcIn1mdW5jdGlvbiBQZyhhLGIpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgYT9hOmJ9ZnVuY3Rpb24gRWQoYSxiKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGE/YjpcInVuZGVmaW5lZFwiPT09dHlwZW9mIGI/YTphK2J9ZnVuY3Rpb24gUWcoYSxiKXtzd2l0Y2goYS50eXBlKXtjYXNlIHEuTWVtYmVyRXhwcmVzc2lvbjppZihhLmNvbXB1dGVkKXJldHVybiExO2JyZWFrO2Nhc2UgcS5VbmFyeUV4cHJlc3Npb246cmV0dXJuIDE7Y2FzZSBxLkJpbmFyeUV4cHJlc3Npb246cmV0dXJuXCIrXCIhPT1hLm9wZXJhdG9yPzE6ITE7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOnJldHVybiExfXJldHVybiB2b2lkIDA9PT1iP0ZkOmJ9ZnVuY3Rpb24gWihhLGIsZCl7dmFyIGMsZSxmPWEuaXNQdXJlPVFnKGEsZCk7c3dpdGNoKGEudHlwZSl7Y2FzZSBxLlByb2dyYW06Yz0hMDtyKGEuYm9keSxmdW5jdGlvbihhKXtaKGEuZXhwcmVzc2lvbixcbmIsZik7Yz1jJiZhLmV4cHJlc3Npb24uY29uc3RhbnR9KTthLmNvbnN0YW50PWM7YnJlYWs7Y2FzZSBxLkxpdGVyYWw6YS5jb25zdGFudD0hMDthLnRvV2F0Y2g9W107YnJlYWs7Y2FzZSBxLlVuYXJ5RXhwcmVzc2lvbjpaKGEuYXJndW1lbnQsYixmKTthLmNvbnN0YW50PWEuYXJndW1lbnQuY29uc3RhbnQ7YS50b1dhdGNoPWEuYXJndW1lbnQudG9XYXRjaDticmVhaztjYXNlIHEuQmluYXJ5RXhwcmVzc2lvbjpaKGEubGVmdCxiLGYpO1ooYS5yaWdodCxiLGYpO2EuY29uc3RhbnQ9YS5sZWZ0LmNvbnN0YW50JiZhLnJpZ2h0LmNvbnN0YW50O2EudG9XYXRjaD1hLmxlZnQudG9XYXRjaC5jb25jYXQoYS5yaWdodC50b1dhdGNoKTticmVhaztjYXNlIHEuTG9naWNhbEV4cHJlc3Npb246WihhLmxlZnQsYixmKTtaKGEucmlnaHQsYixmKTthLmNvbnN0YW50PWEubGVmdC5jb25zdGFudCYmYS5yaWdodC5jb25zdGFudDthLnRvV2F0Y2g9YS5jb25zdGFudD9bXTpbYV07YnJlYWs7Y2FzZSBxLkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpaKGEudGVzdCxcbmIsZik7WihhLmFsdGVybmF0ZSxiLGYpO1ooYS5jb25zZXF1ZW50LGIsZik7YS5jb25zdGFudD1hLnRlc3QuY29uc3RhbnQmJmEuYWx0ZXJuYXRlLmNvbnN0YW50JiZhLmNvbnNlcXVlbnQuY29uc3RhbnQ7YS50b1dhdGNoPWEuY29uc3RhbnQ/W106W2FdO2JyZWFrO2Nhc2UgcS5JZGVudGlmaWVyOmEuY29uc3RhbnQ9ITE7YS50b1dhdGNoPVthXTticmVhaztjYXNlIHEuTWVtYmVyRXhwcmVzc2lvbjpaKGEub2JqZWN0LGIsZik7YS5jb21wdXRlZCYmWihhLnByb3BlcnR5LGIsZik7YS5jb25zdGFudD1hLm9iamVjdC5jb25zdGFudCYmKCFhLmNvbXB1dGVkfHxhLnByb3BlcnR5LmNvbnN0YW50KTthLnRvV2F0Y2g9YS5jb25zdGFudD9bXTpbYV07YnJlYWs7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOmM9ZD1hLmZpbHRlcj8hYihhLmNhbGxlZS5uYW1lKS4kc3RhdGVmdWw6ITE7ZT1bXTtyKGEuYXJndW1lbnRzLGZ1bmN0aW9uKGEpe1ooYSxiLGYpO2M9YyYmYS5jb25zdGFudDtlLnB1c2guYXBwbHkoZSxcbmEudG9XYXRjaCl9KTthLmNvbnN0YW50PWM7YS50b1dhdGNoPWQ/ZTpbYV07YnJlYWs7Y2FzZSBxLkFzc2lnbm1lbnRFeHByZXNzaW9uOlooYS5sZWZ0LGIsZik7WihhLnJpZ2h0LGIsZik7YS5jb25zdGFudD1hLmxlZnQuY29uc3RhbnQmJmEucmlnaHQuY29uc3RhbnQ7YS50b1dhdGNoPVthXTticmVhaztjYXNlIHEuQXJyYXlFeHByZXNzaW9uOmM9ITA7ZT1bXTtyKGEuZWxlbWVudHMsZnVuY3Rpb24oYSl7WihhLGIsZik7Yz1jJiZhLmNvbnN0YW50O2UucHVzaC5hcHBseShlLGEudG9XYXRjaCl9KTthLmNvbnN0YW50PWM7YS50b1dhdGNoPWU7YnJlYWs7Y2FzZSBxLk9iamVjdEV4cHJlc3Npb246Yz0hMDtlPVtdO3IoYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe1ooYS52YWx1ZSxiLGYpO2M9YyYmYS52YWx1ZS5jb25zdGFudDtlLnB1c2guYXBwbHkoZSxhLnZhbHVlLnRvV2F0Y2gpO2EuY29tcHV0ZWQmJihaKGEua2V5LGIsITEpLGM9YyYmYS5rZXkuY29uc3RhbnQsZS5wdXNoLmFwcGx5KGUsXG5hLmtleS50b1dhdGNoKSl9KTthLmNvbnN0YW50PWM7YS50b1dhdGNoPWU7YnJlYWs7Y2FzZSBxLlRoaXNFeHByZXNzaW9uOmEuY29uc3RhbnQ9ITE7YS50b1dhdGNoPVtdO2JyZWFrO2Nhc2UgcS5Mb2NhbHNFeHByZXNzaW9uOmEuY29uc3RhbnQ9ITEsYS50b1dhdGNoPVtdfX1mdW5jdGlvbiBHZChhKXtpZigxPT09YS5sZW5ndGgpe2E9YVswXS5leHByZXNzaW9uO3ZhciBiPWEudG9XYXRjaDtyZXR1cm4gMSE9PWIubGVuZ3RoP2I6YlswXSE9PWE/Yjp2b2lkIDB9fWZ1bmN0aW9uIEhkKGEpe3JldHVybiBhLnR5cGU9PT1xLklkZW50aWZpZXJ8fGEudHlwZT09PXEuTWVtYmVyRXhwcmVzc2lvbn1mdW5jdGlvbiBJZChhKXtpZigxPT09YS5ib2R5Lmxlbmd0aCYmSGQoYS5ib2R5WzBdLmV4cHJlc3Npb24pKXJldHVybnt0eXBlOnEuQXNzaWdubWVudEV4cHJlc3Npb24sbGVmdDphLmJvZHlbMF0uZXhwcmVzc2lvbixyaWdodDp7dHlwZTpxLk5HVmFsdWVQYXJhbWV0ZXJ9LG9wZXJhdG9yOlwiPVwifX1cbmZ1bmN0aW9uIEpkKGEpe3RoaXMuJGZpbHRlcj1hfWZ1bmN0aW9uIEtkKGEpe3RoaXMuJGZpbHRlcj1hfWZ1bmN0aW9uIE1iKGEsYixkKXt0aGlzLmFzdD1uZXcgcShhLGQpO3RoaXMuYXN0Q29tcGlsZXI9ZC5jc3A/bmV3IEtkKGIpOm5ldyBKZChiKX1mdW5jdGlvbiBBYyhhKXtyZXR1cm4gQihhLnZhbHVlT2YpP2EudmFsdWVPZigpOlJnLmNhbGwoYSl9ZnVuY3Rpb24gVmYoKXt2YXIgYT1UKCksYj17XCJ0cnVlXCI6ITAsXCJmYWxzZVwiOiExLFwibnVsbFwiOm51bGwsdW5kZWZpbmVkOnZvaWQgMH0sZCxjO3RoaXMuYWRkTGl0ZXJhbD1mdW5jdGlvbihhLGMpe2JbYV09Y307dGhpcy5zZXRJZGVudGlmaWVyRm5zPWZ1bmN0aW9uKGEsYil7ZD1hO2M9YjtyZXR1cm4gdGhpc307dGhpcy4kZ2V0PVtcIiRmaWx0ZXJcIixmdW5jdGlvbihlKXtmdW5jdGlvbiBmKGIsYyl7dmFyIGQsZjtzd2l0Y2godHlwZW9mIGIpe2Nhc2UgXCJzdHJpbmdcIjpyZXR1cm4gZj1iPWIudHJpbSgpLGQ9YVtmXSxkfHwoZD1uZXcgTmIoRyksXG5kPShuZXcgTWIoZCxlLEcpKS5wYXJzZShiKSxhW2ZdPXAoZCkpLHMoZCxjKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4gcyhiLGMpO2RlZmF1bHQ6cmV0dXJuIHMoRSxjKX19ZnVuY3Rpb24gZyhhLGIsYyl7cmV0dXJuIG51bGw9PWF8fG51bGw9PWI/YT09PWI6XCJvYmplY3RcIiE9PXR5cGVvZiBhfHwoYT1BYyhhKSxcIm9iamVjdFwiIT09dHlwZW9mIGF8fGMpP2E9PT1ifHxhIT09YSYmYiE9PWI6ITF9ZnVuY3Rpb24gayhhLGIsYyxkLGUpe3ZhciBmPWQuaW5wdXRzLGg7aWYoMT09PWYubGVuZ3RoKXt2YXIgaz1nLGY9ZlswXTtyZXR1cm4gYS4kd2F0Y2goZnVuY3Rpb24oYSl7dmFyIGI9ZihhKTtnKGIsayxmLmlzUHVyZSl8fChoPWQoYSx2b2lkIDAsdm9pZCAwLFtiXSksaz1iJiZBYyhiKSk7cmV0dXJuIGh9LGIsYyxlKX1mb3IodmFyIGw9W10sbT1bXSxuPTAscD1mLmxlbmd0aDtuPHA7bisrKWxbbl09ZyxtW25dPW51bGw7cmV0dXJuIGEuJHdhdGNoKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cbiExLGM9MCxlPWYubGVuZ3RoO2M8ZTtjKyspe3ZhciBrPWZbY10oYSk7aWYoYnx8KGI9IWcoayxsW2NdLGZbY10uaXNQdXJlKSkpbVtjXT1rLGxbY109ayYmQWMoayl9YiYmKGg9ZChhLHZvaWQgMCx2b2lkIDAsbSkpO3JldHVybiBofSxiLGMsZSl9ZnVuY3Rpb24gaChhLGIsYyxkLGUpe2Z1bmN0aW9uIGYoKXtoKG0pJiZrKCl9ZnVuY3Rpb24gZyhhLGIsYyxkKXttPXUmJmQ/ZFswXTpuKGEsYixjLGQpO2gobSkmJmEuJCRwb3N0RGlnZXN0KGYpO3JldHVybiBzKG0pfXZhciBoPWQubGl0ZXJhbD9sOncsayxtLG49ZC4kJGludGVyY2VwdGVkfHxkLHM9ZC4kJGludGVyY2VwdG9yfHxUYSx1PWQuaW5wdXRzJiYhbi5pbnB1dHM7Zy5saXRlcmFsPWQubGl0ZXJhbDtnLmNvbnN0YW50PWQuY29uc3RhbnQ7Zy5pbnB1dHM9ZC5pbnB1dHM7cChnKTtyZXR1cm4gaz1hLiR3YXRjaChnLGIsYyxlKX1mdW5jdGlvbiBsKGEpe3ZhciBiPSEwO3IoYSxmdW5jdGlvbihhKXt3KGEpfHwoYj0hMSl9KTtyZXR1cm4gYn1cbmZ1bmN0aW9uIG0oYSxiLGMsZCl7dmFyIGU9YS4kd2F0Y2goZnVuY3Rpb24oYSl7ZSgpO3JldHVybiBkKGEpfSxiLGMpO3JldHVybiBlfWZ1bmN0aW9uIHAoYSl7YS5jb25zdGFudD9hLiQkd2F0Y2hEZWxlZ2F0ZT1tOmEub25lVGltZT9hLiQkd2F0Y2hEZWxlZ2F0ZT1oOmEuaW5wdXRzJiYoYS4kJHdhdGNoRGVsZWdhdGU9ayk7cmV0dXJuIGF9ZnVuY3Rpb24gbihhLGIpe2Z1bmN0aW9uIGMoZCl7cmV0dXJuIGIoYShkKSl9Yy4kc3RhdGVmdWw9YS4kc3RhdGVmdWx8fGIuJHN0YXRlZnVsO2MuJCRwdXJlPWEuJCRwdXJlJiZiLiQkcHVyZTtyZXR1cm4gY31mdW5jdGlvbiBzKGEsYil7aWYoIWIpcmV0dXJuIGE7YS4kJGludGVyY2VwdG9yJiYoYj1uKGEuJCRpbnRlcmNlcHRvcixiKSxhPWEuJCRpbnRlcmNlcHRlZCk7dmFyIGM9ITEsZD1mdW5jdGlvbihkLGUsZixnKXtkPWMmJmc/Z1swXTphKGQsZSxmLGcpO3JldHVybiBiKGQpfTtkLiQkaW50ZXJjZXB0ZWQ9YTtkLiQkaW50ZXJjZXB0b3I9XG5iO2QubGl0ZXJhbD1hLmxpdGVyYWw7ZC5vbmVUaW1lPWEub25lVGltZTtkLmNvbnN0YW50PWEuY29uc3RhbnQ7Yi4kc3RhdGVmdWx8fChjPSFhLmlucHV0cyxkLmlucHV0cz1hLmlucHV0cz9hLmlucHV0czpbYV0sYi4kJHB1cmV8fChkLmlucHV0cz1kLmlucHV0cy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNQdXJlPT09RmQ/ZnVuY3Rpb24oYil7cmV0dXJuIGEoYil9OmF9KSkpO3JldHVybiBwKGQpfXZhciBHPXtjc3A6QWEoKS5ub1Vuc2FmZUV2YWwsbGl0ZXJhbHM6SWEoYiksaXNJZGVudGlmaWVyU3RhcnQ6QihkKSYmZCxpc0lkZW50aWZpZXJDb250aW51ZTpCKGMpJiZjfTtmLiQkZ2V0QXN0PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBOYihHKTtyZXR1cm4obmV3IE1iKGIsZSxHKSkuZ2V0QXN0KGEpLmFzdH07cmV0dXJuIGZ9XX1mdW5jdGlvbiBYZigpe3ZhciBhPSEwO3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsZCl7cmV0dXJuIExkKGZ1bmN0aW9uKGEpe2IuJGV2YWxBc3luYyhhKX0sXG5kLGEpfV07dGhpcy5lcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucz1mdW5jdGlvbihiKXtyZXR1cm4gdyhiKT8oYT1iLHRoaXMpOmF9fWZ1bmN0aW9uIFlmKCl7dmFyIGE9ITA7dGhpcy4kZ2V0PVtcIiRicm93c2VyXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsZCl7cmV0dXJuIExkKGZ1bmN0aW9uKGEpe2IuZGVmZXIoYSl9LGQsYSl9XTt0aGlzLmVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zPWZ1bmN0aW9uKGIpe3JldHVybiB3KGIpPyhhPWIsdGhpcyk6YX19ZnVuY3Rpb24gTGQoYSxiLGQpe2Z1bmN0aW9uIGMoKXtyZXR1cm4gbmV3IGV9ZnVuY3Rpb24gZSgpe3ZhciBhPXRoaXMucHJvbWlzZT1uZXcgZjt0aGlzLnJlc29sdmU9ZnVuY3Rpb24oYil7aChhLGIpfTt0aGlzLnJlamVjdD1mdW5jdGlvbihiKXttKGEsYil9O3RoaXMubm90aWZ5PWZ1bmN0aW9uKGIpe24oYSxiKX19ZnVuY3Rpb24gZigpe3RoaXMuJCRzdGF0ZT17c3RhdHVzOjB9fWZ1bmN0aW9uIGcoKXtmb3IoOyF3JiZcbngubGVuZ3RoOyl7dmFyIGE9eC5zaGlmdCgpO2lmKCFhLnB1cil7YS5wdXI9ITA7dmFyIGM9YS52YWx1ZSxjPVwiUG9zc2libHkgdW5oYW5kbGVkIHJlamVjdGlvbjogXCIrKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBjP2MudG9TdHJpbmcoKS5yZXBsYWNlKC8gXFx7W1xcc1xcU10qJC8sXCJcIik6eihjKT9cInVuZGVmaW5lZFwiOlwic3RyaW5nXCIhPT10eXBlb2YgYz9JZShjLHZvaWQgMCk6Yyk7Y2MoYS52YWx1ZSk/YihhLnZhbHVlLGMpOmIoYyl9fX1mdW5jdGlvbiBrKGMpeyFkfHxjLnBlbmRpbmd8fDIhPT1jLnN0YXR1c3x8Yy5wdXJ8fCgwPT09dyYmMD09PXgubGVuZ3RoJiZhKGcpLHgucHVzaChjKSk7IWMucHJvY2Vzc1NjaGVkdWxlZCYmYy5wZW5kaW5nJiYoYy5wcm9jZXNzU2NoZWR1bGVkPSEwLCsrdyxhKGZ1bmN0aW9uKCl7dmFyIGUsZixrO2s9Yy5wZW5kaW5nO2MucHJvY2Vzc1NjaGVkdWxlZD0hMTtjLnBlbmRpbmc9dm9pZCAwO3RyeXtmb3IodmFyIGw9MCxuPWsubGVuZ3RoO2w8bjsrK2wpe2MucHVyPVxuITA7Zj1rW2xdWzBdO2U9a1tsXVtjLnN0YXR1c107dHJ5e0IoZSk/aChmLGUoYy52YWx1ZSkpOjE9PT1jLnN0YXR1cz9oKGYsYy52YWx1ZSk6bShmLGMudmFsdWUpfWNhdGNoKHApe20oZixwKSxwJiYhMD09PXAuJCRwYXNzVG9FeGNlcHRpb25IYW5kbGVyJiZiKHApfX19ZmluYWxseXstLXcsZCYmMD09PXcmJmEoZyl9fSkpfWZ1bmN0aW9uIGgoYSxiKXthLiQkc3RhdGUuc3RhdHVzfHwoYj09PWE/cChhLHYoXCJxY3ljbGVcIixiKSk6bChhLGIpKX1mdW5jdGlvbiBsKGEsYil7ZnVuY3Rpb24gYyhiKXtnfHwoZz0hMCxsKGEsYikpfWZ1bmN0aW9uIGQoYil7Z3x8KGc9ITAscChhLGIpKX1mdW5jdGlvbiBlKGIpe24oYSxiKX12YXIgZixnPSExO3RyeXtpZihEKGIpfHxCKGIpKWY9Yi50aGVuO0IoZik/KGEuJCRzdGF0ZS5zdGF0dXM9LTEsZi5jYWxsKGIsYyxkLGUpKTooYS4kJHN0YXRlLnZhbHVlPWIsYS4kJHN0YXRlLnN0YXR1cz0xLGsoYS4kJHN0YXRlKSl9Y2F0Y2goaCl7ZChoKX19ZnVuY3Rpb24gbShhLFxuYil7YS4kJHN0YXRlLnN0YXR1c3x8cChhLGIpfWZ1bmN0aW9uIHAoYSxiKXthLiQkc3RhdGUudmFsdWU9YjthLiQkc3RhdGUuc3RhdHVzPTI7ayhhLiQkc3RhdGUpfWZ1bmN0aW9uIG4oYyxkKXt2YXIgZT1jLiQkc3RhdGUucGVuZGluZzswPj1jLiQkc3RhdGUuc3RhdHVzJiZlJiZlLmxlbmd0aCYmYShmdW5jdGlvbigpe2Zvcih2YXIgYSxjLGY9MCxnPWUubGVuZ3RoO2Y8ZztmKyspe2M9ZVtmXVswXTthPWVbZl1bM107dHJ5e24oYyxCKGEpP2EoZCk6ZCl9Y2F0Y2goaCl7YihoKX19fSl9ZnVuY3Rpb24gcyhhKXt2YXIgYj1uZXcgZjttKGIsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gRyhhLGIsYyl7dmFyIGQ9bnVsbDt0cnl7QihjKSYmKGQ9YygpKX1jYXRjaChlKXtyZXR1cm4gcyhlKX1yZXR1cm4gZCYmQihkLnRoZW4pP2QudGhlbihmdW5jdGlvbigpe3JldHVybiBiKGEpfSxzKTpiKGEpfWZ1bmN0aW9uIHQoYSxiLGMsZCl7dmFyIGU9bmV3IGY7aChlLGEpO3JldHVybiBlLnRoZW4oYixjLFxuZCl9ZnVuY3Rpb24gcShhKXtpZighQihhKSl0aHJvdyB2KFwibm9yc2x2clwiLGEpO3ZhciBiPW5ldyBmO2EoZnVuY3Rpb24oYSl7aChiLGEpfSxmdW5jdGlvbihhKXttKGIsYSl9KTtyZXR1cm4gYn12YXIgdj1GKFwiJHFcIixUeXBlRXJyb3IpLHc9MCx4PVtdO1MoZi5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oYSxiLGMpe2lmKHooYSkmJnooYikmJnooYykpcmV0dXJuIHRoaXM7dmFyIGQ9bmV3IGY7dGhpcy4kJHN0YXRlLnBlbmRpbmc9dGhpcy4kJHN0YXRlLnBlbmRpbmd8fFtdO3RoaXMuJCRzdGF0ZS5wZW5kaW5nLnB1c2goW2QsYSxiLGNdKTswPHRoaXMuJCRzdGF0ZS5zdGF0dXMmJmsodGhpcy4kJHN0YXRlKTtyZXR1cm4gZH0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sXCJmaW5hbGx5XCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBHKGIseSxhKX0sZnVuY3Rpb24oYil7cmV0dXJuIEcoYixzLGEpfSxcbmIpfX0pO3ZhciB5PXQ7cS5wcm90b3R5cGU9Zi5wcm90b3R5cGU7cS5kZWZlcj1jO3EucmVqZWN0PXM7cS53aGVuPXQ7cS5yZXNvbHZlPXk7cS5hbGw9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGYsYz0wLGQ9SChhKT9bXTp7fTtyKGEsZnVuY3Rpb24oYSxlKXtjKys7dChhKS50aGVuKGZ1bmN0aW9uKGEpe2RbZV09YTstLWN8fGgoYixkKX0sZnVuY3Rpb24oYSl7bShiLGEpfSl9KTswPT09YyYmaChiLGQpO3JldHVybiBifTtxLnJhY2U9ZnVuY3Rpb24oYSl7dmFyIGI9YygpO3IoYSxmdW5jdGlvbihhKXt0KGEpLnRoZW4oYi5yZXNvbHZlLGIucmVqZWN0KX0pO3JldHVybiBiLnByb21pc2V9O3JldHVybiBxfWZ1bmN0aW9uIGhnKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxiKXt2YXIgZD1hLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8YS53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsYz1hLmNhbmNlbEFuaW1hdGlvbkZyYW1lfHxhLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHxcbmEud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lLGU9ISFkLGY9ZT9mdW5jdGlvbihhKXt2YXIgYj1kKGEpO3JldHVybiBmdW5jdGlvbigpe2MoYil9fTpmdW5jdGlvbihhKXt2YXIgYz1iKGEsMTYuNjYsITEpO3JldHVybiBmdW5jdGlvbigpe2IuY2FuY2VsKGMpfX07Zi5zdXBwb3J0ZWQ9ZTtyZXR1cm4gZn1dfWZ1bmN0aW9uIFdmKCl7ZnVuY3Rpb24gYShhKXtmdW5jdGlvbiBiKCl7dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkY2hpbGRIZWFkPXRoaXMuJCRjaGlsZFRhaWw9bnVsbDt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRsaXN0ZW5lckNvdW50PXt9O3RoaXMuJCR3YXRjaGVyc0NvdW50PTA7dGhpcy4kaWQ9KytwYjt0aGlzLiQkQ2hpbGRTY29wZT1udWxsO3RoaXMuJCRzdXNwZW5kZWQ9ITF9Yi5wcm90b3R5cGU9YTtyZXR1cm4gYn12YXIgYj0xMCxkPUYoXCIkcm9vdFNjb3BlXCIpLGM9bnVsbCxlPW51bGw7dGhpcy5kaWdlc3RUdGw9XG5mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1hKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkcGFyc2VcIixcIiRicm93c2VyXCIsZnVuY3Rpb24oZixnLGspe2Z1bmN0aW9uIGgoYSl7YS5jdXJyZW50U2NvcGUuJCRkZXN0cm95ZWQ9ITB9ZnVuY3Rpb24gbChhKXs5PT09Q2EmJihhLiQkY2hpbGRIZWFkJiZsKGEuJCRjaGlsZEhlYWQpLGEuJCRuZXh0U2libGluZyYmbChhLiQkbmV4dFNpYmxpbmcpKTthLiRwYXJlbnQ9YS4kJG5leHRTaWJsaW5nPWEuJCRwcmV2U2libGluZz1hLiQkY2hpbGRIZWFkPWEuJCRjaGlsZFRhaWw9YS4kcm9vdD1hLiQkd2F0Y2hlcnM9bnVsbH1mdW5jdGlvbiBtKCl7dGhpcy4kaWQ9KytwYjt0aGlzLiQkcGhhc2U9dGhpcy4kcGFyZW50PXRoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJHJvb3Q9XG50aGlzO3RoaXMuJCRzdXNwZW5kZWQ9dGhpcy4kJGRlc3Ryb3llZD0hMTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRsaXN0ZW5lckNvdW50PXt9O3RoaXMuJCR3YXRjaGVyc0NvdW50PTA7dGhpcy4kJGlzb2xhdGVCaW5kaW5ncz1udWxsfWZ1bmN0aW9uIHAoYSl7aWYodi4kJHBoYXNlKXRocm93IGQoXCJpbnByb2dcIix2LiQkcGhhc2UpO3YuJCRwaGFzZT1hfWZ1bmN0aW9uIG4oYSxiKXtkbyBhLiQkd2F0Y2hlcnNDb3VudCs9Yjt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gcyhhLGIsYyl7ZG8gYS4kJGxpc3RlbmVyQ291bnRbY10tPWIsMD09PWEuJCRsaXN0ZW5lckNvdW50W2NdJiZkZWxldGUgYS4kJGxpc3RlbmVyQ291bnRbY107d2hpbGUoYT1hLiRwYXJlbnQpfWZ1bmN0aW9uIEcoKXt9ZnVuY3Rpb24gdCgpe2Zvcig7eS5sZW5ndGg7KXRyeXt5LnNoaWZ0KCkoKX1jYXRjaChhKXtmKGEpfWU9bnVsbH1mdW5jdGlvbiBxKCl7bnVsbD09PWUmJihlPWsuZGVmZXIoZnVuY3Rpb24oKXt2LiRhcHBseSh0KX0sXG5udWxsLFwiJGFwcGx5QXN5bmNcIikpfW0ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjptLCRuZXc6ZnVuY3Rpb24oYixjKXt2YXIgZDtjPWN8fHRoaXM7Yj8oZD1uZXcgbSxkLiRyb290PXRoaXMuJHJvb3QpOih0aGlzLiQkQ2hpbGRTY29wZXx8KHRoaXMuJCRDaGlsZFNjb3BlPWEodGhpcykpLGQ9bmV3IHRoaXMuJCRDaGlsZFNjb3BlKTtkLiRwYXJlbnQ9YztkLiQkcHJldlNpYmxpbmc9Yy4kJGNoaWxkVGFpbDtjLiQkY2hpbGRIZWFkPyhjLiQkY2hpbGRUYWlsLiQkbmV4dFNpYmxpbmc9ZCxjLiQkY2hpbGRUYWlsPWQpOmMuJCRjaGlsZEhlYWQ9Yy4kJGNoaWxkVGFpbD1kOyhifHxjIT09dGhpcykmJmQuJG9uKFwiJGRlc3Ryb3lcIixoKTtyZXR1cm4gZH0sJHdhdGNoOmZ1bmN0aW9uKGEsYixkLGUpe3ZhciBmPWcoYSk7Yj1CKGIpP2I6RTtpZihmLiQkd2F0Y2hEZWxlZ2F0ZSlyZXR1cm4gZi4kJHdhdGNoRGVsZWdhdGUodGhpcyxiLGQsZixhKTt2YXIgaD10aGlzLGs9aC4kJHdhdGNoZXJzLGw9XG57Zm46YixsYXN0OkcsZ2V0OmYsZXhwOmV8fGEsZXE6ISFkfTtjPW51bGw7a3x8KGs9aC4kJHdhdGNoZXJzPVtdLGsuJCRkaWdlc3RXYXRjaEluZGV4PS0xKTtrLnVuc2hpZnQobCk7ay4kJGRpZ2VzdFdhdGNoSW5kZXgrKztuKHRoaXMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9Y2IoayxsKTswPD1hJiYobihoLC0xKSxhPGsuJCRkaWdlc3RXYXRjaEluZGV4JiZrLiQkZGlnZXN0V2F0Y2hJbmRleC0tKTtjPW51bGx9fSwkd2F0Y2hHcm91cDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtoPSExO3RyeXtrPyhrPSExLGIoZSxlLGcpKTpiKGUsZCxnKX1maW5hbGx5e2Zvcih2YXIgZj0wO2Y8YS5sZW5ndGg7ZisrKWRbZl09ZVtmXX19dmFyIGQ9QXJyYXkoYS5sZW5ndGgpLGU9QXJyYXkoYS5sZW5ndGgpLGY9W10sZz10aGlzLGg9ITEsaz0hMDtpZighYS5sZW5ndGgpe3ZhciBsPSEwO2cuJGV2YWxBc3luYyhmdW5jdGlvbigpe2wmJmIoZSxlLGcpfSk7cmV0dXJuIGZ1bmN0aW9uKCl7bD1cbiExfX1pZigxPT09YS5sZW5ndGgpcmV0dXJuIHRoaXMuJHdhdGNoKGFbMF0sZnVuY3Rpb24oYSxjLGYpe2VbMF09YTtkWzBdPWM7YihlLGE9PT1jP2U6ZCxmKX0pO3IoYSxmdW5jdGlvbihhLGIpe3ZhciBkPWcuJHdhdGNoKGEsZnVuY3Rpb24oYSl7ZVtiXT1hO2h8fChoPSEwLGcuJGV2YWxBc3luYyhjKSl9KTtmLnB1c2goZCl9KTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IoO2YubGVuZ3RoOylmLnNoaWZ0KCkoKX19LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe2U9YTt2YXIgYixkLGcsaDtpZigheihlKSl7aWYoRChlKSlpZih5YShlKSlmb3IoZiE9PW4mJihmPW4sdD1mLmxlbmd0aD0wLGwrKyksYT1lLmxlbmd0aCx0IT09YSYmKGwrKyxmLmxlbmd0aD10PWEpLGI9MDtiPGE7YisrKWg9ZltiXSxnPWVbYl0sZD1oIT09aCYmZyE9PWcsZHx8aD09PWd8fChsKyssZltiXT1nKTtlbHNle2YhPT1wJiYoZj1wPXt9LHQ9MCxsKyspO2E9MDtmb3IoYiBpbiBlKXRhLmNhbGwoZSxcbmIpJiYoYSsrLGc9ZVtiXSxoPWZbYl0sYiBpbiBmPyhkPWghPT1oJiZnIT09ZyxkfHxoPT09Z3x8KGwrKyxmW2JdPWcpKToodCsrLGZbYl09ZyxsKyspKTtpZih0PmEpZm9yKGIgaW4gbCsrLGYpdGEuY2FsbChlLGIpfHwodC0tLGRlbGV0ZSBmW2JdKX1lbHNlIGYhPT1lJiYoZj1lLGwrKyk7cmV0dXJuIGx9fWMuJCRwdXJlPWcoYSkubGl0ZXJhbDtjLiRzdGF0ZWZ1bD0hYy4kJHB1cmU7dmFyIGQ9dGhpcyxlLGYsaCxrPTE8Yi5sZW5ndGgsbD0wLG09ZyhhLGMpLG49W10scD17fSxzPSEwLHQ9MDtyZXR1cm4gdGhpcy4kd2F0Y2gobSxmdW5jdGlvbigpe3M/KHM9ITEsYihlLGUsZCkpOmIoZSxoLGQpO2lmKGspaWYoRChlKSlpZih5YShlKSl7aD1BcnJheShlLmxlbmd0aCk7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspaFthXT1lW2FdfWVsc2UgZm9yKGEgaW4gaD17fSxlKXRhLmNhbGwoZSxhKSYmKGhbYV09ZVthXSk7ZWxzZSBoPWV9KX0sJGRpZ2VzdDpmdW5jdGlvbigpe3ZhciBhLFxuZyxoLGwsbSxuLHMscj1iLHEseT13Lmxlbmd0aD92OnRoaXMsTj1bXSx6LEE7cChcIiRkaWdlc3RcIik7ay4kJGNoZWNrVXJsQ2hhbmdlKCk7dGhpcz09PXYmJm51bGwhPT1lJiYoay5kZWZlci5jYW5jZWwoZSksdCgpKTtjPW51bGw7ZG97cz0hMTtxPXk7Zm9yKG49MDtuPHcubGVuZ3RoO24rKyl7dHJ5e0E9d1tuXSxsPUEuZm4sbChBLnNjb3BlLEEubG9jYWxzKX1jYXRjaChDKXtmKEMpfWM9bnVsbH13Lmxlbmd0aD0wO2E6ZG97aWYobj0hcS4kJHN1c3BlbmRlZCYmcS4kJHdhdGNoZXJzKWZvcihuLiQkZGlnZXN0V2F0Y2hJbmRleD1uLmxlbmd0aDtuLiQkZGlnZXN0V2F0Y2hJbmRleC0tOyl0cnl7aWYoYT1uW24uJCRkaWdlc3RXYXRjaEluZGV4XSlpZihtPWEuZ2V0LChnPW0ocSkpIT09KGg9YS5sYXN0KSYmIShhLmVxP3ZhKGcsaCk6WChnKSYmWChoKSkpcz0hMCxjPWEsYS5sYXN0PWEuZXE/SWEoZyxudWxsKTpnLGw9YS5mbixsKGcsaD09PUc/ZzpoLHEpLDU+ciYmKHo9NC1yLE5bel18fFxuKE5bel09W10pLE5bel0ucHVzaCh7bXNnOkIoYS5leHApP1wiZm46IFwiKyhhLmV4cC5uYW1lfHxhLmV4cC50b1N0cmluZygpKTphLmV4cCxuZXdWYWw6ZyxvbGRWYWw6aH0pKTtlbHNlIGlmKGE9PT1jKXtzPSExO2JyZWFrIGF9fWNhdGNoKEUpe2YoRSl9aWYoIShuPSFxLiQkc3VzcGVuZGVkJiZxLiQkd2F0Y2hlcnNDb3VudCYmcS4kJGNoaWxkSGVhZHx8cSE9PXkmJnEuJCRuZXh0U2libGluZykpZm9yKDtxIT09eSYmIShuPXEuJCRuZXh0U2libGluZyk7KXE9cS4kcGFyZW50fXdoaWxlKHE9bik7aWYoKHN8fHcubGVuZ3RoKSYmIXItLSl0aHJvdyB2LiQkcGhhc2U9bnVsbCxkKFwiaW5mZGlnXCIsYixOKTt9d2hpbGUoc3x8dy5sZW5ndGgpO2Zvcih2LiQkcGhhc2U9bnVsbDtKPHgubGVuZ3RoOyl0cnl7eFtKKytdKCl9Y2F0Y2goRCl7ZihEKX14Lmxlbmd0aD1KPTA7ay4kJGNoZWNrVXJsQ2hhbmdlKCl9LCRzdXNwZW5kOmZ1bmN0aW9uKCl7dGhpcy4kJHN1c3BlbmRlZD0hMH0sJGlzU3VzcGVuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCRzdXNwZW5kZWR9LFxuJHJlc3VtZTpmdW5jdGlvbigpe3RoaXMuJCRzdXNwZW5kZWQ9ITF9LCRkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMuJCRkZXN0cm95ZWQpe3ZhciBhPXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoXCIkZGVzdHJveVwiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXM9PT12JiZrLiQkYXBwbGljYXRpb25EZXN0cm95ZWQoKTtuKHRoaXMsLXRoaXMuJCR3YXRjaGVyc0NvdW50KTtmb3IodmFyIGIgaW4gdGhpcy4kJGxpc3RlbmVyQ291bnQpcyh0aGlzLHRoaXMuJCRsaXN0ZW5lckNvdW50W2JdLGIpO2EmJmEuJCRjaGlsZEhlYWQ9PT10aGlzJiYoYS4kJGNoaWxkSGVhZD10aGlzLiQkbmV4dFNpYmxpbmcpO2EmJmEuJCRjaGlsZFRhaWw9PT10aGlzJiYoYS4kJGNoaWxkVGFpbD10aGlzLiQkcHJldlNpYmxpbmcpO3RoaXMuJCRwcmV2U2libGluZyYmKHRoaXMuJCRwcmV2U2libGluZy4kJG5leHRTaWJsaW5nPXRoaXMuJCRuZXh0U2libGluZyk7dGhpcy4kJG5leHRTaWJsaW5nJiYodGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9XG50aGlzLiQkcHJldlNpYmxpbmcpO3RoaXMuJGRlc3Ryb3k9dGhpcy4kZGlnZXN0PXRoaXMuJGFwcGx5PXRoaXMuJGV2YWxBc3luYz10aGlzLiRhcHBseUFzeW5jPUU7dGhpcy4kb249dGhpcy4kd2F0Y2g9dGhpcy4kd2F0Y2hHcm91cD1mdW5jdGlvbigpe3JldHVybiBFfTt0aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRuZXh0U2libGluZz1udWxsO2wodGhpcyl9fSwkZXZhbDpmdW5jdGlvbihhLGIpe3JldHVybiBnKGEpKHRoaXMsYil9LCRldmFsQXN5bmM6ZnVuY3Rpb24oYSxiKXt2LiQkcGhhc2V8fHcubGVuZ3RofHxrLmRlZmVyKGZ1bmN0aW9uKCl7dy5sZW5ndGgmJnYuJGRpZ2VzdCgpfSxudWxsLFwiJGV2YWxBc3luY1wiKTt3LnB1c2goe3Njb3BlOnRoaXMsZm46ZyhhKSxsb2NhbHM6Yn0pfSwkJHBvc3REaWdlc3Q6ZnVuY3Rpb24oYSl7eC5wdXNoKGEpfSwkYXBwbHk6ZnVuY3Rpb24oYSl7dHJ5e3AoXCIkYXBwbHlcIik7dHJ5e3JldHVybiB0aGlzLiRldmFsKGEpfWZpbmFsbHl7di4kJHBoYXNlPVxubnVsbH19Y2F0Y2goYil7ZihiKX1maW5hbGx5e3RyeXt2LiRkaWdlc3QoKX1jYXRjaChjKXt0aHJvdyBmKGMpLGM7fX19LCRhcHBseUFzeW5jOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtjLiRldmFsKGEpfXZhciBjPXRoaXM7YSYmeS5wdXNoKGIpO2E9ZyhhKTtxKCl9LCRvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJCRsaXN0ZW5lcnNbYV07Y3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09Yz1bXSk7Yy5wdXNoKGIpO3ZhciBkPXRoaXM7ZG8gZC4kJGxpc3RlbmVyQ291bnRbYV18fChkLiQkbGlzdGVuZXJDb3VudFthXT0wKSxkLiQkbGlzdGVuZXJDb3VudFthXSsrO3doaWxlKGQ9ZC4kcGFyZW50KTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuaW5kZXhPZihiKTstMSE9PWQmJihkZWxldGUgY1tkXSxzKGUsMSxhKSl9fSwkZW1pdDpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQsZT10aGlzLGc9ITEsaD17bmFtZTphLHRhcmdldFNjb3BlOmUsc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7Zz1cbiEwfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2guZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX0saz1kYihbaF0sYXJndW1lbnRzLDEpLGwsbTtkb3tkPWUuJCRsaXN0ZW5lcnNbYV18fGM7aC5jdXJyZW50U2NvcGU9ZTtsPTA7Zm9yKG09ZC5sZW5ndGg7bDxtO2wrKylpZihkW2xdKXRyeXtkW2xdLmFwcGx5KG51bGwsayl9Y2F0Y2gobil7ZihuKX1lbHNlIGQuc3BsaWNlKGwsMSksbC0tLG0tLTtpZihnKWJyZWFrO2U9ZS4kcGFyZW50fXdoaWxlKGUpO2guY3VycmVudFNjb3BlPW51bGw7cmV0dXJuIGh9LCRicm9hZGNhc3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9dGhpcyxlPXtuYW1lOmEsdGFyZ2V0U2NvcGU6dGhpcyxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2UuZGVmYXVsdFByZXZlbnRlZD0hMH0sZGVmYXVsdFByZXZlbnRlZDohMX07aWYoIXRoaXMuJCRsaXN0ZW5lckNvdW50W2FdKXJldHVybiBlO2Zvcih2YXIgZz1kYihbZV0sYXJndW1lbnRzLFxuMSksaCxrO2M9ZDspe2UuY3VycmVudFNjb3BlPWM7ZD1jLiQkbGlzdGVuZXJzW2FdfHxbXTtoPTA7Zm9yKGs9ZC5sZW5ndGg7aDxrO2grKylpZihkW2hdKXRyeXtkW2hdLmFwcGx5KG51bGwsZyl9Y2F0Y2gobCl7ZihsKX1lbHNlIGQuc3BsaWNlKGgsMSksaC0tLGstLTtpZighKGQ9Yy4kJGxpc3RlbmVyQ291bnRbYV0mJmMuJCRjaGlsZEhlYWR8fGMhPT10aGlzJiZjLiQkbmV4dFNpYmxpbmcpKWZvcig7YyE9PXRoaXMmJiEoZD1jLiQkbmV4dFNpYmxpbmcpOyljPWMuJHBhcmVudH1lLmN1cnJlbnRTY29wZT1udWxsO3JldHVybiBlfX07dmFyIHY9bmV3IG0sdz12LiQkYXN5bmNRdWV1ZT1bXSx4PXYuJCRwb3N0RGlnZXN0UXVldWU9W10seT12LiQkYXBwbHlBc3luY1F1ZXVlPVtdLEo9MDtyZXR1cm4gdn1dfWZ1bmN0aW9uIExlKCl7dmFyIGE9L15cXHMqKGh0dHBzP3xzP2Z0cHxtYWlsdG98dGVsfGZpbGUpOi8sYj0vXlxccyooKGh0dHBzP3xmdHB8ZmlsZXxibG9iKTp8ZGF0YTppbWFnZVxcLykvO1xudGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4gdyhiKT8oYT1iLHRoaXMpOmF9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGEpe3JldHVybiB3KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGQsYyl7dmFyIGU9Yz9iOmEsZj1nYShkJiZkLnRyaW0oKSkuaHJlZjtyZXR1cm5cIlwiPT09Znx8Zi5tYXRjaChlKT9kOlwidW5zYWZlOlwiK2Z9fX1mdW5jdGlvbiBTZyhhKXtpZihcInNlbGZcIj09PWEpcmV0dXJuIGE7aWYoQShhKSl7aWYoLTE8YS5pbmRleE9mKFwiKioqXCIpKXRocm93IEVhKFwiaXdjYXJkXCIsYSk7YT1NZChhKS5yZXBsYWNlKC9cXFxcXFwqXFxcXFxcKi9nLFwiLipcIikucmVwbGFjZSgvXFxcXFxcKi9nLFwiW146Ly4/JjtdKlwiKTtyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIithK1wiJFwiKX1pZihhYihhKSlyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIithLnNvdXJjZStcIiRcIik7dGhyb3cgRWEoXCJpbWF0Y2hlclwiKTtcbn1mdW5jdGlvbiBOZChhKXt2YXIgYj1bXTt3KGEpJiZyKGEsZnVuY3Rpb24oYSl7Yi5wdXNoKFNnKGEpKX0pO3JldHVybiBifWZ1bmN0aW9uICRmKCl7dGhpcy5TQ0VfQ09OVEVYVFM9Vjt2YXIgYT1bXCJzZWxmXCJdLGI9W107dGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdD1mdW5jdGlvbihiKXthcmd1bWVudHMubGVuZ3RoJiYoYT1OZChiKSk7cmV0dXJuIGF9O3RoaXMucmVzb3VyY2VVcmxCbGFja2xpc3Q9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9TmQoYSkpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oZCxjKXtmdW5jdGlvbiBlKGEsYil7dmFyIGM7XCJzZWxmXCI9PT1hPyhjPUJjKGIsT2QpKXx8KEMuZG9jdW1lbnQuYmFzZVVSST9jPUMuZG9jdW1lbnQuYmFzZVVSSTooTmF8fChOYT1DLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLE5hLmhyZWY9XCIuXCIsTmE9TmEuY2xvbmVOb2RlKCExKSksYz1OYS5ocmVmKSxcbmM9QmMoYixjKSk6Yz0hIWEuZXhlYyhiLmhyZWYpO3JldHVybiBjfWZ1bmN0aW9uIGYoYSl7dmFyIGI9ZnVuY3Rpb24oYSl7dGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBhfX07YSYmKGIucHJvdG90eXBlPW5ldyBhKTtiLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKX07Yi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpLnRvU3RyaW5nKCl9O3JldHVybiBifXZhciBnPWZ1bmN0aW9uKGEpe3Rocm93IEVhKFwidW5zYWZlXCIpO307ZC5oYXMoXCIkc2FuaXRpemVcIikmJihnPWQuZ2V0KFwiJHNhbml0aXplXCIpKTt2YXIgaz1mKCksaD17fTtoW1YuSFRNTF09ZihrKTtoW1YuQ1NTXT1mKGspO2hbVi5NRURJQV9VUkxdPWYoayk7aFtWLlVSTF09ZihoW1YuTUVESUFfVVJMXSk7aFtWLkpTXT1mKGspO2hbVi5SRVNPVVJDRV9VUkxdPVxuZihoW1YuVVJMXSk7cmV0dXJue3RydXN0QXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1oLmhhc093blByb3BlcnR5KGEpP2hbYV06bnVsbDtpZighYyl0aHJvdyBFYShcImljb250ZXh0XCIsYSxiKTtpZihudWxsPT09Ynx8eihiKXx8XCJcIj09PWIpcmV0dXJuIGI7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBiKXRocm93IEVhKFwiaXR5cGVcIixhKTtyZXR1cm4gbmV3IGMoYil9LGdldFRydXN0ZWQ6ZnVuY3Rpb24oZCxmKXtpZihudWxsPT09Znx8eihmKXx8XCJcIj09PWYpcmV0dXJuIGY7dmFyIGs9aC5oYXNPd25Qcm9wZXJ0eShkKT9oW2RdOm51bGw7aWYoayYmZiBpbnN0YW5jZW9mIGspcmV0dXJuIGYuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtCKGYuJCR1bndyYXBUcnVzdGVkVmFsdWUpJiYoZj1mLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkpO2lmKGQ9PT1WLk1FRElBX1VSTHx8ZD09PVYuVVJMKXJldHVybiBjKGYudG9TdHJpbmcoKSxkPT09Vi5NRURJQV9VUkwpO2lmKGQ9PT1WLlJFU09VUkNFX1VSTCl7dmFyIGs9XG5nYShmLnRvU3RyaW5nKCkpLG4scyxyPSExO249MDtmb3Iocz1hLmxlbmd0aDtuPHM7bisrKWlmKGUoYVtuXSxrKSl7cj0hMDticmVha31pZihyKWZvcihuPTAscz1iLmxlbmd0aDtuPHM7bisrKWlmKGUoYltuXSxrKSl7cj0hMTticmVha31pZihyKXJldHVybiBmO3Rocm93IEVhKFwiaW5zZWN1cmxcIixmLnRvU3RyaW5nKCkpO31pZihkPT09Vi5IVE1MKXJldHVybiBnKGYpO3Rocm93IEVhKFwidW5zYWZlXCIpO30sdmFsdWVPZjpmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGs/YS4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpOmF9fX1dfWZ1bmN0aW9uIFpmKCl7dmFyIGE9ITA7dGhpcy5lbmFibGVkPWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPSEhYik7cmV0dXJuIGF9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRzY2VEZWxlZ2F0ZVwiLGZ1bmN0aW9uKGIsZCl7aWYoYSYmOD5DYSl0aHJvdyBFYShcImllcXVpcmtzXCIpO3ZhciBjPWphKFYpO2MuaXNFbmFibGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O1xuYy50cnVzdEFzPWQudHJ1c3RBcztjLmdldFRydXN0ZWQ9ZC5nZXRUcnVzdGVkO2MudmFsdWVPZj1kLnZhbHVlT2Y7YXx8KGMudHJ1c3RBcz1jLmdldFRydXN0ZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0sYy52YWx1ZU9mPVRhKTtjLnBhcnNlQXM9ZnVuY3Rpb24oYSxkKXt2YXIgZT1iKGQpO3JldHVybiBlLmxpdGVyYWwmJmUuY29uc3RhbnQ/ZTpiKGQsZnVuY3Rpb24oYil7cmV0dXJuIGMuZ2V0VHJ1c3RlZChhLGIpfSl9O3ZhciBlPWMucGFyc2VBcyxmPWMuZ2V0VHJ1c3RlZCxnPWMudHJ1c3RBcztyKFYsZnVuY3Rpb24oYSxiKXt2YXIgZD1LKGIpO2NbKFwicGFyc2VfYXNfXCIrZCkucmVwbGFjZShDYyx3YildPWZ1bmN0aW9uKGIpe3JldHVybiBlKGEsYil9O2NbKFwiZ2V0X3RydXN0ZWRfXCIrZCkucmVwbGFjZShDYyx3YildPWZ1bmN0aW9uKGIpe3JldHVybiBmKGEsYil9O2NbKFwidHJ1c3RfYXNfXCIrZCkucmVwbGFjZShDYyx3YildPWZ1bmN0aW9uKGIpe3JldHVybiBnKGEsYil9fSk7XG5yZXR1cm4gY31dfWZ1bmN0aW9uIGFnKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGEsYil7dmFyIGQ9e30sYz0hKCghYS5ud3x8IWEubncucHJvY2VzcykmJmEuY2hyb21lJiYoYS5jaHJvbWUuYXBwJiZhLmNocm9tZS5hcHAucnVudGltZXx8IWEuY2hyb21lLmFwcCYmYS5jaHJvbWUucnVudGltZSYmYS5jaHJvbWUucnVudGltZS5pZCkpJiZhLmhpc3RvcnkmJmEuaGlzdG9yeS5wdXNoU3RhdGUsZT1mYSgoL2FuZHJvaWQgKFxcZCspLy5leGVjKEsoKGEubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSl8fFtdKVsxXSksZj0vQm94ZWUvaS50ZXN0KChhLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCksZz1iWzBdfHx7fSxrPWcuYm9keSYmZy5ib2R5LnN0eWxlLGg9ITEsbD0hMTtrJiYoaD0hIShcInRyYW5zaXRpb25cImluIGt8fFwid2Via2l0VHJhbnNpdGlvblwiaW4gayksbD0hIShcImFuaW1hdGlvblwiaW4ga3x8XCJ3ZWJraXRBbmltYXRpb25cImluIGspKTtyZXR1cm57aGlzdG9yeTohKCFjfHxcbjQ+ZXx8ZiksaGFzRXZlbnQ6ZnVuY3Rpb24oYSl7aWYoXCJpbnB1dFwiPT09YSYmQ2EpcmV0dXJuITE7aWYoeihkW2FdKSl7dmFyIGI9Zy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2RbYV09XCJvblwiK2EgaW4gYn1yZXR1cm4gZFthXX0sY3NwOkFhKCksdHJhbnNpdGlvbnM6aCxhbmltYXRpb25zOmwsYW5kcm9pZDplfX1dfWZ1bmN0aW9uIGJnKCl7dGhpcy4kZ2V0PWlhKGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVGcoYSl9KX1mdW5jdGlvbiBUZyhhKXtmdW5jdGlvbiBiKCl7dmFyIGE9ZS5wb3AoKTtyZXR1cm4gYSYmYS5jYn1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj1lLmxlbmd0aC0xOzA8PWI7LS1iKXt2YXIgYz1lW2JdO2lmKGMudHlwZT09PWEpcmV0dXJuIGUuc3BsaWNlKGIsMSksYy5jYn19dmFyIGM9e30sZT1bXSxmPXRoaXMuQUxMX1RBU0tTX1RZUEU9XCIkJGFsbCQkXCIsZz10aGlzLkRFRkFVTFRfVEFTS19UWVBFPVwiJCRkZWZhdWx0JCRcIjt0aGlzLmNvbXBsZXRlVGFzaz1mdW5jdGlvbihlLFxuaCl7aD1ofHxnO3RyeXtlKCl9ZmluYWxseXt2YXIgbDtsPWh8fGc7Y1tsXSYmKGNbbF0tLSxjW2ZdLS0pO2w9Y1toXTt2YXIgbT1jW2ZdO2lmKCFtfHwhbClmb3IobD1tP2Q6YjttPWwoaCk7KXRyeXttKCl9Y2F0Y2gocCl7YS5lcnJvcihwKX19fTt0aGlzLmluY1Rhc2tDb3VudD1mdW5jdGlvbihhKXthPWF8fGc7Y1thXT0oY1thXXx8MCkrMTtjW2ZdPShjW2ZdfHwwKSsxfTt0aGlzLm5vdGlmeVdoZW5Ob1BlbmRpbmdUYXNrcz1mdW5jdGlvbihhLGIpe2I9Ynx8ZjtjW2JdP2UucHVzaCh7dHlwZTpiLGNiOmF9KTphKCl9fWZ1bmN0aW9uIGRnKCl7dmFyIGE7dGhpcy5odHRwT3B0aW9ucz1mdW5jdGlvbihiKXtyZXR1cm4gYj8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHRlbXBsYXRlQ2FjaGVcIixcIiRodHRwXCIsXCIkcVwiLFwiJHNjZVwiLGZ1bmN0aW9uKGIsZCxjLGUsZil7ZnVuY3Rpb24gZyhrLGgpe2cudG90YWxQZW5kaW5nUmVxdWVzdHMrKztpZighQShrKXx8XG56KGQuZ2V0KGspKSlrPWYuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKGspO3ZhciBsPWMuZGVmYXVsdHMmJmMuZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2U7SChsKT9sPWwuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIT09dmN9KTpsPT09dmMmJihsPW51bGwpO3JldHVybiBjLmdldChrLFMoe2NhY2hlOmQsdHJhbnNmb3JtUmVzcG9uc2U6bH0sYSkpLmZpbmFsbHkoZnVuY3Rpb24oKXtnLnRvdGFsUGVuZGluZ1JlcXVlc3RzLS19KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBkLnB1dChrLGEuZGF0YSl9LGZ1bmN0aW9uKGEpe2h8fChhPVVnKFwidHBsb2FkXCIsayxhLnN0YXR1cyxhLnN0YXR1c1RleHQpLGIoYSkpO3JldHVybiBlLnJlamVjdChhKX0pfWcudG90YWxQZW5kaW5nUmVxdWVzdHM9MDtyZXR1cm4gZ31dfWZ1bmN0aW9uIGVnKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkbG9jYXRpb25cIixmdW5jdGlvbihhLGIsZCl7cmV0dXJue2ZpbmRCaW5kaW5nczpmdW5jdGlvbihhLFxuYixkKXthPWEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm5nLWJpbmRpbmdcIik7dmFyIGc9W107cihhLGZ1bmN0aW9uKGEpe3ZhciBjPWNhLmVsZW1lbnQoYSkuZGF0YShcIiRiaW5kaW5nXCIpO2MmJnIoYyxmdW5jdGlvbihjKXtkPyhuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrTWQoYikrXCIoXFxcXHN8XFxcXHx8JClcIikpLnRlc3QoYykmJmcucHVzaChhKTotMSE9PWMuaW5kZXhPZihiKSYmZy5wdXNoKGEpfSl9KTtyZXR1cm4gZ30sZmluZE1vZGVsczpmdW5jdGlvbihhLGIsZCl7Zm9yKHZhciBnPVtcIm5nLVwiLFwiZGF0YS1uZy1cIixcIm5nXFxcXDpcIl0saz0wO2s8Zy5sZW5ndGg7KytrKXt2YXIgaD1hLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIrZ1trXStcIm1vZGVsXCIrKGQ/XCI9XCI6XCIqPVwiKSsnXCInK2IrJ1wiXScpO2lmKGgubGVuZ3RoKXJldHVybiBofX0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZC51cmwoKX0sc2V0TG9jYXRpb246ZnVuY3Rpb24oYil7YiE9PWQudXJsKCkmJihkLnVybChiKSxhLiRkaWdlc3QoKSl9LFxud2hlblN0YWJsZTpmdW5jdGlvbihhKXtiLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHMoYSl9fX1dfWZ1bmN0aW9uIGZnKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkcVwiLFwiJCRxXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGEsYixkLGMsZSl7ZnVuY3Rpb24gZihmLGgsbCl7QihmKXx8KGw9aCxoPWYsZj1FKTt2YXIgbT1IYS5jYWxsKGFyZ3VtZW50cywzKSxwPXcobCkmJiFsLG49KHA/YzpkKS5kZWZlcigpLHM9bi5wcm9taXNlLHI7cj1iLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e24ucmVzb2x2ZShmLmFwcGx5KG51bGwsbSkpfWNhdGNoKGIpe24ucmVqZWN0KGIpLGUoYil9ZmluYWxseXtkZWxldGUgZ1tzLiQkdGltZW91dElkXX1wfHxhLiRhcHBseSgpfSxoLFwiJHRpbWVvdXRcIik7cy4kJHRpbWVvdXRJZD1yO2dbcl09bjtyZXR1cm4gc312YXIgZz17fTtmLmNhbmNlbD1mdW5jdGlvbihhKXtpZighYSlyZXR1cm4hMTtpZighYS5oYXNPd25Qcm9wZXJ0eShcIiQkdGltZW91dElkXCIpKXRocm93IFZnKFwiYmFkcHJvbVwiKTtcbmlmKCFnLmhhc093blByb3BlcnR5KGEuJCR0aW1lb3V0SWQpKXJldHVybiExO2E9YS4kJHRpbWVvdXRJZDt2YXIgYz1nW2FdLGQ9Yy5wcm9taXNlO2QuJCRzdGF0ZSYmKGQuJCRzdGF0ZS5wdXI9ITApO2MucmVqZWN0KFwiY2FuY2VsZWRcIik7ZGVsZXRlIGdbYV07cmV0dXJuIGIuZGVmZXIuY2FuY2VsKGEpfTtyZXR1cm4gZn1dfWZ1bmN0aW9uIGdhKGEpe2lmKCFBKGEpKXJldHVybiBhO0NhJiYoYWEuc2V0QXR0cmlidXRlKFwiaHJlZlwiLGEpLGE9YWEuaHJlZik7YWEuc2V0QXR0cmlidXRlKFwiaHJlZlwiLGEpO2E9YWEuaG9zdG5hbWU7IVdnJiYtMTxhLmluZGV4T2YoXCI6XCIpJiYoYT1cIltcIithK1wiXVwiKTtyZXR1cm57aHJlZjphYS5ocmVmLHByb3RvY29sOmFhLnByb3RvY29sP2FhLnByb3RvY29sLnJlcGxhY2UoLzokLyxcIlwiKTpcIlwiLGhvc3Q6YWEuaG9zdCxzZWFyY2g6YWEuc2VhcmNoP2FhLnNlYXJjaC5yZXBsYWNlKC9eXFw/LyxcIlwiKTpcIlwiLGhhc2g6YWEuaGFzaD9hYS5oYXNoLnJlcGxhY2UoL14jLyxcblwiXCIpOlwiXCIsaG9zdG5hbWU6YSxwb3J0OmFhLnBvcnQscGF0aG5hbWU6XCIvXCI9PT1hYS5wYXRobmFtZS5jaGFyQXQoMCk/YWEucGF0aG5hbWU6XCIvXCIrYWEucGF0aG5hbWV9fWZ1bmN0aW9uIEpnKGEpe3ZhciBiPVtPZF0uY29uY2F0KGEubWFwKGdhKSk7cmV0dXJuIGZ1bmN0aW9uKGEpe2E9Z2EoYSk7cmV0dXJuIGIuc29tZShCYy5iaW5kKG51bGwsYSkpfX1mdW5jdGlvbiBCYyhhLGIpe2E9Z2EoYSk7Yj1nYShiKTtyZXR1cm4gYS5wcm90b2NvbD09PWIucHJvdG9jb2wmJmEuaG9zdD09PWIuaG9zdH1mdW5jdGlvbiBnZygpe3RoaXMuJGdldD1pYShDKX1mdW5jdGlvbiBQZChhKXtmdW5jdGlvbiBiKGEpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpfWNhdGNoKGIpe3JldHVybiBhfX12YXIgZD1hWzBdfHx7fSxjPXt9LGU9XCJcIjtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYSxnLGssaCxsO3RyeXthPWQuY29va2llfHxcIlwifWNhdGNoKG0pe2E9XCJcIn1pZihhIT09ZSlmb3IoZT1hLGE9XG5lLnNwbGl0KFwiOyBcIiksYz17fSxrPTA7azxhLmxlbmd0aDtrKyspZz1hW2tdLGg9Zy5pbmRleE9mKFwiPVwiKSwwPGgmJihsPWIoZy5zdWJzdHJpbmcoMCxoKSkseihjW2xdKSYmKGNbbF09YihnLnN1YnN0cmluZyhoKzEpKSkpO3JldHVybiBjfX1mdW5jdGlvbiBrZygpe3RoaXMuJGdldD1QZH1mdW5jdGlvbiBkZChhKXtmdW5jdGlvbiBiKGQsYyl7aWYoRChkKSl7dmFyIGU9e307cihkLGZ1bmN0aW9uKGEsYyl7ZVtjXT1iKGMsYSl9KTtyZXR1cm4gZX1yZXR1cm4gYS5mYWN0b3J5KGQrXCJGaWx0ZXJcIixjKX10aGlzLnJlZ2lzdGVyPWI7dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5nZXQoYitcIkZpbHRlclwiKX19XTtiKFwiY3VycmVuY3lcIixRZCk7YihcImRhdGVcIixSZCk7YihcImZpbHRlclwiLFhnKTtiKFwianNvblwiLFlnKTtiKFwibGltaXRUb1wiLFpnKTtiKFwibG93ZXJjYXNlXCIsJGcpO2IoXCJudW1iZXJcIixTZCk7YihcIm9yZGVyQnlcIixcblRkKTtiKFwidXBwZXJjYXNlXCIsYWgpfWZ1bmN0aW9uIFhnKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixkLGMpe2lmKCF5YShhKSl7aWYobnVsbD09YSlyZXR1cm4gYTt0aHJvdyBGKFwiZmlsdGVyXCIpKFwibm90YXJyYXlcIixhKTt9Yz1jfHxcIiRcIjt2YXIgZTtzd2l0Y2goRGMoYikpe2Nhc2UgXCJmdW5jdGlvblwiOmJyZWFrO2Nhc2UgXCJib29sZWFuXCI6Y2FzZSBcIm51bGxcIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcInN0cmluZ1wiOmU9ITA7Y2FzZSBcIm9iamVjdFwiOmI9YmgoYixkLGMsZSk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gYX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGEsYil9fWZ1bmN0aW9uIGJoKGEsYixkLGMpe3ZhciBlPUQoYSkmJmQgaW4gYTshMD09PWI/Yj12YTpCKGIpfHwoYj1mdW5jdGlvbihhLGIpe2lmKHooYSkpcmV0dXJuITE7aWYobnVsbD09PWF8fG51bGw9PT1iKXJldHVybiBhPT09YjtpZihEKGIpfHxEKGEpJiYhYmMoYSkpcmV0dXJuITE7YT1LKFwiXCIrYSk7Yj1LKFwiXCIrXG5iKTtyZXR1cm4tMSE9PWEuaW5kZXhPZihiKX0pO3JldHVybiBmdW5jdGlvbihmKXtyZXR1cm4gZSYmIUQoZik/RmEoZixhW2RdLGIsZCwhMSk6RmEoZixhLGIsZCxjKX19ZnVuY3Rpb24gRmEoYSxiLGQsYyxlLGYpe3ZhciBnPURjKGEpLGs9RGMoYik7aWYoXCJzdHJpbmdcIj09PWsmJlwiIVwiPT09Yi5jaGFyQXQoMCkpcmV0dXJuIUZhKGEsYi5zdWJzdHJpbmcoMSksZCxjLGUpO2lmKEgoYSkpcmV0dXJuIGEuc29tZShmdW5jdGlvbihhKXtyZXR1cm4gRmEoYSxiLGQsYyxlKX0pO3N3aXRjaChnKXtjYXNlIFwib2JqZWN0XCI6dmFyIGg7aWYoZSl7Zm9yKGggaW4gYSlpZihoLmNoYXJBdCYmXCIkXCIhPT1oLmNoYXJBdCgwKSYmRmEoYVtoXSxiLGQsYywhMCkpcmV0dXJuITA7cmV0dXJuIGY/ITE6RmEoYSxiLGQsYywhMSl9aWYoXCJvYmplY3RcIj09PWspe2ZvcihoIGluIGIpaWYoZj1iW2hdLCFCKGYpJiYheihmKSYmKGc9aD09PWMsIUZhKGc/YTphW2hdLGYsZCxjLGcsZykpKXJldHVybiExO3JldHVybiEwfXJldHVybiBkKGEsXG5iKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4hMTtkZWZhdWx0OnJldHVybiBkKGEsYil9fWZ1bmN0aW9uIERjKGEpe3JldHVybiBudWxsPT09YT9cIm51bGxcIjp0eXBlb2YgYX1mdW5jdGlvbiBRZChhKXt2YXIgYj1hLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihhLGMsZSl7eihjKSYmKGM9Yi5DVVJSRU5DWV9TWU0pO3ooZSkmJihlPWIuUEFUVEVSTlNbMV0ubWF4RnJhYyk7dmFyIGY9Yz8vXFx1MDBBNC9nOi9cXHMqXFx1MDBBNFxccyovZztyZXR1cm4gbnVsbD09YT9hOlVkKGEsYi5QQVRURVJOU1sxXSxiLkdST1VQX1NFUCxiLkRFQ0lNQUxfU0VQLGUpLnJlcGxhY2UoZixjKX19ZnVuY3Rpb24gU2QoYSl7dmFyIGI9YS5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYSxjKXtyZXR1cm4gbnVsbD09YT9hOlVkKGEsYi5QQVRURVJOU1swXSxiLkdST1VQX1NFUCxiLkRFQ0lNQUxfU0VQLGMpfX1mdW5jdGlvbiBjaChhKXt2YXIgYj0wLGQsYyxlLGYsZzstMTwoYz1hLmluZGV4T2YoVmQpKSYmXG4oYT1hLnJlcGxhY2UoVmQsXCJcIikpOzA8KGU9YS5zZWFyY2goL2UvaSkpPygwPmMmJihjPWUpLGMrPSthLnNsaWNlKGUrMSksYT1hLnN1YnN0cmluZygwLGUpKTowPmMmJihjPWEubGVuZ3RoKTtmb3IoZT0wO2EuY2hhckF0KGUpPT09RWM7ZSsrKTtpZihlPT09KGc9YS5sZW5ndGgpKWQ9WzBdLGM9MTtlbHNle2ZvcihnLS07YS5jaGFyQXQoZyk9PT1FYzspZy0tO2MtPWU7ZD1bXTtmb3IoZj0wO2U8PWc7ZSsrLGYrKylkW2ZdPSthLmNoYXJBdChlKX1jPldkJiYoZD1kLnNwbGljZSgwLFdkLTEpLGI9Yy0xLGM9MSk7cmV0dXJue2Q6ZCxlOmIsaTpjfX1mdW5jdGlvbiBkaChhLGIsZCxjKXt2YXIgZT1hLmQsZj1lLmxlbmd0aC1hLmk7Yj16KGIpP01hdGgubWluKE1hdGgubWF4KGQsZiksYyk6K2I7ZD1iK2EuaTtjPWVbZF07aWYoMDxkKXtlLnNwbGljZShNYXRoLm1heChhLmksZCkpO2Zvcih2YXIgZz1kO2c8ZS5sZW5ndGg7ZysrKWVbZ109MH1lbHNlIGZvcihmPU1hdGgubWF4KDAsZiksYS5pPVxuMSxlLmxlbmd0aD1NYXRoLm1heCgxLGQ9YisxKSxlWzBdPTAsZz0xO2c8ZDtnKyspZVtnXT0wO2lmKDU8PWMpaWYoMD5kLTEpe2ZvcihjPTA7Yz5kO2MtLSllLnVuc2hpZnQoMCksYS5pKys7ZS51bnNoaWZ0KDEpO2EuaSsrfWVsc2UgZVtkLTFdKys7Zm9yKDtmPE1hdGgubWF4KDAsYik7ZisrKWUucHVzaCgwKTtpZihiPWUucmVkdWNlUmlnaHQoZnVuY3Rpb24oYSxiLGMsZCl7Yis9YTtkW2NdPWIlMTA7cmV0dXJuIE1hdGguZmxvb3IoYi8xMCl9LDApKWUudW5zaGlmdChiKSxhLmkrK31mdW5jdGlvbiBVZChhLGIsZCxjLGUpe2lmKCFBKGEpJiYhVyhhKXx8aXNOYU4oYSkpcmV0dXJuXCJcIjt2YXIgZj0haXNGaW5pdGUoYSksZz0hMSxrPU1hdGguYWJzKGEpK1wiXCIsaD1cIlwiO2lmKGYpaD1cIlxcdTIyMWVcIjtlbHNle2c9Y2goayk7ZGgoZyxlLGIubWluRnJhYyxiLm1heEZyYWMpO2g9Zy5kO2s9Zy5pO2U9Zy5lO2Y9W107Zm9yKGc9aC5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmIWJ9LFxuITApOzA+azspaC51bnNoaWZ0KDApLGsrKzswPGs/Zj1oLnNwbGljZShrLGgubGVuZ3RoKTooZj1oLGg9WzBdKTtrPVtdO2ZvcihoLmxlbmd0aD49Yi5sZ1NpemUmJmsudW5zaGlmdChoLnNwbGljZSgtYi5sZ1NpemUsaC5sZW5ndGgpLmpvaW4oXCJcIikpO2gubGVuZ3RoPmIuZ1NpemU7KWsudW5zaGlmdChoLnNwbGljZSgtYi5nU2l6ZSxoLmxlbmd0aCkuam9pbihcIlwiKSk7aC5sZW5ndGgmJmsudW5zaGlmdChoLmpvaW4oXCJcIikpO2g9ay5qb2luKGQpO2YubGVuZ3RoJiYoaCs9YytmLmpvaW4oXCJcIikpO2UmJihoKz1cImUrXCIrZSl9cmV0dXJuIDA+YSYmIWc/Yi5uZWdQcmUraCtiLm5lZ1N1ZjpiLnBvc1ByZStoK2IucG9zU3VmfWZ1bmN0aW9uIE9iKGEsYixkLGMpe3ZhciBlPVwiXCI7aWYoMD5hfHxjJiYwPj1hKWM/YT0tYSsxOihhPS1hLGU9XCItXCIpO2ZvcihhPVwiXCIrYTthLmxlbmd0aDxiOylhPUVjK2E7ZCYmKGE9YS5zdWJzdHIoYS5sZW5ndGgtYikpO3JldHVybiBlK2F9ZnVuY3Rpb24gZWEoYSxcbmIsZCxjLGUpe2Q9ZHx8MDtyZXR1cm4gZnVuY3Rpb24oZil7Zj1mW1wiZ2V0XCIrYV0oKTtpZigwPGR8fGY+LWQpZis9ZDswPT09ZiYmLTEyPT09ZCYmKGY9MTIpO3JldHVybiBPYihmLGIsYyxlKX19ZnVuY3Rpb24ga2IoYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUpe3ZhciBmPWNbXCJnZXRcIithXSgpLGc9dWIoKGQ/XCJTVEFOREFMT05FXCI6XCJcIikrKGI/XCJTSE9SVFwiOlwiXCIpK2EpO3JldHVybiBlW2ddW2ZdfX1mdW5jdGlvbiBYZChhKXt2YXIgYj0obmV3IERhdGUoYSwwLDEpKS5nZXREYXkoKTtyZXR1cm4gbmV3IERhdGUoYSwwLCg0Pj1iPzU6MTIpLWIpfWZ1bmN0aW9uIFlkKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgZD1YZChiLmdldEZ1bGxZZWFyKCkpO2I9K25ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkrKDQtYi5nZXREYXkoKSkpLStkO2I9MStNYXRoLnJvdW5kKGIvNjA0OEU1KTtyZXR1cm4gT2IoYixhKX19ZnVuY3Rpb24gRmMoYSxiKXtyZXR1cm4gMD49XG5hLmdldEZ1bGxZZWFyKCk/Yi5FUkFTWzBdOmIuRVJBU1sxXX1mdW5jdGlvbiBSZChhKXtmdW5jdGlvbiBiKGEpe3ZhciBiO2lmKGI9YS5tYXRjaChkKSl7YT1uZXcgRGF0ZSgwKTt2YXIgZj0wLGc9MCxrPWJbOF0/YS5zZXRVVENGdWxsWWVhcjphLnNldEZ1bGxZZWFyLGg9Yls4XT9hLnNldFVUQ0hvdXJzOmEuc2V0SG91cnM7Yls5XSYmKGY9ZmEoYls5XStiWzEwXSksZz1mYShiWzldK2JbMTFdKSk7ay5jYWxsKGEsZmEoYlsxXSksZmEoYlsyXSktMSxmYShiWzNdKSk7Zj1mYShiWzRdfHwwKS1mO2c9ZmEoYls1XXx8MCktZztrPWZhKGJbNl18fDApO2I9TWF0aC5yb3VuZCgxRTMqcGFyc2VGbG9hdChcIjAuXCIrKGJbN118fDApKSk7aC5jYWxsKGEsZixnLGssYil9cmV0dXJuIGF9dmFyIGQ9L14oXFxkezR9KS0/KFxcZFxcZCktPyhcXGRcXGQpKD86VChcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpcXC4oXFxkKykpPyk/KT8oWnwoWystXSkoXFxkXFxkKTo/KFxcZFxcZCkpPyk/JC87cmV0dXJuIGZ1bmN0aW9uKGMsXG5kLGYpe3ZhciBnPVwiXCIsaz1bXSxoLGw7ZD1kfHxcIm1lZGl1bURhdGVcIjtkPWEuREFURVRJTUVfRk9STUFUU1tkXXx8ZDtBKGMpJiYoYz1laC50ZXN0KGMpP2ZhKGMpOmIoYykpO1coYykmJihjPW5ldyBEYXRlKGMpKTtpZighaGEoYyl8fCFpc0Zpbml0ZShjLmdldFRpbWUoKSkpcmV0dXJuIGM7Zm9yKDtkOykobD1maC5leGVjKGQpKT8oaz1kYihrLGwsMSksZD1rLnBvcCgpKTooay5wdXNoKGQpLGQ9bnVsbCk7dmFyIG09Yy5nZXRUaW1lem9uZU9mZnNldCgpO2YmJihtPWVjKGYsbSksYz1mYyhjLGYsITApKTtyKGssZnVuY3Rpb24oYil7aD1naFtiXTtnKz1oP2goYyxhLkRBVEVUSU1FX0ZPUk1BVFMsbSk6XCInJ1wiPT09Yj9cIidcIjpiLnJlcGxhY2UoLyheJ3wnJCkvZyxcIlwiKS5yZXBsYWNlKC8nJy9nLFwiJ1wiKX0pO3JldHVybiBnfX1mdW5jdGlvbiBZZygpe3JldHVybiBmdW5jdGlvbihhLGIpe3ooYikmJihiPTIpO3JldHVybiBlYihhLGIpfX1mdW5jdGlvbiBaZygpe3JldHVybiBmdW5jdGlvbihhLFxuYixkKXtiPUluZmluaXR5PT09TWF0aC5hYnMoTnVtYmVyKGIpKT9OdW1iZXIoYik6ZmEoYik7aWYoWChiKSlyZXR1cm4gYTtXKGEpJiYoYT1hLnRvU3RyaW5nKCkpO2lmKCF5YShhKSlyZXR1cm4gYTtkPSFkfHxpc05hTihkKT8wOmZhKGQpO2Q9MD5kP01hdGgubWF4KDAsYS5sZW5ndGgrZCk6ZDtyZXR1cm4gMDw9Yj9HYyhhLGQsZCtiKTowPT09ZD9HYyhhLGIsYS5sZW5ndGgpOkdjKGEsTWF0aC5tYXgoMCxkK2IpLGQpfX1mdW5jdGlvbiBHYyhhLGIsZCl7cmV0dXJuIEEoYSk/YS5zbGljZShiLGQpOkhhLmNhbGwoYSxiLGQpfWZ1bmN0aW9uIFRkKGEpe2Z1bmN0aW9uIGIoYil7cmV0dXJuIGIubWFwKGZ1bmN0aW9uKGIpe3ZhciBjPTEsZD1UYTtpZihCKGIpKWQ9YjtlbHNlIGlmKEEoYikpe2lmKFwiK1wiPT09Yi5jaGFyQXQoMCl8fFwiLVwiPT09Yi5jaGFyQXQoMCkpYz1cIi1cIj09PWIuY2hhckF0KDApPy0xOjEsYj1iLnN1YnN0cmluZygxKTtpZihcIlwiIT09YiYmKGQ9YShiKSxkLmNvbnN0YW50KSl2YXIgZT1cbmQoKSxkPWZ1bmN0aW9uKGEpe3JldHVybiBhW2VdfX1yZXR1cm57Z2V0OmQsZGVzY2VuZGluZzpjfX0pfWZ1bmN0aW9uIGQoYSl7c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwibnVtYmVyXCI6Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwic3RyaW5nXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPTAsZD1hLnR5cGUsaD1iLnR5cGU7aWYoZD09PWgpe3ZhciBoPWEudmFsdWUsbD1iLnZhbHVlO1wic3RyaW5nXCI9PT1kPyhoPWgudG9Mb3dlckNhc2UoKSxsPWwudG9Mb3dlckNhc2UoKSk6XCJvYmplY3RcIj09PWQmJihEKGgpJiYoaD1hLmluZGV4KSxEKGwpJiYobD1iLmluZGV4KSk7aCE9PWwmJihjPWg8bD8tMToxKX1lbHNlIGM9XCJ1bmRlZmluZWRcIj09PWQ/MTpcInVuZGVmaW5lZFwiPT09aD8tMTpcIm51bGxcIj09PWQ/MTpcIm51bGxcIj09PWg/LTE6ZDxoPy0xOjE7cmV0dXJuIGN9cmV0dXJuIGZ1bmN0aW9uKGEsZixnLGspe2lmKG51bGw9PWEpcmV0dXJuIGE7aWYoIXlhKGEpKXRocm93IEYoXCJvcmRlckJ5XCIpKFwibm90YXJyYXlcIixcbmEpO0goZil8fChmPVtmXSk7MD09PWYubGVuZ3RoJiYoZj1bXCIrXCJdKTt2YXIgaD1iKGYpLGw9Zz8tMToxLG09QihrKT9rOmM7YT1BcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYSxmdW5jdGlvbihhLGIpe3JldHVybnt2YWx1ZTphLHRpZUJyZWFrZXI6e3ZhbHVlOmIsdHlwZTpcIm51bWJlclwiLGluZGV4OmJ9LHByZWRpY2F0ZVZhbHVlczpoLm1hcChmdW5jdGlvbihjKXt2YXIgZT1jLmdldChhKTtjPXR5cGVvZiBlO2lmKG51bGw9PT1lKWM9XCJudWxsXCI7ZWxzZSBpZihcIm9iamVjdFwiPT09YylhOntpZihCKGUudmFsdWVPZikmJihlPWUudmFsdWVPZigpLGQoZSkpKWJyZWFrIGE7YmMoZSkmJihlPWUudG9TdHJpbmcoKSxkKGUpKX1yZXR1cm57dmFsdWU6ZSx0eXBlOmMsaW5kZXg6Yn19KX19KTthLnNvcnQoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQ9MCxlPWgubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPW0oYS5wcmVkaWNhdGVWYWx1ZXNbZF0sYi5wcmVkaWNhdGVWYWx1ZXNbZF0pO2lmKGYpcmV0dXJuIGYqXG5oW2RdLmRlc2NlbmRpbmcqbH1yZXR1cm4obShhLnRpZUJyZWFrZXIsYi50aWVCcmVha2VyKXx8YyhhLnRpZUJyZWFrZXIsYi50aWVCcmVha2VyKSkqbH0pO3JldHVybiBhPWEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlfSl9fWZ1bmN0aW9uIFJhKGEpe0IoYSkmJihhPXtsaW5rOmF9KTthLnJlc3RyaWN0PWEucmVzdHJpY3R8fFwiQUNcIjtyZXR1cm4gaWEoYSl9ZnVuY3Rpb24gUGIoYSxiLGQsYyxlKXt0aGlzLiQkY29udHJvbHM9W107dGhpcy4kZXJyb3I9e307dGhpcy4kJHN1Y2Nlc3M9e307dGhpcy4kcGVuZGluZz12b2lkIDA7dGhpcy4kbmFtZT1lKGIubmFtZXx8Yi5uZ0Zvcm18fFwiXCIpKGQpO3RoaXMuJGRpcnR5PSExO3RoaXMuJHZhbGlkPXRoaXMuJHByaXN0aW5lPSEwO3RoaXMuJHN1Ym1pdHRlZD10aGlzLiRpbnZhbGlkPSExO3RoaXMuJCRwYXJlbnRGb3JtPWxiO3RoaXMuJCRlbGVtZW50PWE7dGhpcy4kJGFuaW1hdGU9YztaZCh0aGlzKX1mdW5jdGlvbiBaZChhKXthLiQkY2xhc3NDYWNoZT1cbnt9O2EuJCRjbGFzc0NhY2hlWyRkXT0hKGEuJCRjbGFzc0NhY2hlW21iXT1hLiQkZWxlbWVudC5oYXNDbGFzcyhtYikpfWZ1bmN0aW9uIGFlKGEpe2Z1bmN0aW9uIGIoYSxiLGMpe2MmJiFhLiQkY2xhc3NDYWNoZVtiXT8oYS4kJGFuaW1hdGUuYWRkQ2xhc3MoYS4kJGVsZW1lbnQsYiksYS4kJGNsYXNzQ2FjaGVbYl09ITApOiFjJiZhLiQkY2xhc3NDYWNoZVtiXSYmKGEuJCRhbmltYXRlLnJlbW92ZUNsYXNzKGEuJCRlbGVtZW50LGIpLGEuJCRjbGFzc0NhY2hlW2JdPSExKX1mdW5jdGlvbiBkKGEsYyxkKXtjPWM/XCItXCIrVmMoYyxcIi1cIik6XCJcIjtiKGEsbWIrYywhMD09PWQpO2IoYSwkZCtjLCExPT09ZCl9dmFyIGM9YS5zZXQsZT1hLnVuc2V0O2EuY2xhenoucHJvdG90eXBlLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihhLGcsayl7eihnKT8odGhpcy4kcGVuZGluZ3x8KHRoaXMuJHBlbmRpbmc9e30pLGModGhpcy4kcGVuZGluZyxhLGspKToodGhpcy4kcGVuZGluZyYmZSh0aGlzLiRwZW5kaW5nLFxuYSxrKSxiZSh0aGlzLiRwZW5kaW5nKSYmKHRoaXMuJHBlbmRpbmc9dm9pZCAwKSk7R2EoZyk/Zz8oZSh0aGlzLiRlcnJvcixhLGspLGModGhpcy4kJHN1Y2Nlc3MsYSxrKSk6KGModGhpcy4kZXJyb3IsYSxrKSxlKHRoaXMuJCRzdWNjZXNzLGEsaykpOihlKHRoaXMuJGVycm9yLGEsayksZSh0aGlzLiQkc3VjY2VzcyxhLGspKTt0aGlzLiRwZW5kaW5nPyhiKHRoaXMsXCJuZy1wZW5kaW5nXCIsITApLHRoaXMuJHZhbGlkPXRoaXMuJGludmFsaWQ9dm9pZCAwLGQodGhpcyxcIlwiLG51bGwpKTooYih0aGlzLFwibmctcGVuZGluZ1wiLCExKSx0aGlzLiR2YWxpZD1iZSh0aGlzLiRlcnJvciksdGhpcy4kaW52YWxpZD0hdGhpcy4kdmFsaWQsZCh0aGlzLFwiXCIsdGhpcy4kdmFsaWQpKTtnPXRoaXMuJHBlbmRpbmcmJnRoaXMuJHBlbmRpbmdbYV0/dm9pZCAwOnRoaXMuJGVycm9yW2FdPyExOnRoaXMuJCRzdWNjZXNzW2FdPyEwOm51bGw7ZCh0aGlzLGEsZyk7dGhpcy4kJHBhcmVudEZvcm0uJHNldFZhbGlkaXR5KGEsXG5nLHRoaXMpfX1mdW5jdGlvbiBiZShhKXtpZihhKWZvcih2YXIgYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gSGMoYSl7YS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGIpe3JldHVybiBhLiRpc0VtcHR5KGIpP2I6Yi50b1N0cmluZygpfSl9ZnVuY3Rpb24gU2EoYSxiLGQsYyxlLGYpe3ZhciBnPUsoYlswXS50eXBlKTtpZighZS5hbmRyb2lkKXt2YXIgaz0hMTtiLm9uKFwiY29tcG9zaXRpb25zdGFydFwiLGZ1bmN0aW9uKCl7az0hMH0pO2Iub24oXCJjb21wb3NpdGlvbnVwZGF0ZVwiLGZ1bmN0aW9uKGEpe2lmKHooYS5kYXRhKXx8XCJcIj09PWEuZGF0YSlrPSExfSk7Yi5vbihcImNvbXBvc2l0aW9uZW5kXCIsZnVuY3Rpb24oKXtrPSExO2woKX0pfXZhciBoLGw9ZnVuY3Rpb24oYSl7aCYmKGYuZGVmZXIuY2FuY2VsKGgpLGg9bnVsbCk7aWYoIWspe3ZhciBlPWIudmFsKCk7YT1hJiZhLnR5cGU7XCJwYXNzd29yZFwiPT09Z3x8ZC5uZ1RyaW0mJlxuXCJmYWxzZVwiPT09ZC5uZ1RyaW18fChlPVUoZSkpOyhjLiR2aWV3VmFsdWUhPT1lfHxcIlwiPT09ZSYmYy4kJGhhc05hdGl2ZVZhbGlkYXRvcnMpJiZjLiRzZXRWaWV3VmFsdWUoZSxhKX19O2lmKGUuaGFzRXZlbnQoXCJpbnB1dFwiKSliLm9uKFwiaW5wdXRcIixsKTtlbHNle3ZhciBtPWZ1bmN0aW9uKGEsYixjKXtofHwoaD1mLmRlZmVyKGZ1bmN0aW9uKCl7aD1udWxsO2ImJmIudmFsdWU9PT1jfHxsKGEpfSkpfTtiLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBiPWEua2V5Q29kZTs5MT09PWJ8fDE1PGImJjE5PmJ8fDM3PD1iJiY0MD49Ynx8bShhLHRoaXMsdGhpcy52YWx1ZSl9KTtpZihlLmhhc0V2ZW50KFwicGFzdGVcIikpYi5vbihcInBhc3RlIGN1dCBkcm9wXCIsbSl9Yi5vbihcImNoYW5nZVwiLGwpO2lmKGNlW2ddJiZjLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyYmZz09PWQudHlwZSliLm9uKFwia2V5ZG93biB3aGVlbCBtb3VzZWRvd25cIixmdW5jdGlvbihhKXtpZighaCl7dmFyIGI9dGhpcy52YWxpZGl0eSxcbmM9Yi5iYWRJbnB1dCxkPWIudHlwZU1pc21hdGNoO2g9Zi5kZWZlcihmdW5jdGlvbigpe2g9bnVsbDtiLmJhZElucHV0PT09YyYmYi50eXBlTWlzbWF0Y2g9PT1kfHxsKGEpfSl9fSk7Yy4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9Yy4kaXNFbXB0eShjLiR2aWV3VmFsdWUpP1wiXCI6Yy4kdmlld1ZhbHVlO2IudmFsKCkhPT1hJiZiLnZhbChhKX19ZnVuY3Rpb24gUWIoYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjKXt2YXIgZSxmO2lmKGhhKGQpKXJldHVybiBkO2lmKEEoZCkpeydcIic9PT1kLmNoYXJBdCgwKSYmJ1wiJz09PWQuY2hhckF0KGQubGVuZ3RoLTEpJiYoZD1kLnN1YnN0cmluZygxLGQubGVuZ3RoLTEpKTtpZihoaC50ZXN0KGQpKXJldHVybiBuZXcgRGF0ZShkKTthLmxhc3RJbmRleD0wO2lmKGU9YS5leGVjKGQpKXJldHVybiBlLnNoaWZ0KCksZj1jP3t5eXl5OmMuZ2V0RnVsbFllYXIoKSxNTTpjLmdldE1vbnRoKCkrMSxkZDpjLmdldERhdGUoKSxISDpjLmdldEhvdXJzKCksbW06Yy5nZXRNaW51dGVzKCksXG5zczpjLmdldFNlY29uZHMoKSxzc3M6Yy5nZXRNaWxsaXNlY29uZHMoKS8xRTN9Ont5eXl5OjE5NzAsTU06MSxkZDoxLEhIOjAsbW06MCxzczowLHNzczowfSxyKGUsZnVuY3Rpb24oYSxjKXtjPGIubGVuZ3RoJiYoZltiW2NdXT0rYSl9KSxlPW5ldyBEYXRlKGYueXl5eSxmLk1NLTEsZi5kZCxmLkhILGYubW0sZi5zc3x8MCwxRTMqZi5zc3N8fDApLDEwMD5mLnl5eXkmJmUuc2V0RnVsbFllYXIoZi55eXl5KSxlfXJldHVybiBOYU59fWZ1bmN0aW9uIG5iKGEsYixkLGMpe3JldHVybiBmdW5jdGlvbihlLGYsZyxrLGgsbCxtLHApe2Z1bmN0aW9uIG4oYSl7cmV0dXJuIGEmJiEoYS5nZXRUaW1lJiZhLmdldFRpbWUoKSE9PWEuZ2V0VGltZSgpKX1mdW5jdGlvbiBzKGEpe3JldHVybiB3KGEpJiYhaGEoYSk/cihhKXx8dm9pZCAwOmF9ZnVuY3Rpb24gcihhLGIpe3ZhciBjPWsuJG9wdGlvbnMuZ2V0T3B0aW9uKFwidGltZXpvbmVcIik7diYmdiE9PWMmJihiPVNjKGIsZWModikpKTt2YXIgZT1kKGEsXG5iKTshaXNOYU4oZSkmJmMmJihlPWZjKGUsYykpO3JldHVybiBlfUljKGUsZixnLGssYSk7U2EoZSxmLGcsayxoLGwpO3ZhciB0PVwidGltZVwiPT09YXx8XCJkYXRldGltZWxvY2FsXCI9PT1hLHEsdjtrLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYyl7aWYoay4kaXNFbXB0eShjKSlyZXR1cm4gbnVsbDtpZihiLnRlc3QoYykpcmV0dXJuIHIoYyxxKTtrLiQkcGFyc2VyTmFtZT1hfSk7ay4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKGEmJiFoYShhKSl0aHJvdyBvYihcImRhdGVmbXRcIixhKTtpZihuKGEpKXtxPWE7dmFyIGI9ay4kb3B0aW9ucy5nZXRPcHRpb24oXCJ0aW1lem9uZVwiKTtiJiYodj1iLHE9ZmMocSxiLCEwKSk7dmFyIGQ9Yzt0JiZBKGsuJG9wdGlvbnMuZ2V0T3B0aW9uKFwidGltZVNlY29uZHNGb3JtYXRcIikpJiYoZD1jLnJlcGxhY2UoXCJzcy5zc3NcIixrLiRvcHRpb25zLmdldE9wdGlvbihcInRpbWVTZWNvbmRzRm9ybWF0XCIpKS5yZXBsYWNlKC86JC8sXCJcIikpO2E9bShcImRhdGVcIikoYSxcbmQsYik7dCYmay4kb3B0aW9ucy5nZXRPcHRpb24oXCJ0aW1lU3RyaXBaZXJvU2Vjb25kc1wiKSYmKGE9YS5yZXBsYWNlKC8oPzo6MDApPyg/OlxcLjAwMCk/JC8sXCJcIikpO3JldHVybiBhfXY9cT1udWxsO3JldHVyblwiXCJ9KTtpZih3KGcubWluKXx8Zy5uZ01pbil7dmFyIHg9Zy5taW58fHAoZy5uZ01pbikoZSksQj1zKHgpO2suJHZhbGlkYXRvcnMubWluPWZ1bmN0aW9uKGEpe3JldHVybiFuKGEpfHx6KEIpfHxkKGEpPj1CfTtnLiRvYnNlcnZlKFwibWluXCIsZnVuY3Rpb24oYSl7YSE9PXgmJihCPXMoYSkseD1hLGsuJHZhbGlkYXRlKCkpfSl9aWYodyhnLm1heCl8fGcubmdNYXgpe3ZhciB5PWcubWF4fHxwKGcubmdNYXgpKGUpLEo9cyh5KTtrLiR2YWxpZGF0b3JzLm1heD1mdW5jdGlvbihhKXtyZXR1cm4hbihhKXx8eihKKXx8ZChhKTw9Sn07Zy4kb2JzZXJ2ZShcIm1heFwiLGZ1bmN0aW9uKGEpe2EhPT15JiYoSj1zKGEpLHk9YSxrLiR2YWxpZGF0ZSgpKX0pfX19ZnVuY3Rpb24gSWMoYSxiLGQsXG5jLGUpeyhjLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz1EKGJbMF0udmFsaWRpdHkpKSYmYy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3ZhciBkPWIucHJvcChcInZhbGlkaXR5XCIpfHx7fTtpZihkLmJhZElucHV0fHxkLnR5cGVNaXNtYXRjaCljLiQkcGFyc2VyTmFtZT1lO2Vsc2UgcmV0dXJuIGF9KX1mdW5jdGlvbiBkZShhKXthLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYil7aWYoYS4kaXNFbXB0eShiKSlyZXR1cm4gbnVsbDtpZihpaC50ZXN0KGIpKXJldHVybiBwYXJzZUZsb2F0KGIpO2EuJCRwYXJzZXJOYW1lPVwibnVtYmVyXCJ9KTthLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYil7aWYoIWEuJGlzRW1wdHkoYikpe2lmKCFXKGIpKXRocm93IG9iKFwibnVtZm10XCIsYik7Yj1iLnRvU3RyaW5nKCl9cmV0dXJuIGJ9KX1mdW5jdGlvbiBuYShhKXt3KGEpJiYhVyhhKSYmKGE9cGFyc2VGbG9hdChhKSk7cmV0dXJuIFgoYSk/dm9pZCAwOmF9ZnVuY3Rpb24gSmMoYSl7dmFyIGI9YS50b1N0cmluZygpLFxuZD1iLmluZGV4T2YoXCIuXCIpO3JldHVybi0xPT09ZD8tMTxhJiYxPmEmJihhPS9lLShcXGQrKSQvLmV4ZWMoYikpP051bWJlcihhWzFdKTowOmIubGVuZ3RoLWQtMX1mdW5jdGlvbiBlZShhLGIsZCl7YT1OdW1iZXIoYSk7dmFyIGM9KGF8MCkhPT1hLGU9KGJ8MCkhPT1iLGY9KGR8MCkhPT1kO2lmKGN8fGV8fGYpe3ZhciBnPWM/SmMoYSk6MCxrPWU/SmMoYik6MCxoPWY/SmMoZCk6MCxnPU1hdGgubWF4KGcsayxoKSxnPU1hdGgucG93KDEwLGcpO2EqPWc7Yio9ZztkKj1nO2MmJihhPU1hdGgucm91bmQoYSkpO2UmJihiPU1hdGgucm91bmQoYikpO2YmJihkPU1hdGgucm91bmQoZCkpfXJldHVybiAwPT09KGEtYiklZH1mdW5jdGlvbiBmZShhLGIsZCxjLGUpe2lmKHcoYykpe2E9YShjKTtpZighYS5jb25zdGFudCl0aHJvdyBvYihcImNvbnN0ZXhwclwiLGQsYyk7cmV0dXJuIGEoYil9cmV0dXJuIGV9ZnVuY3Rpb24gS2MoYSxiKXtmdW5jdGlvbiBkKGEsYil7aWYoIWF8fCFhLmxlbmd0aClyZXR1cm5bXTtcbmlmKCFifHwhYi5sZW5ndGgpcmV0dXJuIGE7dmFyIGM9W10sZD0wO2E6Zm9yKDtkPGEubGVuZ3RoO2QrKyl7Zm9yKHZhciBlPWFbZF0sbT0wO208Yi5sZW5ndGg7bSsrKWlmKGU9PT1iW21dKWNvbnRpbnVlIGE7Yy5wdXNoKGUpfXJldHVybiBjfWZ1bmN0aW9uIGMoYSl7aWYoIWEpcmV0dXJuIGE7dmFyIGI9YTtIKGEpP2I9YS5tYXAoYykuam9pbihcIiBcIik6RChhKT9iPU9iamVjdC5rZXlzKGEpLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm4gYVtiXX0pLmpvaW4oXCIgXCIpOkEoYSl8fChiPWErXCJcIik7cmV0dXJuIGJ9YT1cIm5nQ2xhc3NcIithO3ZhciBlO3JldHVybltcIiRwYXJzZVwiLGZ1bmN0aW9uKGYpe3JldHVybntyZXN0cmljdDpcIkFDXCIsbGluazpmdW5jdGlvbihnLGssaCl7ZnVuY3Rpb24gbChhLGIpe3ZhciBjPVtdO3IoYSxmdW5jdGlvbihhKXtpZigwPGJ8fHBbYV0pcFthXT0ocFthXXx8MCkrYixwW2FdPT09KygwPGIpJiZjLnB1c2goYSl9KTtyZXR1cm4gYy5qb2luKFwiIFwiKX1mdW5jdGlvbiBtKGEpe2lmKGE9PT1cbmIpe3ZhciBjPXMsYz1sKGMmJmMuc3BsaXQoXCIgXCIpLDEpO2guJGFkZENsYXNzKGMpfWVsc2UgYz1zLGM9bChjJiZjLnNwbGl0KFwiIFwiKSwtMSksaC4kcmVtb3ZlQ2xhc3MoYyk7bj1hfXZhciBwPWsuZGF0YShcIiRjbGFzc0NvdW50c1wiKSxuPSEwLHM7cHx8KHA9VCgpLGsuZGF0YShcIiRjbGFzc0NvdW50c1wiLHApKTtcIm5nQ2xhc3NcIiE9PWEmJihlfHwoZT1mKFwiJGluZGV4XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEmMX0pKSxnLiR3YXRjaChlLG0pKTtnLiR3YXRjaChmKGhbYV0sYyksZnVuY3Rpb24oYSl7aWYobj09PWIpe3ZhciBjPXMmJnMuc3BsaXQoXCIgXCIpLGU9YSYmYS5zcGxpdChcIiBcIiksZj1kKGMsZSksYz1kKGUsYyksZj1sKGYsLTEpLGM9bChjLDEpO2guJGFkZENsYXNzKGMpO2guJHJlbW92ZUNsYXNzKGYpfXM9YX0pfX19XX1mdW5jdGlvbiBxZChhLGIsZCxjLGUsZil7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLGNvbXBpbGU6ZnVuY3Rpb24oZyxrKXt2YXIgaD1hKGtbY10pO3JldHVybiBmdW5jdGlvbihhLFxuYyl7Yy5vbihlLGZ1bmN0aW9uKGMpe3ZhciBlPWZ1bmN0aW9uKCl7aChhLHskZXZlbnQ6Y30pfTtpZihiLiQkcGhhc2UpaWYoZilhLiRldmFsQXN5bmMoZSk7ZWxzZSB0cnl7ZSgpfWNhdGNoKGcpe2QoZyl9ZWxzZSBhLiRhcHBseShlKX0pfX19fWZ1bmN0aW9uIFJiKGEsYixkLGMsZSxmLGcsayxoKXt0aGlzLiRtb2RlbFZhbHVlPXRoaXMuJHZpZXdWYWx1ZT1OdW1iZXIuTmFOO3RoaXMuJCRyYXdNb2RlbFZhbHVlPXZvaWQgMDt0aGlzLiR2YWxpZGF0b3JzPXt9O3RoaXMuJGFzeW5jVmFsaWRhdG9ycz17fTt0aGlzLiRwYXJzZXJzPVtdO3RoaXMuJGZvcm1hdHRlcnM9W107dGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycz1bXTt0aGlzLiR1bnRvdWNoZWQ9ITA7dGhpcy4kdG91Y2hlZD0hMTt0aGlzLiRwcmlzdGluZT0hMDt0aGlzLiRkaXJ0eT0hMTt0aGlzLiR2YWxpZD0hMDt0aGlzLiRpbnZhbGlkPSExO3RoaXMuJGVycm9yPXt9O3RoaXMuJCRzdWNjZXNzPXt9O3RoaXMuJHBlbmRpbmc9XG52b2lkIDA7dGhpcy4kbmFtZT1oKGQubmFtZXx8XCJcIiwhMSkoYSk7dGhpcy4kJHBhcmVudEZvcm09bGI7dGhpcy4kb3B0aW9ucz1TYjt0aGlzLiQkdXBkYXRlRXZlbnRzPVwiXCI7dGhpcy4kJHVwZGF0ZUV2ZW50SGFuZGxlcj10aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyLmJpbmQodGhpcyk7dGhpcy4kJHBhcnNlZE5nTW9kZWw9ZShkLm5nTW9kZWwpO3RoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduPXRoaXMuJCRwYXJzZWROZ01vZGVsLmFzc2lnbjt0aGlzLiQkbmdNb2RlbEdldD10aGlzLiQkcGFyc2VkTmdNb2RlbDt0aGlzLiQkbmdNb2RlbFNldD10aGlzLiQkcGFyc2VkTmdNb2RlbEFzc2lnbjt0aGlzLiQkcGVuZGluZ0RlYm91bmNlPW51bGw7dGhpcy4kJHBhcnNlclZhbGlkPXZvaWQgMDt0aGlzLiQkcGFyc2VyTmFtZT1cInBhcnNlXCI7dGhpcy4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQ9MDt0aGlzLiQkc2NvcGU9YTt0aGlzLiQkcm9vdFNjb3BlPWEuJHJvb3Q7dGhpcy4kJGF0dHI9ZDtcbnRoaXMuJCRlbGVtZW50PWM7dGhpcy4kJGFuaW1hdGU9Zjt0aGlzLiQkdGltZW91dD1nO3RoaXMuJCRwYXJzZT1lO3RoaXMuJCRxPWs7dGhpcy4kJGV4Y2VwdGlvbkhhbmRsZXI9YjtaZCh0aGlzKTtqaCh0aGlzKX1mdW5jdGlvbiBqaChhKXthLiQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKGIpe2I9YS4kJG5nTW9kZWxHZXQoYik7Yj09PWEuJG1vZGVsVmFsdWV8fGEuJG1vZGVsVmFsdWUhPT1hLiRtb2RlbFZhbHVlJiZiIT09Ynx8YS4kJHNldE1vZGVsVmFsdWUoYik7cmV0dXJuIGJ9KX1mdW5jdGlvbiBMYyhhKXt0aGlzLiQkb3B0aW9ucz1hfWZ1bmN0aW9uIGdlKGEsYil7cihiLGZ1bmN0aW9uKGIsYyl7dyhhW2NdKXx8KGFbY109Yil9KX1mdW5jdGlvbiBPYShhLGIpe2EucHJvcChcInNlbGVjdGVkXCIsYik7YS5hdHRyKFwic2VsZWN0ZWRcIixiKX1mdW5jdGlvbiBoZShhLGIsZCl7aWYoYSl7QShhKSYmKGE9bmV3IFJlZ0V4cChcIl5cIithK1wiJFwiKSk7aWYoIWEudGVzdCl0aHJvdyBGKFwibmdQYXR0ZXJuXCIpKFwibm9yZWdleHBcIixcbmIsYSx6YShkKSk7cmV0dXJuIGF9fWZ1bmN0aW9uIFRiKGEpe2E9ZmEoYSk7cmV0dXJuIFgoYSk/LTE6YX12YXIgV2I9e29iamVjdE1heERlcHRoOjUsdXJsRXJyb3JQYXJhbXNFbmFibGVkOiEwfSxpZT0vXlxcLyguKylcXC8oW2Etel0qKSQvLHRhPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksSz1mdW5jdGlvbihhKXtyZXR1cm4gQShhKT9hLnRvTG93ZXJDYXNlKCk6YX0sdWI9ZnVuY3Rpb24oYSl7cmV0dXJuIEEoYSk/YS50b1VwcGVyQ2FzZSgpOmF9LENhLHgscmIsSGE9W10uc2xpY2UsRmc9W10uc3BsaWNlLGtoPVtdLnB1c2gsbGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxQYz1PYmplY3QuZ2V0UHJvdG90eXBlT2YscGE9RihcIm5nXCIpLGNhPUMuYW5ndWxhcnx8KEMuYW5ndWxhcj17fSksa2MscGI9MDtDYT1DLmRvY3VtZW50LmRvY3VtZW50TW9kZTt2YXIgWD1OdW1iZXIuaXNOYU58fGZ1bmN0aW9uKGEpe3JldHVybiBhIT09YX07RS4kaW5qZWN0PVtdO1RhLiRpbmplY3Q9XG5bXTt2YXIgdmU9L15cXFtvYmplY3QgKD86VWludDh8VWludDhDbGFtcGVkfFVpbnQxNnxVaW50MzJ8SW50OHxJbnQxNnxJbnQzMnxGbG9hdDMyfEZsb2F0NjQpQXJyYXldJC8sVT1mdW5jdGlvbihhKXtyZXR1cm4gQShhKT9hLnRyaW0oKTphfSxNZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oWy0oKVtcXF17fSs/Ki4kXnwsOiM8IVxcXFxdKS9nLFwiXFxcXCQxXCIpLnJlcGxhY2UoL1xceDA4L2csXCJcXFxceDA4XCIpfSxBYT1mdW5jdGlvbigpe2lmKCF3KEFhLnJ1bGVzKSl7dmFyIGE9Qy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25nLWNzcF1cIil8fEMuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLW5nLWNzcF1cIik7aWYoYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoXCJuZy1jc3BcIil8fGEuZ2V0QXR0cmlidXRlKFwiZGF0YS1uZy1jc3BcIik7QWEucnVsZXM9e25vVW5zYWZlRXZhbDohYnx8LTEhPT1iLmluZGV4T2YoXCJuby11bnNhZmUtZXZhbFwiKSxub0lubGluZVN0eWxlOiFifHwtMSE9PVxuYi5pbmRleE9mKFwibm8taW5saW5lLXN0eWxlXCIpfX1lbHNle2E9QWE7dHJ5e25ldyBGdW5jdGlvbihcIlwiKSxiPSExfWNhdGNoKGQpe2I9ITB9YS5ydWxlcz17bm9VbnNhZmVFdmFsOmIsbm9JbmxpbmVTdHlsZTohMX19fXJldHVybiBBYS5ydWxlc30scWI9ZnVuY3Rpb24oKXtpZih3KHFiLm5hbWVfKSlyZXR1cm4gcWIubmFtZV87dmFyIGEsYixkPVFhLmxlbmd0aCxjLGU7Zm9yKGI9MDtiPGQ7KytiKWlmKGM9UWFbYl0sYT1DLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbXCIrYy5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIikrXCJqcV1cIikpe2U9YS5nZXRBdHRyaWJ1dGUoYytcImpxXCIpO2JyZWFrfXJldHVybiBxYi5uYW1lXz1lfSx4ZT0vOi9nLFFhPVtcIm5nLVwiLFwiZGF0YS1uZy1cIixcIm5nOlwiLFwieC1uZy1cIl0sQmU9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jdXJyZW50U2NyaXB0O2lmKCFiKXJldHVybiEwO2lmKCEoYiBpbnN0YW5jZW9mIEMuSFRNTFNjcmlwdEVsZW1lbnR8fGIgaW5zdGFuY2VvZiBDLlNWR1NjcmlwdEVsZW1lbnQpKXJldHVybiExO1xuYj1iLmF0dHJpYnV0ZXM7cmV0dXJuW2IuZ2V0TmFtZWRJdGVtKFwic3JjXCIpLGIuZ2V0TmFtZWRJdGVtKFwiaHJlZlwiKSxiLmdldE5hbWVkSXRlbShcInhsaW5rOmhyZWZcIildLmV2ZXJ5KGZ1bmN0aW9uKGIpe2lmKCFiKXJldHVybiEwO2lmKCFiLnZhbHVlKXJldHVybiExO3ZhciBjPWEuY3JlYXRlRWxlbWVudChcImFcIik7Yy5ocmVmPWIudmFsdWU7aWYoYS5sb2NhdGlvbi5vcmlnaW49PT1jLm9yaWdpbilyZXR1cm4hMDtzd2l0Y2goYy5wcm90b2NvbCl7Y2FzZSBcImh0dHA6XCI6Y2FzZSBcImh0dHBzOlwiOmNhc2UgXCJmdHA6XCI6Y2FzZSBcImJsb2I6XCI6Y2FzZSBcImZpbGU6XCI6Y2FzZSBcImRhdGE6XCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19KX0oQy5kb2N1bWVudCksRWU9L1tBLVpdL2csV2M9ITEsUGE9MyxLZT17ZnVsbDpcIjEuNy44XCIsbWFqb3I6MSxtaW5vcjo3LGRvdDo4LGNvZGVOYW1lOlwiZW50aHVzaWFzdGljLW9ibGF0aW9uXCJ9O1kuZXhwYW5kbz1cIm5nMzM5XCI7dmFyIEthPVkuY2FjaGU9XG57fSxwZz0xO1kuX2RhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXXx8e319O3ZhciBsZz0vLShbYS16XSkvZyxsaD0vXi1tcy0vLEFiPXttb3VzZWxlYXZlOlwibW91c2VvdXRcIixtb3VzZWVudGVyOlwibW91c2VvdmVyXCJ9LG5jPUYoXCJqcUxpdGVcIiksb2c9L148KFtcXHctXSspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLG1jPS88fCYjP1xcdys7LyxtZz0vPChbXFx3Oi1dKykvLG5nPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6LV0rKVtePl0qKVxcLz4vZ2ksb2E9e29wdGlvbjpbMSwnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JyxcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcblwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O29hLm9wdGdyb3VwPW9hLm9wdGlvbjtvYS50Ym9keT1vYS50Zm9vdD1vYS5jb2xncm91cD1vYS5jYXB0aW9uPW9hLnRoZWFkO29hLnRoPW9hLnRkO3ZhciB1Zz1DLk5vZGUucHJvdG90eXBlLmNvbnRhaW5zfHxmdW5jdGlvbihhKXtyZXR1cm4hISh0aGlzLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpJjE2KX0sV2E9WS5wcm90b3R5cGU9e3JlYWR5OmZkLHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGE9W107cih0aGlzLGZ1bmN0aW9uKGIpe2EucHVzaChcIlwiK2IpfSk7cmV0dXJuXCJbXCIrYS5qb2luKFwiLCBcIikrXCJdXCJ9LGVxOmZ1bmN0aW9uKGEpe3JldHVybiAwPD1hP3godGhpc1thXSk6eCh0aGlzW3RoaXMubGVuZ3RoK2FdKX0sbGVuZ3RoOjAscHVzaDpraCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0sR2I9e307cihcIm11bHRpcGxlIHNlbGVjdGVkIGNoZWNrZWQgZGlzYWJsZWQgcmVhZE9ubHkgcmVxdWlyZWQgb3BlblwiLnNwbGl0KFwiIFwiKSxcbmZ1bmN0aW9uKGEpe0diW0soYSldPWF9KTt2YXIgbWQ9e307cihcImlucHV0IHNlbGVjdCBvcHRpb24gdGV4dGFyZWEgYnV0dG9uIGZvcm0gZGV0YWlsc1wiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXttZFthXT0hMH0pO3ZhciB0ZD17bmdNaW5sZW5ndGg6XCJtaW5sZW5ndGhcIixuZ01heGxlbmd0aDpcIm1heGxlbmd0aFwiLG5nTWluOlwibWluXCIsbmdNYXg6XCJtYXhcIixuZ1BhdHRlcm46XCJwYXR0ZXJuXCIsbmdTdGVwOlwic3RlcFwifTtyKHtkYXRhOnJjLHJlbW92ZURhdGE6cWMsaGFzRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gS2FbYS5uZzMzOV0pcmV0dXJuITA7cmV0dXJuITF9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxkPWEubGVuZ3RoO2I8ZDtiKyspcWMoYVtiXSksaWQoYVtiXSl9fSxmdW5jdGlvbihhLGIpe1lbYl09YX0pO3Ioe2RhdGE6cmMsaW5oZXJpdGVkRGF0YTpFYixzY29wZTpmdW5jdGlvbihhKXtyZXR1cm4geC5kYXRhKGEsXCIkc2NvcGVcIil8fEViKGEucGFyZW50Tm9kZXx8XG5hLFtcIiRpc29sYXRlU2NvcGVcIixcIiRzY29wZVwiXSl9LGlzb2xhdGVTY29wZTpmdW5jdGlvbihhKXtyZXR1cm4geC5kYXRhKGEsXCIkaXNvbGF0ZVNjb3BlXCIpfHx4LmRhdGEoYSxcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIpfSxjb250cm9sbGVyOmpkLGluamVjdG9yOmZ1bmN0aW9uKGEpe3JldHVybiBFYihhLFwiJGluamVjdG9yXCIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7YS5yZW1vdmVBdHRyaWJ1dGUoYil9LGhhc0NsYXNzOkJiLGNzczpmdW5jdGlvbihhLGIsZCl7Yj14YihiLnJlcGxhY2UobGgsXCJtcy1cIikpO2lmKHcoZCkpYS5zdHlsZVtiXT1kO2Vsc2UgcmV0dXJuIGEuc3R5bGVbYl19LGF0dHI6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjPWEubm9kZVR5cGU7aWYoYyE9PVBhJiYyIT09YyYmOCE9PWMmJmEuZ2V0QXR0cmlidXRlKXt2YXIgYz1LKGIpLGU9R2JbY107aWYodyhkKSludWxsPT09ZHx8ITE9PT1kJiZlP2EucmVtb3ZlQXR0cmlidXRlKGIpOmEuc2V0QXR0cmlidXRlKGIsXG5lP2M6ZCk7ZWxzZSByZXR1cm4gYT1hLmdldEF0dHJpYnV0ZShiKSxlJiZudWxsIT09YSYmKGE9YyksbnVsbD09PWE/dm9pZCAwOmF9fSxwcm9wOmZ1bmN0aW9uKGEsYixkKXtpZih3KGQpKWFbYl09ZDtlbHNlIHJldHVybiBhW2JdfSx0ZXh0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGQpe2lmKHooZCkpe3ZhciBjPWEubm9kZVR5cGU7cmV0dXJuIDE9PT1jfHxjPT09UGE/YS50ZXh0Q29udGVudDpcIlwifWEudGV4dENvbnRlbnQ9ZH1hLiRkdj1cIlwiO3JldHVybiBhfSgpLHZhbDpmdW5jdGlvbihhLGIpe2lmKHooYikpe2lmKGEubXVsdGlwbGUmJlwic2VsZWN0XCI9PT11YShhKSl7dmFyIGQ9W107cihhLm9wdGlvbnMsZnVuY3Rpb24oYSl7YS5zZWxlY3RlZCYmZC5wdXNoKGEudmFsdWV8fGEudGV4dCl9KTtyZXR1cm4gZH1yZXR1cm4gYS52YWx1ZX1hLnZhbHVlPWJ9LGh0bWw6ZnVuY3Rpb24oYSxiKXtpZih6KGIpKXJldHVybiBhLmlubmVySFRNTDt5YihhLCEwKTthLmlubmVySFRNTD1ifSxcbmVtcHR5OmtkfSxmdW5jdGlvbihhLGIpe1kucHJvdG90eXBlW2JdPWZ1bmN0aW9uKGIsYyl7dmFyIGUsZixnPXRoaXMubGVuZ3RoO2lmKGEhPT1rZCYmeigyPT09YS5sZW5ndGgmJmEhPT1CYiYmYSE9PWpkP2I6Yykpe2lmKEQoYikpe2ZvcihlPTA7ZTxnO2UrKylpZihhPT09cmMpYSh0aGlzW2VdLGIpO2Vsc2UgZm9yKGYgaW4gYilhKHRoaXNbZV0sZixiW2ZdKTtyZXR1cm4gdGhpc31lPWEuJGR2O2c9eihlKT9NYXRoLm1pbihnLDEpOmc7Zm9yKGY9MDtmPGc7ZisrKXt2YXIgaz1hKHRoaXNbZl0sYixjKTtlPWU/ZStrOmt9cmV0dXJuIGV9Zm9yKGU9MDtlPGc7ZSsrKWEodGhpc1tlXSxiLGMpO3JldHVybiB0aGlzfX0pO3Ioe3JlbW92ZURhdGE6cWMsb246ZnVuY3Rpb24oYSxiLGQsYyl7aWYodyhjKSl0aHJvdyBuYyhcIm9uYXJnc1wiKTtpZihsYyhhKSl7Yz16YihhLCEwKTt2YXIgZT1jLmV2ZW50cyxmPWMuaGFuZGxlO2Z8fChmPWMuaGFuZGxlPXJnKGEsZSkpO2M9MDw9Yi5pbmRleE9mKFwiIFwiKT9cbmIuc3BsaXQoXCIgXCIpOltiXTtmb3IodmFyIGc9Yy5sZW5ndGgsaz1mdW5jdGlvbihiLGMsZyl7dmFyIGs9ZVtiXTtrfHwoaz1lW2JdPVtdLGsuc3BlY2lhbEhhbmRsZXJXcmFwcGVyPWMsXCIkZGVzdHJveVwiPT09Ynx8Z3x8YS5hZGRFdmVudExpc3RlbmVyKGIsZikpO2sucHVzaChkKX07Zy0tOyliPWNbZ10sQWJbYl0/KGsoQWJbYl0sdGcpLGsoYix2b2lkIDAsITApKTprKGIpfX0sb2ZmOmlkLG9uZTpmdW5jdGlvbihhLGIsZCl7YT14KGEpO2Eub24oYixmdW5jdGlvbiBlKCl7YS5vZmYoYixkKTthLm9mZihiLGUpfSk7YS5vbihiLGQpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhLGIpe3ZhciBkLGM9YS5wYXJlbnROb2RlO3liKGEpO3IobmV3IFkoYiksZnVuY3Rpb24oYil7ZD9jLmluc2VydEJlZm9yZShiLGQubmV4dFNpYmxpbmcpOmMucmVwbGFjZUNoaWxkKGIsYSk7ZD1ifSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO3IoYS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGEpezE9PT1cbmEubm9kZVR5cGUmJmIucHVzaChhKX0pO3JldHVybiBifSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fGEuY2hpbGROb2Rlc3x8W119LGFwcGVuZDpmdW5jdGlvbihhLGIpe3ZhciBkPWEubm9kZVR5cGU7aWYoMT09PWR8fDExPT09ZCl7Yj1uZXcgWShiKTtmb3IodmFyIGQ9MCxjPWIubGVuZ3RoO2Q8YztkKyspYS5hcHBlbmRDaGlsZChiW2RdKX19LHByZXBlbmQ6ZnVuY3Rpb24oYSxiKXtpZigxPT09YS5ub2RlVHlwZSl7dmFyIGQ9YS5maXJzdENoaWxkO3IobmV3IFkoYiksZnVuY3Rpb24oYil7YS5pbnNlcnRCZWZvcmUoYixkKX0pfX0sd3JhcDpmdW5jdGlvbihhLGIpe3ZhciBkPXgoYikuZXEoMCkuY2xvbmUoKVswXSxjPWEucGFyZW50Tm9kZTtjJiZjLnJlcGxhY2VDaGlsZChkLGEpO2QuYXBwZW5kQ2hpbGQoYSl9LHJlbW92ZTpGYixkZXRhY2g6ZnVuY3Rpb24oYSl7RmIoYSwhMCl9LGFmdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YSxjPWEucGFyZW50Tm9kZTtcbmlmKGMpe2I9bmV3IFkoYik7Zm9yKHZhciBlPTAsZj1iLmxlbmd0aDtlPGY7ZSsrKXt2YXIgZz1iW2VdO2MuaW5zZXJ0QmVmb3JlKGcsZC5uZXh0U2libGluZyk7ZD1nfX19LGFkZENsYXNzOkRiLHJlbW92ZUNsYXNzOkNiLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYixkKXtiJiZyKGIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe3ZhciBlPWQ7eihlKSYmKGU9IUJiKGEsYikpOyhlP0RiOkNiKShhLGIpfSl9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiYxMSE9PWEubm9kZVR5cGU/YTpudWxsfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5leHRFbGVtZW50U2libGluZ30sZmluZDpmdW5jdGlvbihhLGIpe3JldHVybiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYik6W119LGNsb25lOnBjLHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYixkKXt2YXIgYyxlLGY9Yi50eXBlfHxiLGc9emIoYSk7aWYoZz0oZz1nJiZnLmV2ZW50cykmJlxuZ1tmXSljPXtwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMH0saXNEZWZhdWx0UHJldmVudGVkOmZ1bmN0aW9uKCl7cmV0dXJuITA9PT10aGlzLmRlZmF1bHRQcmV2ZW50ZWR9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPSEwfSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWR9LHN0b3BQcm9wYWdhdGlvbjpFLHR5cGU6Zix0YXJnZXQ6YX0sYi50eXBlJiYoYz1TKGMsYikpLGI9amEoZyksZT1kP1tjXS5jb25jYXQoZCk6W2NdLHIoYixmdW5jdGlvbihiKXtjLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCl8fGIuYXBwbHkoYSxlKX0pfX0sZnVuY3Rpb24oYSxiKXtZLnByb3RvdHlwZVtiXT1mdW5jdGlvbihiLGMsZSl7Zm9yKHZhciBmLGc9MCxrPXRoaXMubGVuZ3RoO2c8XG5rO2crKyl6KGYpPyhmPWEodGhpc1tnXSxiLGMsZSksdyhmKSYmKGY9eChmKSkpOm9jKGYsYSh0aGlzW2ddLGIsYyxlKSk7cmV0dXJuIHcoZik/Zjp0aGlzfX0pO1kucHJvdG90eXBlLmJpbmQ9WS5wcm90b3R5cGUub247WS5wcm90b3R5cGUudW5iaW5kPVkucHJvdG90eXBlLm9mZjt2YXIgbWg9T2JqZWN0LmNyZWF0ZShudWxsKTtuZC5wcm90b3R5cGU9e19pZHg6ZnVuY3Rpb24oYSl7YSE9PXRoaXMuX2xhc3RLZXkmJih0aGlzLl9sYXN0S2V5PWEsdGhpcy5fbGFzdEluZGV4PXRoaXMuX2tleXMuaW5kZXhPZihhKSk7cmV0dXJuIHRoaXMuX2xhc3RJbmRleH0sX3RyYW5zZm9ybUtleTpmdW5jdGlvbihhKXtyZXR1cm4gWChhKT9taDphfSxnZXQ6ZnVuY3Rpb24oYSl7YT10aGlzLl90cmFuc2Zvcm1LZXkoYSk7YT10aGlzLl9pZHgoYSk7aWYoLTEhPT1hKXJldHVybiB0aGlzLl92YWx1ZXNbYV19LGhhczpmdW5jdGlvbihhKXthPXRoaXMuX3RyYW5zZm9ybUtleShhKTtyZXR1cm4tMSE9PXRoaXMuX2lkeChhKX0sXG5zZXQ6ZnVuY3Rpb24oYSxiKXthPXRoaXMuX3RyYW5zZm9ybUtleShhKTt2YXIgZD10aGlzLl9pZHgoYSk7LTE9PT1kJiYoZD10aGlzLl9sYXN0SW5kZXg9dGhpcy5fa2V5cy5sZW5ndGgpO3RoaXMuX2tleXNbZF09YTt0aGlzLl92YWx1ZXNbZF09Yn0sZGVsZXRlOmZ1bmN0aW9uKGEpe2E9dGhpcy5fdHJhbnNmb3JtS2V5KGEpO2E9dGhpcy5faWR4KGEpO2lmKC0xPT09YSlyZXR1cm4hMTt0aGlzLl9rZXlzLnNwbGljZShhLDEpO3RoaXMuX3ZhbHVlcy5zcGxpY2UoYSwxKTt0aGlzLl9sYXN0S2V5PU5hTjt0aGlzLl9sYXN0SW5kZXg9LTE7cmV0dXJuITB9fTt2YXIgSGI9bmQsamc9W2Z1bmN0aW9uKCl7dGhpcy4kZ2V0PVtmdW5jdGlvbigpe3JldHVybiBIYn1dfV0sd2c9L14oW14oXSs/KT0+Lyx4Zz0vXlteKF0qXFwoXFxzKihbXildKilcXCkvbSxuaD0vLC8sb2g9L15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC8sdmc9LygoXFwvXFwvLiokKXwoXFwvXFwqW1xcc1xcU10qP1xcKlxcLykpL21nLEJhPUYoXCIkaW5qZWN0b3JcIik7XG5mYi4kJGFubm90YXRlPWZ1bmN0aW9uKGEsYixkKXt2YXIgYztpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSl7aWYoIShjPWEuJGluamVjdCkpe2M9W107aWYoYS5sZW5ndGgpe2lmKGIpdGhyb3cgQShkKSYmZHx8KGQ9YS5uYW1lfHx5ZyhhKSksQmEoXCJzdHJpY3RkaVwiLGQpO2I9b2QoYSk7cihiWzFdLnNwbGl0KG5oKSxmdW5jdGlvbihhKXthLnJlcGxhY2Uob2gsZnVuY3Rpb24oYSxiLGQpe2MucHVzaChkKX0pfSl9YS4kaW5qZWN0PWN9fWVsc2UgSChhKT8oYj1hLmxlbmd0aC0xLHNiKGFbYl0sXCJmblwiKSxjPWEuc2xpY2UoMCxiKSk6c2IoYSxcImZuXCIsITApO3JldHVybiBjfTt2YXIgamU9RihcIiRhbmltYXRlXCIpLHpmPWZ1bmN0aW9uKCl7dGhpcy4kZ2V0PUV9LEFmPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IEhiLGI9W107dGhpcy4kZ2V0PVtcIiQkQW5pbWF0ZVJ1bm5lclwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGQsYyl7ZnVuY3Rpb24gZShhLGIsYyl7dmFyIGQ9ITE7YiYmKGI9QShiKT9iLnNwbGl0KFwiIFwiKTpcbkgoYik/YjpbXSxyKGIsZnVuY3Rpb24oYil7YiYmKGQ9ITAsYVtiXT1jKX0pKTtyZXR1cm4gZH1mdW5jdGlvbiBmKCl7cihiLGZ1bmN0aW9uKGIpe3ZhciBjPWEuZ2V0KGIpO2lmKGMpe3ZhciBkPXpnKGIuYXR0cihcImNsYXNzXCIpKSxlPVwiXCIsZj1cIlwiO3IoYyxmdW5jdGlvbihhLGIpe2EhPT0hIWRbYl0mJihhP2UrPShlLmxlbmd0aD9cIiBcIjpcIlwiKStiOmYrPShmLmxlbmd0aD9cIiBcIjpcIlwiKStiKX0pO3IoYixmdW5jdGlvbihhKXtlJiZEYihhLGUpO2YmJkNiKGEsZil9KTthLmRlbGV0ZShiKX19KTtiLmxlbmd0aD0wfXJldHVybntlbmFibGVkOkUsb246RSxvZmY6RSxwaW46RSxwdXNoOmZ1bmN0aW9uKGcsayxoLGwpe2wmJmwoKTtoPWh8fHt9O2guZnJvbSYmZy5jc3MoaC5mcm9tKTtoLnRvJiZnLmNzcyhoLnRvKTtpZihoLmFkZENsYXNzfHxoLnJlbW92ZUNsYXNzKWlmKGs9aC5hZGRDbGFzcyxsPWgucmVtb3ZlQ2xhc3MsaD1hLmdldChnKXx8e30saz1lKGgsaywhMCksbD1lKGgsbCwhMSksXG5rfHxsKWEuc2V0KGcsaCksYi5wdXNoKGcpLDE9PT1iLmxlbmd0aCYmYy4kJHBvc3REaWdlc3QoZik7Zz1uZXcgZDtnLmNvbXBsZXRlKCk7cmV0dXJuIGd9fX1dfSx4Zj1bXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsZD1udWxsLGM9bnVsbDt0aGlzLiQkcmVnaXN0ZXJlZEFuaW1hdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKGMsZCl7aWYoYyYmXCIuXCIhPT1jLmNoYXJBdCgwKSl0aHJvdyBqZShcIm5vdGNzZWxcIixjKTt2YXIgZz1jK1wiLWFuaW1hdGlvblwiO2IuJCRyZWdpc3RlcmVkQW5pbWF0aW9uc1tjLnN1YnN0cigxKV09ZzthLmZhY3RvcnkoZyxkKX07dGhpcy5jdXN0b21GaWx0ZXI9ZnVuY3Rpb24oYSl7MT09PWFyZ3VtZW50cy5sZW5ndGgmJihjPUIoYSk/YTpudWxsKTtyZXR1cm4gY307dGhpcy5jbGFzc05hbWVGaWx0ZXI9ZnVuY3Rpb24oYSl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgmJihkPWEgaW5zdGFuY2VvZiBSZWdFeHA/XG5hOm51bGwpJiYvWyhcXHN8XFwvKV1uZy1hbmltYXRlWyhcXHN8XFwvKV0vLnRlc3QoZC50b1N0cmluZygpKSl0aHJvdyBkPW51bGwsamUoXCJub25nY2xzXCIsXCJuZy1hbmltYXRlXCIpO3JldHVybiBkfTt0aGlzLiRnZXQ9W1wiJCRhbmltYXRlUXVldWVcIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyxkKXtpZihkKXt2YXIgZTthOntmb3IoZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1kW2VdO2lmKDE9PT1mLm5vZGVUeXBlKXtlPWY7YnJlYWsgYX19ZT12b2lkIDB9IWV8fGUucGFyZW50Tm9kZXx8ZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nfHwoZD1udWxsKX1kP2QuYWZ0ZXIoYSk6Yy5wcmVwZW5kKGEpfXJldHVybntvbjphLm9uLG9mZjphLm9mZixwaW46YS5waW4sZW5hYmxlZDphLmVuYWJsZWQsY2FuY2VsOmZ1bmN0aW9uKGEpe2EuY2FuY2VsJiZhLmNhbmNlbCgpfSxlbnRlcjpmdW5jdGlvbihjLGQsaCxsKXtkPWQmJngoZCk7aD1oJiZ4KGgpO2Q9ZHx8aC5wYXJlbnQoKTtiKGMsZCxoKTtyZXR1cm4gYS5wdXNoKGMsXG5cImVudGVyXCIscmEobCkpfSxtb3ZlOmZ1bmN0aW9uKGMsZCxoLGwpe2Q9ZCYmeChkKTtoPWgmJngoaCk7ZD1kfHxoLnBhcmVudCgpO2IoYyxkLGgpO3JldHVybiBhLnB1c2goYyxcIm1vdmVcIixyYShsKSl9LGxlYXZlOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucHVzaChiLFwibGVhdmVcIixyYShjKSxmdW5jdGlvbigpe2IucmVtb3ZlKCl9KX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYixjLGQpe2Q9cmEoZCk7ZC5hZGRDbGFzcz1oYihkLmFkZGNsYXNzLGMpO3JldHVybiBhLnB1c2goYixcImFkZENsYXNzXCIsZCl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGIsYyxkKXtkPXJhKGQpO2QucmVtb3ZlQ2xhc3M9aGIoZC5yZW1vdmVDbGFzcyxjKTtyZXR1cm4gYS5wdXNoKGIsXCJyZW1vdmVDbGFzc1wiLGQpfSxzZXRDbGFzczpmdW5jdGlvbihiLGMsZCxmKXtmPXJhKGYpO2YuYWRkQ2xhc3M9aGIoZi5hZGRDbGFzcyxjKTtmLnJlbW92ZUNsYXNzPWhiKGYucmVtb3ZlQ2xhc3MsZCk7cmV0dXJuIGEucHVzaChiLFwic2V0Q2xhc3NcIixcbmYpfSxhbmltYXRlOmZ1bmN0aW9uKGIsYyxkLGYsbSl7bT1yYShtKTttLmZyb209bS5mcm9tP1MobS5mcm9tLGMpOmM7bS50bz1tLnRvP1MobS50byxkKTpkO20udGVtcENsYXNzZXM9aGIobS50ZW1wQ2xhc3NlcyxmfHxcIm5nLWlubGluZS1hbmltYXRlXCIpO3JldHVybiBhLnB1c2goYixcImFuaW1hdGVcIixtKX19fV19XSxDZj1mdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkJHJBRlwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7ZC5wdXNoKGIpOzE8ZC5sZW5ndGh8fGEoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGQubGVuZ3RoO2ErKylkW2FdKCk7ZD1bXX0pfXZhciBkPVtdO3JldHVybiBmdW5jdGlvbigpe3ZhciBhPSExO2IoZnVuY3Rpb24oKXthPSEwfSk7cmV0dXJuIGZ1bmN0aW9uKGQpe2E/ZCgpOmIoZCl9fX1dfSxCZj1mdW5jdGlvbigpe3RoaXMuJGdldD1bXCIkcVwiLFwiJHNuaWZmZXJcIixcIiQkYW5pbWF0ZUFzeW5jUnVuXCIsXCIkJGlzRG9jdW1lbnRIaWRkZW5cIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxcbmIsZCxjLGUpe2Z1bmN0aW9uIGYoYSl7dGhpcy5zZXRIb3N0KGEpO3ZhciBiPWQoKTt0aGlzLl9kb25lQ2FsbGJhY2tzPVtdO3RoaXMuX3RpY2s9ZnVuY3Rpb24oYSl7YygpP2UoYSwwLCExKTpiKGEpfTt0aGlzLl9zdGF0ZT0wfWYuY2hhaW49ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7aWYoZD09PWEubGVuZ3RoKWIoITApO2Vsc2UgYVtkXShmdW5jdGlvbihhKXshMT09PWE/YighMSk6KGQrKyxjKCkpfSl9dmFyIGQ9MDtjKCl9O2YuYWxsPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhmKXtlPWUmJmY7KytkPT09YS5sZW5ndGgmJmIoZSl9dmFyIGQ9MCxlPSEwO3IoYSxmdW5jdGlvbihhKXthLmRvbmUoYyl9KX07Zi5wcm90b3R5cGU9e3NldEhvc3Q6ZnVuY3Rpb24oYSl7dGhpcy5ob3N0PWF8fHt9fSxkb25lOmZ1bmN0aW9uKGEpezI9PT10aGlzLl9zdGF0ZT9hKCk6dGhpcy5fZG9uZUNhbGxiYWNrcy5wdXNoKGEpfSxwcm9ncmVzczpFLGdldFByb21pc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5wcm9taXNlKXt2YXIgYj1cbnRoaXM7dGhpcy5wcm9taXNlPWEoZnVuY3Rpb24oYSxjKXtiLmRvbmUoZnVuY3Rpb24oYil7ITE9PT1iP2MoKTphKCl9KX0pfXJldHVybiB0aGlzLnByb21pc2V9LHRoZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nZXRQcm9taXNlKCkudGhlbihhLGIpfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0UHJvbWlzZSgpW1wiY2F0Y2hcIl0oYSl9LFwiZmluYWxseVwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFByb21pc2UoKVtcImZpbmFsbHlcIl0oYSl9LHBhdXNlOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LnBhdXNlJiZ0aGlzLmhvc3QucGF1c2UoKX0scmVzdW1lOmZ1bmN0aW9uKCl7dGhpcy5ob3N0LnJlc3VtZSYmdGhpcy5ob3N0LnJlc3VtZSgpfSxlbmQ6ZnVuY3Rpb24oKXt0aGlzLmhvc3QuZW5kJiZ0aGlzLmhvc3QuZW5kKCk7dGhpcy5fcmVzb2x2ZSghMCl9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaG9zdC5jYW5jZWwmJnRoaXMuaG9zdC5jYW5jZWwoKTt0aGlzLl9yZXNvbHZlKCExKX0sXG5jb21wbGV0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzOzA9PT1iLl9zdGF0ZSYmKGIuX3N0YXRlPTEsYi5fdGljayhmdW5jdGlvbigpe2IuX3Jlc29sdmUoYSl9KSl9LF9yZXNvbHZlOmZ1bmN0aW9uKGEpezIhPT10aGlzLl9zdGF0ZSYmKHIodGhpcy5fZG9uZUNhbGxiYWNrcyxmdW5jdGlvbihiKXtiKGEpfSksdGhpcy5fZG9uZUNhbGxiYWNrcy5sZW5ndGg9MCx0aGlzLl9zdGF0ZT0yKX19O3JldHVybiBmfV19LHlmPWZ1bmN0aW9uKCl7dGhpcy4kZ2V0PVtcIiQkckFGXCIsXCIkcVwiLFwiJCRBbmltYXRlUnVubmVyXCIsZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihiLGUpe2Z1bmN0aW9uIGYoKXthKGZ1bmN0aW9uKCl7Zy5hZGRDbGFzcyYmKGIuYWRkQ2xhc3MoZy5hZGRDbGFzcyksZy5hZGRDbGFzcz1udWxsKTtnLnJlbW92ZUNsYXNzJiYoYi5yZW1vdmVDbGFzcyhnLnJlbW92ZUNsYXNzKSxnLnJlbW92ZUNsYXNzPW51bGwpO2cudG8mJihiLmNzcyhnLnRvKSxnLnRvPW51bGwpO2t8fFxuaC5jb21wbGV0ZSgpO2s9ITB9KTtyZXR1cm4gaH12YXIgZz1lfHx7fTtnLiQkcHJlcGFyZWR8fChnPUlhKGcpKTtnLmNsZWFudXBTdHlsZXMmJihnLmZyb209Zy50bz1udWxsKTtnLmZyb20mJihiLmNzcyhnLmZyb20pLGcuZnJvbT1udWxsKTt2YXIgayxoPW5ldyBkO3JldHVybntzdGFydDpmLGVuZDpmfX19XX0sJD1GKFwiJGNvbXBpbGVcIiksdGM9bmV3IGZ1bmN0aW9uKCl7fTtYYy4kaW5qZWN0PVtcIiRwcm92aWRlXCIsXCIkJHNhbml0aXplVXJpUHJvdmlkZXJcIl07SmIucHJvdG90eXBlLmlzRmlyc3RDaGFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlPT09dGN9O3ZhciBwZD0vXigoPzp4fGRhdGEpWzpcXC1fXSkvaSxFZz0vWzpcXC1fXSsoLikvZyx2ZD1GKFwiJGNvbnRyb2xsZXJcIiksdWQ9L14oXFxTKykoXFxzK2FzXFxzKyhbXFx3JF0rKSk/JC8sSmY9ZnVuY3Rpb24oKXt0aGlzLiRnZXQ9W1wiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2I/IWIubm9kZVR5cGUmJlxuYiBpbnN0YW5jZW9mIHgmJihiPWJbMF0pOmI9YVswXS5ib2R5O3JldHVybiBiLm9mZnNldFdpZHRoKzF9fV19LHdkPVwiYXBwbGljYXRpb24vanNvblwiLHdjPXtcIkNvbnRlbnQtVHlwZVwiOndkK1wiO2NoYXJzZXQ9dXRmLThcIn0sSGc9L15cXFt8Xlxceyg/IVxceykvLElnPXtcIltcIjovXSQvLFwie1wiOi99JC99LEdnPS9eXFwpXVxcfScsP1xcbi8sS2I9RihcIiRodHRwXCIpLE1hPWNhLiRpbnRlcnBvbGF0ZU1pbkVycj1GKFwiJGludGVycG9sYXRlXCIpO01hLnRocm93Tm9jb25jYXQ9ZnVuY3Rpb24oYSl7dGhyb3cgTWEoXCJub2NvbmNhdFwiLGEpO307TWEuaW50ZXJyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE1hKFwiaW50ZXJyXCIsYSxiLnRvU3RyaW5nKCkpfTt2YXIgTGc9RihcIiRpbnRlcnZhbFwiKSxTZj1mdW5jdGlvbigpe3RoaXMuJGdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9ZnVuY3Rpb24oYSl7Yi5kYXRhPWE7Yi5jYWxsZWQ9ITB9O2IuaWQ9YTtyZXR1cm4gYn12YXIgYj1jYS5jYWxsYmFja3MsXG5kPXt9O3JldHVybntjcmVhdGVDYWxsYmFjazpmdW5jdGlvbihjKXtjPVwiX1wiKyhiLiQkY291bnRlcisrKS50b1N0cmluZygzNik7dmFyIGU9XCJhbmd1bGFyLmNhbGxiYWNrcy5cIitjLGY9YShjKTtkW2VdPWJbY109ZjtyZXR1cm4gZX0sd2FzQ2FsbGVkOmZ1bmN0aW9uKGEpe3JldHVybiBkW2FdLmNhbGxlZH0sZ2V0UmVzcG9uc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGRbYV0uZGF0YX0scmVtb3ZlQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7ZGVsZXRlIGJbZFthXS5pZF07ZGVsZXRlIGRbYV19fX19LHBoPS9eKFtePyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxNZz17aHR0cDo4MCxodHRwczo0NDMsZnRwOjIxfSxqYj1GKFwiJGxvY2F0aW9uXCIpLE5nPS9eXFxzKltcXFxcL117Mix9LyxxaD17JCRhYnNVcmw6XCJcIiwkJGh0bWw1OiExLCQkcmVwbGFjZTohMSwkJGNvbXBvc2U6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy4kJHBhdGgsYj10aGlzLiQkaGFzaCxkPXllKHRoaXMuJCRzZWFyY2gpLGI9Yj9cblwiI1wiK2hjKGIpOlwiXCIsYT1hLnNwbGl0KFwiL1wiKSxjPWEubGVuZ3RoO2MtLTspYVtjXT1oYyhhW2NdLnJlcGxhY2UoLyUyRi9nLFwiL1wiKSk7dGhpcy4kJHVybD1hLmpvaW4oXCIvXCIpKyhkP1wiP1wiK2Q6XCJcIikrYjt0aGlzLiQkYWJzVXJsPXRoaXMuJCRub3JtYWxpemVVcmwodGhpcy4kJHVybCk7dGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uPSEwfSxhYnNVcmw6TGIoXCIkJGFic1VybFwiKSx1cmw6ZnVuY3Rpb24oYSl7aWYoeihhKSlyZXR1cm4gdGhpcy4kJHVybDt2YXIgYj1waC5leGVjKGEpOyhiWzFdfHxcIlwiPT09YSkmJnRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQoYlsxXSkpOyhiWzJdfHxiWzFdfHxcIlwiPT09YSkmJnRoaXMuc2VhcmNoKGJbM118fFwiXCIpO3RoaXMuaGFzaChiWzVdfHxcIlwiKTtyZXR1cm4gdGhpc30scHJvdG9jb2w6TGIoXCIkJHByb3RvY29sXCIpLGhvc3Q6TGIoXCIkJGhvc3RcIikscG9ydDpMYihcIiQkcG9ydFwiKSxwYXRoOkRkKFwiJCRwYXRoXCIsZnVuY3Rpb24oYSl7YT1udWxsIT09XG5hP2EudG9TdHJpbmcoKTpcIlwiO3JldHVyblwiL1wiPT09YS5jaGFyQXQoMCk/YTpcIi9cIithfSksc2VhcmNoOmZ1bmN0aW9uKGEsYil7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdGhpcy4kJHNlYXJjaDtjYXNlIDE6aWYoQShhKXx8VyhhKSlhPWEudG9TdHJpbmcoKSx0aGlzLiQkc2VhcmNoPWdjKGEpO2Vsc2UgaWYoRChhKSlhPUlhKGEse30pLHIoYSxmdW5jdGlvbihiLGMpe251bGw9PWImJmRlbGV0ZSBhW2NdfSksdGhpcy4kJHNlYXJjaD1hO2Vsc2UgdGhyb3cgamIoXCJpc3JjaGFyZ1wiKTticmVhaztkZWZhdWx0OnooYil8fG51bGw9PT1iP2RlbGV0ZSB0aGlzLiQkc2VhcmNoW2FdOnRoaXMuJCRzZWFyY2hbYV09Yn10aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfSxoYXNoOkRkKFwiJCRoYXNoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPT1hP2EudG9TdHJpbmcoKTpcIlwifSkscmVwbGFjZTpmdW5jdGlvbigpe3RoaXMuJCRyZXBsYWNlPSEwO3JldHVybiB0aGlzfX07XG5yKFtDZCx6Yyx5Y10sZnVuY3Rpb24oYSl7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShxaCk7YS5wcm90b3R5cGUuc3RhdGU9ZnVuY3Rpb24oYil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuJCRzdGF0ZTtpZihhIT09eWN8fCF0aGlzLiQkaHRtbDUpdGhyb3cgamIoXCJub3N0YXRlXCIpO3RoaXMuJCRzdGF0ZT16KGIpP251bGw6Yjt0aGlzLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb249ITA7cmV0dXJuIHRoaXN9fSk7dmFyIFlhPUYoXCIkcGFyc2VcIiksUmc9e30uY29uc3RydWN0b3IucHJvdG90eXBlLnZhbHVlT2YsVWI9VCgpO3IoXCIrIC0gKiAvICUgPT09ICE9PSA9PSAhPSA8ID4gPD0gPj0gJiYgfHwgISA9IHxcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7VWJbYV09ITB9KTt2YXIgcmg9e246XCJcXG5cIixmOlwiXFxmXCIscjpcIlxcclwiLHQ6XCJcXHRcIix2OlwiXFx2XCIsXCInXCI6XCInXCIsJ1wiJzonXCInfSxOYj1mdW5jdGlvbihhKXt0aGlzLm9wdGlvbnM9YX07TmIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpOYixcbmxleDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLmluZGV4PTA7Zm9yKHRoaXMudG9rZW5zPVtdO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspaWYoYT10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLCdcIic9PT1hfHxcIidcIj09PWEpdGhpcy5yZWFkU3RyaW5nKGEpO2Vsc2UgaWYodGhpcy5pc051bWJlcihhKXx8XCIuXCI9PT1hJiZ0aGlzLmlzTnVtYmVyKHRoaXMucGVlaygpKSl0aGlzLnJlYWROdW1iZXIoKTtlbHNlIGlmKHRoaXMuaXNJZGVudGlmaWVyU3RhcnQodGhpcy5wZWVrTXVsdGljaGFyKCkpKXRoaXMucmVhZElkZW50KCk7ZWxzZSBpZih0aGlzLmlzKGEsXCIoKXt9W10uLDs6P1wiKSl0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YX0pLHRoaXMuaW5kZXgrKztlbHNlIGlmKHRoaXMuaXNXaGl0ZXNwYWNlKGEpKXRoaXMuaW5kZXgrKztlbHNle3ZhciBiPWErdGhpcy5wZWVrKCksZD1iK3RoaXMucGVlaygyKSxjPVViW2JdLGU9VWJbZF07VWJbYV18fFxuY3x8ZT8oYT1lP2Q6Yz9iOmEsdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OmEsb3BlcmF0b3I6ITB9KSx0aGlzLmluZGV4Kz1hLmxlbmd0aCk6dGhpcy50aHJvd0Vycm9yKFwiVW5leHBlY3RlZCBuZXh0IGNoYXJhY3RlciBcIix0aGlzLmluZGV4LHRoaXMuaW5kZXgrMSl9cmV0dXJuIHRoaXMudG9rZW5zfSxpczpmdW5jdGlvbihhLGIpe3JldHVybi0xIT09Yi5pbmRleE9mKGEpfSxwZWVrOmZ1bmN0aW9uKGEpe2E9YXx8MTtyZXR1cm4gdGhpcy5pbmRleCthPHRoaXMudGV4dC5sZW5ndGg/dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4K2EpOiExfSxpc051bWJlcjpmdW5jdGlvbihhKXtyZXR1cm5cIjBcIjw9YSYmXCI5XCI+PWEmJlwic3RyaW5nXCI9PT10eXBlb2YgYX0saXNXaGl0ZXNwYWNlOmZ1bmN0aW9uKGEpe3JldHVyblwiIFwiPT09YXx8XCJcXHJcIj09PWF8fFwiXFx0XCI9PT1hfHxcIlxcblwiPT09YXx8XCJcXHZcIj09PWF8fFwiXFx1MDBhMFwiPT09YX0saXNJZGVudGlmaWVyU3RhcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJTdGFydD9cbnRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJTdGFydChhLHRoaXMuY29kZVBvaW50QXQoYSkpOnRoaXMuaXNWYWxpZElkZW50aWZpZXJTdGFydChhKX0saXNWYWxpZElkZW50aWZpZXJTdGFydDpmdW5jdGlvbihhKXtyZXR1cm5cImFcIjw9YSYmXCJ6XCI+PWF8fFwiQVwiPD1hJiZcIlpcIj49YXx8XCJfXCI9PT1hfHxcIiRcIj09PWF9LGlzSWRlbnRpZmllckNvbnRpbnVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyQ29udGludWU/dGhpcy5vcHRpb25zLmlzSWRlbnRpZmllckNvbnRpbnVlKGEsdGhpcy5jb2RlUG9pbnRBdChhKSk6dGhpcy5pc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlKGEpfSxpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuaXNWYWxpZElkZW50aWZpZXJTdGFydChhLGIpfHx0aGlzLmlzTnVtYmVyKGEpfSxjb2RlUG9pbnRBdDpmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubGVuZ3RoP2EuY2hhckNvZGVBdCgwKTpcbihhLmNoYXJDb2RlQXQoMCk8PDEwKSthLmNoYXJDb2RlQXQoMSktNTY2MTM4ODh9LHBlZWtNdWx0aWNoYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLGI9dGhpcy5wZWVrKCk7aWYoIWIpcmV0dXJuIGE7dmFyIGQ9YS5jaGFyQ29kZUF0KDApLGM9Yi5jaGFyQ29kZUF0KDApO3JldHVybiA1NTI5Njw9ZCYmNTYzMTk+PWQmJjU2MzIwPD1jJiY1NzM0Mz49Yz9hK2I6YX0saXNFeHBPcGVyYXRvcjpmdW5jdGlvbihhKXtyZXR1cm5cIi1cIj09PWF8fFwiK1wiPT09YXx8dGhpcy5pc051bWJlcihhKX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGIsZCl7ZD1kfHx0aGlzLmluZGV4O2I9dyhiKT9cInMgXCIrYitcIi1cIit0aGlzLmluZGV4K1wiIFtcIit0aGlzLnRleHQuc3Vic3RyaW5nKGIsZCkrXCJdXCI6XCIgXCIrZDt0aHJvdyBZYShcImxleGVyclwiLGEsYix0aGlzLnRleHQpO30scmVhZE51bWJlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT1cIlwiLGI9dGhpcy5pbmRleDt0aGlzLmluZGV4PFxudGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPUsodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PT1kfHx0aGlzLmlzTnVtYmVyKGQpKWErPWQ7ZWxzZXt2YXIgYz10aGlzLnBlZWsoKTtpZihcImVcIj09PWQmJnRoaXMuaXNFeHBPcGVyYXRvcihjKSlhKz1kO2Vsc2UgaWYodGhpcy5pc0V4cE9wZXJhdG9yKGQpJiZjJiZ0aGlzLmlzTnVtYmVyKGMpJiZcImVcIj09PWEuY2hhckF0KGEubGVuZ3RoLTEpKWErPWQ7ZWxzZSBpZighdGhpcy5pc0V4cE9wZXJhdG9yKGQpfHxjJiZ0aGlzLmlzTnVtYmVyKGMpfHxcImVcIiE9PWEuY2hhckF0KGEubGVuZ3RoLTEpKWJyZWFrO2Vsc2UgdGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCBleHBvbmVudFwiKX10aGlzLmluZGV4Kyt9dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yix0ZXh0OmEsY29uc3RhbnQ6ITAsdmFsdWU6TnVtYmVyKGEpfSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5kZXg7Zm9yKHRoaXMuaW5kZXgrPXRoaXMucGVla011bHRpY2hhcigpLmxlbmd0aDt0aGlzLmluZGV4PFxudGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBiPXRoaXMucGVla011bHRpY2hhcigpO2lmKCF0aGlzLmlzSWRlbnRpZmllckNvbnRpbnVlKGIpKWJyZWFrO3RoaXMuaW5kZXgrPWIubGVuZ3RofXRoaXMudG9rZW5zLnB1c2goe2luZGV4OmEsdGV4dDp0aGlzLnRleHQuc2xpY2UoYSx0aGlzLmluZGV4KSxpZGVudGlmaWVyOiEwfSl9LHJlYWRTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbmRleDt0aGlzLmluZGV4Kys7Zm9yKHZhciBkPVwiXCIsYz1hLGU9ITE7dGhpcy5pbmRleDx0aGlzLnRleHQubGVuZ3RoOyl7dmFyIGY9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSxjPWMrZjtpZihlKVwidVwiPT09Zj8oZT10aGlzLnRleHQuc3Vic3RyaW5nKHRoaXMuaW5kZXgrMSx0aGlzLmluZGV4KzUpLGUubWF0Y2goL1tcXGRhLWZdezR9L2kpfHx0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIHVuaWNvZGUgZXNjYXBlIFtcXFxcdVwiK2UrXCJdXCIpLHRoaXMuaW5kZXgrPTQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChlLFxuMTYpKSk6ZCs9cmhbZl18fGYsZT0hMTtlbHNlIGlmKFwiXFxcXFwiPT09ZillPSEwO2Vsc2V7aWYoZj09PWEpe3RoaXMuaW5kZXgrKzt0aGlzLnRva2Vucy5wdXNoKHtpbmRleDpiLHRleHQ6Yyxjb25zdGFudDohMCx2YWx1ZTpkfSk7cmV0dXJufWQrPWZ9dGhpcy5pbmRleCsrfXRoaXMudGhyb3dFcnJvcihcIlVudGVybWluYXRlZCBxdW90ZVwiLGIpfX07dmFyIHE9ZnVuY3Rpb24oYSxiKXt0aGlzLmxleGVyPWE7dGhpcy5vcHRpb25zPWJ9O3EuUHJvZ3JhbT1cIlByb2dyYW1cIjtxLkV4cHJlc3Npb25TdGF0ZW1lbnQ9XCJFeHByZXNzaW9uU3RhdGVtZW50XCI7cS5Bc3NpZ25tZW50RXhwcmVzc2lvbj1cIkFzc2lnbm1lbnRFeHByZXNzaW9uXCI7cS5Db25kaXRpb25hbEV4cHJlc3Npb249XCJDb25kaXRpb25hbEV4cHJlc3Npb25cIjtxLkxvZ2ljYWxFeHByZXNzaW9uPVwiTG9naWNhbEV4cHJlc3Npb25cIjtxLkJpbmFyeUV4cHJlc3Npb249XCJCaW5hcnlFeHByZXNzaW9uXCI7cS5VbmFyeUV4cHJlc3Npb249XCJVbmFyeUV4cHJlc3Npb25cIjtcbnEuQ2FsbEV4cHJlc3Npb249XCJDYWxsRXhwcmVzc2lvblwiO3EuTWVtYmVyRXhwcmVzc2lvbj1cIk1lbWJlckV4cHJlc3Npb25cIjtxLklkZW50aWZpZXI9XCJJZGVudGlmaWVyXCI7cS5MaXRlcmFsPVwiTGl0ZXJhbFwiO3EuQXJyYXlFeHByZXNzaW9uPVwiQXJyYXlFeHByZXNzaW9uXCI7cS5Qcm9wZXJ0eT1cIlByb3BlcnR5XCI7cS5PYmplY3RFeHByZXNzaW9uPVwiT2JqZWN0RXhwcmVzc2lvblwiO3EuVGhpc0V4cHJlc3Npb249XCJUaGlzRXhwcmVzc2lvblwiO3EuTG9jYWxzRXhwcmVzc2lvbj1cIkxvY2Fsc0V4cHJlc3Npb25cIjtxLk5HVmFsdWVQYXJhbWV0ZXI9XCJOR1ZhbHVlUGFyYW1ldGVyXCI7cS5wcm90b3R5cGU9e2FzdDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLnRva2Vucz10aGlzLmxleGVyLmxleChhKTthPXRoaXMucHJvZ3JhbSgpOzAhPT10aGlzLnRva2Vucy5sZW5ndGgmJnRoaXMudGhyb3dFcnJvcihcImlzIGFuIHVuZXhwZWN0ZWQgdG9rZW5cIix0aGlzLnRva2Vuc1swXSk7cmV0dXJuIGF9LFxucHJvZ3JhbTpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXTs7KWlmKDA8dGhpcy50b2tlbnMubGVuZ3RoJiYhdGhpcy5wZWVrKFwifVwiLFwiKVwiLFwiO1wiLFwiXVwiKSYmYS5wdXNoKHRoaXMuZXhwcmVzc2lvblN0YXRlbWVudCgpKSwhdGhpcy5leHBlY3QoXCI7XCIpKXJldHVybnt0eXBlOnEuUHJvZ3JhbSxib2R5OmF9fSxleHByZXNzaW9uU3RhdGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6cS5FeHByZXNzaW9uU3RhdGVtZW50LGV4cHJlc3Npb246dGhpcy5maWx0ZXJDaGFpbigpfX0sZmlsdGVyQ2hhaW46ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5leHByZXNzaW9uKCk7dGhpcy5leHBlY3QoXCJ8XCIpOylhPXRoaXMuZmlsdGVyKGEpO3JldHVybiBhfSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCk7aWYodGhpcy5leHBlY3QoXCI9XCIpKXtpZighSGQoYSkpdGhyb3cgWWEoXCJsdmFsXCIpO1xuYT17dHlwZTpxLkFzc2lnbm1lbnRFeHByZXNzaW9uLGxlZnQ6YSxyaWdodDp0aGlzLmFzc2lnbm1lbnQoKSxvcGVyYXRvcjpcIj1cIn19cmV0dXJuIGF9LHRlcm5hcnk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvZ2ljYWxPUigpLGIsZDtyZXR1cm4gdGhpcy5leHBlY3QoXCI/XCIpJiYoYj10aGlzLmV4cHJlc3Npb24oKSx0aGlzLmNvbnN1bWUoXCI6XCIpKT8oZD10aGlzLmV4cHJlc3Npb24oKSx7dHlwZTpxLkNvbmRpdGlvbmFsRXhwcmVzc2lvbix0ZXN0OmEsYWx0ZXJuYXRlOmIsY29uc2VxdWVudDpkfSk6YX0sbG9naWNhbE9SOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubG9naWNhbEFORCgpO3RoaXMuZXhwZWN0KFwifHxcIik7KWE9e3R5cGU6cS5Mb2dpY2FsRXhwcmVzc2lvbixvcGVyYXRvcjpcInx8XCIsbGVmdDphLHJpZ2h0OnRoaXMubG9naWNhbEFORCgpfTtyZXR1cm4gYX0sbG9naWNhbEFORDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmVxdWFsaXR5KCk7dGhpcy5leHBlY3QoXCImJlwiKTspYT1cbnt0eXBlOnEuTG9naWNhbEV4cHJlc3Npb24sb3BlcmF0b3I6XCImJlwiLGxlZnQ6YSxyaWdodDp0aGlzLmVxdWFsaXR5KCl9O3JldHVybiBhfSxlcXVhbGl0eTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnJlbGF0aW9uYWwoKSxiO2I9dGhpcy5leHBlY3QoXCI9PVwiLFwiIT1cIixcIj09PVwiLFwiIT09XCIpOylhPXt0eXBlOnEuQmluYXJ5RXhwcmVzc2lvbixvcGVyYXRvcjpiLnRleHQsbGVmdDphLHJpZ2h0OnRoaXMucmVsYXRpb25hbCgpfTtyZXR1cm4gYX0scmVsYXRpb25hbDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmFkZGl0aXZlKCksYjtiPXRoaXMuZXhwZWN0KFwiPFwiLFwiPlwiLFwiPD1cIixcIj49XCIpOylhPXt0eXBlOnEuQmluYXJ5RXhwcmVzc2lvbixvcGVyYXRvcjpiLnRleHQsbGVmdDphLHJpZ2h0OnRoaXMuYWRkaXRpdmUoKX07cmV0dXJuIGF9LGFkZGl0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubXVsdGlwbGljYXRpdmUoKSxiO2I9dGhpcy5leHBlY3QoXCIrXCIsXCItXCIpOylhPXt0eXBlOnEuQmluYXJ5RXhwcmVzc2lvbixcbm9wZXJhdG9yOmIudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy5tdWx0aXBsaWNhdGl2ZSgpfTtyZXR1cm4gYX0sbXVsdGlwbGljYXRpdmU6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy51bmFyeSgpLGI7Yj10aGlzLmV4cGVjdChcIipcIixcIi9cIixcIiVcIik7KWE9e3R5cGU6cS5CaW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmIudGV4dCxsZWZ0OmEscmlnaHQ6dGhpcy51bmFyeSgpfTtyZXR1cm4gYX0sdW5hcnk6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4oYT10aGlzLmV4cGVjdChcIitcIixcIi1cIixcIiFcIikpP3t0eXBlOnEuVW5hcnlFeHByZXNzaW9uLG9wZXJhdG9yOmEudGV4dCxwcmVmaXg6ITAsYXJndW1lbnQ6dGhpcy51bmFyeSgpfTp0aGlzLnByaW1hcnkoKX0scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBhO3RoaXMuZXhwZWN0KFwiKFwiKT8oYT10aGlzLmZpbHRlckNoYWluKCksdGhpcy5jb25zdW1lKFwiKVwiKSk6dGhpcy5leHBlY3QoXCJbXCIpP2E9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk6dGhpcy5leHBlY3QoXCJ7XCIpP1xuYT10aGlzLm9iamVjdCgpOnRoaXMuc2VsZlJlZmVyZW50aWFsLmhhc093blByb3BlcnR5KHRoaXMucGVlaygpLnRleHQpP2E9SWEodGhpcy5zZWxmUmVmZXJlbnRpYWxbdGhpcy5jb25zdW1lKCkudGV4dF0pOnRoaXMub3B0aW9ucy5saXRlcmFscy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnBlZWsoKS50ZXh0KT9hPXt0eXBlOnEuTGl0ZXJhbCx2YWx1ZTp0aGlzLm9wdGlvbnMubGl0ZXJhbHNbdGhpcy5jb25zdW1lKCkudGV4dF19OnRoaXMucGVlaygpLmlkZW50aWZpZXI/YT10aGlzLmlkZW50aWZpZXIoKTp0aGlzLnBlZWsoKS5jb25zdGFudD9hPXRoaXMuY29uc3RhbnQoKTp0aGlzLnRocm93RXJyb3IoXCJub3QgYSBwcmltYXJ5IGV4cHJlc3Npb25cIix0aGlzLnBlZWsoKSk7Zm9yKHZhciBiO2I9dGhpcy5leHBlY3QoXCIoXCIsXCJbXCIsXCIuXCIpOylcIihcIj09PWIudGV4dD8oYT17dHlwZTpxLkNhbGxFeHByZXNzaW9uLGNhbGxlZTphLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKCl9LHRoaXMuY29uc3VtZShcIilcIikpOlxuXCJbXCI9PT1iLnRleHQ/KGE9e3R5cGU6cS5NZW1iZXJFeHByZXNzaW9uLG9iamVjdDphLHByb3BlcnR5OnRoaXMuZXhwcmVzc2lvbigpLGNvbXB1dGVkOiEwfSx0aGlzLmNvbnN1bWUoXCJdXCIpKTpcIi5cIj09PWIudGV4dD9hPXt0eXBlOnEuTWVtYmVyRXhwcmVzc2lvbixvYmplY3Q6YSxwcm9wZXJ0eTp0aGlzLmlkZW50aWZpZXIoKSxjb21wdXRlZDohMX06dGhpcy50aHJvd0Vycm9yKFwiSU1QT1NTSUJMRVwiKTtyZXR1cm4gYX0sZmlsdGVyOmZ1bmN0aW9uKGEpe2E9W2FdO2Zvcih2YXIgYj17dHlwZTpxLkNhbGxFeHByZXNzaW9uLGNhbGxlZTp0aGlzLmlkZW50aWZpZXIoKSxhcmd1bWVudHM6YSxmaWx0ZXI6ITB9O3RoaXMuZXhwZWN0KFwiOlwiKTspYS5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtyZXR1cm4gYn0scGFyc2VBcmd1bWVudHM6ZnVuY3Rpb24oKXt2YXIgYT1bXTtpZihcIilcIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG8gYS5wdXNoKHRoaXMuZmlsdGVyQ2hhaW4oKSk7d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKVxufXJldHVybiBhfSxpZGVudGlmaWVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb25zdW1lKCk7YS5pZGVudGlmaWVyfHx0aGlzLnRocm93RXJyb3IoXCJpcyBub3QgYSB2YWxpZCBpZGVudGlmaWVyXCIsYSk7cmV0dXJue3R5cGU6cS5JZGVudGlmaWVyLG5hbWU6YS50ZXh0fX0sY29uc3RhbnQ6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpxLkxpdGVyYWwsdmFsdWU6dGhpcy5jb25zdW1lKCkudmFsdWV9fSxhcnJheURlY2xhcmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoXCJdXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIl1cIikpYnJlYWs7YS5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIl1cIik7cmV0dXJue3R5cGU6cS5BcnJheUV4cHJlc3Npb24sZWxlbWVudHM6YX19LG9iamVjdDpmdW5jdGlvbigpe3ZhciBhPVtdLGI7aWYoXCJ9XCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIn1cIikpYnJlYWs7XG5iPXt0eXBlOnEuUHJvcGVydHksa2luZDpcImluaXRcIn07dGhpcy5wZWVrKCkuY29uc3RhbnQ/KGIua2V5PXRoaXMuY29uc3RhbnQoKSxiLmNvbXB1dGVkPSExLHRoaXMuY29uc3VtZShcIjpcIiksYi52YWx1ZT10aGlzLmV4cHJlc3Npb24oKSk6dGhpcy5wZWVrKCkuaWRlbnRpZmllcj8oYi5rZXk9dGhpcy5pZGVudGlmaWVyKCksYi5jb21wdXRlZD0hMSx0aGlzLnBlZWsoXCI6XCIpPyh0aGlzLmNvbnN1bWUoXCI6XCIpLGIudmFsdWU9dGhpcy5leHByZXNzaW9uKCkpOmIudmFsdWU9Yi5rZXkpOnRoaXMucGVlayhcIltcIik/KHRoaXMuY29uc3VtZShcIltcIiksYi5rZXk9dGhpcy5leHByZXNzaW9uKCksdGhpcy5jb25zdW1lKFwiXVwiKSxiLmNvbXB1dGVkPSEwLHRoaXMuY29uc3VtZShcIjpcIiksYi52YWx1ZT10aGlzLmV4cHJlc3Npb24oKSk6dGhpcy50aHJvd0Vycm9yKFwiaW52YWxpZCBrZXlcIix0aGlzLnBlZWsoKSk7YS5wdXNoKGIpfXdoaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwifVwiKTtcbnJldHVybnt0eXBlOnEuT2JqZWN0RXhwcmVzc2lvbixwcm9wZXJ0aWVzOmF9fSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYil7dGhyb3cgWWEoXCJzeW50YXhcIixiLnRleHQsYSxiLmluZGV4KzEsdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcoYi5pbmRleCkpO30sY29uc3VtZTpmdW5jdGlvbihhKXtpZigwPT09dGhpcy50b2tlbnMubGVuZ3RoKXRocm93IFlhKFwidWVvZVwiLHRoaXMudGV4dCk7dmFyIGI9dGhpcy5leHBlY3QoYSk7Ynx8dGhpcy50aHJvd0Vycm9yKFwiaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFtcIithK1wiXVwiLHRoaXMucGVlaygpKTtyZXR1cm4gYn0scGVla1Rva2VuOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMudG9rZW5zLmxlbmd0aCl0aHJvdyBZYShcInVlb2VcIix0aGlzLnRleHQpO3JldHVybiB0aGlzLnRva2Vuc1swXX0scGVlazpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gdGhpcy5wZWVrQWhlYWQoMCxhLGIsZCxjKX0scGVla0FoZWFkOmZ1bmN0aW9uKGEsYixkLGMsXG5lKXtpZih0aGlzLnRva2Vucy5sZW5ndGg+YSl7YT10aGlzLnRva2Vuc1thXTt2YXIgZj1hLnRleHQ7aWYoZj09PWJ8fGY9PT1kfHxmPT09Y3x8Zj09PWV8fCEoYnx8ZHx8Y3x8ZSkpcmV0dXJuIGF9cmV0dXJuITF9LGV4cGVjdDpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4oYT10aGlzLnBlZWsoYSxiLGQsYykpPyh0aGlzLnRva2Vucy5zaGlmdCgpLGEpOiExfSxzZWxmUmVmZXJlbnRpYWw6e1widGhpc1wiOnt0eXBlOnEuVGhpc0V4cHJlc3Npb259LCRsb2NhbHM6e3R5cGU6cS5Mb2NhbHNFeHByZXNzaW9ufX19O3ZhciBGZD0yO0pkLnByb3RvdHlwZT17Y29tcGlsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO3RoaXMuc3RhdGU9e25leHRJZDowLGZpbHRlcnM6e30sZm46e3ZhcnM6W10sYm9keTpbXSxvd246e319LGFzc2lnbjp7dmFyczpbXSxib2R5OltdLG93bjp7fX0saW5wdXRzOltdfTtaKGEsYi4kZmlsdGVyKTt2YXIgZD1cIlwiLGM7dGhpcy5zdGFnZT1cImFzc2lnblwiO2lmKGM9SWQoYSkpdGhpcy5zdGF0ZS5jb21wdXRpbmc9XG5cImFzc2lnblwiLGQ9dGhpcy5uZXh0SWQoKSx0aGlzLnJlY3Vyc2UoYyxkKSx0aGlzLnJldHVybl8oZCksZD1cImZuLmFzc2lnbj1cIit0aGlzLmdlbmVyYXRlRnVuY3Rpb24oXCJhc3NpZ25cIixcInMsdixsXCIpO2M9R2QoYS5ib2R5KTtiLnN0YWdlPVwiaW5wdXRzXCI7cihjLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9XCJmblwiK2M7Yi5zdGF0ZVtkXT17dmFyczpbXSxib2R5OltdLG93bjp7fX07Yi5zdGF0ZS5jb21wdXRpbmc9ZDt2YXIgaz1iLm5leHRJZCgpO2IucmVjdXJzZShhLGspO2IucmV0dXJuXyhrKTtiLnN0YXRlLmlucHV0cy5wdXNoKHtuYW1lOmQsaXNQdXJlOmEuaXNQdXJlfSk7YS53YXRjaElkPWN9KTt0aGlzLnN0YXRlLmNvbXB1dGluZz1cImZuXCI7dGhpcy5zdGFnZT1cIm1haW5cIjt0aGlzLnJlY3Vyc2UoYSk7YT0nXCInK3RoaXMuVVNFK1wiIFwiK3RoaXMuU1RSSUNUKydcIjtcXG4nK3RoaXMuZmlsdGVyUHJlZml4KCkrXCJ2YXIgZm49XCIrdGhpcy5nZW5lcmF0ZUZ1bmN0aW9uKFwiZm5cIixcInMsbCxhLGlcIikrXG5kK3RoaXMud2F0Y2hGbnMoKStcInJldHVybiBmbjtcIjthPShuZXcgRnVuY3Rpb24oXCIkZmlsdGVyXCIsXCJnZXRTdHJpbmdWYWx1ZVwiLFwiaWZEZWZpbmVkXCIsXCJwbHVzXCIsYSkpKHRoaXMuJGZpbHRlcixPZyxQZyxFZCk7dGhpcy5zdGF0ZT10aGlzLnN0YWdlPXZvaWQgMDtyZXR1cm4gYX0sVVNFOlwidXNlXCIsU1RSSUNUOlwic3RyaWN0XCIsd2F0Y2hGbnM6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuc3RhdGUuaW5wdXRzLGQ9dGhpcztyKGIsZnVuY3Rpb24oYil7YS5wdXNoKFwidmFyIFwiK2IubmFtZStcIj1cIitkLmdlbmVyYXRlRnVuY3Rpb24oYi5uYW1lLFwic1wiKSk7Yi5pc1B1cmUmJmEucHVzaChiLm5hbWUsXCIuaXNQdXJlPVwiK0pTT04uc3RyaW5naWZ5KGIuaXNQdXJlKStcIjtcIil9KTtiLmxlbmd0aCYmYS5wdXNoKFwiZm4uaW5wdXRzPVtcIitiLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5uYW1lfSkuam9pbihcIixcIikrXCJdO1wiKTtyZXR1cm4gYS5qb2luKFwiXCIpfSxnZW5lcmF0ZUZ1bmN0aW9uOmZ1bmN0aW9uKGEsXG5iKXtyZXR1cm5cImZ1bmN0aW9uKFwiK2IrXCIpe1wiK3RoaXMudmFyc1ByZWZpeChhKSt0aGlzLmJvZHkoYSkrXCJ9O1wifSxmaWx0ZXJQcmVmaXg6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXM7cih0aGlzLnN0YXRlLmZpbHRlcnMsZnVuY3Rpb24oZCxjKXthLnB1c2goZCtcIj0kZmlsdGVyKFwiK2IuZXNjYXBlKGMpK1wiKVwiKX0pO3JldHVybiBhLmxlbmd0aD9cInZhciBcIithLmpvaW4oXCIsXCIpK1wiO1wiOlwiXCJ9LHZhcnNQcmVmaXg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVbYV0udmFycy5sZW5ndGg/XCJ2YXIgXCIrdGhpcy5zdGF0ZVthXS52YXJzLmpvaW4oXCIsXCIpK1wiO1wiOlwiXCJ9LGJvZHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RhdGVbYV0uYm9keS5qb2luKFwiXCIpfSxyZWN1cnNlOmZ1bmN0aW9uKGEsYixkLGMsZSxmKXt2YXIgZyxrLGg9dGhpcyxsLG0scDtjPWN8fEU7aWYoIWYmJncoYS53YXRjaElkKSliPWJ8fHRoaXMubmV4dElkKCksdGhpcy5pZl8oXCJpXCIsdGhpcy5sYXp5QXNzaWduKGIsXG50aGlzLmNvbXB1dGVkTWVtYmVyKFwiaVwiLGEud2F0Y2hJZCkpLHRoaXMubGF6eVJlY3Vyc2UoYSxiLGQsYyxlLCEwKSk7ZWxzZSBzd2l0Y2goYS50eXBlKXtjYXNlIHEuUHJvZ3JhbTpyKGEuYm9keSxmdW5jdGlvbihiLGMpe2gucmVjdXJzZShiLmV4cHJlc3Npb24sdm9pZCAwLHZvaWQgMCxmdW5jdGlvbihhKXtrPWF9KTtjIT09YS5ib2R5Lmxlbmd0aC0xP2guY3VycmVudCgpLmJvZHkucHVzaChrLFwiO1wiKTpoLnJldHVybl8oayl9KTticmVhaztjYXNlIHEuTGl0ZXJhbDptPXRoaXMuZXNjYXBlKGEudmFsdWUpO3RoaXMuYXNzaWduKGIsbSk7YyhifHxtKTticmVhaztjYXNlIHEuVW5hcnlFeHByZXNzaW9uOnRoaXMucmVjdXJzZShhLmFyZ3VtZW50LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oYSl7az1hfSk7bT1hLm9wZXJhdG9yK1wiKFwiK3RoaXMuaWZEZWZpbmVkKGssMCkrXCIpXCI7dGhpcy5hc3NpZ24oYixtKTtjKG0pO2JyZWFrO2Nhc2UgcS5CaW5hcnlFeHByZXNzaW9uOnRoaXMucmVjdXJzZShhLmxlZnQsXG52b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKGEpe2c9YX0pO3RoaXMucmVjdXJzZShhLnJpZ2h0LHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oYSl7az1hfSk7bT1cIitcIj09PWEub3BlcmF0b3I/dGhpcy5wbHVzKGcsayk6XCItXCI9PT1hLm9wZXJhdG9yP3RoaXMuaWZEZWZpbmVkKGcsMCkrYS5vcGVyYXRvcit0aGlzLmlmRGVmaW5lZChrLDApOlwiKFwiK2crXCIpXCIrYS5vcGVyYXRvcitcIihcIitrK1wiKVwiO3RoaXMuYXNzaWduKGIsbSk7YyhtKTticmVhaztjYXNlIHEuTG9naWNhbEV4cHJlc3Npb246Yj1ifHx0aGlzLm5leHRJZCgpO2gucmVjdXJzZShhLmxlZnQsYik7aC5pZl8oXCImJlwiPT09YS5vcGVyYXRvcj9iOmgubm90KGIpLGgubGF6eVJlY3Vyc2UoYS5yaWdodCxiKSk7YyhiKTticmVhaztjYXNlIHEuQ29uZGl0aW9uYWxFeHByZXNzaW9uOmI9Ynx8dGhpcy5uZXh0SWQoKTtoLnJlY3Vyc2UoYS50ZXN0LGIpO2guaWZfKGIsaC5sYXp5UmVjdXJzZShhLmFsdGVybmF0ZSxiKSxoLmxhenlSZWN1cnNlKGEuY29uc2VxdWVudCxcbmIpKTtjKGIpO2JyZWFrO2Nhc2UgcS5JZGVudGlmaWVyOmI9Ynx8dGhpcy5uZXh0SWQoKTtkJiYoZC5jb250ZXh0PVwiaW5wdXRzXCI9PT1oLnN0YWdlP1wic1wiOnRoaXMuYXNzaWduKHRoaXMubmV4dElkKCksdGhpcy5nZXRIYXNPd25Qcm9wZXJ0eShcImxcIixhLm5hbWUpK1wiP2w6c1wiKSxkLmNvbXB1dGVkPSExLGQubmFtZT1hLm5hbWUpO2guaWZfKFwiaW5wdXRzXCI9PT1oLnN0YWdlfHxoLm5vdChoLmdldEhhc093blByb3BlcnR5KFwibFwiLGEubmFtZSkpLGZ1bmN0aW9uKCl7aC5pZl8oXCJpbnB1dHNcIj09PWguc3RhZ2V8fFwic1wiLGZ1bmN0aW9uKCl7ZSYmMSE9PWUmJmguaWZfKGguaXNOdWxsKGgubm9uQ29tcHV0ZWRNZW1iZXIoXCJzXCIsYS5uYW1lKSksaC5sYXp5QXNzaWduKGgubm9uQ29tcHV0ZWRNZW1iZXIoXCJzXCIsYS5uYW1lKSxcInt9XCIpKTtoLmFzc2lnbihiLGgubm9uQ29tcHV0ZWRNZW1iZXIoXCJzXCIsYS5uYW1lKSl9KX0sYiYmaC5sYXp5QXNzaWduKGIsaC5ub25Db21wdXRlZE1lbWJlcihcImxcIixcbmEubmFtZSkpKTtjKGIpO2JyZWFrO2Nhc2UgcS5NZW1iZXJFeHByZXNzaW9uOmc9ZCYmKGQuY29udGV4dD10aGlzLm5leHRJZCgpKXx8dGhpcy5uZXh0SWQoKTtiPWJ8fHRoaXMubmV4dElkKCk7aC5yZWN1cnNlKGEub2JqZWN0LGcsdm9pZCAwLGZ1bmN0aW9uKCl7aC5pZl8oaC5ub3ROdWxsKGcpLGZ1bmN0aW9uKCl7YS5jb21wdXRlZD8oaz1oLm5leHRJZCgpLGgucmVjdXJzZShhLnByb3BlcnR5LGspLGguZ2V0U3RyaW5nVmFsdWUoayksZSYmMSE9PWUmJmguaWZfKGgubm90KGguY29tcHV0ZWRNZW1iZXIoZyxrKSksaC5sYXp5QXNzaWduKGguY29tcHV0ZWRNZW1iZXIoZyxrKSxcInt9XCIpKSxtPWguY29tcHV0ZWRNZW1iZXIoZyxrKSxoLmFzc2lnbihiLG0pLGQmJihkLmNvbXB1dGVkPSEwLGQubmFtZT1rKSk6KGUmJjEhPT1lJiZoLmlmXyhoLmlzTnVsbChoLm5vbkNvbXB1dGVkTWVtYmVyKGcsYS5wcm9wZXJ0eS5uYW1lKSksaC5sYXp5QXNzaWduKGgubm9uQ29tcHV0ZWRNZW1iZXIoZyxcbmEucHJvcGVydHkubmFtZSksXCJ7fVwiKSksbT1oLm5vbkNvbXB1dGVkTWVtYmVyKGcsYS5wcm9wZXJ0eS5uYW1lKSxoLmFzc2lnbihiLG0pLGQmJihkLmNvbXB1dGVkPSExLGQubmFtZT1hLnByb3BlcnR5Lm5hbWUpKX0sZnVuY3Rpb24oKXtoLmFzc2lnbihiLFwidW5kZWZpbmVkXCIpfSk7YyhiKX0sISFlKTticmVhaztjYXNlIHEuQ2FsbEV4cHJlc3Npb246Yj1ifHx0aGlzLm5leHRJZCgpO2EuZmlsdGVyPyhrPWguZmlsdGVyKGEuY2FsbGVlLm5hbWUpLGw9W10scihhLmFyZ3VtZW50cyxmdW5jdGlvbihhKXt2YXIgYj1oLm5leHRJZCgpO2gucmVjdXJzZShhLGIpO2wucHVzaChiKX0pLG09aytcIihcIitsLmpvaW4oXCIsXCIpK1wiKVwiLGguYXNzaWduKGIsbSksYyhiKSk6KGs9aC5uZXh0SWQoKSxnPXt9LGw9W10saC5yZWN1cnNlKGEuY2FsbGVlLGssZyxmdW5jdGlvbigpe2guaWZfKGgubm90TnVsbChrKSxmdW5jdGlvbigpe3IoYS5hcmd1bWVudHMsZnVuY3Rpb24oYil7aC5yZWN1cnNlKGIsYS5jb25zdGFudD9cbnZvaWQgMDpoLm5leHRJZCgpLHZvaWQgMCxmdW5jdGlvbihhKXtsLnB1c2goYSl9KX0pO209Zy5uYW1lP2gubWVtYmVyKGcuY29udGV4dCxnLm5hbWUsZy5jb21wdXRlZCkrXCIoXCIrbC5qb2luKFwiLFwiKStcIilcIjprK1wiKFwiK2wuam9pbihcIixcIikrXCIpXCI7aC5hc3NpZ24oYixtKX0sZnVuY3Rpb24oKXtoLmFzc2lnbihiLFwidW5kZWZpbmVkXCIpfSk7YyhiKX0pKTticmVhaztjYXNlIHEuQXNzaWdubWVudEV4cHJlc3Npb246az10aGlzLm5leHRJZCgpO2c9e307dGhpcy5yZWN1cnNlKGEubGVmdCx2b2lkIDAsZyxmdW5jdGlvbigpe2guaWZfKGgubm90TnVsbChnLmNvbnRleHQpLGZ1bmN0aW9uKCl7aC5yZWN1cnNlKGEucmlnaHQsayk7bT1oLm1lbWJlcihnLmNvbnRleHQsZy5uYW1lLGcuY29tcHV0ZWQpK2Eub3BlcmF0b3IraztoLmFzc2lnbihiLG0pO2MoYnx8bSl9KX0sMSk7YnJlYWs7Y2FzZSBxLkFycmF5RXhwcmVzc2lvbjpsPVtdO3IoYS5lbGVtZW50cyxmdW5jdGlvbihiKXtoLnJlY3Vyc2UoYixcbmEuY29uc3RhbnQ/dm9pZCAwOmgubmV4dElkKCksdm9pZCAwLGZ1bmN0aW9uKGEpe2wucHVzaChhKX0pfSk7bT1cIltcIitsLmpvaW4oXCIsXCIpK1wiXVwiO3RoaXMuYXNzaWduKGIsbSk7YyhifHxtKTticmVhaztjYXNlIHEuT2JqZWN0RXhwcmVzc2lvbjpsPVtdO3A9ITE7cihhLnByb3BlcnRpZXMsZnVuY3Rpb24oYSl7YS5jb21wdXRlZCYmKHA9ITApfSk7cD8oYj1ifHx0aGlzLm5leHRJZCgpLHRoaXMuYXNzaWduKGIsXCJ7fVwiKSxyKGEucHJvcGVydGllcyxmdW5jdGlvbihhKXthLmNvbXB1dGVkPyhnPWgubmV4dElkKCksaC5yZWN1cnNlKGEua2V5LGcpKTpnPWEua2V5LnR5cGU9PT1xLklkZW50aWZpZXI/YS5rZXkubmFtZTpcIlwiK2Eua2V5LnZhbHVlO2s9aC5uZXh0SWQoKTtoLnJlY3Vyc2UoYS52YWx1ZSxrKTtoLmFzc2lnbihoLm1lbWJlcihiLGcsYS5jb21wdXRlZCksayl9KSk6KHIoYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGIpe2gucmVjdXJzZShiLnZhbHVlLGEuY29uc3RhbnQ/dm9pZCAwOlxuaC5uZXh0SWQoKSx2b2lkIDAsZnVuY3Rpb24oYSl7bC5wdXNoKGguZXNjYXBlKGIua2V5LnR5cGU9PT1xLklkZW50aWZpZXI/Yi5rZXkubmFtZTpcIlwiK2Iua2V5LnZhbHVlKStcIjpcIithKX0pfSksbT1cIntcIitsLmpvaW4oXCIsXCIpK1wifVwiLHRoaXMuYXNzaWduKGIsbSkpO2MoYnx8bSk7YnJlYWs7Y2FzZSBxLlRoaXNFeHByZXNzaW9uOnRoaXMuYXNzaWduKGIsXCJzXCIpO2MoYnx8XCJzXCIpO2JyZWFrO2Nhc2UgcS5Mb2NhbHNFeHByZXNzaW9uOnRoaXMuYXNzaWduKGIsXCJsXCIpO2MoYnx8XCJsXCIpO2JyZWFrO2Nhc2UgcS5OR1ZhbHVlUGFyYW1ldGVyOnRoaXMuYXNzaWduKGIsXCJ2XCIpLGMoYnx8XCJ2XCIpfX0sZ2V0SGFzT3duUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hK1wiLlwiK2IsYz10aGlzLmN1cnJlbnQoKS5vd247Yy5oYXNPd25Qcm9wZXJ0eShkKXx8KGNbZF09dGhpcy5uZXh0SWQoITEsYStcIiYmKFwiK3RoaXMuZXNjYXBlKGIpK1wiIGluIFwiK2ErXCIpXCIpKTtyZXR1cm4gY1tkXX0sYXNzaWduOmZ1bmN0aW9uKGEsXG5iKXtpZihhKXJldHVybiB0aGlzLmN1cnJlbnQoKS5ib2R5LnB1c2goYSxcIj1cIixiLFwiO1wiKSxhfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5zdGF0ZS5maWx0ZXJzLmhhc093blByb3BlcnR5KGEpfHwodGhpcy5zdGF0ZS5maWx0ZXJzW2FdPXRoaXMubmV4dElkKCEwKSk7cmV0dXJuIHRoaXMuc3RhdGUuZmlsdGVyc1thXX0saWZEZWZpbmVkOmZ1bmN0aW9uKGEsYil7cmV0dXJuXCJpZkRlZmluZWQoXCIrYStcIixcIit0aGlzLmVzY2FwZShiKStcIilcIn0scGx1czpmdW5jdGlvbihhLGIpe3JldHVyblwicGx1cyhcIithK1wiLFwiK2IrXCIpXCJ9LHJldHVybl86ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKFwicmV0dXJuIFwiLGEsXCI7XCIpfSxpZl86ZnVuY3Rpb24oYSxiLGQpe2lmKCEwPT09YSliKCk7ZWxzZXt2YXIgYz10aGlzLmN1cnJlbnQoKS5ib2R5O2MucHVzaChcImlmKFwiLGEsXCIpe1wiKTtiKCk7Yy5wdXNoKFwifVwiKTtkJiYoYy5wdXNoKFwiZWxzZXtcIiksZCgpLGMucHVzaChcIn1cIikpfX0sXG5ub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCIhKFwiK2ErXCIpXCJ9LGlzTnVsbDpmdW5jdGlvbihhKXtyZXR1cm4gYStcIj09bnVsbFwifSxub3ROdWxsOmZ1bmN0aW9uKGEpe3JldHVybiBhK1wiIT1udWxsXCJ9LG5vbkNvbXB1dGVkTWVtYmVyOmZ1bmN0aW9uKGEsYil7dmFyIGQ9L1teJF9hLXpBLVowLTldL2c7cmV0dXJuL15bJF9hLXpBLVpdWyRfYS16QS1aMC05XSokLy50ZXN0KGIpP2ErXCIuXCIrYjphKydbXCInK2IucmVwbGFjZShkLHRoaXMuc3RyaW5nRXNjYXBlRm4pKydcIl0nfSxjb21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIpe3JldHVybiBhK1wiW1wiK2IrXCJdXCJ9LG1lbWJlcjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGQ/dGhpcy5jb21wdXRlZE1lbWJlcihhLGIpOnRoaXMubm9uQ29tcHV0ZWRNZW1iZXIoYSxiKX0sZ2V0U3RyaW5nVmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5hc3NpZ24oYSxcImdldFN0cmluZ1ZhbHVlKFwiK2ErXCIpXCIpfSxsYXp5UmVjdXJzZTpmdW5jdGlvbihhLGIsZCxjLGUsZil7dmFyIGc9XG50aGlzO3JldHVybiBmdW5jdGlvbigpe2cucmVjdXJzZShhLGIsZCxjLGUsZil9fSxsYXp5QXNzaWduOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcztyZXR1cm4gZnVuY3Rpb24oKXtkLmFzc2lnbihhLGIpfX0sc3RyaW5nRXNjYXBlUmVnZXg6L1teIGEtekEtWjAtOV0vZyxzdHJpbmdFc2NhcGVGbjpmdW5jdGlvbihhKXtyZXR1cm5cIlxcXFx1XCIrKFwiMDAwMFwiK2EuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KX0sZXNjYXBlOmZ1bmN0aW9uKGEpe2lmKEEoYSkpcmV0dXJuXCInXCIrYS5yZXBsYWNlKHRoaXMuc3RyaW5nRXNjYXBlUmVnZXgsdGhpcy5zdHJpbmdFc2NhcGVGbikrXCInXCI7aWYoVyhhKSlyZXR1cm4gYS50b1N0cmluZygpO2lmKCEwPT09YSlyZXR1cm5cInRydWVcIjtpZighMT09PWEpcmV0dXJuXCJmYWxzZVwiO2lmKG51bGw9PT1hKXJldHVyblwibnVsbFwiO2lmKFwidW5kZWZpbmVkXCI9PT10eXBlb2YgYSlyZXR1cm5cInVuZGVmaW5lZFwiO3Rocm93IFlhKFwiZXNjXCIpO30sbmV4dElkOmZ1bmN0aW9uKGEsXG5iKXt2YXIgZD1cInZcIit0aGlzLnN0YXRlLm5leHRJZCsrO2F8fHRoaXMuY3VycmVudCgpLnZhcnMucHVzaChkKyhiP1wiPVwiK2I6XCJcIikpO3JldHVybiBkfSxjdXJyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5zdGF0ZS5jb21wdXRpbmddfX07S2QucHJvdG90eXBlPXtjb21waWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7WihhLGIuJGZpbHRlcik7dmFyIGQsYztpZihkPUlkKGEpKWM9dGhpcy5yZWN1cnNlKGQpO2Q9R2QoYS5ib2R5KTt2YXIgZTtkJiYoZT1bXSxyKGQsZnVuY3Rpb24oYSxjKXt2YXIgZD1iLnJlY3Vyc2UoYSk7ZC5pc1B1cmU9YS5pc1B1cmU7YS5pbnB1dD1kO2UucHVzaChkKTthLndhdGNoSWQ9Y30pKTt2YXIgZj1bXTtyKGEuYm9keSxmdW5jdGlvbihhKXtmLnB1c2goYi5yZWN1cnNlKGEuZXhwcmVzc2lvbikpfSk7YT0wPT09YS5ib2R5Lmxlbmd0aD9FOjE9PT1hLmJvZHkubGVuZ3RoP2ZbMF06ZnVuY3Rpb24oYSxiKXt2YXIgYztyKGYsZnVuY3Rpb24oZCl7Yz1cbmQoYSxiKX0pO3JldHVybiBjfTtjJiYoYS5hc3NpZ249ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjKGEsZCxiKX0pO2UmJihhLmlucHV0cz1lKTtyZXR1cm4gYX0scmVjdXJzZTpmdW5jdGlvbihhLGIsZCl7dmFyIGMsZSxmPXRoaXMsZztpZihhLmlucHV0KXJldHVybiB0aGlzLmlucHV0cyhhLmlucHV0LGEud2F0Y2hJZCk7c3dpdGNoKGEudHlwZSl7Y2FzZSBxLkxpdGVyYWw6cmV0dXJuIHRoaXMudmFsdWUoYS52YWx1ZSxiKTtjYXNlIHEuVW5hcnlFeHByZXNzaW9uOnJldHVybiBlPXRoaXMucmVjdXJzZShhLmFyZ3VtZW50KSx0aGlzW1widW5hcnlcIithLm9wZXJhdG9yXShlLGIpO2Nhc2UgcS5CaW5hcnlFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQpLGU9dGhpcy5yZWN1cnNlKGEucmlnaHQpLHRoaXNbXCJiaW5hcnlcIithLm9wZXJhdG9yXShjLGUsYik7Y2FzZSBxLkxvZ2ljYWxFeHByZXNzaW9uOnJldHVybiBjPXRoaXMucmVjdXJzZShhLmxlZnQpLGU9dGhpcy5yZWN1cnNlKGEucmlnaHQpLFxudGhpc1tcImJpbmFyeVwiK2Eub3BlcmF0b3JdKGMsZSxiKTtjYXNlIHEuQ29uZGl0aW9uYWxFeHByZXNzaW9uOnJldHVybiB0aGlzW1widGVybmFyeT86XCJdKHRoaXMucmVjdXJzZShhLnRlc3QpLHRoaXMucmVjdXJzZShhLmFsdGVybmF0ZSksdGhpcy5yZWN1cnNlKGEuY29uc2VxdWVudCksYik7Y2FzZSBxLklkZW50aWZpZXI6cmV0dXJuIGYuaWRlbnRpZmllcihhLm5hbWUsYixkKTtjYXNlIHEuTWVtYmVyRXhwcmVzc2lvbjpyZXR1cm4gYz10aGlzLnJlY3Vyc2UoYS5vYmplY3QsITEsISFkKSxhLmNvbXB1dGVkfHwoZT1hLnByb3BlcnR5Lm5hbWUpLGEuY29tcHV0ZWQmJihlPXRoaXMucmVjdXJzZShhLnByb3BlcnR5KSksYS5jb21wdXRlZD90aGlzLmNvbXB1dGVkTWVtYmVyKGMsZSxiLGQpOnRoaXMubm9uQ29tcHV0ZWRNZW1iZXIoYyxlLGIsZCk7Y2FzZSBxLkNhbGxFeHByZXNzaW9uOnJldHVybiBnPVtdLHIoYS5hcmd1bWVudHMsZnVuY3Rpb24oYSl7Zy5wdXNoKGYucmVjdXJzZShhKSl9KSxcbmEuZmlsdGVyJiYoZT10aGlzLiRmaWx0ZXIoYS5jYWxsZWUubmFtZSkpLGEuZmlsdGVyfHwoZT10aGlzLnJlY3Vyc2UoYS5jYWxsZWUsITApKSxhLmZpbHRlcj9mdW5jdGlvbihhLGMsZCxmKXtmb3IodmFyIHA9W10sbj0wO248Zy5sZW5ndGg7KytuKXAucHVzaChnW25dKGEsYyxkLGYpKTthPWUuYXBwbHkodm9pZCAwLHAsZik7cmV0dXJuIGI/e2NvbnRleHQ6dm9pZCAwLG5hbWU6dm9pZCAwLHZhbHVlOmF9OmF9OmZ1bmN0aW9uKGEsYyxkLGYpe3ZhciBwPWUoYSxjLGQsZiksbjtpZihudWxsIT1wLnZhbHVlKXtuPVtdO2Zvcih2YXIgcz0wO3M8Zy5sZW5ndGg7KytzKW4ucHVzaChnW3NdKGEsYyxkLGYpKTtuPXAudmFsdWUuYXBwbHkocC5jb250ZXh0LG4pfXJldHVybiBiP3t2YWx1ZTpufTpufTtjYXNlIHEuQXNzaWdubWVudEV4cHJlc3Npb246cmV0dXJuIGM9dGhpcy5yZWN1cnNlKGEubGVmdCwhMCwxKSxlPXRoaXMucmVjdXJzZShhLnJpZ2h0KSxmdW5jdGlvbihhLGQsZixnKXt2YXIgcD1cbmMoYSxkLGYsZyk7YT1lKGEsZCxmLGcpO3AuY29udGV4dFtwLm5hbWVdPWE7cmV0dXJuIGI/e3ZhbHVlOmF9OmF9O2Nhc2UgcS5BcnJheUV4cHJlc3Npb246cmV0dXJuIGc9W10scihhLmVsZW1lbnRzLGZ1bmN0aW9uKGEpe2cucHVzaChmLnJlY3Vyc2UoYSkpfSksZnVuY3Rpb24oYSxjLGQsZSl7Zm9yKHZhciBmPVtdLG49MDtuPGcubGVuZ3RoOysrbilmLnB1c2goZ1tuXShhLGMsZCxlKSk7cmV0dXJuIGI/e3ZhbHVlOmZ9OmZ9O2Nhc2UgcS5PYmplY3RFeHByZXNzaW9uOnJldHVybiBnPVtdLHIoYS5wcm9wZXJ0aWVzLGZ1bmN0aW9uKGEpe2EuY29tcHV0ZWQ/Zy5wdXNoKHtrZXk6Zi5yZWN1cnNlKGEua2V5KSxjb21wdXRlZDohMCx2YWx1ZTpmLnJlY3Vyc2UoYS52YWx1ZSl9KTpnLnB1c2goe2tleTphLmtleS50eXBlPT09cS5JZGVudGlmaWVyP2Eua2V5Lm5hbWU6XCJcIithLmtleS52YWx1ZSxjb21wdXRlZDohMSx2YWx1ZTpmLnJlY3Vyc2UoYS52YWx1ZSl9KX0pLGZ1bmN0aW9uKGEsXG5jLGQsZSl7Zm9yKHZhciBmPXt9LG49MDtuPGcubGVuZ3RoOysrbilnW25dLmNvbXB1dGVkP2ZbZ1tuXS5rZXkoYSxjLGQsZSldPWdbbl0udmFsdWUoYSxjLGQsZSk6ZltnW25dLmtleV09Z1tuXS52YWx1ZShhLGMsZCxlKTtyZXR1cm4gYj97dmFsdWU6Zn06Zn07Y2FzZSBxLlRoaXNFeHByZXNzaW9uOnJldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYj97dmFsdWU6YX06YX07Y2FzZSBxLkxvY2Fsc0V4cHJlc3Npb246cmV0dXJuIGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGI/e3ZhbHVlOmN9OmN9O2Nhc2UgcS5OR1ZhbHVlUGFyYW1ldGVyOnJldHVybiBmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGI/e3ZhbHVlOmR9OmR9fX0sXCJ1bmFyeStcIjpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihkLGMsZSxmKXtkPWEoZCxjLGUsZik7ZD13KGQpPytkOjA7cmV0dXJuIGI/e3ZhbHVlOmR9OmR9fSxcInVuYXJ5LVwiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGQsYyxlLGYpe2Q9YShkLGMsXG5lLGYpO2Q9dyhkKT8tZDotMDtyZXR1cm4gYj97dmFsdWU6ZH06ZH19LFwidW5hcnkhXCI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oZCxjLGUsZil7ZD0hYShkLGMsZSxmKTtyZXR1cm4gYj97dmFsdWU6ZH06ZH19LFwiYmluYXJ5K1wiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7dmFyIGs9YShjLGUsZixnKTtjPWIoYyxlLGYsZyk7az1FZChrLGMpO3JldHVybiBkP3t2YWx1ZTprfTprfX0sXCJiaW5hcnktXCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXt2YXIgaz1hKGMsZSxmLGcpO2M9YihjLGUsZixnKTtrPSh3KGspP2s6MCktKHcoYyk/YzowKTtyZXR1cm4gZD97dmFsdWU6a306a319LFwiYmluYXJ5KlwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpKmIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeS9cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsXG5lLGYsZyl7Yz1hKGMsZSxmLGcpL2IoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeSVcIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKSViKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnk9PT1cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKT09PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeSE9PVwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpIT09YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5PT1cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKT09YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5IT1cIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsXG5lLGYsZyl7Yz1hKGMsZSxmLGcpIT1iKGMsZSxmLGcpO3JldHVybiBkP3t2YWx1ZTpjfTpjfX0sXCJiaW5hcnk8XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk8YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5PlwiOmZ1bmN0aW9uKGEsYixkKXtyZXR1cm4gZnVuY3Rpb24oYyxlLGYsZyl7Yz1hKGMsZSxmLGcpPmIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeTw9XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk8PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeT49XCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPWEoYyxlLGYsZyk+PWIoYyxlLGYsZyk7cmV0dXJuIGQ/e3ZhbHVlOmN9OmN9fSxcImJpbmFyeSYmXCI6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmdW5jdGlvbihjLGUsZixnKXtjPVxuYShjLGUsZixnKSYmYihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwiYmluYXJ5fHxcIjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9YShjLGUsZixnKXx8YihjLGUsZixnKTtyZXR1cm4gZD97dmFsdWU6Y306Y319LFwidGVybmFyeT86XCI6ZnVuY3Rpb24oYSxiLGQsYyl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnLGspe2U9YShlLGYsZyxrKT9iKGUsZixnLGspOmQoZSxmLGcsayk7cmV0dXJuIGM/e3ZhbHVlOmV9OmV9fSx2YWx1ZTpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBiP3tjb250ZXh0OnZvaWQgMCxuYW1lOnZvaWQgMCx2YWx1ZTphfTphfX0saWRlbnRpZmllcjpmdW5jdGlvbihhLGIsZCl7cmV0dXJuIGZ1bmN0aW9uKGMsZSxmLGcpe2M9ZSYmYSBpbiBlP2U6YztkJiYxIT09ZCYmYyYmbnVsbD09Y1thXSYmKGNbYV09e30pO2U9Yz9jW2FdOnZvaWQgMDtyZXR1cm4gYj97Y29udGV4dDpjLG5hbWU6YSx2YWx1ZTplfTpcbmV9fSxjb21wdXRlZE1lbWJlcjpmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGcsayl7dmFyIGg9YShlLGYsZyxrKSxsLG07bnVsbCE9aCYmKGw9YihlLGYsZyxrKSxsKz1cIlwiLGMmJjEhPT1jJiZoJiYhaFtsXSYmKGhbbF09e30pLG09aFtsXSk7cmV0dXJuIGQ/e2NvbnRleHQ6aCxuYW1lOmwsdmFsdWU6bX06bX19LG5vbkNvbXB1dGVkTWVtYmVyOmZ1bmN0aW9uKGEsYixkLGMpe3JldHVybiBmdW5jdGlvbihlLGYsZyxrKXtlPWEoZSxmLGcsayk7YyYmMSE9PWMmJmUmJm51bGw9PWVbYl0mJihlW2JdPXt9KTtmPW51bGwhPWU/ZVtiXTp2b2lkIDA7cmV0dXJuIGQ/e2NvbnRleHQ6ZSxuYW1lOmIsdmFsdWU6Zn06Zn19LGlucHV0czpmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbihkLGMsZSxmKXtyZXR1cm4gZj9mW2JdOmEoZCxjLGUpfX19O01iLnByb3RvdHlwZT17Y29uc3RydWN0b3I6TWIscGFyc2U6ZnVuY3Rpb24oYSl7YT10aGlzLmdldEFzdChhKTt2YXIgYj1cbnRoaXMuYXN0Q29tcGlsZXIuY29tcGlsZShhLmFzdCksZD1hLmFzdDtiLmxpdGVyYWw9MD09PWQuYm9keS5sZW5ndGh8fDE9PT1kLmJvZHkubGVuZ3RoJiYoZC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZT09PXEuTGl0ZXJhbHx8ZC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZT09PXEuQXJyYXlFeHByZXNzaW9ufHxkLmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlPT09cS5PYmplY3RFeHByZXNzaW9uKTtiLmNvbnN0YW50PWEuYXN0LmNvbnN0YW50O2Iub25lVGltZT1hLm9uZVRpbWU7cmV0dXJuIGJ9LGdldEFzdDpmdW5jdGlvbihhKXt2YXIgYj0hMTthPWEudHJpbSgpO1wiOlwiPT09YS5jaGFyQXQoMCkmJlwiOlwiPT09YS5jaGFyQXQoMSkmJihiPSEwLGE9YS5zdWJzdHJpbmcoMikpO3JldHVybnthc3Q6dGhpcy5hc3QuYXN0KGEpLG9uZVRpbWU6Yn19fTt2YXIgRWE9RihcIiRzY2VcIiksVj17SFRNTDpcImh0bWxcIixDU1M6XCJjc3NcIixNRURJQV9VUkw6XCJtZWRpYVVybFwiLFVSTDpcInVybFwiLFJFU09VUkNFX1VSTDpcInJlc291cmNlVXJsXCIsXG5KUzpcImpzXCJ9LENjPS9fKFthLXpdKS9nLFVnPUYoXCIkdGVtcGxhdGVSZXF1ZXN0XCIpLFZnPUYoXCIkdGltZW91dFwiKSxhYT1DLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLE9kPWdhKEMubG9jYXRpb24uaHJlZiksTmE7YWEuaHJlZj1cImh0dHA6Ly9bOjoxXVwiO3ZhciBXZz1cIls6OjFdXCI9PT1hYS5ob3N0bmFtZTtQZC4kaW5qZWN0PVtcIiRkb2N1bWVudFwiXTtkZC4kaW5qZWN0PVtcIiRwcm92aWRlXCJdO3ZhciBXZD0yMixWZD1cIi5cIixFYz1cIjBcIjtRZC4kaW5qZWN0PVtcIiRsb2NhbGVcIl07U2QuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBnaD17eXl5eTplYShcIkZ1bGxZZWFyXCIsNCwwLCExLCEwKSx5eTplYShcIkZ1bGxZZWFyXCIsMiwwLCEwLCEwKSx5OmVhKFwiRnVsbFllYXJcIiwxLDAsITEsITApLE1NTU06a2IoXCJNb250aFwiKSxNTU06a2IoXCJNb250aFwiLCEwKSxNTTplYShcIk1vbnRoXCIsMiwxKSxNOmVhKFwiTW9udGhcIiwxLDEpLExMTEw6a2IoXCJNb250aFwiLCExLCEwKSxkZDplYShcIkRhdGVcIiwyKSxcbmQ6ZWEoXCJEYXRlXCIsMSksSEg6ZWEoXCJIb3Vyc1wiLDIpLEg6ZWEoXCJIb3Vyc1wiLDEpLGhoOmVhKFwiSG91cnNcIiwyLC0xMiksaDplYShcIkhvdXJzXCIsMSwtMTIpLG1tOmVhKFwiTWludXRlc1wiLDIpLG06ZWEoXCJNaW51dGVzXCIsMSksc3M6ZWEoXCJTZWNvbmRzXCIsMiksczplYShcIlNlY29uZHNcIiwxKSxzc3M6ZWEoXCJNaWxsaXNlY29uZHNcIiwzKSxFRUVFOmtiKFwiRGF5XCIpLEVFRTprYihcIkRheVwiLCEwKSxhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDEyPmEuZ2V0SG91cnMoKT9iLkFNUE1TWzBdOmIuQU1QTVNbMV19LFo6ZnVuY3Rpb24oYSxiLGQpe2E9LTEqZDtyZXR1cm4gYT0oMDw9YT9cIitcIjpcIlwiKSsoT2IoTWF0aFswPGE/XCJmbG9vclwiOlwiY2VpbFwiXShhLzYwKSwyKStPYihNYXRoLmFicyhhJTYwKSwyKSl9LHd3OllkKDIpLHc6WWQoMSksRzpGYyxHRzpGYyxHR0c6RmMsR0dHRzpmdW5jdGlvbihhLGIpe3JldHVybiAwPj1hLmdldEZ1bGxZZWFyKCk/Yi5FUkFOQU1FU1swXTpiLkVSQU5BTUVTWzFdfX0sXG5maD0vKCg/OlteeU1MZEhobXNhWkV3RyddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfEwrfGQrfEgrfGgrfG0rfHMrfGF8WnxHK3x3KykpKFtcXHNcXFNdKikvLGVoPS9eLT9cXGQrJC87UmQuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciAkZz1pYShLKSxhaD1pYSh1Yik7VGQuJGluamVjdD1bXCIkcGFyc2VcIl07dmFyIE1lPWlhKHtyZXN0cmljdDpcIkVcIixjb21waWxlOmZ1bmN0aW9uKGEsYil7aWYoIWIuaHJlZiYmIWIueGxpbmtIcmVmKXJldHVybiBmdW5jdGlvbihhLGIpe2lmKFwiYVwiPT09YlswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgZT1cIltvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddXCI9PT1sYS5jYWxsKGIucHJvcChcImhyZWZcIikpP1wieGxpbms6aHJlZlwiOlwiaHJlZlwiO2Iub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2IuYXR0cihlKXx8YS5wcmV2ZW50RGVmYXVsdCgpfSl9fX19KSx2Yj17fTtyKEdiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGQsZSl7YS4kd2F0Y2goZVtjXSxcbmZ1bmN0aW9uKGEpe2UuJHNldChiLCEhYSl9KX1pZihcIm11bHRpcGxlXCIhPT1hKXt2YXIgYz13YShcIm5nLVwiK2IpLGU9ZDtcImNoZWNrZWRcIj09PWEmJihlPWZ1bmN0aW9uKGEsYixlKXtlLm5nTW9kZWwhPT1lW2NdJiZkKGEsYixlKX0pO3ZiW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHByaW9yaXR5OjEwMCxsaW5rOmV9fX19KTtyKHRkLGZ1bmN0aW9uKGEsYil7dmJbYl09ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLGxpbms6ZnVuY3Rpb24oYSxjLGUpe2lmKFwibmdQYXR0ZXJuXCI9PT1iJiZcIi9cIj09PWUubmdQYXR0ZXJuLmNoYXJBdCgwKSYmKGM9ZS5uZ1BhdHRlcm4ubWF0Y2goaWUpKSl7ZS4kc2V0KFwibmdQYXR0ZXJuXCIsbmV3IFJlZ0V4cChjWzFdLGNbMl0pKTtyZXR1cm59YS4kd2F0Y2goZVtiXSxmdW5jdGlvbihhKXtlLiRzZXQoYixhKX0pfX19fSk7cihbXCJzcmNcIixcInNyY3NldFwiLFwiaHJlZlwiXSxmdW5jdGlvbihhKXt2YXIgYj13YShcIm5nLVwiK2EpO3ZiW2JdPVxuW1wiJHNjZVwiLGZ1bmN0aW9uKGQpe3JldHVybntwcmlvcml0eTo5OSxsaW5rOmZ1bmN0aW9uKGMsZSxmKXt2YXIgZz1hLGs9YTtcImhyZWZcIj09PWEmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWxhLmNhbGwoZS5wcm9wKFwiaHJlZlwiKSkmJihrPVwieGxpbmtIcmVmXCIsZi4kYXR0cltrXT1cInhsaW5rOmhyZWZcIixnPW51bGwpO2YuJHNldChiLGQuZ2V0VHJ1c3RlZE1lZGlhVXJsKGZbYl0pKTtmLiRvYnNlcnZlKGIsZnVuY3Rpb24oYil7Yj8oZi4kc2V0KGssYiksQ2EmJmcmJmUucHJvcChnLGZba10pKTpcImhyZWZcIj09PWEmJmYuJHNldChrLG51bGwpfSl9fX1dfSk7dmFyIGxiPXskYWRkQ29udHJvbDpFLCRnZXRDb250cm9sczppYShbXSksJCRyZW5hbWVDb250cm9sOmZ1bmN0aW9uKGEsYil7YS4kbmFtZT1ifSwkcmVtb3ZlQ29udHJvbDpFLCRzZXRWYWxpZGl0eTpFLCRzZXREaXJ0eTpFLCRzZXRQcmlzdGluZTpFLCRzZXRTdWJtaXR0ZWQ6RSwkJHNldFN1Ym1pdHRlZDpFfTtQYi4kaW5qZWN0PVxuW1wiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJHNjb3BlXCIsXCIkYW5pbWF0ZVwiLFwiJGludGVycG9sYXRlXCJdO1BiLnByb3RvdHlwZT17JHJvbGxiYWNrVmlld1ZhbHVlOmZ1bmN0aW9uKCl7cih0aGlzLiQkY29udHJvbHMsZnVuY3Rpb24oYSl7YS4kcm9sbGJhY2tWaWV3VmFsdWUoKX0pfSwkY29tbWl0Vmlld1ZhbHVlOmZ1bmN0aW9uKCl7cih0aGlzLiQkY29udHJvbHMsZnVuY3Rpb24oYSl7YS4kY29tbWl0Vmlld1ZhbHVlKCl9KX0sJGFkZENvbnRyb2w6ZnVuY3Rpb24oYSl7SmEoYS4kbmFtZSxcImlucHV0XCIpO3RoaXMuJCRjb250cm9scy5wdXNoKGEpO2EuJG5hbWUmJih0aGlzW2EuJG5hbWVdPWEpO2EuJCRwYXJlbnRGb3JtPXRoaXN9LCRnZXRDb250cm9sczpmdW5jdGlvbigpe3JldHVybiBqYSh0aGlzLiQkY29udHJvbHMpfSwkJHJlbmFtZUNvbnRyb2w6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hLiRuYW1lO3RoaXNbZF09PT1hJiZkZWxldGUgdGhpc1tkXTt0aGlzW2JdPWE7YS4kbmFtZT1ifSwkcmVtb3ZlQ29udHJvbDpmdW5jdGlvbihhKXthLiRuYW1lJiZcbnRoaXNbYS4kbmFtZV09PT1hJiZkZWxldGUgdGhpc1thLiRuYW1lXTtyKHRoaXMuJHBlbmRpbmcsZnVuY3Rpb24oYixkKXt0aGlzLiRzZXRWYWxpZGl0eShkLG51bGwsYSl9LHRoaXMpO3IodGhpcy4kZXJyb3IsZnVuY3Rpb24oYixkKXt0aGlzLiRzZXRWYWxpZGl0eShkLG51bGwsYSl9LHRoaXMpO3IodGhpcy4kJHN1Y2Nlc3MsZnVuY3Rpb24oYixkKXt0aGlzLiRzZXRWYWxpZGl0eShkLG51bGwsYSl9LHRoaXMpO2NiKHRoaXMuJCRjb250cm9scyxhKTthLiQkcGFyZW50Rm9ybT1sYn0sJHNldERpcnR5OmZ1bmN0aW9uKCl7dGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsWmEpO3RoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LFZiKTt0aGlzLiRkaXJ0eT0hMDt0aGlzLiRwcmlzdGluZT0hMTt0aGlzLiQkcGFyZW50Rm9ybS4kc2V0RGlydHkoKX0sJHNldFByaXN0aW5lOmZ1bmN0aW9uKCl7dGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsXG5aYSxWYitcIiBuZy1zdWJtaXR0ZWRcIik7dGhpcy4kZGlydHk9ITE7dGhpcy4kcHJpc3RpbmU9ITA7dGhpcy4kc3VibWl0dGVkPSExO3IodGhpcy4kJGNvbnRyb2xzLGZ1bmN0aW9uKGEpe2EuJHNldFByaXN0aW5lKCl9KX0sJHNldFVudG91Y2hlZDpmdW5jdGlvbigpe3IodGhpcy4kJGNvbnRyb2xzLGZ1bmN0aW9uKGEpe2EuJHNldFVudG91Y2hlZCgpfSl9LCRzZXRTdWJtaXR0ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpczthLiQkcGFyZW50Rm9ybSYmYS4kJHBhcmVudEZvcm0hPT1sYjspYT1hLiQkcGFyZW50Rm9ybTthLiQkc2V0U3VibWl0dGVkKCl9LCQkc2V0U3VibWl0dGVkOmZ1bmN0aW9uKCl7dGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsXCJuZy1zdWJtaXR0ZWRcIik7dGhpcy4kc3VibWl0dGVkPSEwO3IodGhpcy4kJGNvbnRyb2xzLGZ1bmN0aW9uKGEpe2EuJCRzZXRTdWJtaXR0ZWQmJmEuJCRzZXRTdWJtaXR0ZWQoKX0pfX07YWUoe2NsYXp6OlBiLHNldDpmdW5jdGlvbihhLFxuYixkKXt2YXIgYz1hW2JdO2M/LTE9PT1jLmluZGV4T2YoZCkmJmMucHVzaChkKTphW2JdPVtkXX0sdW5zZXQ6ZnVuY3Rpb24oYSxiLGQpe3ZhciBjPWFbYl07YyYmKGNiKGMsZCksMD09PWMubGVuZ3RoJiZkZWxldGUgYVtiXSl9fSk7dmFyIGtlPWZ1bmN0aW9uKGEpe3JldHVybltcIiR0aW1lb3V0XCIsXCIkcGFyc2VcIixmdW5jdGlvbihiLGQpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuXCJcIj09PWE/ZCgndGhpc1tcIlwiXScpLmFzc2lnbjpkKGEpLmFzc2lnbnx8RX1yZXR1cm57bmFtZTpcImZvcm1cIixyZXN0cmljdDphP1wiRUFDXCI6XCJFXCIscmVxdWlyZTpbXCJmb3JtXCIsXCJeXj9mb3JtXCJdLGNvbnRyb2xsZXI6UGIsY29tcGlsZTpmdW5jdGlvbihkLGYpe2QuYWRkQ2xhc3MoWmEpLmFkZENsYXNzKG1iKTt2YXIgZz1mLm5hbWU/XCJuYW1lXCI6YSYmZi5uZ0Zvcm0/XCJuZ0Zvcm1cIjohMTtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsZCxlLGYpe3ZhciBwPWZbMF07aWYoIShcImFjdGlvblwiaW4gZSkpe3ZhciBuPWZ1bmN0aW9uKGIpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7cC4kY29tbWl0Vmlld1ZhbHVlKCk7XG5wLiRzZXRTdWJtaXR0ZWQoKX0pO2IucHJldmVudERlZmF1bHQoKX07ZFswXS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsbik7ZC5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtiKGZ1bmN0aW9uKCl7ZFswXS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsbil9LDAsITEpfSl9KGZbMV18fHAuJCRwYXJlbnRGb3JtKS4kYWRkQ29udHJvbChwKTt2YXIgcz1nP2MocC4kbmFtZSk6RTtnJiYocyhhLHApLGUuJG9ic2VydmUoZyxmdW5jdGlvbihiKXtwLiRuYW1lIT09YiYmKHMoYSx2b2lkIDApLHAuJCRwYXJlbnRGb3JtLiQkcmVuYW1lQ29udHJvbChwLGIpLHM9YyhwLiRuYW1lKSxzKGEscCkpfSkpO2Qub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7cC4kJHBhcmVudEZvcm0uJHJlbW92ZUNvbnRyb2wocCk7cyhhLHZvaWQgMCk7UyhwLGxiKX0pfX19fX1dfSxOZT1rZSgpLFplPWtlKCEwKSxoaD0vXlxcZHs0LH0tWzAxXVxcZC1bMC0zXVxcZFRbMC0yXVxcZDpbMC01XVxcZDpbMC01XVxcZFxcLlxcZCsoPzpbKy1dWzAtMl1cXGQ6WzAtNV1cXGR8WikkLyxcbnNoPS9eW2Etel1bYS16XFxkListXSo6XFwvKig/OlteOkBdKyg/OjpbXkBdKyk/QCk/KD86W15cXHM6Lz8jXSt8XFxbW2EtZlxcZDpdK10pKD86OlxcZCspPyg/OlxcL1tePyNdKik/KD86XFw/W14jXSopPyg/OiMuKik/JC9pLHRoPS9eKD89LnsxLDI1NH0kKSg/PS57MSw2NH1AKVstISMkJSYnKisvMC05PT9BLVpeX2BhLXp7fH1+XSsoXFwuWy0hIyQlJicqKy8wLTk9P0EtWl5fYGEtent8fX5dKykqQFtBLVphLXowLTldKFtBLVphLXowLTktXXswLDYxfVtBLVphLXowLTldKT8oXFwuW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dezAsNjF9W0EtWmEtejAtOV0pPykqJC8saWg9L15cXHMqKC18XFwrKT8oXFxkK3woXFxkKihcXC5cXGQqKSkpKFtlRV1bKy1dP1xcZCspP1xccyokLyxsZT0vXihcXGR7NCx9KS0oXFxkezJ9KS0oXFxkezJ9KSQvLG1lPS9eKFxcZHs0LH0pLShcXGRcXGQpLShcXGRcXGQpVChcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvLE1jPS9eKFxcZHs0LH0pLVcoXFxkXFxkKSQvLG5lPS9eKFxcZHs0LH0pLShcXGRcXGQpJC8sXG5vZT0vXihcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKFxcLlxcZHsxLDN9KT8pPyQvLGNlPVQoKTtyKFtcImRhdGVcIixcImRhdGV0aW1lLWxvY2FsXCIsXCJtb250aFwiLFwidGltZVwiLFwid2Vla1wiXSxmdW5jdGlvbihhKXtjZVthXT0hMH0pO3ZhciBwZT17dGV4dDpmdW5jdGlvbihhLGIsZCxjLGUsZil7U2EoYSxiLGQsYyxlLGYpO0hjKGMpfSxkYXRlOm5iKFwiZGF0ZVwiLGxlLFFiKGxlLFtcInl5eXlcIixcIk1NXCIsXCJkZFwiXSksXCJ5eXl5LU1NLWRkXCIpLFwiZGF0ZXRpbWUtbG9jYWxcIjpuYihcImRhdGV0aW1lbG9jYWxcIixtZSxRYihtZSxcInl5eXkgTU0gZGQgSEggbW0gc3Mgc3NzXCIuc3BsaXQoXCIgXCIpKSxcInl5eXktTU0tZGRUSEg6bW06c3Muc3NzXCIpLHRpbWU6bmIoXCJ0aW1lXCIsb2UsUWIob2UsW1wiSEhcIixcIm1tXCIsXCJzc1wiLFwic3NzXCJdKSxcIkhIOm1tOnNzLnNzc1wiKSx3ZWVrOm5iKFwid2Vla1wiLE1jLGZ1bmN0aW9uKGEsYil7aWYoaGEoYSkpcmV0dXJuIGE7aWYoQShhKSl7TWMubGFzdEluZGV4PTA7dmFyIGQ9TWMuZXhlYyhhKTtcbmlmKGQpe3ZhciBjPStkWzFdLGU9K2RbMl0sZj1kPTAsZz0wLGs9MCxoPVhkKGMpLGU9NyooZS0xKTtiJiYoZD1iLmdldEhvdXJzKCksZj1iLmdldE1pbnV0ZXMoKSxnPWIuZ2V0U2Vjb25kcygpLGs9Yi5nZXRNaWxsaXNlY29uZHMoKSk7cmV0dXJuIG5ldyBEYXRlKGMsMCxoLmdldERhdGUoKStlLGQsZixnLGspfX1yZXR1cm4gTmFOfSxcInl5eXktV3d3XCIpLG1vbnRoOm5iKFwibW9udGhcIixuZSxRYihuZSxbXCJ5eXl5XCIsXCJNTVwiXSksXCJ5eXl5LU1NXCIpLG51bWJlcjpmdW5jdGlvbihhLGIsZCxjLGUsZixnLGspe0ljKGEsYixkLGMsXCJudW1iZXJcIik7ZGUoYyk7U2EoYSxiLGQsYyxlLGYpO3ZhciBoO2lmKHcoZC5taW4pfHxkLm5nTWluKXt2YXIgbD1kLm1pbnx8ayhkLm5nTWluKShhKTtoPW5hKGwpO2MuJHZhbGlkYXRvcnMubWluPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuJGlzRW1wdHkoYil8fHooaCl8fGI+PWh9O2QuJG9ic2VydmUoXCJtaW5cIixmdW5jdGlvbihhKXthIT09bCYmKGg9bmEoYSksXG5sPWEsYy4kdmFsaWRhdGUoKSl9KX1pZih3KGQubWF4KXx8ZC5uZ01heCl7dmFyIG09ZC5tYXh8fGsoZC5uZ01heCkoYSkscD1uYShtKTtjLiR2YWxpZGF0b3JzLm1heD1mdW5jdGlvbihhLGIpe3JldHVybiBjLiRpc0VtcHR5KGIpfHx6KHApfHxiPD1wfTtkLiRvYnNlcnZlKFwibWF4XCIsZnVuY3Rpb24oYSl7YSE9PW0mJihwPW5hKGEpLG09YSxjLiR2YWxpZGF0ZSgpKX0pfWlmKHcoZC5zdGVwKXx8ZC5uZ1N0ZXApe3ZhciBuPWQuc3RlcHx8ayhkLm5nU3RlcCkoYSkscz1uYShuKTtjLiR2YWxpZGF0b3JzLnN0ZXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy4kaXNFbXB0eShiKXx8eihzKXx8ZWUoYixofHwwLHMpfTtkLiRvYnNlcnZlKFwic3RlcFwiLGZ1bmN0aW9uKGEpe2EhPT1uJiYocz1uYShhKSxuPWEsYy4kdmFsaWRhdGUoKSl9KX19LHVybDpmdW5jdGlvbihhLGIsZCxjLGUsZil7U2EoYSxiLGQsYyxlLGYpO0hjKGMpO2MuJHZhbGlkYXRvcnMudXJsPWZ1bmN0aW9uKGEsYil7dmFyIGQ9XG5hfHxiO3JldHVybiBjLiRpc0VtcHR5KGQpfHxzaC50ZXN0KGQpfX0sZW1haWw6ZnVuY3Rpb24oYSxiLGQsYyxlLGYpe1NhKGEsYixkLGMsZSxmKTtIYyhjKTtjLiR2YWxpZGF0b3JzLmVtYWlsPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YXx8YjtyZXR1cm4gYy4kaXNFbXB0eShkKXx8dGgudGVzdChkKX19LHJhZGlvOmZ1bmN0aW9uKGEsYixkLGMpe3ZhciBlPSFkLm5nVHJpbXx8XCJmYWxzZVwiIT09VShkLm5nVHJpbSk7eihkLm5hbWUpJiZiLmF0dHIoXCJuYW1lXCIsKytwYik7Yi5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKGEpe3ZhciBnO2JbMF0uY2hlY2tlZCYmKGc9ZC52YWx1ZSxlJiYoZz1VKGcpKSxjLiRzZXRWaWV3VmFsdWUoZyxhJiZhLnR5cGUpKX0pO2MuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWQudmFsdWU7ZSYmKGE9VShhKSk7YlswXS5jaGVja2VkPWE9PT1jLiR2aWV3VmFsdWV9O2QuJG9ic2VydmUoXCJ2YWx1ZVwiLGMuJHJlbmRlcil9LHJhbmdlOmZ1bmN0aW9uKGEsYixkLGMsZSxmKXtmdW5jdGlvbiBnKGEsXG5jKXtiLmF0dHIoYSxkW2FdKTt2YXIgZT1kW2FdO2QuJG9ic2VydmUoYSxmdW5jdGlvbihhKXthIT09ZSYmKGU9YSxjKGEpKX0pfWZ1bmN0aW9uIGsoYSl7cD1uYShhKTtYKGMuJG1vZGVsVmFsdWUpfHwobT8oYT1iLnZhbCgpLHA+YSYmKGE9cCxiLnZhbChhKSksYy4kc2V0Vmlld1ZhbHVlKGEpKTpjLiR2YWxpZGF0ZSgpKX1mdW5jdGlvbiBoKGEpe249bmEoYSk7WChjLiRtb2RlbFZhbHVlKXx8KG0/KGE9Yi52YWwoKSxuPGEmJihiLnZhbChuKSxhPW48cD9wOm4pLGMuJHNldFZpZXdWYWx1ZShhKSk6Yy4kdmFsaWRhdGUoKSl9ZnVuY3Rpb24gbChhKXtzPW5hKGEpO1goYy4kbW9kZWxWYWx1ZSl8fChtP2MuJHZpZXdWYWx1ZSE9PWIudmFsKCkmJmMuJHNldFZpZXdWYWx1ZShiLnZhbCgpKTpjLiR2YWxpZGF0ZSgpKX1JYyhhLGIsZCxjLFwicmFuZ2VcIik7ZGUoYyk7U2EoYSxiLGQsYyxlLGYpO3ZhciBtPWMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzJiZcInJhbmdlXCI9PT1iWzBdLnR5cGUscD1tP1xuMDp2b2lkIDAsbj1tPzEwMDp2b2lkIDAscz1tPzE6dm9pZCAwLHI9YlswXS52YWxpZGl0eTthPXcoZC5taW4pO2U9dyhkLm1heCk7Zj13KGQuc3RlcCk7dmFyIHE9Yy4kcmVuZGVyO2MuJHJlbmRlcj1tJiZ3KHIucmFuZ2VVbmRlcmZsb3cpJiZ3KHIucmFuZ2VPdmVyZmxvdyk/ZnVuY3Rpb24oKXtxKCk7Yy4kc2V0Vmlld1ZhbHVlKGIudmFsKCkpfTpxO2EmJihwPW5hKGQubWluKSxjLiR2YWxpZGF0b3JzLm1pbj1tP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuJGlzRW1wdHkoYil8fHoocCl8fGI+PXB9LGcoXCJtaW5cIixrKSk7ZSYmKG49bmEoZC5tYXgpLGMuJHZhbGlkYXRvcnMubWF4PW0/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy4kaXNFbXB0eShiKXx8eihuKXx8Yjw9bn0sZyhcIm1heFwiLGgpKTtmJiYocz1uYShkLnN0ZXApLGMuJHZhbGlkYXRvcnMuc3RlcD1tP2Z1bmN0aW9uKCl7cmV0dXJuIXIuc3RlcE1pc21hdGNofTpcbmZ1bmN0aW9uKGEsYil7cmV0dXJuIGMuJGlzRW1wdHkoYil8fHoocyl8fGVlKGIscHx8MCxzKX0sZyhcInN0ZXBcIixsKSl9LGNoZWNrYm94OmZ1bmN0aW9uKGEsYixkLGMsZSxmLGcsayl7dmFyIGg9ZmUoayxhLFwibmdUcnVlVmFsdWVcIixkLm5nVHJ1ZVZhbHVlLCEwKSxsPWZlKGssYSxcIm5nRmFsc2VWYWx1ZVwiLGQubmdGYWxzZVZhbHVlLCExKTtiLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oYSl7Yy4kc2V0Vmlld1ZhbHVlKGJbMF0uY2hlY2tlZCxhJiZhLnR5cGUpfSk7Yy4kcmVuZGVyPWZ1bmN0aW9uKCl7YlswXS5jaGVja2VkPWMuJHZpZXdWYWx1ZX07Yy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hMT09PWF9O2MuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gdmEoYSxoKX0pO2MuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gYT9oOmx9KX0saGlkZGVuOkUsYnV0dG9uOkUsc3VibWl0OkUscmVzZXQ6RSxmaWxlOkV9LFljPVtcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFxuXCIkZmlsdGVyXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIsZCxjKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCI/bmdNb2RlbFwiXSxsaW5rOntwcmU6ZnVuY3Rpb24oZSxmLGcsayl7a1swXSYmKHBlW0soZy50eXBlKV18fHBlLnRleHQpKGUsZixnLGtbMF0sYixhLGQsYyl9fX19XSx2Zj1mdW5jdGlvbigpe3ZhciBhPXtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKXx8XCJcIn0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMuc2V0QXR0cmlidXRlKFwidmFsdWVcIixhKX19O3JldHVybntyZXN0cmljdDpcIkVcIixwcmlvcml0eToyMDAsY29tcGlsZTpmdW5jdGlvbihiLGQpe2lmKFwiaGlkZGVuXCI9PT1LKGQudHlwZSkpcmV0dXJue3ByZTpmdW5jdGlvbihiLGQsZixnKXtiPWRbMF07Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGIsYi5uZXh0U2libGluZyk7T2JqZWN0LmRlZmluZVByb3BlcnR5JiZcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLFwidmFsdWVcIixhKX19fX19LHVoPS9eKHRydWV8ZmFsc2V8XFxkKykkLyxzZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxkLGMpe3ZhciBlPXcoYyk/Yzo5PT09Q2E/XCJcIjpudWxsO2EucHJvcChcInZhbHVlXCIsZSk7ZC4kc2V0KFwidmFsdWVcIixjKX1yZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oYixkKXtyZXR1cm4gdWgudGVzdChkLm5nVmFsdWUpP2Z1bmN0aW9uKGIsZCxmKXtiPWIuJGV2YWwoZi5uZ1ZhbHVlKTthKGQsZixiKX06ZnVuY3Rpb24oYixkLGYpe2IuJHdhdGNoKGYubmdWYWx1ZSxmdW5jdGlvbihiKXthKGQsZixiKX0pfX19fSxSZT1bXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkFDXCIsY29tcGlsZTpmdW5jdGlvbihiKXthLiQkYWRkQmluZGluZ0NsYXNzKGIpO3JldHVybiBmdW5jdGlvbihiLGMsZSl7YS4kJGFkZEJpbmRpbmdJbmZvKGMsZS5uZ0JpbmQpO2M9Y1swXTtcbmIuJHdhdGNoKGUubmdCaW5kLGZ1bmN0aW9uKGEpe2MudGV4dENvbnRlbnQ9aWMoYSl9KX19fX1dLFRlPVtcIiRpbnRlcnBvbGF0ZVwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGIpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGQpe2IuJCRhZGRCaW5kaW5nQ2xhc3MoZCk7cmV0dXJuIGZ1bmN0aW9uKGMsZCxmKXtjPWEoZC5hdHRyKGYuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtiLiQkYWRkQmluZGluZ0luZm8oZCxjLmV4cHJlc3Npb25zKTtkPWRbMF07Zi4kb2JzZXJ2ZShcIm5nQmluZFRlbXBsYXRlXCIsZnVuY3Rpb24oYSl7ZC50ZXh0Q29udGVudD16KGEpP1wiXCI6YX0pfX19fV0sU2U9W1wiJHNjZVwiLFwiJHBhcnNlXCIsXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29tcGlsZTpmdW5jdGlvbihjLGUpe3ZhciBmPWIoZS5uZ0JpbmRIdG1sKSxnPWIoZS5uZ0JpbmRIdG1sLGZ1bmN0aW9uKGIpe3JldHVybiBhLnZhbHVlT2YoYil9KTtkLiQkYWRkQmluZGluZ0NsYXNzKGMpO1xucmV0dXJuIGZ1bmN0aW9uKGIsYyxlKXtkLiQkYWRkQmluZGluZ0luZm8oYyxlLm5nQmluZEh0bWwpO2IuJHdhdGNoKGcsZnVuY3Rpb24oKXt2YXIgZD1mKGIpO2MuaHRtbChhLmdldFRydXN0ZWRIdG1sKGQpfHxcIlwiKX0pfX19fV0scmY9aWEoe3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGIsZCxjKXtjLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLiRldmFsKGQubmdDaGFuZ2UpfSl9fSksVWU9S2MoXCJcIiwhMCksV2U9S2MoXCJPZGRcIiwwKSxWZT1LYyhcIkV2ZW5cIiwxKSxYZT1SYSh7Y29tcGlsZTpmdW5jdGlvbihhLGIpe2IuJHNldChcIm5nQ2xvYWtcIix2b2lkIDApO2EucmVtb3ZlQ2xhc3MoXCJuZy1jbG9ha1wiKX19KSxZZT1bZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsc2NvcGU6ITAsY29udHJvbGxlcjpcIkBcIixwcmlvcml0eTo1MDB9fV0sY2Q9e30sdmg9e2JsdXI6ITAsZm9jdXM6ITB9O3IoXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlXCIuc3BsaXQoXCIgXCIpLFxuZnVuY3Rpb24oYSl7dmFyIGI9d2EoXCJuZy1cIithKTtjZFtiXT1bXCIkcGFyc2VcIixcIiRyb290U2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oZCxjLGUpe3JldHVybiBxZChkLGMsZSxiLGEsdmhbYV0pfV19KTt2YXIgYWY9W1wiJGFuaW1hdGVcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm57bXVsdGlFbGVtZW50OiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6NjAwLHRlcm1pbmFsOiEwLHJlc3RyaWN0OlwiQVwiLCQkdGxiOiEwLGxpbms6ZnVuY3Rpb24oZCxjLGUsZixnKXt2YXIgayxoLGw7ZC4kd2F0Y2goZS5uZ0lmLGZ1bmN0aW9uKGQpe2Q/aHx8ZyhmdW5jdGlvbihkLGYpe2g9ZjtkW2QubGVuZ3RoKytdPWIuJCRjcmVhdGVDb21tZW50KFwiZW5kIG5nSWZcIixlLm5nSWYpO2s9e2Nsb25lOmR9O2EuZW50ZXIoZCxjLnBhcmVudCgpLGMpfSk6KGwmJihsLnJlbW92ZSgpLGw9bnVsbCksaCYmKGguJGRlc3Ryb3koKSxoPW51bGwpLGsmJihsPXRiKGsuY2xvbmUpLFxuYS5sZWF2ZShsKS5kb25lKGZ1bmN0aW9uKGEpeyExIT09YSYmKGw9bnVsbCl9KSxrPW51bGwpKX0pfX19XSxiZj1bXCIkdGVtcGxhdGVSZXF1ZXN0XCIsXCIkYW5jaG9yU2Nyb2xsXCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEsYixkKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTo0MDAsdGVybWluYWw6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixjb250cm9sbGVyOmNhLm5vb3AsY29tcGlsZTpmdW5jdGlvbihjLGUpe3ZhciBmPWUubmdJbmNsdWRlfHxlLnNyYyxnPWUub25sb2FkfHxcIlwiLGs9ZS5hdXRvc2Nyb2xsO3JldHVybiBmdW5jdGlvbihjLGUsbSxwLG4pe3ZhciByPTAscSx0LHgsdj1mdW5jdGlvbigpe3QmJih0LnJlbW92ZSgpLHQ9bnVsbCk7cSYmKHEuJGRlc3Ryb3koKSxxPW51bGwpO3gmJihkLmxlYXZlKHgpLmRvbmUoZnVuY3Rpb24oYSl7ITEhPT1hJiYodD1udWxsKX0pLHQ9eCx4PW51bGwpfTtjLiR3YXRjaChmLGZ1bmN0aW9uKGYpe3ZhciBtPWZ1bmN0aW9uKGEpeyExPT09XG5hfHwhdyhrKXx8ayYmIWMuJGV2YWwoayl8fGIoKX0sdD0rK3I7Zj8oYShmLCEwKS50aGVuKGZ1bmN0aW9uKGEpe2lmKCFjLiQkZGVzdHJveWVkJiZ0PT09cil7dmFyIGI9Yy4kbmV3KCk7cC50ZW1wbGF0ZT1hO2E9bihiLGZ1bmN0aW9uKGEpe3YoKTtkLmVudGVyKGEsbnVsbCxlKS5kb25lKG0pfSk7cT1iO3g9YTtxLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50TG9hZGVkXCIsZik7Yy4kZXZhbChnKX19LGZ1bmN0aW9uKCl7Yy4kJGRlc3Ryb3llZHx8dCE9PXJ8fCh2KCksYy4kZW1pdChcIiRpbmNsdWRlQ29udGVudEVycm9yXCIsZikpfSksYy4kZW1pdChcIiRpbmNsdWRlQ29udGVudFJlcXVlc3RlZFwiLGYpKToodigpLHAudGVtcGxhdGU9bnVsbCl9KX19fX1dLHVmPVtcIiRjb21waWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxyZXF1aXJlOlwibmdJbmNsdWRlXCIsbGluazpmdW5jdGlvbihiLGQsYyxlKXtsYS5jYWxsKGRbMF0pLm1hdGNoKC9TVkcvKT9cbihkLmVtcHR5KCksYShlZChlLnRlbXBsYXRlLEMuZG9jdW1lbnQpLmNoaWxkTm9kZXMpKGIsZnVuY3Rpb24oYSl7ZC5hcHBlbmQoYSl9LHtmdXR1cmVQYXJlbnRFbGVtZW50OmR9KSk6KGQuaHRtbChlLnRlbXBsYXRlKSxhKGQuY29udGVudHMoKSkoYikpfX19XSxjZj1SYSh7cHJpb3JpdHk6NDUwLGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm57cHJlOmZ1bmN0aW9uKGEsYixkKXthLiRldmFsKGQubmdJbml0KX19fX0pLHFmPWZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHByaW9yaXR5OjEwMCxyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyl7dmFyIGU9ZC5uZ0xpc3R8fFwiLCBcIixmPVwiZmFsc2VcIiE9PWQubmdUcmltLGc9Zj9VKGUpOmU7Yy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCF6KGEpKXt2YXIgYj1bXTthJiZyKGEuc3BsaXQoZyksZnVuY3Rpb24oYSl7YSYmYi5wdXNoKGY/VShhKTphKX0pO3JldHVybiBifX0pO2MuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtpZihIKGEpKXJldHVybiBhLmpvaW4oZSl9KTtcbmMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fCFhLmxlbmd0aH19fX0sbWI9XCJuZy12YWxpZFwiLCRkPVwibmctaW52YWxpZFwiLFphPVwibmctcHJpc3RpbmVcIixWYj1cIm5nLWRpcnR5XCIsb2I9RihcIm5nTW9kZWxcIik7UmIuJGluamVjdD1cIiRzY29wZSAkZXhjZXB0aW9uSGFuZGxlciAkYXR0cnMgJGVsZW1lbnQgJHBhcnNlICRhbmltYXRlICR0aW1lb3V0ICRxICRpbnRlcnBvbGF0ZVwiLnNwbGl0KFwiIFwiKTtSYi5wcm90b3R5cGU9eyQkaW5pdEdldHRlclNldHRlcnM6ZnVuY3Rpb24oKXtpZih0aGlzLiRvcHRpb25zLmdldE9wdGlvbihcImdldHRlclNldHRlclwiKSl7dmFyIGE9dGhpcy4kJHBhcnNlKHRoaXMuJCRhdHRyLm5nTW9kZWwrXCIoKVwiKSxiPXRoaXMuJCRwYXJzZSh0aGlzLiQkYXR0ci5uZ01vZGVsK1wiKCQkJHApXCIpO3RoaXMuJCRuZ01vZGVsR2V0PWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuJCRwYXJzZWROZ01vZGVsKGIpO0IoYykmJihjPWEoYikpO3JldHVybiBjfTt0aGlzLiQkbmdNb2RlbFNldD1cbmZ1bmN0aW9uKGEsYyl7Qih0aGlzLiQkcGFyc2VkTmdNb2RlbChhKSk/YihhLHskJCRwOmN9KTp0aGlzLiQkcGFyc2VkTmdNb2RlbEFzc2lnbihhLGMpfX1lbHNlIGlmKCF0aGlzLiQkcGFyc2VkTmdNb2RlbC5hc3NpZ24pdGhyb3cgb2IoXCJub25hc3NpZ25cIix0aGlzLiQkYXR0ci5uZ01vZGVsLHphKHRoaXMuJCRlbGVtZW50KSk7fSwkcmVuZGVyOkUsJGlzRW1wdHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSl8fFwiXCI9PT1hfHxudWxsPT09YXx8YSE9PWF9LCQkdXBkYXRlRW1wdHlDbGFzc2VzOmZ1bmN0aW9uKGEpe3RoaXMuJGlzRW1wdHkoYSk/KHRoaXMuJCRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LFwibmctbm90LWVtcHR5XCIpLHRoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LFwibmctZW1wdHlcIikpOih0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxcIm5nLWVtcHR5XCIpLHRoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LFxuXCJuZy1ub3QtZW1wdHlcIikpfSwkc2V0UHJpc3RpbmU6ZnVuY3Rpb24oKXt0aGlzLiRkaXJ0eT0hMTt0aGlzLiRwcmlzdGluZT0hMDt0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxWYik7dGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsWmEpfSwkc2V0RGlydHk6ZnVuY3Rpb24oKXt0aGlzLiRkaXJ0eT0hMDt0aGlzLiRwcmlzdGluZT0hMTt0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxaYSk7dGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsVmIpO3RoaXMuJCRwYXJlbnRGb3JtLiRzZXREaXJ0eSgpfSwkc2V0VW50b3VjaGVkOmZ1bmN0aW9uKCl7dGhpcy4kdG91Y2hlZD0hMTt0aGlzLiR1bnRvdWNoZWQ9ITA7dGhpcy4kJGFuaW1hdGUuc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsXCJuZy11bnRvdWNoZWRcIixcIm5nLXRvdWNoZWRcIil9LCRzZXRUb3VjaGVkOmZ1bmN0aW9uKCl7dGhpcy4kdG91Y2hlZD1cbiEwO3RoaXMuJHVudG91Y2hlZD0hMTt0aGlzLiQkYW5pbWF0ZS5zZXRDbGFzcyh0aGlzLiQkZWxlbWVudCxcIm5nLXRvdWNoZWRcIixcIm5nLXVudG91Y2hlZFwiKX0sJHJvbGxiYWNrVmlld1ZhbHVlOmZ1bmN0aW9uKCl7dGhpcy4kJHRpbWVvdXQuY2FuY2VsKHRoaXMuJCRwZW5kaW5nRGVib3VuY2UpO3RoaXMuJHZpZXdWYWx1ZT10aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTt0aGlzLiRyZW5kZXIoKX0sJHZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIVgodGhpcy4kbW9kZWxWYWx1ZSkpe3ZhciBhPXRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLGI9dGhpcy4kJHJhd01vZGVsVmFsdWUsZD10aGlzLiR2YWxpZCxjPXRoaXMuJG1vZGVsVmFsdWUsZT10aGlzLiRvcHRpb25zLmdldE9wdGlvbihcImFsbG93SW52YWxpZFwiKSxmPXRoaXM7dGhpcy4kJHJ1blZhbGlkYXRvcnMoYixhLGZ1bmN0aW9uKGEpe2V8fGQ9PT1hfHwoZi4kbW9kZWxWYWx1ZT1hP2I6dm9pZCAwLGYuJG1vZGVsVmFsdWUhPT1cbmMmJmYuJCR3cml0ZU1vZGVsVG9TY29wZSgpKX0pfX0sJCRydW5WYWxpZGF0b3JzOmZ1bmN0aW9uKGEsYixkKXtmdW5jdGlvbiBjKCl7dmFyIGM9ITA7cihoLiR2YWxpZGF0b3JzLGZ1bmN0aW9uKGQsZSl7dmFyIGc9Qm9vbGVhbihkKGEsYikpO2M9YyYmZztmKGUsZyl9KTtyZXR1cm4gYz8hMDoocihoLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oYSxiKXtmKGIsbnVsbCl9KSwhMSl9ZnVuY3Rpb24gZSgpe3ZhciBjPVtdLGQ9ITA7cihoLiRhc3luY1ZhbGlkYXRvcnMsZnVuY3Rpb24oZSxnKXt2YXIgaD1lKGEsYik7aWYoIWh8fCFCKGgudGhlbikpdGhyb3cgb2IoXCJub3Byb21pc2VcIixoKTtmKGcsdm9pZCAwKTtjLnB1c2goaC50aGVuKGZ1bmN0aW9uKCl7ZihnLCEwKX0sZnVuY3Rpb24oKXtkPSExO2YoZywhMSl9KSl9KTtjLmxlbmd0aD9oLiQkcS5hbGwoYykudGhlbihmdW5jdGlvbigpe2coZCl9LEUpOmcoITApfWZ1bmN0aW9uIGYoYSxiKXtrPT09aC4kJGN1cnJlbnRWYWxpZGF0aW9uUnVuSWQmJlxuaC4kc2V0VmFsaWRpdHkoYSxiKX1mdW5jdGlvbiBnKGEpe2s9PT1oLiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCYmZChhKX10aGlzLiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCsrO3ZhciBrPXRoaXMuJCRjdXJyZW50VmFsaWRhdGlvblJ1bklkLGg9dGhpczsoZnVuY3Rpb24oKXt2YXIgYT1oLiQkcGFyc2VyTmFtZTtpZih6KGguJCRwYXJzZXJWYWxpZCkpZihhLG51bGwpO2Vsc2UgcmV0dXJuIGguJCRwYXJzZXJWYWxpZHx8KHIoaC4kdmFsaWRhdG9ycyxmdW5jdGlvbihhLGIpe2YoYixudWxsKX0pLHIoaC4kYXN5bmNWYWxpZGF0b3JzLGZ1bmN0aW9uKGEsYil7ZihiLG51bGwpfSkpLGYoYSxoLiQkcGFyc2VyVmFsaWQpLGguJCRwYXJzZXJWYWxpZDtyZXR1cm4hMH0pKCk/YygpP2UoKTpnKCExKTpnKCExKX0sJGNvbW1pdFZpZXdWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJHZpZXdWYWx1ZTt0aGlzLiQkdGltZW91dC5jYW5jZWwodGhpcy4kJHBlbmRpbmdEZWJvdW5jZSk7aWYodGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUhPT1cbmF8fFwiXCI9PT1hJiZ0aGlzLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyl0aGlzLiQkdXBkYXRlRW1wdHlDbGFzc2VzKGEpLHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWEsdGhpcy4kcHJpc3RpbmUmJnRoaXMuJHNldERpcnR5KCksdGhpcy4kJHBhcnNlQW5kVmFsaWRhdGUoKX0sJCRwYXJzZUFuZFZhbGlkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUsYj10aGlzO3RoaXMuJCRwYXJzZXJWYWxpZD16KGEpP3ZvaWQgMDohMDt0aGlzLiRzZXRWYWxpZGl0eSh0aGlzLiQkcGFyc2VyTmFtZSxudWxsKTt0aGlzLiQkcGFyc2VyTmFtZT1cInBhcnNlXCI7aWYodGhpcy4kJHBhcnNlclZhbGlkKWZvcih2YXIgZD0wO2Q8dGhpcy4kcGFyc2Vycy5sZW5ndGg7ZCsrKWlmKGE9dGhpcy4kcGFyc2Vyc1tkXShhKSx6KGEpKXt0aGlzLiQkcGFyc2VyVmFsaWQ9ITE7YnJlYWt9WCh0aGlzLiRtb2RlbFZhbHVlKSYmKHRoaXMuJG1vZGVsVmFsdWU9dGhpcy4kJG5nTW9kZWxHZXQodGhpcy4kJHNjb3BlKSk7XG52YXIgYz10aGlzLiRtb2RlbFZhbHVlLGU9dGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oXCJhbGxvd0ludmFsaWRcIik7dGhpcy4kJHJhd01vZGVsVmFsdWU9YTtlJiYodGhpcy4kbW9kZWxWYWx1ZT1hLGIuJG1vZGVsVmFsdWUhPT1jJiZiLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSk7dGhpcy4kJHJ1blZhbGlkYXRvcnMoYSx0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSxmdW5jdGlvbihkKXtlfHwoYi4kbW9kZWxWYWx1ZT1kP2E6dm9pZCAwLGIuJG1vZGVsVmFsdWUhPT1jJiZiLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSl9KX0sJCR3cml0ZU1vZGVsVG9TY29wZTpmdW5jdGlvbigpe3RoaXMuJCRuZ01vZGVsU2V0KHRoaXMuJCRzY29wZSx0aGlzLiRtb2RlbFZhbHVlKTtyKHRoaXMuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24oYSl7dHJ5e2EoKX1jYXRjaChiKXt0aGlzLiQkZXhjZXB0aW9uSGFuZGxlcihiKX19LHRoaXMpfSwkc2V0Vmlld1ZhbHVlOmZ1bmN0aW9uKGEsYil7dGhpcy4kdmlld1ZhbHVlPVxuYTt0aGlzLiRvcHRpb25zLmdldE9wdGlvbihcInVwZGF0ZU9uRGVmYXVsdFwiKSYmdGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KGIpfSwkJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuJG9wdGlvbnMuZ2V0T3B0aW9uKFwiZGVib3VuY2VcIik7VyhiW2FdKT9iPWJbYV06VyhiW1wiZGVmYXVsdFwiXSkmJi0xPT09dGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oXCJ1cGRhdGVPblwiKS5pbmRleE9mKGEpP2I9YltcImRlZmF1bHRcIl06VyhiW1wiKlwiXSkmJihiPWJbXCIqXCJdKTt0aGlzLiQkdGltZW91dC5jYW5jZWwodGhpcy4kJHBlbmRpbmdEZWJvdW5jZSk7dmFyIGQ9dGhpczswPGI/dGhpcy4kJHBlbmRpbmdEZWJvdW5jZT10aGlzLiQkdGltZW91dChmdW5jdGlvbigpe2QuJGNvbW1pdFZpZXdWYWx1ZSgpfSxiKTp0aGlzLiQkcm9vdFNjb3BlLiQkcGhhc2U/dGhpcy4kY29tbWl0Vmlld1ZhbHVlKCk6dGhpcy4kJHNjb3BlLiRhcHBseShmdW5jdGlvbigpe2QuJGNvbW1pdFZpZXdWYWx1ZSgpfSl9LFxuJG92ZXJyaWRlTW9kZWxPcHRpb25zOmZ1bmN0aW9uKGEpe3RoaXMuJG9wdGlvbnM9dGhpcy4kb3B0aW9ucy5jcmVhdGVDaGlsZChhKTt0aGlzLiQkc2V0VXBkYXRlT25FdmVudHMoKX0sJHByb2Nlc3NNb2RlbFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kJGZvcm1hdCgpO3RoaXMuJHZpZXdWYWx1ZSE9PWEmJih0aGlzLiQkdXBkYXRlRW1wdHlDbGFzc2VzKGEpLHRoaXMuJHZpZXdWYWx1ZT10aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1hLHRoaXMuJHJlbmRlcigpLHRoaXMuJCRydW5WYWxpZGF0b3JzKHRoaXMuJG1vZGVsVmFsdWUsdGhpcy4kdmlld1ZhbHVlLEUpKX0sJCRmb3JtYXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy4kZm9ybWF0dGVycyxiPWEubGVuZ3RoLGQ9dGhpcy4kbW9kZWxWYWx1ZTtiLS07KWQ9YVtiXShkKTtyZXR1cm4gZH0sJCRzZXRNb2RlbFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMuJG1vZGVsVmFsdWU9dGhpcy4kJHJhd01vZGVsVmFsdWU9YTt0aGlzLiQkcGFyc2VyVmFsaWQ9XG52b2lkIDA7dGhpcy4kcHJvY2Vzc01vZGVsVmFsdWUoKX0sJCRzZXRVcGRhdGVPbkV2ZW50czpmdW5jdGlvbigpe3RoaXMuJCR1cGRhdGVFdmVudHMmJnRoaXMuJCRlbGVtZW50Lm9mZih0aGlzLiQkdXBkYXRlRXZlbnRzLHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIpO2lmKHRoaXMuJCR1cGRhdGVFdmVudHM9dGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oXCJ1cGRhdGVPblwiKSl0aGlzLiQkZWxlbWVudC5vbih0aGlzLiQkdXBkYXRlRXZlbnRzLHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIpfSwkJHVwZGF0ZUV2ZW50SGFuZGxlcjpmdW5jdGlvbihhKXt0aGlzLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoYSYmYS50eXBlKX19O2FlKHtjbGF6ejpSYixzZXQ6ZnVuY3Rpb24oYSxiKXthW2JdPSEwfSx1bnNldDpmdW5jdGlvbihhLGIpe2RlbGV0ZSBhW2JdfX0pO3ZhciBwZj1bXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6W1wibmdNb2RlbFwiLFxuXCJeP2Zvcm1cIixcIl4/bmdNb2RlbE9wdGlvbnNcIl0sY29udHJvbGxlcjpSYixwcmlvcml0eToxLGNvbXBpbGU6ZnVuY3Rpb24oYil7Yi5hZGRDbGFzcyhaYSkuYWRkQ2xhc3MoXCJuZy11bnRvdWNoZWRcIikuYWRkQ2xhc3MobWIpO3JldHVybntwcmU6ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGc9ZlswXTtiPWZbMV18fGcuJCRwYXJlbnRGb3JtO2lmKGY9ZlsyXSlnLiRvcHRpb25zPWYuJG9wdGlvbnM7Zy4kJGluaXRHZXR0ZXJTZXR0ZXJzKCk7Yi4kYWRkQ29udHJvbChnKTtlLiRvYnNlcnZlKFwibmFtZVwiLGZ1bmN0aW9uKGEpe2cuJG5hbWUhPT1hJiZnLiQkcGFyZW50Rm9ybS4kJHJlbmFtZUNvbnRyb2woZyxhKX0pO2EuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2cuJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKGcpfSl9LHBvc3Q6ZnVuY3Rpb24oYixjLGUsZil7ZnVuY3Rpb24gZygpe2suJHNldFRvdWNoZWQoKX12YXIgaz1mWzBdO2suJCRzZXRVcGRhdGVPbkV2ZW50cygpO2Mub24oXCJibHVyXCIsXG5mdW5jdGlvbigpe2suJHRvdWNoZWR8fChhLiQkcGhhc2U/Yi4kZXZhbEFzeW5jKGcpOmIuJGFwcGx5KGcpKX0pfX19fX1dLFNiLHdoPS8oXFxzK3xeKWRlZmF1bHQoXFxzK3wkKS87TGMucHJvdG90eXBlPXtnZXRPcHRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJCRvcHRpb25zW2FdfSxjcmVhdGVDaGlsZDpmdW5jdGlvbihhKXt2YXIgYj0hMTthPVMoe30sYSk7cihhLGZ1bmN0aW9uKGQsYyl7XCIkaW5oZXJpdFwiPT09ZD9cIipcIj09PWM/Yj0hMDooYVtjXT10aGlzLiQkb3B0aW9uc1tjXSxcInVwZGF0ZU9uXCI9PT1jJiYoYS51cGRhdGVPbkRlZmF1bHQ9dGhpcy4kJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0KSk6XCJ1cGRhdGVPblwiPT09YyYmKGEudXBkYXRlT25EZWZhdWx0PSExLGFbY109VShkLnJlcGxhY2Uod2gsZnVuY3Rpb24oKXthLnVwZGF0ZU9uRGVmYXVsdD0hMDtyZXR1cm5cIiBcIn0pKSl9LHRoaXMpO2ImJihkZWxldGUgYVtcIipcIl0sZ2UoYSx0aGlzLiQkb3B0aW9ucykpO2dlKGEsU2IuJCRvcHRpb25zKTtcbnJldHVybiBuZXcgTGMoYSl9fTtTYj1uZXcgTGMoe3VwZGF0ZU9uOlwiXCIsdXBkYXRlT25EZWZhdWx0OiEwLGRlYm91bmNlOjAsZ2V0dGVyU2V0dGVyOiExLGFsbG93SW52YWxpZDohMSx0aW1lem9uZTpudWxsfSk7dmFyIHRmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGQpe3RoaXMuJCRhdHRycz1hO3RoaXMuJCRzY29wZT1kfWEuJGluamVjdD1bXCIkYXR0cnNcIixcIiRzY29wZVwiXTthLnByb3RvdHlwZT17JG9uSW5pdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50Q3RybD90aGlzLnBhcmVudEN0cmwuJG9wdGlvbnM6U2IsZD10aGlzLiQkc2NvcGUuJGV2YWwodGhpcy4kJGF0dHJzLm5nTW9kZWxPcHRpb25zKTt0aGlzLiRvcHRpb25zPWEuY3JlYXRlQ2hpbGQoZCl9fTtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscHJpb3JpdHk6MTAscmVxdWlyZTp7cGFyZW50Q3RybDpcIj9eXm5nTW9kZWxPcHRpb25zXCJ9LGJpbmRUb0NvbnRyb2xsZXI6ITAsY29udHJvbGxlcjphfX0sZGY9UmEoe3Rlcm1pbmFsOiEwLFxucHJpb3JpdHk6MUUzfSkseGg9RihcIm5nT3B0aW9uc1wiKSx5aD0vXlxccyooW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZ3JvdXBcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZGlzYWJsZVxccyt3aGVuXFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooWyRcXHddWyRcXHddKil8KD86XFwoXFxzKihbJFxcd11bJFxcd10qKVxccyosXFxzKihbJFxcd11bJFxcd10qKVxccypcXCkpKVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8kLyxuZj1bXCIkY29tcGlsZVwiLFwiJGRvY3VtZW50XCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIsZCl7ZnVuY3Rpb24gYyhhLGIsYyl7ZnVuY3Rpb24gZShhLGIsYyxkLGYpe3RoaXMuc2VsZWN0VmFsdWU9YTt0aGlzLnZpZXdWYWx1ZT1iO3RoaXMubGFiZWw9Yzt0aGlzLmdyb3VwPWQ7dGhpcy5kaXNhYmxlZD1mfWZ1bmN0aW9uIGYoYSl7dmFyIGI7aWYoIXImJnlhKGEpKWI9YTtlbHNle2I9W107Zm9yKHZhciBjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmXG5cIiRcIiE9PWMuY2hhckF0KDApJiZiLnB1c2goYyl9cmV0dXJuIGJ9dmFyIHA9YS5tYXRjaCh5aCk7aWYoIXApdGhyb3cgeGgoXCJpZXhwXCIsYSx6YShiKSk7dmFyIG49cFs1XXx8cFs3XSxyPXBbNl07YT0vIGFzIC8udGVzdChwWzBdKSYmcFsxXTt2YXIgcT1wWzldO2I9ZChwWzJdP3BbMV06bik7dmFyIHQ9YSYmZChhKXx8Yix3PXEmJmQocSksdj1xP2Z1bmN0aW9uKGEsYil7cmV0dXJuIHcoYyxiKX06ZnVuY3Rpb24oYSl7cmV0dXJuIExhKGEpfSx4PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHYoYSxBKGEsYikpfSx6PWQocFsyXXx8cFsxXSkseT1kKHBbM118fFwiXCIpLEo9ZChwWzRdfHxcIlwiKSxJPWQocFs4XSksQj17fSxBPXI/ZnVuY3Rpb24oYSxiKXtCW3JdPWI7QltuXT1hO3JldHVybiBCfTpmdW5jdGlvbihhKXtCW25dPWE7cmV0dXJuIEJ9O3JldHVybnt0cmFja0J5OnEsZ2V0VHJhY2tCeVZhbHVlOngsZ2V0V2F0Y2hhYmxlczpkKEksZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hfHxbXTtmb3IodmFyIGQ9XG5mKGEpLGU9ZC5sZW5ndGgsZz0wO2c8ZTtnKyspe3ZhciBrPWE9PT1kP2c6ZFtnXSxsPWFba10saz1BKGwsayksbD12KGwsayk7Yi5wdXNoKGwpO2lmKHBbMl18fHBbMV0pbD16KGMsayksYi5wdXNoKGwpO3BbNF0mJihrPUooYyxrKSxiLnB1c2goaykpfXJldHVybiBifSksZ2V0T3B0aW9uczpmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPXt9LGQ9SShjKXx8W10sZz1mKGQpLGs9Zy5sZW5ndGgsbj0wO248aztuKyspe3ZhciBwPWQ9PT1nP246Z1tuXSxyPUEoZFtwXSxwKSxzPXQoYyxyKSxwPXYocyxyKSx3PXooYyxyKSxCPXkoYyxyKSxyPUooYyxyKSxzPW5ldyBlKHAscyx3LEIscik7YS5wdXNoKHMpO2JbcF09c31yZXR1cm57aXRlbXM6YSxzZWxlY3RWYWx1ZU1hcDpiLGdldE9wdGlvbkZyb21WaWV3VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGJbeChhKV19LGdldFZpZXdWYWx1ZUZyb21PcHRpb246ZnVuY3Rpb24oYSl7cmV0dXJuIHE/SWEoYS52aWV3VmFsdWUpOmEudmlld1ZhbHVlfX19fX1cbnZhciBlPUMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSxmPUMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGdyb3VwXCIpO3JldHVybntyZXN0cmljdDpcIkFcIix0ZXJtaW5hbDohMCxyZXF1aXJlOltcInNlbGVjdFwiLFwibmdNb2RlbFwiXSxsaW5rOntwcmU6ZnVuY3Rpb24oYSxiLGMsZCl7ZFswXS5yZWdpc3Rlck9wdGlvbj1FfSxwb3N0OmZ1bmN0aW9uKGQsayxoLGwpe2Z1bmN0aW9uIG0oYSl7dmFyIGI9KGE9di5nZXRPcHRpb25Gcm9tVmlld1ZhbHVlKGEpKSYmYS5lbGVtZW50O2ImJiFiLnNlbGVjdGVkJiYoYi5zZWxlY3RlZD0hMCk7cmV0dXJuIGF9ZnVuY3Rpb24gcChhLGIpe2EuZWxlbWVudD1iO2IuZGlzYWJsZWQ9YS5kaXNhYmxlZDthLmxhYmVsIT09Yi5sYWJlbCYmKGIubGFiZWw9YS5sYWJlbCxiLnRleHRDb250ZW50PWEubGFiZWwpO2IudmFsdWU9YS5zZWxlY3RWYWx1ZX12YXIgbj1sWzBdLHE9bFsxXSx6PWgubXVsdGlwbGU7bD0wO2Zvcih2YXIgdD1rLmNoaWxkcmVuKCksXG5CPXQubGVuZ3RoO2w8QjtsKyspaWYoXCJcIj09PXRbbF0udmFsdWUpe24uaGFzRW1wdHlPcHRpb249ITA7bi5lbXB0eU9wdGlvbj10LmVxKGwpO2JyZWFrfWsuZW1wdHkoKTtsPSEhbi5lbXB0eU9wdGlvbjt4KGUuY2xvbmVOb2RlKCExKSkudmFsKFwiP1wiKTt2YXIgdixBPWMoaC5uZ09wdGlvbnMsayxkKSxDPWJbMF0uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO24uZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWU9ZnVuY3Rpb24oYSl7cmV0dXJuXCI/XCJ9O3o/KG4ud3JpdGVWYWx1ZT1mdW5jdGlvbihhKXtpZih2KXt2YXIgYj1hJiZhLm1hcChtKXx8W107di5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuZWxlbWVudC5zZWxlY3RlZCYmLTE9PT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGIsYSkmJihhLmVsZW1lbnQuc2VsZWN0ZWQ9ITEpfSl9fSxuLnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPWsudmFsKCl8fFtdLGI9W107cihhLGZ1bmN0aW9uKGEpeyhhPXYuc2VsZWN0VmFsdWVNYXBbYV0pJiZcbiFhLmRpc2FibGVkJiZiLnB1c2godi5nZXRWaWV3VmFsdWVGcm9tT3B0aW9uKGEpKX0pO3JldHVybiBifSxBLnRyYWNrQnkmJmQuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpe2lmKEgocS4kdmlld1ZhbHVlKSlyZXR1cm4gcS4kdmlld1ZhbHVlLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gQS5nZXRUcmFja0J5VmFsdWUoYSl9KX0sZnVuY3Rpb24oKXtxLiRyZW5kZXIoKX0pKToobi53cml0ZVZhbHVlPWZ1bmN0aW9uKGEpe2lmKHYpe3ZhciBiPWtbMF0ub3B0aW9uc1trWzBdLnNlbGVjdGVkSW5kZXhdLGM9di5nZXRPcHRpb25Gcm9tVmlld1ZhbHVlKGEpO2ImJmIucmVtb3ZlQXR0cmlidXRlKFwic2VsZWN0ZWRcIik7Yz8oa1swXS52YWx1ZSE9PWMuc2VsZWN0VmFsdWUmJihuLnJlbW92ZVVua25vd25PcHRpb24oKSxrWzBdLnZhbHVlPWMuc2VsZWN0VmFsdWUsYy5lbGVtZW50LnNlbGVjdGVkPSEwKSxjLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIixcInNlbGVjdGVkXCIpKTpuLnNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uKGEpfX0sXG5uLnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPXYuc2VsZWN0VmFsdWVNYXBbay52YWwoKV07cmV0dXJuIGEmJiFhLmRpc2FibGVkPyhuLnVuc2VsZWN0RW1wdHlPcHRpb24oKSxuLnJlbW92ZVVua25vd25PcHRpb24oKSx2LmdldFZpZXdWYWx1ZUZyb21PcHRpb24oYSkpOm51bGx9LEEudHJhY2tCeSYmZC4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gQS5nZXRUcmFja0J5VmFsdWUocS4kdmlld1ZhbHVlKX0sZnVuY3Rpb24oKXtxLiRyZW5kZXIoKX0pKTtsJiYoYShuLmVtcHR5T3B0aW9uKShkKSxrLnByZXBlbmQobi5lbXB0eU9wdGlvbiksOD09PW4uZW1wdHlPcHRpb25bMF0ubm9kZVR5cGU/KG4uaGFzRW1wdHlPcHRpb249ITEsbi5yZWdpc3Rlck9wdGlvbj1mdW5jdGlvbihhLGIpe1wiXCI9PT1iLnZhbCgpJiYobi5oYXNFbXB0eU9wdGlvbj0hMCxuLmVtcHR5T3B0aW9uPWIsbi5lbXB0eU9wdGlvbi5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpLHEuJHJlbmRlcigpLGIub24oXCIkZGVzdHJveVwiLFxuZnVuY3Rpb24oKXt2YXIgYT1uLiRpc0VtcHR5T3B0aW9uU2VsZWN0ZWQoKTtuLmhhc0VtcHR5T3B0aW9uPSExO24uZW1wdHlPcHRpb249dm9pZCAwO2EmJnEuJHJlbmRlcigpfSkpfSk6bi5lbXB0eU9wdGlvbi5yZW1vdmVDbGFzcyhcIm5nLXNjb3BlXCIpKTtkLiR3YXRjaENvbGxlY3Rpb24oQS5nZXRXYXRjaGFibGVzLGZ1bmN0aW9uKCl7dmFyIGE9diYmbi5yZWFkVmFsdWUoKTtpZih2KWZvcih2YXIgYj12Lml0ZW1zLmxlbmd0aC0xOzA8PWI7Yi0tKXt2YXIgYz12Lml0ZW1zW2JdO3coYy5ncm91cCk/RmIoYy5lbGVtZW50LnBhcmVudE5vZGUpOkZiKGMuZWxlbWVudCl9dj1BLmdldE9wdGlvbnMoKTt2YXIgZD17fTt2Lml0ZW1zLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI7aWYodyhhLmdyb3VwKSl7Yj1kW2EuZ3JvdXBdO2J8fChiPWYuY2xvbmVOb2RlKCExKSxDLmFwcGVuZENoaWxkKGIpLGIubGFiZWw9bnVsbD09PWEuZ3JvdXA/XCJudWxsXCI6YS5ncm91cCxkW2EuZ3JvdXBdPWIpO1xudmFyIGM9ZS5jbG9uZU5vZGUoITEpO2IuYXBwZW5kQ2hpbGQoYyk7cChhLGMpfWVsc2UgYj1lLmNsb25lTm9kZSghMSksQy5hcHBlbmRDaGlsZChiKSxwKGEsYil9KTtrWzBdLmFwcGVuZENoaWxkKEMpO3EuJHJlbmRlcigpO3EuJGlzRW1wdHkoYSl8fChiPW4ucmVhZFZhbHVlKCksKEEudHJhY2tCeXx8ej92YShhLGIpOmE9PT1iKXx8KHEuJHNldFZpZXdWYWx1ZShiKSxxLiRyZW5kZXIoKSkpfSl9fX19XSxlZj1bXCIkbG9jYWxlXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRsb2dcIixmdW5jdGlvbihhLGIsZCl7dmFyIGM9L3t9L2csZT0vXndoZW4oTWludXMpPyguKykkLztyZXR1cm57bGluazpmdW5jdGlvbihmLGcsayl7ZnVuY3Rpb24gaChhKXtnLnRleHQoYXx8XCJcIil9dmFyIGw9ay5jb3VudCxtPWsuJGF0dHIud2hlbiYmZy5hdHRyKGsuJGF0dHIud2hlbikscD1rLm9mZnNldHx8MCxuPWYuJGV2YWwobSl8fHt9LHE9e30sdz1iLnN0YXJ0U3ltYm9sKCksdD1iLmVuZFN5bWJvbCgpLHg9dytsK1wiLVwiK1xucCt0LHY9Y2Eubm9vcCxBO3IoayxmdW5jdGlvbihhLGIpe3ZhciBjPWUuZXhlYyhiKTtjJiYoYz0oY1sxXT9cIi1cIjpcIlwiKStLKGNbMl0pLG5bY109Zy5hdHRyKGsuJGF0dHJbYl0pKX0pO3IobixmdW5jdGlvbihhLGQpe3FbZF09YihhLnJlcGxhY2UoYyx4KSl9KTtmLiR3YXRjaChsLGZ1bmN0aW9uKGIpe3ZhciBjPXBhcnNlRmxvYXQoYiksZT1YKGMpO2V8fGMgaW4gbnx8KGM9YS5wbHVyYWxDYXQoYy1wKSk7Yz09PUF8fGUmJlgoQSl8fCh2KCksZT1xW2NdLHooZSk/KG51bGwhPWImJmQuZGVidWcoXCJuZ1BsdXJhbGl6ZTogbm8gcnVsZSBkZWZpbmVkIGZvciAnXCIrYytcIicgaW4gXCIrbSksdj1FLGgoKSk6dj1mLiR3YXRjaChlLGgpLEE9Yyl9KX19fV0scWU9RihcIm5nUmVmXCIpLGZmPVtcIiRwYXJzZVwiLGZ1bmN0aW9uKGEpe3JldHVybntwcmlvcml0eTotMSxyZXN0cmljdDpcIkFcIixjb21waWxlOmZ1bmN0aW9uKGIsZCl7dmFyIGM9d2EodWEoYikpLGU9YShkLm5nUmVmKSxmPWUuYXNzaWdufHxcbmZ1bmN0aW9uKCl7dGhyb3cgcWUoXCJub25hc3NpZ25cIixkLm5nUmVmKTt9O3JldHVybiBmdW5jdGlvbihhLGIsaCl7dmFyIGw7aWYoaC5oYXNPd25Qcm9wZXJ0eShcIm5nUmVmUmVhZFwiKSlpZihcIiRlbGVtZW50XCI9PT1oLm5nUmVmUmVhZClsPWI7ZWxzZXtpZihsPWIuZGF0YShcIiRcIitoLm5nUmVmUmVhZCtcIkNvbnRyb2xsZXJcIiksIWwpdGhyb3cgcWUoXCJub2N0cmxcIixoLm5nUmVmUmVhZCxkLm5nUmVmKTt9ZWxzZSBsPWIuZGF0YShcIiRcIitjK1wiQ29udHJvbGxlclwiKTtsPWx8fGI7ZihhLGwpO2Iub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZShhKT09PWwmJmYoYSxudWxsKX0pfX19fV0sZ2Y9W1wiJHBhcnNlXCIsXCIkYW5pbWF0ZVwiLFwiJGNvbXBpbGVcIixmdW5jdGlvbihhLGIsZCl7dmFyIGM9RihcIm5nUmVwZWF0XCIpLGU9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7YVtjXT1kO2UmJihhW2VdPWYpO2EuJGluZGV4PWI7YS4kZmlyc3Q9MD09PWI7YS4kbGFzdD1iPT09Zy0xO2EuJG1pZGRsZT0hKGEuJGZpcnN0fHxcbmEuJGxhc3QpO2EuJG9kZD0hKGEuJGV2ZW49MD09PShiJjEpKX0sZj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIExhKGMpfSxnPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9O3JldHVybntyZXN0cmljdDpcIkFcIixtdWx0aUVsZW1lbnQ6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsY29tcGlsZTpmdW5jdGlvbihrLGgpe3ZhciBsPWgubmdSZXBlYXQsbT1kLiQkY3JlYXRlQ29tbWVudChcImVuZCBuZ1JlcGVhdFwiLGwpLHA9bC5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKTtpZighcCl0aHJvdyBjKFwiaWV4cFwiLGwpO3ZhciBuPXBbMV0scT1wWzJdLHc9cFszXSx0PXBbNF0scD1uLm1hdGNoKC9eKD86KFxccypbJFxcd10rKXxcXChcXHMqKFskXFx3XSspXFxzKixcXHMqKFskXFx3XSspXFxzKlxcKSkkLyk7aWYoIXApdGhyb3cgYyhcImlpZGV4cFwiLFxubik7dmFyIHg9cFszXXx8cFsxXSx2PXBbMl07aWYodyYmKCEvXlskYS16QS1aX11bJGEtekEtWjAtOV9dKiQvLnRlc3Qodyl8fC9eKG51bGx8dW5kZWZpbmVkfHRoaXN8XFwkaW5kZXh8XFwkZmlyc3R8XFwkbWlkZGxlfFxcJGxhc3R8XFwkZXZlbnxcXCRvZGR8XFwkcGFyZW50fFxcJHJvb3R8XFwkaWQpJC8udGVzdCh3KSkpdGhyb3cgYyhcImJhZGlkZW50XCIsdyk7dmFyIHo7aWYodCl7dmFyIEE9eyRpZDpMYX0seT1hKHQpO3o9ZnVuY3Rpb24oYSxiLGMsZCl7diYmKEFbdl09Yik7QVt4XT1jO0EuJGluZGV4PWQ7cmV0dXJuIHkoYSxBKX19cmV0dXJuIGZ1bmN0aW9uKGEsZCxoLGssbil7dmFyIHA9VCgpO2EuJHdhdGNoQ29sbGVjdGlvbihxLGZ1bmN0aW9uKGgpe3ZhciBrLHEsdD1kWzBdLHMseT1UKCksQixDLEUsRCxILEYsSzt3JiYoYVt3XT1oKTtpZih5YShoKSlIPWgscT16fHxmO2Vsc2UgZm9yKEsgaW4gcT16fHxnLEg9W10saCl0YS5jYWxsKGgsSykmJlwiJFwiIT09Sy5jaGFyQXQoMCkmJkgucHVzaChLKTtcbkI9SC5sZW5ndGg7Sz1BcnJheShCKTtmb3Ioaz0wO2s8QjtrKyspaWYoQz1oPT09SD9rOkhba10sRT1oW0NdLEQ9cShhLEMsRSxrKSxwW0RdKUY9cFtEXSxkZWxldGUgcFtEXSx5W0RdPUYsS1trXT1GO2Vsc2V7aWYoeVtEXSl0aHJvdyByKEssZnVuY3Rpb24oYSl7YSYmYS5zY29wZSYmKHBbYS5pZF09YSl9KSxjKFwiZHVwZXNcIixsLEQsRSk7S1trXT17aWQ6RCxzY29wZTp2b2lkIDAsY2xvbmU6dm9pZCAwfTt5W0RdPSEwfUEmJihBW3hdPXZvaWQgMCk7Zm9yKHMgaW4gcCl7Rj1wW3NdO0Q9dGIoRi5jbG9uZSk7Yi5sZWF2ZShEKTtpZihEWzBdLnBhcmVudE5vZGUpZm9yKGs9MCxxPUQubGVuZ3RoO2s8cTtrKyspRFtrXS4kJE5HX1JFTU9WRUQ9ITA7Ri5zY29wZS4kZGVzdHJveSgpfWZvcihrPTA7azxCO2srKylpZihDPWg9PT1IP2s6SFtrXSxFPWhbQ10sRj1LW2tdLEYuc2NvcGUpe3M9dDtkbyBzPXMubmV4dFNpYmxpbmc7d2hpbGUocyYmcy4kJE5HX1JFTU9WRUQpO0YuY2xvbmVbMF0hPT1cbnMmJmIubW92ZSh0YihGLmNsb25lKSxudWxsLHQpO3Q9Ri5jbG9uZVtGLmNsb25lLmxlbmd0aC0xXTtlKEYuc2NvcGUsayx4LEUsdixDLEIpfWVsc2UgbihmdW5jdGlvbihhLGMpe0Yuc2NvcGU9Yzt2YXIgZD1tLmNsb25lTm9kZSghMSk7YVthLmxlbmd0aCsrXT1kO2IuZW50ZXIoYSxudWxsLHQpO3Q9ZDtGLmNsb25lPWE7eVtGLmlkXT1GO2UoRi5zY29wZSxrLHgsRSx2LEMsQil9KTtwPXl9KX19fX1dLGhmPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGIsZCxjKXtiLiR3YXRjaChjLm5nU2hvdyxmdW5jdGlvbihiKXthW2I/XCJyZW1vdmVDbGFzc1wiOlwiYWRkQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIix7dGVtcENsYXNzZXM6XCJuZy1oaWRlLWFuaW1hdGVcIn0pfSl9fX1dLCRlPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLG11bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGIsXG5kLGMpe2IuJHdhdGNoKGMubmdIaWRlLGZ1bmN0aW9uKGIpe2FbYj9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShkLFwibmctaGlkZVwiLHt0ZW1wQ2xhc3NlczpcIm5nLWhpZGUtYW5pbWF0ZVwifSl9KX19fV0samY9UmEoZnVuY3Rpb24oYSxiLGQpe2EuJHdhdGNoQ29sbGVjdGlvbihkLm5nU3R5bGUsZnVuY3Rpb24oYSxkKXtkJiZhIT09ZCYmKGF8fChhPXt9KSxyKGQsZnVuY3Rpb24oYixkKXtudWxsPT1hW2RdJiYoYVtkXT1cIlwiKX0pKTthJiZiLmNzcyhhKX0pfSksa2Y9W1wiJGFuaW1hdGVcIixcIiRjb21waWxlXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVxdWlyZTpcIm5nU3dpdGNoXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixmdW5jdGlvbigpe3RoaXMuY2FzZXM9e319XSxsaW5rOmZ1bmN0aW9uKGQsYyxlLGYpe3ZhciBnPVtdLGs9W10saD1bXSxsPVtdLG09ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7ITEhPT1jJiZhLnNwbGljZShiLDEpfX07ZC4kd2F0Y2goZS5uZ1N3aXRjaHx8XG5lLm9uLGZ1bmN0aW9uKGMpe2Zvcih2YXIgZCxlO2gubGVuZ3RoOylhLmNhbmNlbChoLnBvcCgpKTtkPTA7Zm9yKGU9bC5sZW5ndGg7ZDxlOysrZCl7dmFyIHE9dGIoa1tkXS5jbG9uZSk7bFtkXS4kZGVzdHJveSgpOyhoW2RdPWEubGVhdmUocSkpLmRvbmUobShoLGQpKX1rLmxlbmd0aD0wO2wubGVuZ3RoPTA7KGc9Zi5jYXNlc1tcIiFcIitjXXx8Zi5jYXNlc1tcIj9cIl0pJiZyKGcsZnVuY3Rpb24oYyl7Yy50cmFuc2NsdWRlKGZ1bmN0aW9uKGQsZSl7bC5wdXNoKGUpO3ZhciBmPWMuZWxlbWVudDtkW2QubGVuZ3RoKytdPWIuJCRjcmVhdGVDb21tZW50KFwiZW5kIG5nU3dpdGNoV2hlblwiKTtrLnB1c2goe2Nsb25lOmR9KTthLmVudGVyKGQsZi5wYXJlbnQoKSxmKX0pfSl9KX19fV0sbGY9UmEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYSxiLGQsYyxlKXthPWQubmdTd2l0Y2hXaGVuLnNwbGl0KGQubmdTd2l0Y2hXaGVuU2VwYXJhdG9yKS5zb3J0KCkuZmlsdGVyKGZ1bmN0aW9uKGEsXG5iLGMpe3JldHVybiBjW2ItMV0hPT1hfSk7cihhLGZ1bmN0aW9uKGEpe2MuY2FzZXNbXCIhXCIrYV09Yy5jYXNlc1tcIiFcIithXXx8W107Yy5jYXNlc1tcIiFcIithXS5wdXNoKHt0cmFuc2NsdWRlOmUsZWxlbWVudDpifSl9KX19KSxtZj1SYSh7dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxMjAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihhLGIsZCxjLGUpe2MuY2FzZXNbXCI/XCJdPWMuY2FzZXNbXCI/XCJdfHxbXTtjLmNhc2VzW1wiP1wiXS5wdXNoKHt0cmFuc2NsdWRlOmUsZWxlbWVudDpifSl9fSksemg9RihcIm5nVHJhbnNjbHVkZVwiKSxvZj1bXCIkY29tcGlsZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBQ1wiLGNvbXBpbGU6ZnVuY3Rpb24oYil7dmFyIGQ9YShiLmNvbnRlbnRzKCkpO2IuZW1wdHkoKTtyZXR1cm4gZnVuY3Rpb24oYSxiLGYsZyxrKXtmdW5jdGlvbiBoKCl7ZChhLGZ1bmN0aW9uKGEpe2IuYXBwZW5kKGEpfSl9aWYoIWspdGhyb3cgemgoXCJvcnBoYW5cIixcbnphKGIpKTtmLm5nVHJhbnNjbHVkZT09PWYuJGF0dHIubmdUcmFuc2NsdWRlJiYoZi5uZ1RyYW5zY2x1ZGU9XCJcIik7Zj1mLm5nVHJhbnNjbHVkZXx8Zi5uZ1RyYW5zY2x1ZGVTbG90O2soZnVuY3Rpb24oYSxjKXt2YXIgZDtpZihkPWEubGVuZ3RoKWE6e2Q9MDtmb3IodmFyIGY9YS5sZW5ndGg7ZDxmO2QrKyl7dmFyIGc9YVtkXTtpZihnLm5vZGVUeXBlIT09UGF8fGcubm9kZVZhbHVlLnRyaW0oKSl7ZD0hMDticmVhayBhfX1kPXZvaWQgMH1kP2IuYXBwZW5kKGEpOihoKCksYy4kZGVzdHJveSgpKX0sbnVsbCxmKTtmJiYhay5pc1Nsb3RGaWxsZWQoZikmJmgoKX19fX1dLE9lPVtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHRlcm1pbmFsOiEwLGNvbXBpbGU6ZnVuY3Rpb24oYixkKXtcInRleHQvbmctdGVtcGxhdGVcIj09PWQudHlwZSYmYS5wdXQoZC5pZCxiWzBdLnRleHQpfX19XSxBaD17JHNldFZpZXdWYWx1ZTpFLCRyZW5kZXI6RX0sQmg9W1wiJGVsZW1lbnRcIixcblwiJHNjb3BlXCIsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKCl7Z3x8KGc9ITAsYi4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtnPSExO2UubmdNb2RlbEN0cmwuJHJlbmRlcigpfSkpfWZ1bmN0aW9uIGMoYSl7a3x8KGs9ITAsYi4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKXtiLiQkZGVzdHJveWVkfHwoaz0hMSxlLm5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoZS5yZWFkVmFsdWUoKSksYSYmZS5uZ01vZGVsQ3RybC4kcmVuZGVyKCkpfSkpfXZhciBlPXRoaXMsZj1uZXcgSGI7ZS5zZWxlY3RWYWx1ZU1hcD17fTtlLm5nTW9kZWxDdHJsPUFoO2UubXVsdGlwbGU9ITE7ZS51bmtub3duT3B0aW9uPXgoQy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKTtlLmhhc0VtcHR5T3B0aW9uPSExO2UuZW1wdHlPcHRpb249dm9pZCAwO2UucmVuZGVyVW5rbm93bk9wdGlvbj1mdW5jdGlvbihiKXtiPWUuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUoYik7ZS51bmtub3duT3B0aW9uLnZhbChiKTtcbmEucHJlcGVuZChlLnVua25vd25PcHRpb24pO09hKGUudW5rbm93bk9wdGlvbiwhMCk7YS52YWwoYil9O2UudXBkYXRlVW5rbm93bk9wdGlvbj1mdW5jdGlvbihiKXtiPWUuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUoYik7ZS51bmtub3duT3B0aW9uLnZhbChiKTtPYShlLnVua25vd25PcHRpb24sITApO2EudmFsKGIpfTtlLmdlbmVyYXRlVW5rbm93bk9wdGlvblZhbHVlPWZ1bmN0aW9uKGEpe3JldHVyblwiPyBcIitMYShhKStcIiA/XCJ9O2UucmVtb3ZlVW5rbm93bk9wdGlvbj1mdW5jdGlvbigpe2UudW5rbm93bk9wdGlvbi5wYXJlbnQoKSYmZS51bmtub3duT3B0aW9uLnJlbW92ZSgpfTtlLnNlbGVjdEVtcHR5T3B0aW9uPWZ1bmN0aW9uKCl7ZS5lbXB0eU9wdGlvbiYmKGEudmFsKFwiXCIpLE9hKGUuZW1wdHlPcHRpb24sITApKX07ZS51bnNlbGVjdEVtcHR5T3B0aW9uPWZ1bmN0aW9uKCl7ZS5oYXNFbXB0eU9wdGlvbiYmT2EoZS5lbXB0eU9wdGlvbiwhMSl9O2IuJG9uKFwiJGRlc3Ryb3lcIixcbmZ1bmN0aW9uKCl7ZS5yZW5kZXJVbmtub3duT3B0aW9uPUV9KTtlLnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBiPWEudmFsKCksYj1iIGluIGUuc2VsZWN0VmFsdWVNYXA/ZS5zZWxlY3RWYWx1ZU1hcFtiXTpiO3JldHVybiBlLmhhc09wdGlvbihiKT9iOm51bGx9O2Uud3JpdGVWYWx1ZT1mdW5jdGlvbihiKXt2YXIgYz1hWzBdLm9wdGlvbnNbYVswXS5zZWxlY3RlZEluZGV4XTtjJiZPYSh4KGMpLCExKTtlLmhhc09wdGlvbihiKT8oZS5yZW1vdmVVbmtub3duT3B0aW9uKCksYz1MYShiKSxhLnZhbChjIGluIGUuc2VsZWN0VmFsdWVNYXA/YzpiKSxPYSh4KGFbMF0ub3B0aW9uc1thWzBdLnNlbGVjdGVkSW5kZXhdKSwhMCkpOmUuc2VsZWN0VW5rbm93bk9yRW1wdHlPcHRpb24oYil9O2UuYWRkT3B0aW9uPWZ1bmN0aW9uKGEsYil7aWYoOCE9PWJbMF0ubm9kZVR5cGUpe0phKGEsJ1wib3B0aW9uIHZhbHVlXCInKTtcIlwiPT09YSYmKGUuaGFzRW1wdHlPcHRpb249ITAsZS5lbXB0eU9wdGlvbj1cbmIpO3ZhciBjPWYuZ2V0KGEpfHwwO2Yuc2V0KGEsYysxKTtkKCl9fTtlLnJlbW92ZU9wdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1mLmdldChhKTtiJiYoMT09PWI/KGYuZGVsZXRlKGEpLFwiXCI9PT1hJiYoZS5oYXNFbXB0eU9wdGlvbj0hMSxlLmVtcHR5T3B0aW9uPXZvaWQgMCkpOmYuc2V0KGEsYi0xKSl9O2UuaGFzT3B0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiEhZi5nZXQoYSl9O2UuJGhhc0VtcHR5T3B0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGUuaGFzRW1wdHlPcHRpb259O2UuJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGFbMF0ub3B0aW9uc1swXT09PWUudW5rbm93bk9wdGlvblswXX07ZS4kaXNFbXB0eU9wdGlvblNlbGVjdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIGUuaGFzRW1wdHlPcHRpb24mJmFbMF0ub3B0aW9uc1thWzBdLnNlbGVjdGVkSW5kZXhdPT09ZS5lbXB0eU9wdGlvblswXX07ZS5zZWxlY3RVbmtub3duT3JFbXB0eU9wdGlvbj1mdW5jdGlvbihhKXtudWxsPT1cbmEmJmUuZW1wdHlPcHRpb24/KGUucmVtb3ZlVW5rbm93bk9wdGlvbigpLGUuc2VsZWN0RW1wdHlPcHRpb24oKSk6ZS51bmtub3duT3B0aW9uLnBhcmVudCgpLmxlbmd0aD9lLnVwZGF0ZVVua25vd25PcHRpb24oYSk6ZS5yZW5kZXJVbmtub3duT3B0aW9uKGEpfTt2YXIgZz0hMSxrPSExO2UucmVnaXN0ZXJPcHRpb249ZnVuY3Rpb24oYSxiLGYsZyxrKXtpZihmLiRhdHRyLm5nVmFsdWUpe3ZhciBxLHI7Zi4kb2JzZXJ2ZShcInZhbHVlXCIsZnVuY3Rpb24oYSl7dmFyIGQsZj1iLnByb3AoXCJzZWxlY3RlZFwiKTt3KHIpJiYoZS5yZW1vdmVPcHRpb24ocSksZGVsZXRlIGUuc2VsZWN0VmFsdWVNYXBbcl0sZD0hMCk7cj1MYShhKTtxPWE7ZS5zZWxlY3RWYWx1ZU1hcFtyXT1hO2UuYWRkT3B0aW9uKGEsYik7Yi5hdHRyKFwidmFsdWVcIixyKTtkJiZmJiZjKCl9KX1lbHNlIGc/Zi4kb2JzZXJ2ZShcInZhbHVlXCIsZnVuY3Rpb24oYSl7ZS5yZWFkVmFsdWUoKTt2YXIgZCxmPWIucHJvcChcInNlbGVjdGVkXCIpO1xudyhxKSYmKGUucmVtb3ZlT3B0aW9uKHEpLGQ9ITApO3E9YTtlLmFkZE9wdGlvbihhLGIpO2QmJmYmJmMoKX0pOms/YS4kd2F0Y2goayxmdW5jdGlvbihhLGQpe2YuJHNldChcInZhbHVlXCIsYSk7dmFyIGc9Yi5wcm9wKFwic2VsZWN0ZWRcIik7ZCE9PWEmJmUucmVtb3ZlT3B0aW9uKGQpO2UuYWRkT3B0aW9uKGEsYik7ZCYmZyYmYygpfSk6ZS5hZGRPcHRpb24oZi52YWx1ZSxiKTtmLiRvYnNlcnZlKFwiZGlzYWJsZWRcIixmdW5jdGlvbihhKXtpZihcInRydWVcIj09PWF8fGEmJmIucHJvcChcInNlbGVjdGVkXCIpKWUubXVsdGlwbGU/YyghMCk6KGUubmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShudWxsKSxlLm5nTW9kZWxDdHJsLiRyZW5kZXIoKSl9KTtiLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3ZhciBhPWUucmVhZFZhbHVlKCksYj1mLnZhbHVlO2UucmVtb3ZlT3B0aW9uKGIpO2QoKTsoZS5tdWx0aXBsZSYmYSYmLTEhPT1hLmluZGV4T2YoYil8fGE9PT1iKSYmYyghMCl9KX19XSxQZT1mdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVcIixcbnJlcXVpcmU6W1wic2VsZWN0XCIsXCI/bmdNb2RlbFwiXSxjb250cm9sbGVyOkJoLHByaW9yaXR5OjEsbGluazp7cHJlOmZ1bmN0aW9uKGEsYixkLGMpe3ZhciBlPWNbMF0sZj1jWzFdO2lmKGYpe2lmKGUubmdNb2RlbEN0cmw9ZixiLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtlLnJlbW92ZVVua25vd25PcHRpb24oKTthLiRhcHBseShmdW5jdGlvbigpe2YuJHNldFZpZXdWYWx1ZShlLnJlYWRWYWx1ZSgpKX0pfSksZC5tdWx0aXBsZSl7ZS5tdWx0aXBsZT0hMDtlLnJlYWRWYWx1ZT1mdW5jdGlvbigpe3ZhciBhPVtdO3IoYi5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGIpe2Iuc2VsZWN0ZWQmJiFiLmRpc2FibGVkJiYoYj1iLnZhbHVlLGEucHVzaChiIGluIGUuc2VsZWN0VmFsdWVNYXA/ZS5zZWxlY3RWYWx1ZU1hcFtiXTpiKSl9KTtyZXR1cm4gYX07ZS53cml0ZVZhbHVlPWZ1bmN0aW9uKGEpe3IoYi5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGIpe3ZhciBjPSEhYSYmKC0xIT09QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhLFxuYi52YWx1ZSl8fC0xIT09QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhLGUuc2VsZWN0VmFsdWVNYXBbYi52YWx1ZV0pKTtjIT09Yi5zZWxlY3RlZCYmT2EoeChiKSxjKX0pfTt2YXIgZyxrPU5hTjthLiR3YXRjaChmdW5jdGlvbigpe2shPT1mLiR2aWV3VmFsdWV8fHZhKGcsZi4kdmlld1ZhbHVlKXx8KGc9amEoZi4kdmlld1ZhbHVlKSxmLiRyZW5kZXIoKSk7az1mLiR2aWV3VmFsdWV9KTtmLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9fX1lbHNlIGUucmVnaXN0ZXJPcHRpb249RX0scG9zdDpmdW5jdGlvbihhLGIsZCxjKXt2YXIgZT1jWzFdO2lmKGUpe3ZhciBmPWNbMF07ZS4kcmVuZGVyPWZ1bmN0aW9uKCl7Zi53cml0ZVZhbHVlKGUuJHZpZXdWYWx1ZSl9fX19fX0sUWU9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGIsZCl7dmFyIGMsZTt3KGQubmdWYWx1ZSl8fFxuKHcoZC52YWx1ZSk/Yz1hKGQudmFsdWUsITApOihlPWEoYi50ZXh0KCksITApKXx8ZC4kc2V0KFwidmFsdWVcIixiLnRleHQoKSkpO3JldHVybiBmdW5jdGlvbihhLGIsZCl7dmFyIGg9Yi5wYXJlbnQoKTsoaD1oLmRhdGEoXCIkc2VsZWN0Q29udHJvbGxlclwiKXx8aC5wYXJlbnQoKS5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIikpJiZoLnJlZ2lzdGVyT3B0aW9uKGEsYixkLGMsZSl9fX19XSwkYz1bXCIkcGFyc2VcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihiLGQsYyxlKXtpZihlKXt2YXIgZj1jLmhhc093blByb3BlcnR5KFwicmVxdWlyZWRcIil8fGEoYy5uZ1JlcXVpcmVkKShiKTtjLm5nUmVxdWlyZWR8fChjLnJlcXVpcmVkPSEwKTtlLiR2YWxpZGF0b3JzLnJlcXVpcmVkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIWZ8fCFlLiRpc0VtcHR5KGIpfTtjLiRvYnNlcnZlKFwicmVxdWlyZWRcIixmdW5jdGlvbihhKXtmIT09YSYmKGY9XG5hLGUuJHZhbGlkYXRlKCkpfSl9fX19XSxaYz1bXCIkcGFyc2VcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsY29tcGlsZTpmdW5jdGlvbihiLGQpe3ZhciBjLGU7ZC5uZ1BhdHRlcm4mJihjPWQubmdQYXR0ZXJuLGU9XCIvXCI9PT1kLm5nUGF0dGVybi5jaGFyQXQoMCkmJmllLnRlc3QoZC5uZ1BhdHRlcm4pP2Z1bmN0aW9uKCl7cmV0dXJuIGQubmdQYXR0ZXJufTphKGQubmdQYXR0ZXJuKSk7cmV0dXJuIGZ1bmN0aW9uKGEsYixkLGgpe2lmKGgpe3ZhciBsPWQucGF0dGVybjtkLm5nUGF0dGVybj9sPWUoYSk6Yz1kLnBhdHRlcm47dmFyIG09aGUobCxjLGIpO2QuJG9ic2VydmUoXCJwYXR0ZXJuXCIsZnVuY3Rpb24oYSl7dmFyIGQ9bTttPWhlKGEsYyxiKTsoZCYmZC50b1N0cmluZygpKSE9PShtJiZtLnRvU3RyaW5nKCkpJiZoLiR2YWxpZGF0ZSgpfSk7aC4kdmFsaWRhdG9ycy5wYXR0ZXJuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGguJGlzRW1wdHkoYil8fFxueihtKXx8bS50ZXN0KGIpfX19fX19XSxiZD1bXCIkcGFyc2VcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihiLGQsYyxlKXtpZihlKXt2YXIgZj1jLm1heGxlbmd0aHx8YShjLm5nTWF4bGVuZ3RoKShiKSxnPVRiKGYpO2MuJG9ic2VydmUoXCJtYXhsZW5ndGhcIixmdW5jdGlvbihhKXtmIT09YSYmKGc9VGIoYSksZj1hLGUuJHZhbGlkYXRlKCkpfSk7ZS4kdmFsaWRhdG9ycy5tYXhsZW5ndGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMD5nfHxlLiRpc0VtcHR5KGIpfHxiLmxlbmd0aDw9Z319fX19XSxhZD1bXCIkcGFyc2VcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihiLGQsYyxlKXtpZihlKXt2YXIgZj1jLm1pbmxlbmd0aHx8YShjLm5nTWlubGVuZ3RoKShiKSxnPVRiKGYpfHwtMTtjLiRvYnNlcnZlKFwibWlubGVuZ3RoXCIsZnVuY3Rpb24oYSl7ZiE9PVxuYSYmKGc9VGIoYSl8fC0xLGY9YSxlLiR2YWxpZGF0ZSgpKX0pO2UuJHZhbGlkYXRvcnMubWlubGVuZ3RoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGUuJGlzRW1wdHkoYil8fGIubGVuZ3RoPj1nfX19fX1dO0MuYW5ndWxhci5ib290c3RyYXA/Qy5jb25zb2xlJiZjb25zb2xlLmxvZyhcIldBUk5JTkc6IFRyaWVkIHRvIGxvYWQgQW5ndWxhckpTIG1vcmUgdGhhbiBvbmNlLlwiKTooRmUoKSxKZShjYSksY2EubW9kdWxlKFwibmdMb2NhbGVcIixbXSxbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7YSs9XCJcIjt2YXIgYj1hLmluZGV4T2YoXCIuXCIpO3JldHVybi0xPT1iPzA6YS5sZW5ndGgtYi0xfWEudmFsdWUoXCIkbG9jYWxlXCIse0RBVEVUSU1FX0ZPUk1BVFM6e0FNUE1TOltcIkFNXCIsXCJQTVwiXSxEQVk6XCJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheVwiLnNwbGl0KFwiIFwiKSxFUkFOQU1FUzpbXCJCZWZvcmUgQ2hyaXN0XCIsXCJBbm5vIERvbWluaVwiXSxcbkVSQVM6W1wiQkNcIixcIkFEXCJdLEZJUlNUREFZT0ZXRUVLOjYsTU9OVEg6XCJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyXCIuc3BsaXQoXCIgXCIpLFNIT1JUREFZOlwiU3VuIE1vbiBUdWUgV2VkIFRodSBGcmkgU2F0XCIuc3BsaXQoXCIgXCIpLFNIT1JUTU9OVEg6XCJKYW4gRmViIE1hciBBcHIgTWF5IEp1biBKdWwgQXVnIFNlcCBPY3QgTm92IERlY1wiLnNwbGl0KFwiIFwiKSxTVEFOREFMT05FTU9OVEg6XCJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyXCIuc3BsaXQoXCIgXCIpLFdFRUtFTkRSQU5HRTpbNSw2XSxmdWxsRGF0ZTpcIkVFRUUsIE1NTU0gZCwgeVwiLGxvbmdEYXRlOlwiTU1NTSBkLCB5XCIsbWVkaXVtOlwiTU1NIGQsIHkgaDptbTpzcyBhXCIsbWVkaXVtRGF0ZTpcIk1NTSBkLCB5XCIsbWVkaXVtVGltZTpcImg6bW06c3MgYVwiLFxuXCJzaG9ydFwiOlwiTS9kL3l5IGg6bW0gYVwiLHNob3J0RGF0ZTpcIk0vZC95eVwiLHNob3J0VGltZTpcImg6bW0gYVwifSxOVU1CRVJfRk9STUFUUzp7Q1VSUkVOQ1lfU1lNOlwiJFwiLERFQ0lNQUxfU0VQOlwiLlwiLEdST1VQX1NFUDpcIixcIixQQVRURVJOUzpbe2dTaXplOjMsbGdTaXplOjMsbWF4RnJhYzozLG1pbkZyYWM6MCxtaW5JbnQ6MSxuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIscG9zUHJlOlwiXCIscG9zU3VmOlwiXCJ9LHtnU2l6ZTozLGxnU2l6ZTozLG1heEZyYWM6MixtaW5GcmFjOjIsbWluSW50OjEsbmVnUHJlOlwiLVxcdTAwYTRcIixuZWdTdWY6XCJcIixwb3NQcmU6XCJcXHUwMGE0XCIscG9zU3VmOlwiXCJ9XX0saWQ6XCJlbi11c1wiLGxvY2FsZUlEOlwiZW5fVVNcIixwbHVyYWxDYXQ6ZnVuY3Rpb24oYSxjKXt2YXIgZT1hfDAsZj1jO3ZvaWQgMD09PWYmJihmPU1hdGgubWluKGIoYSksMykpO01hdGgucG93KDEwLGYpO3JldHVybiAxPT1lJiYwPT1mP1wib25lXCI6XCJvdGhlclwifX0pfV0pLHgoZnVuY3Rpb24oKXtBZShDLmRvY3VtZW50LFxuVWMpfSkpfSkod2luZG93KTshd2luZG93LmFuZ3VsYXIuJCRjc3AoKS5ub0lubGluZVN0eWxlJiZ3aW5kb3cuYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmhlYWQpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSl7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7fW5nXFxcXDpmb3Jte2Rpc3BsYXk6YmxvY2s7fS5uZy1hbmltYXRlLXNoaW17dmlzaWJpbGl0eTpoaWRkZW47fS5uZy1hbmNob3J7cG9zaXRpb246YWJzb2x1dGU7fTwvc3R5bGU+Jyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLm1pbi5qcy5tYXBcbiIsIi8qXG4gQW5ndWxhckpTIHYxLjcuOFxuIChjKSAyMDEwLTIwMTggR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKHosbCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIHEobil7cmV0dXJuW1wiJGFuaW1hdGVcIixmdW5jdGlvbih1KXtyZXR1cm57cmVzdHJpY3Q6XCJBRVwiLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MSx0ZXJtaW5hbDohMCxyZXF1aXJlOlwiXl5uZ01lc3NhZ2VzXCIsbGluazpmdW5jdGlvbihtLGYsYSxlLHIpe3ZhciBiLGgscztpZighbil7Yj1mWzBdO3M9YS5uZ01lc3NhZ2V8fGEud2hlbjthPWEubmdNZXNzYWdlRXhwfHxhLndoZW5FeHA7dmFyIGs9ZnVuY3Rpb24oYyl7aD1jP3YoYyk/YzpjLnNwbGl0KC9bXFxzLF0rLyk6bnVsbDtlLnJlUmVuZGVyKCl9O2E/KGsobS4kZXZhbChhKSksbS4kd2F0Y2hDb2xsZWN0aW9uKGEsaykpOmsocyl9dmFyIGcsdDtlLnJlZ2lzdGVyKGIsdD17dGVzdDpmdW5jdGlvbihjKXt2YXIgYj1oO2M9Yj92KGIpPzA8PWIuaW5kZXhPZihjKTpiLmhhc093blByb3BlcnR5KGMpOnZvaWQgMDtyZXR1cm4gY30sYXR0YWNoOmZ1bmN0aW9uKCl7Z3x8XG5yKGZ1bmN0aW9uKGMsYSl7dS5lbnRlcihjLG51bGwsZik7Zz1jO3ZhciBkPWcuJCRhdHRhY2hJZD1lLmdldEF0dGFjaElkKCk7Zy5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtnJiZnLiQkYXR0YWNoSWQ9PT1kJiYoZS5kZXJlZ2lzdGVyKGIsbiksdC5kZXRhY2goKSk7YS4kZGVzdHJveSgpfSl9KX0sZGV0YWNoOmZ1bmN0aW9uKCl7aWYoZyl7dmFyIGM9ZztnPW51bGw7dS5sZWF2ZShjKX19fSxuKTttLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtlLmRlcmVnaXN0ZXIoYixuKX0pfX19XX12YXIgeCx2LHAseTtsLm1vZHVsZShcIm5nTWVzc2FnZXNcIixbXSxmdW5jdGlvbigpe3g9bC5mb3JFYWNoO3Y9bC5pc0FycmF5O3A9bC5pc1N0cmluZzt5PWwuZWxlbWVudH0pLmluZm8oe2FuZ3VsYXJWZXJzaW9uOlwiMS43LjhcIn0pLmRpcmVjdGl2ZShcIm5nTWVzc2FnZXNcIixbXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHUoZixhKXtyZXR1cm4gcChhKSYmMD09PWEubGVuZ3RofHxtKGYuJGV2YWwoYSkpfVxuZnVuY3Rpb24gbShmKXtyZXR1cm4gcChmKT9mLmxlbmd0aDohIWZ9cmV0dXJue3JlcXVpcmU6XCJuZ01lc3NhZ2VzXCIscmVzdHJpY3Q6XCJBRVwiLGNvbnRyb2xsZXI6W1wiJGVsZW1lbnRcIixcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oZixhLGUpe2Z1bmN0aW9uIHIoYyxiKXtmb3IodmFyIGQ9YixhPVtdO2QmJmQhPT1jOyl7dmFyIGU9ZC4kJG5nTWVzc2FnZU5vZGU7aWYoZSYmZS5sZW5ndGgpcmV0dXJuIGtbZV07ZC5jaGlsZE5vZGVzLmxlbmd0aCYmLTE9PT1hLmluZGV4T2YoZCk/KGEucHVzaChkKSxkPWQuY2hpbGROb2Rlc1tkLmNoaWxkTm9kZXMubGVuZ3RoLTFdKTpkLnByZXZpb3VzU2libGluZz9kPWQucHJldmlvdXNTaWJsaW5nOihkPWQucGFyZW50Tm9kZSxhLnB1c2goZCkpfX12YXIgYj10aGlzLGg9MCxzPTA7dGhpcy5nZXRBdHRhY2hJZD1mdW5jdGlvbigpe3JldHVybiBzKyt9O3ZhciBrPXRoaXMubWVzc2FnZXM9e30sZyx0O3RoaXMucmVuZGVyPWZ1bmN0aW9uKGMpe2M9Y3x8XG57fTtnPSExO3Q9Yztmb3IodmFyIHc9dShhLGUubmdNZXNzYWdlc011bHRpcGxlKXx8dShhLGUubXVsdGlwbGUpLGQ9W10scj17fSxoPTAsaz1iLmhlYWQscz0hMSxsPTA7bnVsbCE9azspe2wrKzt2YXIgcD1rLm1lc3NhZ2UscT0hMTtzfHx4KGMsZnVuY3Rpb24oYixjKXttKGIpJiYhcSYmKGgrKyxwLnRlc3QoYykmJiFyW2NdJiYocT1yW2NdPSEwLHAuYXR0YWNoKCkpKX0pO3E/cz0hdzpkLnB1c2gocCk7az1rLm5leHR9eChkLGZ1bmN0aW9uKGMpe2MuZGV0YWNoKCl9KTtjPWQubGVuZ3RoIT09bDsodz1iLmRlZmF1bHQmJiFjJiYwPGgpP2IuZGVmYXVsdC5hdHRhY2goKTpiLmRlZmF1bHQmJmIuZGVmYXVsdC5kZXRhY2goKTtjfHx3P24uc2V0Q2xhc3MoZixcIm5nLWFjdGl2ZVwiLFwibmctaW5hY3RpdmVcIik6bi5zZXRDbGFzcyhmLFwibmctaW5hY3RpdmVcIixcIm5nLWFjdGl2ZVwiKX07YS4kd2F0Y2hDb2xsZWN0aW9uKGUubmdNZXNzYWdlc3x8ZVtcImZvclwiXSxiLnJlbmRlcik7dGhpcy5yZVJlbmRlcj1cbmZ1bmN0aW9uKCl7Z3x8KGc9ITAsYS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7ZyYmdCYmYi5yZW5kZXIodCl9KSl9O3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYyxhLGQpe2lmKGQpYi5kZWZhdWx0PWE7ZWxzZXtkPWgudG9TdHJpbmcoKTtrW2RdPXttZXNzYWdlOmF9O3ZhciBlPWZbMF07YT1rW2RdO2IuaGVhZD8oZT1yKGUsYykpPyhhLm5leHQ9ZS5uZXh0LGUubmV4dD1hKTooYS5uZXh0PWIuaGVhZCxiLmhlYWQ9YSk6Yi5oZWFkPWE7Yy4kJG5nTWVzc2FnZU5vZGU9ZDtoKyt9Yi5yZVJlbmRlcigpfTt0aGlzLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oYSxlKXtpZihlKWRlbGV0ZSBiLmRlZmF1bHQ7ZWxzZXt2YXIgZD1hLiQkbmdNZXNzYWdlTm9kZTtkZWxldGUgYS4kJG5nTWVzc2FnZU5vZGU7dmFyIGc9a1tkXTtpZihnKXt2YXIgaD1yKGZbMF0sYSk7aD9oLm5leHQ9Zy5uZXh0OmIuaGVhZD1nLm5leHR9ZGVsZXRlIGtbZF19Yi5yZVJlbmRlcigpfX1dfX1dKS5kaXJlY3RpdmUoXCJuZ01lc3NhZ2VzSW5jbHVkZVwiLFxuW1wiJHRlbXBsYXRlUmVxdWVzdFwiLFwiJGRvY3VtZW50XCIsXCIkY29tcGlsZVwiLGZ1bmN0aW9uKG4sbCxtKXtmdW5jdGlvbiBmKGEsZSl7dmFyIGY9bS4kJGNyZWF0ZUNvbW1lbnQ/bS4kJGNyZWF0ZUNvbW1lbnQoXCJuZ01lc3NhZ2VzSW5jbHVkZVwiLGUpOmxbMF0uY3JlYXRlQ29tbWVudChcIiBuZ01lc3NhZ2VzSW5jbHVkZTogXCIrZStcIiBcIiksZj15KGYpO2EuYWZ0ZXIoZik7YS5yZW1vdmUoKX1yZXR1cm57cmVzdHJpY3Q6XCJBRVwiLHJlcXVpcmU6XCJeXm5nTWVzc2FnZXNcIixsaW5rOmZ1bmN0aW9uKGEsZSxsKXt2YXIgYj1sLm5nTWVzc2FnZXNJbmNsdWRlfHxsLnNyYztuKGIpLnRoZW4oZnVuY3Rpb24oaCl7YS4kJGRlc3Ryb3llZHx8KHAoaCkmJiFoLnRyaW0oKT9mKGUsYik6bShoKShhLGZ1bmN0aW9uKGEpe2UuYWZ0ZXIoYSk7ZihlLGIpfSkpfSl9fX1dKS5kaXJlY3RpdmUoXCJuZ01lc3NhZ2VcIixxKCkpLmRpcmVjdGl2ZShcIm5nTWVzc2FnZUV4cFwiLHEoKSkuZGlyZWN0aXZlKFwibmdNZXNzYWdlRGVmYXVsdFwiLFxucSghMCkpfSkod2luZG93LHdpbmRvdy5hbmd1bGFyKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItbWVzc2FnZXMubWluLmpzLm1hcFxuIiwiLyoqXG4gKiBTdGF0ZS1iYXNlZCByb3V0aW5nIGZvciBBbmd1bGFySlMgMS54XG4gKiBOT1RJQ0U6IFRoaXMgbW9ub2xpdGhpYyBidW5kbGUgYWxzbyBidW5kbGVzIHRoZSBAdWlyb3V0ZXIvY29yZSBjb2RlLlxuICogICAgICAgICBUaGlzIGNhdXNlcyBpdCB0byBiZSBpbmNvbXBhdGlibGUgd2l0aCBwbHVnaW5zIHRoYXQgZGVwZW5kIG9uIEB1aXJvdXRlci9jb3JlLlxuICogICAgICAgICBXZSByZWNvbW1lbmQgc3dpdGNoaW5nIHRvIHRoZSB1aS1yb3V0ZXItY29yZS5qcyBhbmQgdWktcm91dGVyLWFuZ3VsYXJqcy5qcyBidW5kbGVzIGluc3RlYWQuXG4gKiAgICAgICAgIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgaHR0cHM6Ly91aS1yb3V0ZXIuZ2l0aHViLmlvL2Jsb2cvdWlyb3V0ZXItZm9yLWFuZ3VsYXJqcy11bWQtYnVuZGxlc1xuICogQHZlcnNpb24gdjEuMC4yMlxuICogQGxpbmsgaHR0cHM6Ly91aS1yb3V0ZXIuZ2l0aHViLmlvXG4gKiBAbGljZW5zZSBNSVQgTGljZW5zZSwgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/ZShleHBvcnRzLHJlcXVpcmUoXCJhbmd1bGFyXCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIixcImFuZ3VsYXJcIl0sZSk6ZSgodD10fHxzZWxmKVtcIkB1aXJvdXRlci9hbmd1bGFyanNcIl09e30sdC5hbmd1bGFyKX0odGhpcyxmdW5jdGlvbihkLHQpe1widXNlIHN0cmljdFwiO3ZhciBlPWFuZ3VsYXIsYj10JiZ0Lm1vZHVsZT90OmU7ZnVuY3Rpb24gYyhyKXt2YXIgdD1bXS5zbGljZS5hcHBseShhcmd1bWVudHMsWzFdKSxuPXIubGVuZ3RoO3JldHVybiBmdW5jdGlvbiB0KGUpe3JldHVybiBlLmxlbmd0aD49bj9yLmFwcGx5KG51bGwsZSk6ZnVuY3Rpb24oKXtyZXR1cm4gdChlLmNvbmNhdChbXS5zbGljZS5hcHBseShhcmd1bWVudHMpKSl9fSh0KX1mdW5jdGlvbiByKCl7dmFyIHI9YXJndW1lbnRzLG49ci5sZW5ndGgtMTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9bixlPXJbbl0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3QtLTspZT1yW3RdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19ZnVuY3Rpb24gcygpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gci5hcHBseShudWxsLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5yZXZlcnNlKCkpfXZhciB3PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdCYmdFtlXX19LHk9YyhmdW5jdGlvbih0LGUscil7cmV0dXJuIHImJnJbdF09PT1lfSksUj1mdW5jdGlvbih0KXtyZXR1cm4gcy5hcHBseShudWxsLHQuc3BsaXQoXCIuXCIpLm1hcCh3KSl9LGw9ZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiFyLmFwcGx5KG51bGwsdCl9fTtmdW5jdGlvbiBuKHIsbil7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiByLmFwcGx5KG51bGwsdCkmJm4uYXBwbHkobnVsbCx0KX19ZnVuY3Rpb24gaShyLG4pe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gci5hcHBseShudWxsLHQpfHxuLmFwcGx5KG51bGwsdCl9fXZhciBmPWZ1bmN0aW9uKHIpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmISFyKGUpfSwhMCl9fSxoPWZ1bmN0aW9uKHIpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdHx8ISFyKGUpfSwhMSl9fSxwPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dCYmdC5jb25zdHJ1Y3Rvcj09PWV8fHQgaW5zdGFuY2VvZiBlfX0sbz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10fX0sdj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19O2Z1bmN0aW9uIGEoZSxyKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHRbZV0uYXBwbHkodCxyKX19ZnVuY3Rpb24gbShyKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTxyLmxlbmd0aDtlKyspaWYocltlXVswXSh0KSlyZXR1cm4gcltlXVsxXSh0KX19dmFyIHU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxnPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHQ9PT1lfX0sXz1nKFwidW5kZWZpbmVkXCIpLEU9bChfKSxTPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dH0sJD1pKFMsXyksQz1nKFwiZnVuY3Rpb25cIiksVD1nKFwibnVtYmVyXCIpLFA9ZyhcInN0cmluZ1wiKSxrPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dCYmXCJvYmplY3RcIj09dHlwZW9mIHR9LE89QXJyYXkuaXNBcnJheSx4PWZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09dS5jYWxsKHQpfSxqPWZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT11LmNhbGwodCl9O2Z1bmN0aW9uIFYodCl7aWYoTyh0KSYmdC5sZW5ndGgpe3ZhciBlPXQuc2xpY2UoMCwtMSkscj10LnNsaWNlKC0xKTtyZXR1cm4hKGUuZmlsdGVyKGwoUCkpLmxlbmd0aHx8ci5maWx0ZXIobChDKSkubGVuZ3RoKX1yZXR1cm4gQyh0KX12YXIgST1uKGsscyh3KFwidGhlblwiKSxDKSksSD1mdW5jdGlvbihuLHQpe3JldHVybiB0LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0W2VdPShyPW4rXCIuXCIrZStcIigpXCIsZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJObyBpbXBsZW1lbnRhdGlvbiBmb3IgXCIrcitcIi4gVGhlIGZyYW1ld29yayBzcGVjaWZpYyBjb2RlIGRpZCBub3QgaW1wbGVtZW50IHRoaXMgbWV0aG9kLlwiKX0pLHQ7dmFyIHJ9LHt9KX0sQT17JHE6dm9pZCAwLCRpbmplY3Rvcjp2b2lkIDB9LEQ9XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGYuc2VsZj09PXNlbGYmJnNlbGZ8fFwib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWwmJmdsb2JhbC5nbG9iYWw9PT1nbG9iYWwmJmdsb2JhbHx8dm9pZCAwLHE9RC5hbmd1bGFyfHx7fSxVPXEuZnJvbUpzb258fEpTT04ucGFyc2UuYmluZChKU09OKSxGPXEudG9Kc29ufHxKU09OLnN0cmluZ2lmeS5iaW5kKEpTT04pLE49cS5mb3JFYWNofHxmdW5jdGlvbihlLHIsdCl7aWYoTyhlKSlyZXR1cm4gZS5mb3JFYWNoKHIsdCk7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gcihlW3RdLHQpfSl9LEw9T2JqZWN0LmFzc2lnbnx8UHQsTT1xLmVxdWFsc3x8a3Q7ZnVuY3Rpb24gQih0KXtyZXR1cm4gdH1mdW5jdGlvbiBHKCl7fWZ1bmN0aW9uIFcoZSxuLHIsdCxpKXt2b2lkIDA9PT1pJiYoaT0hMSk7dmFyIG89ZnVuY3Rpb24odCl7cmV0dXJuIGUoKVt0XS5iaW5kKHIoKSl9O3JldHVybih0PXR8fE9iamVjdC5rZXlzKGUoKSkpLnJlZHVjZShmdW5jdGlvbih0LGUpe3ZhciByO3JldHVybiB0W2VdPWk/KHI9ZSxmdW5jdGlvbigpe3JldHVybiBuW3JdPW8ociksbltyXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTpvKGUpLHR9LG4pfXZhciB6PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEwoT2JqZWN0LmNyZWF0ZSh0KSxlKX0sSj1jKFEpO2Z1bmN0aW9uIFEodCxlKXtyZXR1cm4tMSE9PXQuaW5kZXhPZihlKX12YXIgSz1jKFkpO2Z1bmN0aW9uIFkodCxlKXt2YXIgcj10LmluZGV4T2YoZSk7cmV0dXJuIDA8PXImJnQuc3BsaWNlKHIsMSksdH12YXIgWj1jKFgpO2Z1bmN0aW9uIFgodCxlKXtyZXR1cm4gdC5wdXNoKGUpLGV9dmFyIHR0PWZ1bmN0aW9uKGUpe3JldHVybiBlLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0KCksSyhlLHQpfSl9O2Z1bmN0aW9uIGV0KHQpe2Zvcih2YXIgZT1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyllW3ItMV09YXJndW1lbnRzW3JdO3ZhciBuPUwuYXBwbHkodm9pZCAwLFt7fV0uY29uY2F0KGUucmV2ZXJzZSgpKSk7cmV0dXJuIEwobixpdCh0fHx7fSxPYmplY3Qua2V5cyhuKSkpfXZhciBydD1mdW5jdGlvbih0LGUpe3JldHVybiBMKHQsZSl9O2Z1bmN0aW9uIG50KHQsZSl7dmFyIHI9W107Zm9yKHZhciBuIGluIHQucGF0aCl7aWYodC5wYXRoW25dIT09ZS5wYXRoW25dKWJyZWFrO3IucHVzaCh0LnBhdGhbbl0pfXJldHVybiByfWZ1bmN0aW9uIGl0KHQsZSl7dmFyIHI9e307Zm9yKHZhciBuIGluIHQpLTEhPT1lLmluZGV4T2YobikmJihyW25dPXRbbl0pO3JldHVybiByfWZ1bmN0aW9uIG90KHIsdCl7cmV0dXJuIE9iamVjdC5rZXlzKHIpLmZpbHRlcihsKEoodCkpKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdFtlXT1yW2VdLHR9LHt9KX1mdW5jdGlvbiBhdCh0LGUpe3JldHVybiBmdCh0LHcoZSkpfWZ1bmN0aW9uIHV0KHQscil7dmFyIGU9Tyh0KSxuPWU/W106e30saT1lP2Z1bmN0aW9uKHQpe3JldHVybiBuLnB1c2godCl9OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5bZV09dH07cmV0dXJuIE4odCxmdW5jdGlvbih0LGUpe3IodCxlKSYmaSh0LGUpfSksbn1mdW5jdGlvbiBzdCh0LHIpe3ZhciBuO3JldHVybiBOKHQsZnVuY3Rpb24odCxlKXtufHxyKHQsZSkmJihuPXQpfSksbn12YXIgY3Q9ZnQ7ZnVuY3Rpb24gZnQodCxyLG4pe3JldHVybiBuPW58fChPKHQpP1tdOnt9KSxOKHQsZnVuY3Rpb24odCxlKXtyZXR1cm4gbltlXT1yKHQsZSl9KSxufXZhciBsdD1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmtleXMoZSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfSl9LGh0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQmJmV9LHB0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR8fGV9LHZ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29uY2F0KGUpfSxkdD1mdW5jdGlvbih0LGUpe3JldHVybiBPKGUpP3QuY29uY2F0KGUucmVkdWNlKGR0LFtdKSk6bXQodCxlKX07ZnVuY3Rpb24gbXQodCxlKXtyZXR1cm4gdC5wdXNoKGUpLHR9dmFyIHl0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEoodCxlKT90Om10KHQsZSl9LGd0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlZHVjZSh2dCxbXSl9LHd0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlZHVjZShkdCxbXSl9LF90PSR0LFN0PSR0O2Z1bmN0aW9uICR0KHIsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiYXNzZXJ0IGZhaWx1cmVcIiksZnVuY3Rpb24odCl7dmFyIGU9cih0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoQyhuKT9uKHQpOm4pO3JldHVybiBlfX12YXIgYnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bdCxlW3RdXX0pfTtmdW5jdGlvbiBSdCgpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTtpZigwPT09dC5sZW5ndGgpcmV0dXJuW107Zm9yKHZhciByPXQucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGgubWluKGUubGVuZ3RoLHQpfSw5MDA3MTk5MjU0NzQwOTkxKSxuPVtdLGk9ZnVuY3Rpb24oZSl7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDE6bi5wdXNoKFt0WzBdW2VdXSk7YnJlYWs7Y2FzZSAyOm4ucHVzaChbdFswXVtlXSx0WzFdW2VdXSk7YnJlYWs7Y2FzZSAzOm4ucHVzaChbdFswXVtlXSx0WzFdW2VdLHRbMl1bZV1dKTticmVhaztjYXNlIDQ6bi5wdXNoKFt0WzBdW2VdLHRbMV1bZV0sdFsyXVtlXSx0WzNdW2VdXSk7YnJlYWs7ZGVmYXVsdDpuLnB1c2godC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHRbZV19KSl9fSxvPTA7bzxyO28rKylpKG8pO3JldHVybiBufWZ1bmN0aW9uIEV0KHQsZSl7dmFyIHIsbjtpZihPKGUpJiYocj1lWzBdLG49ZVsxXSksIVAocikpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwYXJhbWV0ZXJzIHRvIGFwcGx5UGFpcnNcIik7cmV0dXJuIHRbcl09bix0fWZ1bmN0aW9uIEN0KHQpe3JldHVybiB0Lmxlbmd0aCYmdFt0Lmxlbmd0aC0xXXx8dm9pZCAwfWZ1bmN0aW9uIFR0KHQsZSl7cmV0dXJuIGUmJk9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGRlbGV0ZSBlW3RdfSksZXx8KGU9e30pLEwoZSx0KX1mdW5jdGlvbiBQdCh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgcj1hcmd1bWVudHNbZV07aWYocilmb3IodmFyIG49T2JqZWN0LmtleXMociksaT0wO2k8bi5sZW5ndGg7aSsrKXRbbltpXV09cltuW2ldXX1yZXR1cm4gdH1mdW5jdGlvbiBrdCh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKG51bGw9PT10fHxudWxsPT09ZSlyZXR1cm4hMTtpZih0IT10JiZlIT1lKXJldHVybiEwO3ZhciByPXR5cGVvZiB0O2lmKHIhPT10eXBlb2YgZXx8XCJvYmplY3RcIiE9PXIpcmV0dXJuITE7dmFyIG4saSxvPVt0LGVdO2lmKGYoTykobykpcmV0dXJuIGk9ZSwobj10KS5sZW5ndGg9PT1pLmxlbmd0aCYmUnQobixpKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYma3QoZVswXSxlWzFdKX0sITApO2lmKGYoeCkobykpcmV0dXJuIHQuZ2V0VGltZSgpPT09ZS5nZXRUaW1lKCk7aWYoZihqKShvKSlyZXR1cm4gdC50b1N0cmluZygpPT09ZS50b1N0cmluZygpO2lmKGYoQykobykpcmV0dXJuITA7aWYoW0MsTyx4LGpdLm1hcChoKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdHx8ISFlKG8pfSwhMSkpcmV0dXJuITE7dmFyIGE9e307Zm9yKHZhciB1IGluIHQpe2lmKCFrdCh0W3VdLGVbdV0pKXJldHVybiExO2FbdV09ITB9Zm9yKHZhciB1IGluIGUpaWYoIWFbdV0pcmV0dXJuITE7cmV0dXJuITB9dmFyIE90LHh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiAwfSkmJnR9LGp0PWZ1bmN0aW9uKHQpe3JldHVybiB4dChBLiRxLnJlamVjdCh0KSl9LFZ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt0aGlzLnRleHQ9dCx0aGlzLmdsb2I9dC5zcGxpdChcIi5cIik7dmFyIGU9dGhpcy50ZXh0LnNwbGl0KFwiLlwiKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCIqKlwiPT09dD9cIig/OnwoPzpcXFxcLlteLl0qKSopXCI6XCIqXCI9PT10P1wiXFxcXC5bXi5dKlwiOlwiXFxcXC5cIit0fSkuam9pbihcIlwiKTt0aGlzLnJlZ2V4cD1uZXcgUmVnRXhwKFwiXlwiK2UrXCIkXCIpfXJldHVybiBlLmlzPWZ1bmN0aW9uKHQpe3JldHVybiEhL1shLCpdKy8uZXhlYyh0KX0sZS5mcm9tU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBlLmlzKHQpP25ldyBlKHQpOm51bGx9LGUucHJvdG90eXBlLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVnZXhwLnRlc3QoXCIuXCIrdCl9LGV9KCksSXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dm9pZCAwPT09dCYmKHQ9W10pLHZvaWQgMD09PWUmJihlPW51bGwpLHRoaXMuX2l0ZW1zPXQsdGhpcy5fbGltaXQ9ZSx0aGlzLl9ldmljdExpc3RlbmVycz1bXSx0aGlzLm9uRXZpY3Q9Wih0aGlzLl9ldmljdExpc3RlbmVycyl9cmV0dXJuIHQucHJvdG90eXBlLmVucXVldWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faXRlbXM7cmV0dXJuIGUucHVzaCh0KSx0aGlzLl9saW1pdCYmZS5sZW5ndGg+dGhpcy5fbGltaXQmJnRoaXMuZXZpY3QoKSx0fSx0LnByb3RvdHlwZS5ldmljdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2l0ZW1zLnNoaWZ0KCk7cmV0dXJuIHRoaXMuX2V2aWN0TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQoZSl9KSxlfSx0LnByb3RvdHlwZS5kZXF1ZXVlPWZ1bmN0aW9uKCl7aWYodGhpcy5zaXplKCkpcmV0dXJuIHRoaXMuX2l0ZW1zLnNwbGljZSgwLDEpWzBdfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2l0ZW1zO3JldHVybiB0aGlzLl9pdGVtcz1bXSx0fSx0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aH0sdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2l0ZW1zLmluZGV4T2YodCk7cmV0dXJuLTE8ZSYmdGhpcy5faXRlbXMuc3BsaWNlKGUsMSlbMF19LHQucHJvdG90eXBlLnBlZWtUYWlsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aC0xXX0sdC5wcm90b3R5cGUucGVla0hlYWQ9ZnVuY3Rpb24oKXtpZih0aGlzLnNpemUoKSlyZXR1cm4gdGhpcy5faXRlbXNbMF19LHR9KCk7KE90PWQuUmVqZWN0VHlwZXx8KGQuUmVqZWN0VHlwZT17fSkpW090LlNVUEVSU0VERUQ9Ml09XCJTVVBFUlNFREVEXCIsT3RbT3QuQUJPUlRFRD0zXT1cIkFCT1JURURcIixPdFtPdC5JTlZBTElEPTRdPVwiSU5WQUxJRFwiLE90W090LklHTk9SRUQ9NV09XCJJR05PUkVEXCIsT3RbT3QuRVJST1I9Nl09XCJFUlJPUlwiO3ZhciBIdD0wLEF0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0LGUscil7dGhpcy4kaWQ9SHQrKyx0aGlzLnR5cGU9dCx0aGlzLm1lc3NhZ2U9ZSx0aGlzLmRldGFpbD1yfXJldHVybiBuLmlzUmVqZWN0aW9uUHJvbWlzZT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC50aGVuJiZwKG4pKHQuX3RyYW5zaXRpb25SZWplY3Rpb24pfSxuLnN1cGVyc2VkZWQ9ZnVuY3Rpb24odCxlKXt2YXIgcj1uZXcgbihkLlJlamVjdFR5cGUuU1VQRVJTRURFRCxcIlRoZSB0cmFuc2l0aW9uIGhhcyBiZWVuIHN1cGVyc2VkZWQgYnkgYSBkaWZmZXJlbnQgdHJhbnNpdGlvblwiLHQpO3JldHVybiBlJiZlLnJlZGlyZWN0ZWQmJihyLnJlZGlyZWN0ZWQ9ITApLHJ9LG4ucmVkaXJlY3RlZD1mdW5jdGlvbih0KXtyZXR1cm4gbi5zdXBlcnNlZGVkKHQse3JlZGlyZWN0ZWQ6ITB9KX0sbi5pbnZhbGlkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbihkLlJlamVjdFR5cGUuSU5WQUxJRCxcIlRoaXMgdHJhbnNpdGlvbiBpcyBpbnZhbGlkXCIsdCl9LG4uaWdub3JlZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG4oZC5SZWplY3RUeXBlLklHTk9SRUQsXCJUaGUgdHJhbnNpdGlvbiB3YXMgaWdub3JlZFwiLHQpfSxuLmFib3J0ZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBuKGQuUmVqZWN0VHlwZS5BQk9SVEVELFwiVGhlIHRyYW5zaXRpb24gaGFzIGJlZW4gYWJvcnRlZFwiLHQpfSxuLmVycm9yZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBuKGQuUmVqZWN0VHlwZS5FUlJPUixcIlRoZSB0cmFuc2l0aW9uIGVycm9yZWRcIix0KX0sbi5ub3JtYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHAobikodCk/dDpuLmVycm9yZWQodCl9LG4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQsZT0odD10aGlzLmRldGFpbCkmJnQudG9TdHJpbmchPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nP3QudG9TdHJpbmcoKTpCdCh0KTtyZXR1cm5cIlRyYW5zaXRpb24gUmVqZWN0aW9uKCRpZDogXCIrdGhpcy4kaWQrXCIgdHlwZTogXCIrdGhpcy50eXBlK1wiLCBtZXNzYWdlOiBcIit0aGlzLm1lc3NhZ2UrXCIsIGRldGFpbDogXCIrZStcIilcIn0sbi5wcm90b3R5cGUudG9Qcm9taXNlPWZ1bmN0aW9uKCl7cmV0dXJuIEwoanQodGhpcykse190cmFuc2l0aW9uUmVqZWN0aW9uOnRoaXN9KX0sbn0oKTtmdW5jdGlvbiBEdCh0LGUpe3JldHVybiBlLmxlbmd0aDw9dD9lOmUuc3Vic3RyKDAsdC0zKStcIi4uLlwifWZ1bmN0aW9uIHF0KHQsZSl7Zm9yKDtlLmxlbmd0aDx0OyllKz1cIiBcIjtyZXR1cm4gZX1mdW5jdGlvbiBVdCh0KXtyZXR1cm4gdC5yZXBsYWNlKC9eKFtBLVpdKS8sZnVuY3Rpb24odCl7cmV0dXJuIHQudG9Mb3dlckNhc2UoKX0pLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbih0KXtyZXR1cm5cIi1cIit0LnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBGdCh0KXt2YXIgZT1OdCh0KSxyPWUubWF0Y2goL14oZnVuY3Rpb24gW14gXStcXChbXildKlxcKSkvKSxuPXI/clsxXTplLGk9dC5uYW1lfHxcIlwiO3JldHVybiBpJiZuLm1hdGNoKC9mdW5jdGlvbiBcXCgvKT9cImZ1bmN0aW9uIFwiK2krbi5zdWJzdHIoOSk6bn1mdW5jdGlvbiBOdCh0KXt2YXIgZT1PKHQpP3Quc2xpY2UoLTEpWzBdOnQ7cmV0dXJuIGUmJmUudG9TdHJpbmcoKXx8XCJ1bmRlZmluZWRcIn12YXIgTHQ9QXQuaXNSZWplY3Rpb25Qcm9taXNlLE10PW0oW1tfLHYoXCJ1bmRlZmluZWRcIildLFtTLHYoXCJudWxsXCIpXSxbSSx2KFwiW1Byb21pc2VdXCIpXSxbTHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuX3RyYW5zaXRpb25SZWplY3Rpb24udG9TdHJpbmcoKX1dLFtmdW5jdGlvbih0KXtyZXR1cm4gayh0KSYmIU8odCkmJnQuY29uc3RydWN0b3IhPT1PYmplY3QmJkModC50b1N0cmluZyl9LGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvU3RyaW5nKCl9XSxbVixGdF0sW3YoITApLEJdXSk7ZnVuY3Rpb24gQnQodCl7dmFyIGU9W107ZnVuY3Rpb24gcih0KXtpZihrKHQpKXtpZigtMSE9PWUuaW5kZXhPZih0KSlyZXR1cm5cIltjaXJjdWxhciByZWZdXCI7ZS5wdXNoKHQpfXJldHVybiBNdCh0KX1yZXR1cm4gXyh0KT9yKHQpOkpTT04uc3RyaW5naWZ5KHQsZnVuY3Rpb24odCxlKXtyZXR1cm4gcihlKX0pLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpfXZhciBHdD1mdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuW1wiXCIsXCJcIl07dmFyIGU9dC5pbmRleE9mKHIpO3JldHVybi0xPT09ZT9bdCxcIlwiXTpbdC5zdWJzdHIoMCxlKSx0LnN1YnN0cihlKzEpXX19LFd0PW5ldyBSZWdFeHAoXCJeKD86W2Etel0rOik/Ly9bXi9dKy9cIiksenQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXFwvW14vXSokLyxcIlwiKX0sSnQ9R3QoXCIjXCIpLFF0PUd0KFwiP1wiKSxLdD1HdChcIj1cIiksWXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC5yZXBsYWNlKC9eIy8sXCJcIik6XCJcIn07ZnVuY3Rpb24gWnQodCl7dmFyIGU9bmV3IFJlZ0V4cChcIihcIit0K1wiKVwiLFwiZ1wiKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoZSkuZmlsdGVyKEIpfX1mdW5jdGlvbiBYdCh0LGUpe3JldHVybiBQKEN0KHQpKSYmUChlKT90LnNsaWNlKDAsLTEpLmNvbmNhdChDdCh0KStlKTptdCh0LGUpfWZ1bmN0aW9uIHRlKHQpe2lmKCF0KXJldHVyblwidWktdmlldyAoZGVmdW5jdClcIjt2YXIgZT10LmNyZWF0aW9uQ29udGV4dD90LmNyZWF0aW9uQ29udGV4dC5uYW1lfHxcIihyb290KVwiOlwiKG5vbmUpXCI7cmV0dXJuXCJbdWktdmlldyNcIit0LmlkK1wiIFwiK3QuJHR5cGUrXCI6XCIrdC5mcW4rXCIgKFwiK3QubmFtZStcIkBcIitlK1wiKV1cIn1mdW5jdGlvbiBlZSh0KXtyZXR1cm4gVCh0KT9kLkNhdGVnb3J5W3RdOmQuQ2F0ZWdvcnlbZC5DYXRlZ29yeVt0XV19dmFyIHJlLG5lPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5sb2csY29uc29sZSksaWU9Qyhjb25zb2xlLnRhYmxlKT9jb25zb2xlLnRhYmxlLmJpbmQoY29uc29sZSk6bmUuYmluZChjb25zb2xlKTsocmU9ZC5DYXRlZ29yeXx8KGQuQ2F0ZWdvcnk9e30pKVtyZS5SRVNPTFZFPTBdPVwiUkVTT0xWRVwiLHJlW3JlLlRSQU5TSVRJT049MV09XCJUUkFOU0lUSU9OXCIscmVbcmUuSE9PSz0yXT1cIkhPT0tcIixyZVtyZS5VSVZJRVc9M109XCJVSVZJRVdcIixyZVtyZS5WSUVXQ09ORklHPTRdPVwiVklFV0NPTkZJR1wiO3ZhciBvZT1SKFwiJGlkXCIpLGFlPVIoXCJyb3V0ZXIuJGlkXCIpLHVlPWZ1bmN0aW9uKHQpe3JldHVyblwiVHJhbnNpdGlvbiAjXCIrb2UodCkrXCItXCIrYWUodCl9LHNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuX2VuYWJsZWQ9e30sdGhpcy5hcHByb3hpbWF0ZURpZ2VzdHM9MH1yZXR1cm4gdC5wcm90b3R5cGUuX3NldD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dC5sZW5ndGh8fCh0PU9iamVjdC5rZXlzKGQuQ2F0ZWdvcnkpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCwxMCl9KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIWlzTmFOKHQpfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBkLkNhdGVnb3J5W3RdfSkpLHQubWFwKGVlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiByLl9lbmFibGVkW3RdPWV9KX0sdC5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3RoaXMuX3NldCghMCx0KX0sdC5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLl9zZXQoITEsdCl9LHQucHJvdG90eXBlLmVuYWJsZWQ9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLl9lbmFibGVkW2VlKHQpXX0sdC5wcm90b3R5cGUudHJhY2VUcmFuc2l0aW9uU3RhcnQ9ZnVuY3Rpb24odCl7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuVFJBTlNJVElPTikmJmNvbnNvbGUubG9nKHVlKHQpK1wiOiBTdGFydGVkICAtPiBcIitCdCh0KSl9LHQucHJvdG90eXBlLnRyYWNlVHJhbnNpdGlvbklnbm9yZWQ9ZnVuY3Rpb24odCl7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuVFJBTlNJVElPTikmJmNvbnNvbGUubG9nKHVlKHQpK1wiOiBJZ25vcmVkICA8PiBcIitCdCh0KSl9LHQucHJvdG90eXBlLnRyYWNlSG9va0ludm9jYXRpb249ZnVuY3Rpb24odCxlLHIpe2lmKHRoaXMuZW5hYmxlZChkLkNhdGVnb3J5LkhPT0spKXt2YXIgbj1SKFwidHJhY2VEYXRhLmhvb2tUeXBlXCIpKHIpfHxcImludGVybmFsXCIsaT1SKFwidHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZVwiKShyKXx8UihcInRyYWNlRGF0YS5jb250ZXh0XCIpKHIpfHxcInVua25vd25cIixvPUZ0KHQucmVnaXN0ZXJlZEhvb2suY2FsbGJhY2spO2NvbnNvbGUubG9nKHVlKGUpK1wiOiAgIEhvb2sgLT4gXCIrbitcIiBjb250ZXh0OiBcIitpK1wiLCBcIitEdCgyMDAsbykpfX0sdC5wcm90b3R5cGUudHJhY2VIb29rUmVzdWx0PWZ1bmN0aW9uKHQsZSxyKXt0aGlzLmVuYWJsZWQoZC5DYXRlZ29yeS5IT09LKSYmY29uc29sZS5sb2codWUoZSkrXCI6ICAgPC0gSG9vayByZXR1cm5lZDogXCIrRHQoMjAwLEJ0KHQpKSl9LHQucHJvdG90eXBlLnRyYWNlUmVzb2x2ZVBhdGg9ZnVuY3Rpb24odCxlLHIpe3RoaXMuZW5hYmxlZChkLkNhdGVnb3J5LlJFU09MVkUpJiZjb25zb2xlLmxvZyh1ZShyKStcIjogICAgICAgICBSZXNvbHZpbmcgXCIrdCtcIiAoXCIrZStcIilcIil9LHQucHJvdG90eXBlLnRyYWNlUmVzb2x2YWJsZVJlc29sdmVkPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuUkVTT0xWRSkmJmNvbnNvbGUubG9nKHVlKGUpK1wiOiAgICAgICAgICAgICAgIDwtIFJlc29sdmVkICBcIit0K1wiIHRvOiBcIitEdCgyMDAsQnQodC5kYXRhKSkpfSx0LnByb3RvdHlwZS50cmFjZUVycm9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuVFJBTlNJVElPTikmJmNvbnNvbGUubG9nKHVlKGUpK1wiOiA8LSBSZWplY3RlZCBcIitCdChlKStcIiwgcmVhc29uOiBcIit0KX0sdC5wcm90b3R5cGUudHJhY2VTdWNjZXNzPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuVFJBTlNJVElPTikmJmNvbnNvbGUubG9nKHVlKGUpK1wiOiA8LSBTdWNjZXNzICBcIitCdChlKStcIiwgZmluYWwgc3RhdGU6IFwiK3QubmFtZSl9LHQucHJvdG90eXBlLnRyYWNlVUlWaWV3RXZlbnQ9ZnVuY3Rpb24odCxlLHIpe3ZvaWQgMD09PXImJihyPVwiXCIpLHRoaXMuZW5hYmxlZChkLkNhdGVnb3J5LlVJVklFVykmJmNvbnNvbGUubG9nKFwidWktdmlldzogXCIrcXQoMzAsdCkrXCIgXCIrdGUoZSkrcil9LHQucHJvdG90eXBlLnRyYWNlVUlWaWV3Q29uZmlnVXBkYXRlZD1mdW5jdGlvbih0LGUpe3RoaXMuZW5hYmxlZChkLkNhdGVnb3J5LlVJVklFVykmJnRoaXMudHJhY2VVSVZpZXdFdmVudChcIlVwZGF0aW5nXCIsdCxcIiB3aXRoIFZpZXdDb25maWcgZnJvbSBjb250ZXh0PSdcIitlK1wiJ1wiKX0sdC5wcm90b3R5cGUudHJhY2VVSVZpZXdGaWxsPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuVUlWSUVXKSYmdGhpcy50cmFjZVVJVmlld0V2ZW50KFwiRmlsbFwiLHQsXCIgd2l0aDogXCIrRHQoMjAwLGUpKX0sdC5wcm90b3R5cGUudHJhY2VWaWV3U3luYz1mdW5jdGlvbih0KXtpZih0aGlzLmVuYWJsZWQoZC5DYXRlZ29yeS5WSUVXQ09ORklHKSl7dmFyIGE9XCJ1aXZpZXcgY29tcG9uZW50IGZxblwiLGU9dC5tYXAoZnVuY3Rpb24odCl7dmFyIGUscj10LnVpVmlldyxuPXQudmlld0NvbmZpZyxpPXImJnIuZnFuLG89biYmbi52aWV3RGVjbC4kY29udGV4dC5uYW1lK1wiOiAoXCIrbi52aWV3RGVjbC4kbmFtZStcIilcIjtyZXR1cm4oZT17fSlbYV09aSxlW1widmlldyBjb25maWcgc3RhdGUgKHZpZXcgbmFtZSlcIl09byxlfSkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybih0W2FdfHxcIlwiKS5sb2NhbGVDb21wYXJlKGVbYV18fFwiXCIpfSk7aWUoZSl9fSx0LnByb3RvdHlwZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGk7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuVklFV0NPTkZJRykmJmNvbnNvbGUubG9nKFwiVklFV0NPTkZJRzogXCIrdCtcIiBcIisobj0ocj1lKS52aWV3RGVjbCxpPW4uJGNvbnRleHQubmFtZXx8XCIocm9vdClcIixcIltWaWV3I1wiK3IuJGlkK1wiIGZyb20gJ1wiK2krXCInIHN0YXRlXTogdGFyZ2V0IHVpLXZpZXc6ICdcIituLiR1aVZpZXdOYW1lK1wiQFwiK24uJHVpVmlld0NvbnRleHRBbmNob3IrXCInXCIpKX0sdC5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50PWZ1bmN0aW9uKHQsZSl7dGhpcy5lbmFibGVkKGQuQ2F0ZWdvcnkuVklFV0NPTkZJRykmJmNvbnNvbGUubG9nKFwiVklFV0NPTkZJRzogXCIrdCtcIiBcIit0ZShlKSl9LHR9KCksY2U9bmV3IHNlLGZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnBhdHRlcm49Ly4qLyx0aGlzLmluaGVyaXQ9ITAsTCh0aGlzLHQpfXJldHVybiB0LnByb3RvdHlwZS5pcz1mdW5jdGlvbih0LGUpe3JldHVybiEwfSx0LnByb3RvdHlwZS5lbmNvZGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdH0sdC5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR9LHQucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0LGUpe3JldHVybiB0PT1lfSx0LnByb3RvdHlwZS4kc3ViUGF0dGVybj1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGF0dGVybi50b1N0cmluZygpO3JldHVybiB0LnN1YnN0cigxLHQubGVuZ3RoLTIpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwie1BhcmFtVHlwZTpcIit0aGlzLm5hbWUrXCJ9XCJ9LHQucHJvdG90eXBlLiRub3JtYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaXModCk/dDp0aGlzLmRlY29kZSh0KX0sdC5wcm90b3R5cGUuJGFzQXJyYXk9ZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4gdGhpcztpZihcImF1dG9cIj09PXQmJiFlKXRocm93IG5ldyBFcnJvcihcIidhdXRvJyBhcnJheSBtb2RlIGlzIGZvciBxdWVyeSBwYXJhbWV0ZXJzIG9ubHlcIik7cmV0dXJuIG5ldyBsZSh0aGlzLHQpfSx0fSgpO2Z1bmN0aW9uIGxlKG4saSl7dmFyIG89dGhpcztmdW5jdGlvbiBhKHQpe3JldHVybiBPKHQpP3Q6RSh0KT9bdF06W119ZnVuY3Rpb24gdShyLG4pe3JldHVybiBmdW5jdGlvbih0KXtpZihPKHQpJiYwPT09dC5sZW5ndGgpcmV0dXJuIHQ7dmFyIGU9ZnQoYSh0KSxyKTtyZXR1cm4hMD09PW4/MD09PXV0KGUsZnVuY3Rpb24odCl7cmV0dXJuIXR9KS5sZW5ndGg6ZnVuY3Rpb24odCl7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuO2Nhc2UgMTpyZXR1cm5cImF1dG9cIj09PWk/dFswXTp0O2RlZmF1bHQ6cmV0dXJuIHR9fShlKX19ZnVuY3Rpb24gcyhvKXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgcj1hKHQpLG49YShlKTtpZihyLmxlbmd0aCE9PW4ubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKWlmKCFvKHJbaV0sbltpXSkpcmV0dXJuITE7cmV0dXJuITB9fVtcImVuY29kZVwiLFwiZGVjb2RlXCIsXCJlcXVhbHNcIixcIiRub3JtYWxpemVcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1uW3RdLmJpbmQobikscj1cImVxdWFsc1wiPT09dD9zOnU7b1t0XT1yKGUpfSksTCh0aGlzLHtkeW5hbWljOm4uZHluYW1pYyxuYW1lOm4ubmFtZSxwYXR0ZXJuOm4ucGF0dGVybixpbmhlcml0Om4uaW5oZXJpdCxyYXc6bi5yYXcsaXM6dShuLmlzLmJpbmQobiksITApLCRhcnJheU1vZGU6aX0pfXZhciBoZSxwZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHZlPWZ1bmN0aW9uKHQpe3JldHVybiAwPT09W1widmFsdWVcIixcInR5cGVcIixcInNxdWFzaFwiLFwiYXJyYXlcIixcImR5bmFtaWNcIl0uZmlsdGVyKHBlLmJpbmQodHx8e30pKS5sZW5ndGh9O2Z1bmN0aW9uIGRlKHQsZSxyKXt2YXIgbj0hMT09PXIucmVsb2FkT25TZWFyY2gmJmU9PT1kLkRlZlR5cGUuU0VBUkNIfHx2b2lkIDAsaT1zdChbci5keW5hbWljLG5dLEUpLG89RShpKT97ZHluYW1pYzppfTp7fSxhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gdC52YWx1ZX10PXZlKHQpP3t2YWx1ZTp0fTp0LGUuX19jYWNoZWFibGU9ITA7dmFyIHI9Vih0LnZhbHVlKT90LnZhbHVlOmU7cmV0dXJuIEwodCx7JCRmbjpyfSl9KHImJnIucGFyYW1zJiZyLnBhcmFtc1t0XSk7cmV0dXJuIEwobyxhKX0oaGU9ZC5EZWZUeXBlfHwoZC5EZWZUeXBlPXt9KSlbaGUuUEFUSD0wXT1cIlBBVEhcIixoZVtoZS5TRUFSQ0g9MV09XCJTRUFSQ0hcIixoZVtoZS5DT05GSUc9Ml09XCJDT05GSUdcIjt2YXIgbWUseWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsZSxyLG4saSl7dmFyIG89ZGUodCxyLGkpO2U9ZnVuY3Rpb24odCxlLHIsbixpKXtpZih0LnR5cGUmJmUmJlwic3RyaW5nXCIhPT1lLm5hbWUpdGhyb3cgbmV3IEVycm9yKFwiUGFyYW0gJ1wiK24rXCInIGhhcyB0d28gdHlwZSBjb25maWd1cmF0aW9ucy5cIik7aWYodC50eXBlJiZlJiZcInN0cmluZ1wiPT09ZS5uYW1lJiZpLnR5cGUodC50eXBlKSlyZXR1cm4gaS50eXBlKHQudHlwZSk7aWYoZSlyZXR1cm4gZTtpZih0LnR5cGUpcmV0dXJuIHQudHlwZSBpbnN0YW5jZW9mIGZlP3QudHlwZTppLnR5cGUodC50eXBlKTt2YXIgbz1yPT09ZC5EZWZUeXBlLkNPTkZJRz9cImFueVwiOnI9PT1kLkRlZlR5cGUuUEFUSD9cInBhdGhcIjpyPT09ZC5EZWZUeXBlLlNFQVJDSD9cInF1ZXJ5XCI6XCJzdHJpbmdcIjtyZXR1cm4gaS50eXBlKG8pfShvLGUscix0LG4ucGFyYW1UeXBlcyk7dmFyIGEsdSxzPShhPXthcnJheTpyPT09ZC5EZWZUeXBlLlNFQVJDSCYmXCJhdXRvXCJ9LHU9dC5tYXRjaCgvXFxbXFxdJC8pP3thcnJheTohMH06e30sTChhLHUsbykuYXJyYXkpO2U9cz9lLiRhc0FycmF5KHMscj09PWQuRGVmVHlwZS5TRUFSQ0gpOmU7dmFyIGM9dm9pZCAwIT09by52YWx1ZXx8cj09PWQuRGVmVHlwZS5TRUFSQ0gsZj1FKG8uZHluYW1pYyk/ISFvLmR5bmFtaWM6ISFlLmR5bmFtaWMsbD1FKG8ucmF3KT8hIW8ucmF3OiEhZS5yYXcsaD1mdW5jdGlvbih0LGUscil7dmFyIG49dC5zcXVhc2g7aWYoIWV8fCExPT09bilyZXR1cm4hMTtpZighRShuKXx8bnVsbD09bilyZXR1cm4gcjtpZighMD09PW58fFAobikpcmV0dXJuIG47dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzcXVhc2ggcG9saWN5OiAnXCIrbitcIicuIFZhbGlkIHBvbGljaWVzOiBmYWxzZSwgdHJ1ZSwgb3IgYXJiaXRyYXJ5IHN0cmluZ1wiKX0obyxjLG4uZGVmYXVsdFNxdWFzaFBvbGljeSgpKSxwPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPVt7ZnJvbTpcIlwiLHRvOnJ8fGU/dm9pZCAwOlwiXCJ9LHtmcm9tOm51bGwsdG86cnx8ZT92b2lkIDA6XCJcIn1dLG89Tyh0LnJlcGxhY2UpP3QucmVwbGFjZTpbXTtQKG4pJiZvLnB1c2goe2Zyb206bix0bzp2b2lkIDB9KTt2YXIgYT1mdChvLHcoXCJmcm9tXCIpKTtyZXR1cm4gdXQoaSxmdW5jdGlvbih0KXtyZXR1cm4tMT09PWEuaW5kZXhPZih0LmZyb20pfSkuY29uY2F0KG8pfShvLHMsYyxoKSx2PUUoby5pbmhlcml0KT8hIW8uaW5oZXJpdDohIWUuaW5oZXJpdDtMKHRoaXMse2lkOnQsdHlwZTplLGxvY2F0aW9uOnIsaXNPcHRpb25hbDpjLGR5bmFtaWM6ZixyYXc6bCxzcXVhc2g6aCxyZXBsYWNlOnAsaW5oZXJpdDp2LGFycmF5OnMsY29uZmlnOm99KX1yZXR1cm4gbi52YWx1ZXM9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciByPXt9LG49MCxpPXQ7bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl07cltvLmlkXT1vLnZhbHVlKGVbby5pZF0pfXJldHVybiByfSxuLmNoYW5nZWQ9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB2b2lkIDA9PT1lJiYoZT17fSksdm9pZCAwPT09ciYmKHI9e30pLHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LnR5cGUuZXF1YWxzKGVbdC5pZF0sclt0LmlkXSl9KX0sbi5lcXVhbHM9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB2b2lkIDA9PT1lJiYoZT17fSksdm9pZCAwPT09ciYmKHI9e30pLDA9PT1uLmNoYW5nZWQodCxlLHIpLmxlbmd0aH0sbi52YWxpZGF0ZXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9e30pLHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnZhbGlkYXRlcyhlW3QuaWRdKX0pLnJlZHVjZShodCwhMCl9LG4ucHJvdG90eXBlLmlzRGVmYXVsdFZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzT3B0aW9uYWwmJnRoaXMudHlwZS5lcXVhbHModGhpcy52YWx1ZSgpLHQpfSxuLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbih0KXt2YXIgaT10aGlzO3JldHVybiB0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9aS5yZXBsYWNlO2U8ci5sZW5ndGg7ZSsrKXt2YXIgbj1yW2VdO2lmKG4uZnJvbT09PXQpcmV0dXJuIG4udG99cmV0dXJuIHR9KHQpLF8odCk/ZnVuY3Rpb24oKXtpZihpLl9kZWZhdWx0VmFsdWVDYWNoZSlyZXR1cm4gaS5fZGVmYXVsdFZhbHVlQ2FjaGUuZGVmYXVsdFZhbHVlO2lmKCFBLiRpbmplY3Rvcil0aHJvdyBuZXcgRXJyb3IoXCJJbmplY3RhYmxlIGZ1bmN0aW9ucyBjYW5ub3QgYmUgY2FsbGVkIGF0IGNvbmZpZ3VyYXRpb24gdGltZVwiKTt2YXIgdD1BLiRpbmplY3Rvci5pbnZva2UoaS5jb25maWcuJCRmbik7aWYobnVsbCE9dCYmIWkudHlwZS5pcyh0KSl0aHJvdyBuZXcgRXJyb3IoXCJEZWZhdWx0IHZhbHVlIChcIit0K1wiKSBmb3IgcGFyYW1ldGVyICdcIitpLmlkK1wiJyBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgUGFyYW1UeXBlIChcIitpLnR5cGUubmFtZStcIilcIik7cmV0dXJuIGkuY29uZmlnLiQkZm4uX19jYWNoZWFibGUmJihpLl9kZWZhdWx0VmFsdWVDYWNoZT17ZGVmYXVsdFZhbHVlOnR9KSx0fSgpOnRoaXMudHlwZS4kbm9ybWFsaXplKHQpfSxuLnByb3RvdHlwZS5pc1NlYXJjaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2F0aW9uPT09ZC5EZWZUeXBlLlNFQVJDSH0sbi5wcm90b3R5cGUudmFsaWRhdGVzPWZ1bmN0aW9uKHQpe2lmKChfKHQpfHxudWxsPT09dCkmJnRoaXMuaXNPcHRpb25hbClyZXR1cm4hMDt2YXIgZT10aGlzLnR5cGUuJG5vcm1hbGl6ZSh0KTtpZighdGhpcy50eXBlLmlzKGUpKXJldHVybiExO3ZhciByPXRoaXMudHlwZS5lbmNvZGUoZSk7cmV0dXJuIShQKHIpJiYhdGhpcy50eXBlLnBhdHRlcm4uZXhlYyhyKSl9LG4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJ7UGFyYW06XCIrdGhpcy5pZCtcIiBcIit0aGlzLnR5cGUrXCIgc3F1YXNoOiAnXCIrdGhpcy5zcXVhc2grXCInIG9wdGlvbmFsOiBcIit0aGlzLmlzT3B0aW9uYWwrXCJ9XCJ9LG59KCksZ2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5lbnF1ZXVlPSEwLHRoaXMudHlwZVF1ZXVlPVtdLHRoaXMuZGVmYXVsdFR5cGVzPWl0KHQucHJvdG90eXBlLFtcImhhc2hcIixcInN0cmluZ1wiLFwicXVlcnlcIixcInBhdGhcIixcImludFwiLFwiYm9vbFwiLFwiZGF0ZVwiLFwianNvblwiLFwiYW55XCJdKTt0aGlzLnR5cGVzPXooZnQodGhpcy5kZWZhdWx0VHlwZXMsZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGZlKEwoe25hbWU6ZX0sdCkpfSkse30pfXJldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy50eXBlcz17fX0sdC5wcm90b3R5cGUudHlwZT1mdW5jdGlvbih0LGUscil7aWYoIUUoZSkpcmV0dXJuIHRoaXMudHlwZXNbdF07aWYodGhpcy50eXBlcy5oYXNPd25Qcm9wZXJ0eSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJBIHR5cGUgbmFtZWQgJ1wiK3QrXCInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC5cIik7cmV0dXJuIHRoaXMudHlwZXNbdF09bmV3IGZlKEwoe25hbWU6dH0sZSkpLHImJih0aGlzLnR5cGVRdWV1ZS5wdXNoKHtuYW1lOnQsZGVmOnJ9KSx0aGlzLmVucXVldWV8fHRoaXMuX2ZsdXNoVHlwZVF1ZXVlKCkpLHRoaXN9LHQucHJvdG90eXBlLl9mbHVzaFR5cGVRdWV1ZT1mdW5jdGlvbigpe2Zvcig7dGhpcy50eXBlUXVldWUubGVuZ3RoOyl7dmFyIHQ9dGhpcy50eXBlUXVldWUuc2hpZnQoKTtpZih0LnBhdHRlcm4pdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbm5vdCBvdmVycmlkZSBhIHR5cGUncyAucGF0dGVybiBhdCBydW50aW1lLlwiKTtMKHRoaXMudHlwZXNbdC5uYW1lXSxBLiRpbmplY3Rvci5pbnZva2UodC5kZWYpKX19LHR9KCk7bWU9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQ/dC50b1N0cmluZygpOnR9LHI9e2VuY29kZTplLGRlY29kZTplLGlzOnAoU3RyaW5nKSxwYXR0ZXJuOi8uKi8sZXF1YWxzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWV9fTtyZXR1cm4gTCh7fSxyLHQpfSxMKGdlLnByb3RvdHlwZSx7c3RyaW5nOm1lKHt9KSxwYXRoOm1lKHtwYXR0ZXJuOi9bXi9dKi99KSxxdWVyeTptZSh7fSksaGFzaDptZSh7aW5oZXJpdDohMX0pLGludDptZSh7ZGVjb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX0saXM6ZnVuY3Rpb24odCl7cmV0dXJuISQodCkmJnRoaXMuZGVjb2RlKHQudG9TdHJpbmcoKSk9PT10fSxwYXR0ZXJuOi8tP1xcZCsvfSksYm9vbDptZSh7ZW5jb2RlOmZ1bmN0aW9uKHQpe3JldHVybiB0PzE6MH0sZGVjb2RlOmZ1bmN0aW9uKHQpe3JldHVybiAwIT09cGFyc2VJbnQodCwxMCl9LGlzOnAoQm9vbGVhbikscGF0dGVybjovMHwxL30pLGRhdGU6bWUoe2VuY29kZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pcyh0KT9bdC5nZXRGdWxsWWVhcigpLChcIjBcIisodC5nZXRNb250aCgpKzEpKS5zbGljZSgtMiksKFwiMFwiK3QuZ2V0RGF0ZSgpKS5zbGljZSgtMildLmpvaW4oXCItXCIpOnZvaWQgMH0sZGVjb2RlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuaXModCkpcmV0dXJuIHQ7dmFyIGU9dGhpcy5jYXB0dXJlLmV4ZWModCk7cmV0dXJuIGU/bmV3IERhdGUoZVsxXSxlWzJdLTEsZVszXSk6dm9pZCAwfSxpczpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIERhdGUmJiFpc05hTih0LnZhbHVlT2YoKSl9LGVxdWFsczpmdW5jdGlvbihyLG4pe3JldHVybltcImdldEZ1bGxZZWFyXCIsXCJnZXRNb250aFwiLFwiZ2V0RGF0ZVwiXS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmcltlXSgpPT09bltlXSgpfSwhMCl9LHBhdHRlcm46L1swLTldezR9LSg/OjBbMS05XXwxWzAtMl0pLSg/OjBbMS05XXxbMS0yXVswLTldfDNbMC0xXSkvLGNhcHR1cmU6LyhbMC05XXs0fSktKDBbMS05XXwxWzAtMl0pLSgwWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pL30pLGpzb246bWUoe2VuY29kZTpGLGRlY29kZTpVLGlzOnAoT2JqZWN0KSxlcXVhbHM6TSxwYXR0ZXJuOi9bXi9dKi99KSxhbnk6bWUoe2VuY29kZTpCLGRlY29kZTpCLGlzOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGVxdWFsczpNfSl9KTt2YXIgd2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PXt9KSxMKHRoaXMsdCl9cmV0dXJuIHQucHJvdG90eXBlLiRpbmhlcml0PWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixpPW50KGUsciksbz17fSxhPVtdO2Zvcih2YXIgdSBpbiBpKWlmKGlbdV0mJmlbdV0ucGFyYW1zJiYobj1PYmplY3Qua2V5cyhpW3VdLnBhcmFtcykpLmxlbmd0aClmb3IodmFyIHMgaW4gbikwPD1hLmluZGV4T2YobltzXSl8fChhLnB1c2gobltzXSksb1tuW3NdXT10aGlzW25bc11dKTtyZXR1cm4gTCh7fSxvLHQpfSx0fSgpLF9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0KXtpZih0IGluc3RhbmNlb2Ygbil7dmFyIGU9dDt0aGlzLnN0YXRlPWUuc3RhdGUsdGhpcy5wYXJhbVNjaGVtYT1lLnBhcmFtU2NoZW1hLnNsaWNlKCksdGhpcy5wYXJhbVZhbHVlcz1MKHt9LGUucGFyYW1WYWx1ZXMpLHRoaXMucmVzb2x2YWJsZXM9ZS5yZXNvbHZhYmxlcy5zbGljZSgpLHRoaXMudmlld3M9ZS52aWV3cyYmZS52aWV3cy5zbGljZSgpfWVsc2V7dmFyIHI9dDt0aGlzLnN0YXRlPXIsdGhpcy5wYXJhbVNjaGVtYT1yLnBhcmFtZXRlcnMoe2luaGVyaXQ6ITF9KSx0aGlzLnBhcmFtVmFsdWVzPXt9LHRoaXMucmVzb2x2YWJsZXM9ci5yZXNvbHZhYmxlcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xvbmUoKX0pfX1yZXR1cm4gbi5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyl9LG4ucHJvdG90eXBlLmFwcGx5UmF3UGFyYW1zPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnBhcmFtVmFsdWVzPXRoaXMucGFyYW1TY2hlbWEucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIEV0KHQsWyhyPWUpLmlkLHIudmFsdWUobltyLmlkXSldKTt2YXIgcn0se30pLHRoaXN9LG4ucHJvdG90eXBlLnBhcmFtZXRlcj1mdW5jdGlvbih0KXtyZXR1cm4gc3QodGhpcy5wYXJhbVNjaGVtYSx5KFwiaWRcIix0KSl9LG4ucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMuZGlmZih0LGUpO3JldHVybiByJiYwPT09ci5sZW5ndGh9LG4ucHJvdG90eXBlLmRpZmY9ZnVuY3Rpb24odCxlKXtpZih0aGlzLnN0YXRlIT09dC5zdGF0ZSlyZXR1cm4hMTt2YXIgcj1lP2UodGhpcyk6dGhpcy5wYXJhbVNjaGVtYTtyZXR1cm4geWUuY2hhbmdlZChyLHRoaXMucGFyYW1WYWx1ZXMsdC5wYXJhbVZhbHVlcyl9LG4uY2xvbmU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xvbmUoKX0sbn0oKSxTZT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxlLHIsbil7dGhpcy5fc3RhdGVSZWdpc3RyeT10LHRoaXMuX2lkZW50aWZpZXI9ZSx0aGlzLl9pZGVudGlmaWVyPWUsdGhpcy5fcGFyYW1zPUwoe30scnx8e30pLHRoaXMuX29wdGlvbnM9TCh7fSxufHx7fSksdGhpcy5fZGVmaW5pdGlvbj10Lm1hdGNoZXIuZmluZChlLHRoaXMuX29wdGlvbnMucmVsYXRpdmUpfXJldHVybiBuLnByb3RvdHlwZS5uYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlZmluaXRpb24mJnRoaXMuX2RlZmluaXRpb24ubmFtZXx8dGhpcy5faWRlbnRpZmllcn0sbi5wcm90b3R5cGUuaWRlbnRpZmllcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZGVudGlmaWVyfSxuLnByb3RvdHlwZS5wYXJhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyYW1zfSxuLnByb3RvdHlwZS4kc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmaW5pdGlvbn0sbi5wcm90b3R5cGUuc3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmaW5pdGlvbiYmdGhpcy5fZGVmaW5pdGlvbi5zZWxmfSxuLnByb3RvdHlwZS5vcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnN9LG4ucHJvdG90eXBlLmV4aXN0cz1mdW5jdGlvbigpe3JldHVybiEoIXRoaXMuX2RlZmluaXRpb258fCF0aGlzLl9kZWZpbml0aW9uLnNlbGYpfSxuLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmVycm9yKCl9LG4ucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zKCkucmVsYXRpdmU7aWYodGhpcy5fZGVmaW5pdGlvbnx8IXQpcmV0dXJuIHRoaXMuX2RlZmluaXRpb24/dGhpcy5fZGVmaW5pdGlvbi5zZWxmP3ZvaWQgMDpcIlN0YXRlICdcIit0aGlzLm5hbWUoKStcIicgaGFzIGFuIGludmFsaWQgZGVmaW5pdGlvblwiOlwiTm8gc3VjaCBzdGF0ZSAnXCIrdGhpcy5uYW1lKCkrXCInXCI7dmFyIGU9dC5uYW1lP3QubmFtZTp0O3JldHVyblwiQ291bGQgbm90IHJlc29sdmUgJ1wiK3RoaXMubmFtZSgpK1wiJyBmcm9tIHN0YXRlICdcIitlK1wiJ1wifSxuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiJ1wiK3RoaXMubmFtZSgpK1wiJ1wiK0J0KHRoaXMucGFyYW1zKCkpfSxuLnByb3RvdHlwZS53aXRoU3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBuKHRoaXMuX3N0YXRlUmVnaXN0cnksdCx0aGlzLl9wYXJhbXMsdGhpcy5fb3B0aW9ucyl9LG4ucHJvdG90eXBlLndpdGhQYXJhbXM9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMSk7dmFyIHI9ZT90Okwoe30sdGhpcy5fcGFyYW1zLHQpO3JldHVybiBuZXcgbih0aGlzLl9zdGF0ZVJlZ2lzdHJ5LHRoaXMuX2lkZW50aWZpZXIscix0aGlzLl9vcHRpb25zKX0sbi5wcm90b3R5cGUud2l0aE9wdGlvbnM9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMSk7dmFyIHI9ZT90Okwoe30sdGhpcy5fb3B0aW9ucyx0KTtyZXR1cm4gbmV3IG4odGhpcy5fc3RhdGVSZWdpc3RyeSx0aGlzLl9pZGVudGlmaWVyLHRoaXMuX3BhcmFtcyxyKX0sbi5pc0RlZj1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5zdGF0ZSYmKFAodC5zdGF0ZSl8fFAodC5zdGF0ZS5uYW1lKSl9LG59KCksJGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBoKCl7fXJldHVybiBoLm1ha2VUYXJnZXRTdGF0ZT1mdW5jdGlvbih0LGUpe3ZhciByPUN0KGUpLnN0YXRlO3JldHVybiBuZXcgU2UodCxyLGUubWFwKHcoXCJwYXJhbVZhbHVlc1wiKSkucmVkdWNlKHJ0LHt9KSx7fSl9LGguYnVpbGRQYXRoPWZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyYW1zKCk7cmV0dXJuIHQuJHN0YXRlKCkucGF0aC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBfZSh0KS5hcHBseVJhd1BhcmFtcyhlKX0pfSxoLmJ1aWxkVG9QYXRoPWZ1bmN0aW9uKHQsZSl7dmFyIHI9aC5idWlsZFBhdGgoZSk7cmV0dXJuIGUub3B0aW9ucygpLmluaGVyaXQ/aC5pbmhlcml0UGFyYW1zKHQscixPYmplY3Qua2V5cyhlLnBhcmFtcygpKSk6cn0saC5hcHBseVZpZXdDb25maWdzPWZ1bmN0aW9uKGksbyxlKXtvLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gSihlLHQuc3RhdGUpfSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1sdChlLnN0YXRlLnZpZXdzfHx7fSkscj1oLnN1YlBhdGgobyxmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KSxuPXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBpLmNyZWF0ZVZpZXdDb25maWcocix0KX0pO2Uudmlld3M9bi5yZWR1Y2UodnQsW10pfSl9LGguaW5oZXJpdFBhcmFtcz1mdW5jdGlvbihzLHQsYyl7dm9pZCAwPT09YyYmKGM9W10pO3ZhciBmPXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBhcmFtU2NoZW1hfSkucmVkdWNlKHZ0LFtdKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIXQuaW5oZXJpdH0pLm1hcCh3KFwiaWRcIikpO3JldHVybiB0Lm1hcChmdW5jdGlvbih0KXt2YXIgZT1MKHt9LHQmJnQucGFyYW1WYWx1ZXMpLHI9aXQoZSxjKTtlPW90KGUsYyk7dmFyIG4saSxvLGE9b3QoKG49cyxpPXQuc3RhdGUsbz1zdChuLHkoXCJzdGF0ZVwiLGkpKSxMKHt9LG8mJm8ucGFyYW1WYWx1ZXMpfHx7fSksZiksdT1MKGUsYSxyKTtyZXR1cm4gbmV3IF9lKHQuc3RhdGUpLmFwcGx5UmF3UGFyYW1zKHUpfSl9LGgudHJlZUNoYW5nZXM9ZnVuY3Rpb24odCxuLGUpe2Zvcih2YXIgcixpLG8sYSx1LHMsYz1NYXRoLm1pbih0Lmxlbmd0aCxuLmxlbmd0aCksZj0wO2Y8YyYmdFtmXS5zdGF0ZSE9PWUmJihyPXRbZl0saT1uW2ZdLHIuZXF1YWxzKGksaC5ub25EeW5hbWljUGFyYW1zKSk7KWYrKzthPShvPXQpLnNsaWNlKDAsZiksdT1vLnNsaWNlKGYpO3ZhciBsPWEubWFwKGZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5jbG9uZSgpO3JldHVybiByLnBhcmFtVmFsdWVzPW5bZV0ucGFyYW1WYWx1ZXMscn0pO3JldHVybiBzPW4uc2xpY2UoZikse2Zyb206byx0bzpsLmNvbmNhdChzKSxyZXRhaW5lZDphLHJldGFpbmVkV2l0aFRvUGFyYW1zOmwsZXhpdGluZzp1LGVudGVyaW5nOnN9fSxoLm1hdGNoaW5nPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbz0hMTtyZXR1cm4gUnQodCxlKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXTtyZXR1cm4obz1vfHwhci5lcXVhbHMobixpKSk/dDp0LmNvbmNhdChyKX0sW10pfSxoLmVxdWFscz1mdW5jdGlvbih0LGUscil7cmV0dXJuIHQubGVuZ3RoPT09ZS5sZW5ndGgmJmgubWF0Y2hpbmcodCxlLHIpLmxlbmd0aD09PXQubGVuZ3RofSxoLnN1YlBhdGg9ZnVuY3Rpb24odCxlKXt2YXIgcj1zdCh0LGUpLG49dC5pbmRleE9mKHIpO3JldHVybi0xPT09bj92b2lkIDA6dC5zbGljZSgwLG4rMSl9LGgubm9uRHluYW1pY1BhcmFtcz1mdW5jdGlvbih0KXtyZXR1cm4gdC5zdGF0ZS5wYXJhbWV0ZXJzKHtpbmhlcml0OiExfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LmR5bmFtaWN9KX0saC5wYXJhbVZhbHVlcz1mdW5jdGlvbih0KXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gTCh0LGUucGFyYW1WYWx1ZXMpfSx7fSl9LGh9KCksYmU9e3doZW46e0xBWlk6XCJMQVpZXCIsRUFHRVI6XCJFQUdFUlwifSxhc3luYzp7V0FJVDpcIldBSVRcIixOT1dBSVQ6XCJOT1dBSVRcIixSWFdBSVQ6XCJSWFdBSVRcIn19LFJlPXt3aGVuOlwiTEFaWVwiLGFzeW5jOlwiV0FJVFwifSxFZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEodCxlLHIsbixpKXtpZih0aGlzLnJlc29sdmVkPSExLHRoaXMucHJvbWlzZT12b2lkIDAsdCBpbnN0YW5jZW9mIGEpTCh0aGlzLHQpO2Vsc2UgaWYoQyhlKSl7aWYoJCh0KSl0aHJvdyBuZXcgRXJyb3IoXCJuZXcgUmVzb2x2YWJsZSgpOiB0b2tlbiBhcmd1bWVudCBpcyByZXF1aXJlZFwiKTtpZighQyhlKSl0aHJvdyBuZXcgRXJyb3IoXCJuZXcgUmVzb2x2YWJsZSgpOiByZXNvbHZlRm4gYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3RoaXMudG9rZW49dCx0aGlzLnBvbGljeT1uLHRoaXMucmVzb2x2ZUZuPWUsdGhpcy5kZXBzPXJ8fFtdLHRoaXMuZGF0YT1pLHRoaXMucmVzb2x2ZWQ9dm9pZCAwIT09aSx0aGlzLnByb21pc2U9dGhpcy5yZXNvbHZlZD9BLiRxLndoZW4odGhpcy5kYXRhKTp2b2lkIDB9ZWxzZSBpZihrKHQpJiZ0LnRva2VuJiYodC5oYXNPd25Qcm9wZXJ0eShcInJlc29sdmVGblwiKXx8dC5oYXNPd25Qcm9wZXJ0eShcImRhdGFcIikpKXt2YXIgbz10O3JldHVybiBuZXcgYShvLnRva2VuLG8ucmVzb2x2ZUZuLG8uZGVwcyxvLnBvbGljeSxvLmRhdGEpfX1yZXR1cm4gYS5wcm90b3R5cGUuZ2V0UG9saWN5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9saWN5fHx7fSxyPXQmJnQucmVzb2x2ZVBvbGljeXx8e307cmV0dXJue3doZW46ZS53aGVufHxyLndoZW58fFJlLndoZW4sYXN5bmM6ZS5hc3luY3x8ci5hc3luY3x8UmUuYXN5bmN9fSxhLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKGUscil7dmFyIG49dGhpcyx0PUEuJHEsaT1lLmZpbmROb2RlKHRoaXMpLG89aSYmaS5zdGF0ZSxhPVwiUlhXQUlUXCI9PT10aGlzLmdldFBvbGljeShvKS5hc3luYz9mdW5jdGlvbih0KXt2YXIgZT10LmNhY2hlKDEpO3JldHVybiBlLnRha2UoMSkudG9Qcm9taXNlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBlfSl9OkI7cmV0dXJuIHRoaXMucHJvbWlzZT10LndoZW4oKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYWxsKGUuZ2V0RGVwZW5kZW5jaWVzKG4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoZSxyKX0pKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG4ucmVzb2x2ZUZuLmFwcGx5KG51bGwsdCl9KS50aGVuKGEpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG4uZGF0YT10LG4ucmVzb2x2ZWQ9ITAsbi5yZXNvbHZlRm49bnVsbCxjZS50cmFjZVJlc29sdmFibGVSZXNvbHZlZChuLHIpLG4uZGF0YX0pfSxhLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5wcm9taXNlfHx0aGlzLnJlc29sdmUodCxlKX0sYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlJlc29sdmFibGUodG9rZW46IFwiK0J0KHRoaXMudG9rZW4pK1wiLCByZXF1aXJlczogW1wiK3RoaXMuZGVwcy5tYXAoQnQpK1wiXSlcIn0sYS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGEodGhpcyl9LGEuZnJvbURhdGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGEodCxmdW5jdGlvbigpe3JldHVybiBlfSxudWxsLG51bGwsZSl9LGF9KCksQ2U9YmUud2hlbixUZT1bQ2UuRUFHRVIsQ2UuTEFaWV0sUGU9W0NlLkVBR0VSXSxrZT1cIk5hdGl2ZSBJbmplY3RvclwiLE9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9wYXRoPXR9cmV0dXJuIHQucHJvdG90eXBlLmdldFRva2Vucz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXRoLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0LmNvbmNhdChlLnJlc29sdmFibGVzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC50b2tlbn0pKX0sW10pLnJlZHVjZSh5dCxbXSl9LHQucHJvdG90eXBlLmdldFJlc29sdmFibGU9ZnVuY3Rpb24oZSl7cmV0dXJuIEN0KHRoaXMuX3BhdGgubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlc29sdmFibGVzfSkucmVkdWNlKHZ0LFtdKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9rZW49PT1lfSkpfSx0LnByb3RvdHlwZS5nZXRQb2xpY3k9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kTm9kZSh0KTtyZXR1cm4gdC5nZXRQb2xpY3koZS5zdGF0ZSl9LHQucHJvdG90eXBlLnN1YkNvbnRleHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KCRlLnN1YlBhdGgodGhpcy5fcGF0aCxmdW5jdGlvbih0KXtyZXR1cm4gdC5zdGF0ZT09PWV9KSl9LHQucHJvdG90eXBlLmFkZFJlc29sdmFibGVzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9c3QodGhpcy5fcGF0aCx5KFwic3RhdGVcIixlKSksbj10Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC50b2tlbn0pO3IucmVzb2x2YWJsZXM9ci5yZXNvbHZhYmxlcy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuLTE9PT1uLmluZGV4T2YodC50b2tlbil9KS5jb25jYXQodCl9LHQucHJvdG90eXBlLnJlc29sdmVQYXRoPWZ1bmN0aW9uKHQsdSl7dmFyIHM9dGhpczt2b2lkIDA9PT10JiYodD1cIkxBWllcIik7dmFyIGM9KEooVGUsdCk/dDpcIkxBWllcIik9PT1iZS53aGVuLkVBR0VSP1BlOlRlO2NlLnRyYWNlUmVzb2x2ZVBhdGgodGhpcy5fcGF0aCx0LHUpO3ZhciBmPWZ1bmN0aW9uKGUscil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBKKGUscy5nZXRQb2xpY3kodClbcl0pfX0sZT10aGlzLl9wYXRoLnJlZHVjZShmdW5jdGlvbih0LGUpe3ZhciByPWUucmVzb2x2YWJsZXMuZmlsdGVyKGYoYyxcIndoZW5cIikpLG49ci5maWx0ZXIoZihbXCJOT1dBSVRcIl0sXCJhc3luY1wiKSksaT1yLmZpbHRlcihsKGYoW1wiTk9XQUlUXCJdLFwiYXN5bmNcIikpKSxvPXMuc3ViQ29udGV4dChlLnN0YXRlKSxhPWZ1bmN0aW9uKGUpe3JldHVybiBlLmdldChvLHUpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJue3Rva2VuOmUudG9rZW4sdmFsdWU6dH19KX07cmV0dXJuIG4uZm9yRWFjaChhKSx0LmNvbmNhdChpLm1hcChhKSl9LFtdKTtyZXR1cm4gQS4kcS5hbGwoZSl9LHQucHJvdG90eXBlLmluamVjdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luamVjdG9yfHwodGhpcy5faW5qZWN0b3I9bmV3IHhlKHRoaXMpKX0sdC5wcm90b3R5cGUuZmluZE5vZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHN0KHRoaXMuX3BhdGgsZnVuY3Rpb24odCl7cmV0dXJuIEoodC5yZXNvbHZhYmxlcyxlKX0pfSx0LnByb3RvdHlwZS5nZXREZXBlbmRlbmNpZXM9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxyPXRoaXMuZmluZE5vZGUoZSksaT0oJGUuc3ViUGF0aCh0aGlzLl9wYXRoLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09cn0pfHx0aGlzLl9wYXRoKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jb25jYXQoZS5yZXNvbHZhYmxlcyl9LFtdKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQhPT1lfSk7cmV0dXJuIGUuZGVwcy5tYXAoZnVuY3Rpb24oZSl7dmFyIHQ9aS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9rZW49PT1lfSk7aWYodC5sZW5ndGgpcmV0dXJuIEN0KHQpO3ZhciByPW4uaW5qZWN0b3IoKS5nZXROYXRpdmUoZSk7aWYoXyhyKSl0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBEZXBlbmRlbmN5IEluamVjdGlvbiB0b2tlbjogXCIrQnQoZSkpO3JldHVybiBuZXcgRWUoZSxmdW5jdGlvbigpe3JldHVybiByfSxbXSxyKX0pfSx0fSgpLHhlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbnRleHQ9dCx0aGlzLm5hdGl2ZT10aGlzLmdldChrZSl8fEEuJGluamVjdG9yfXJldHVybiB0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodCk7aWYoZSl7aWYoXCJOT1dBSVRcIj09PXRoaXMuY29udGV4dC5nZXRQb2xpY3koZSkuYXN5bmMpcmV0dXJuIGUuZ2V0KHRoaXMuY29udGV4dCk7aWYoIWUucmVzb2x2ZWQpdGhyb3cgbmV3IEVycm9yKFwiUmVzb2x2YWJsZSBhc3luYyAuZ2V0KCkgbm90IGNvbXBsZXRlOlwiK0J0KGUudG9rZW4pKTtyZXR1cm4gZS5kYXRhfXJldHVybiB0aGlzLmdldE5hdGl2ZSh0KX0sdC5wcm90b3R5cGUuZ2V0QXN5bmM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodCk7cmV0dXJuIGU/ZS5nZXQodGhpcy5jb250ZXh0KTpBLiRxLndoZW4odGhpcy5uYXRpdmUuZ2V0KHQpKX0sdC5wcm90b3R5cGUuZ2V0TmF0aXZlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5hdGl2ZSYmdGhpcy5uYXRpdmUuZ2V0KHQpfSx0fSgpO2Z1bmN0aW9uIGplKHQpe3JldHVybiB0Lm5hbWV9ZnVuY3Rpb24gVmUodCl7cmV0dXJuIHQuc2VsZi4kJHN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHR9LHQuc2VsZn1mdW5jdGlvbiBJZSh0KXtyZXR1cm4gdC5wYXJlbnQmJnQucGFyZW50LmRhdGEmJih0LmRhdGE9dC5zZWxmLmRhdGE9eih0LnBhcmVudC5kYXRhLHQuZGF0YSkpLHQuZGF0YX12YXIgSGU9ZnVuY3Rpb24oYSx1KXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxmO2lmKGUmJmUudXJsJiZlLm5hbWUmJmUubmFtZS5tYXRjaCgvXFwuXFwqXFwqJC8pKXt2YXIgcj17fTtUdChlLHIpLHIudXJsKz1cIntyZW1haW5kZXI6YW55fVwiLGU9cn12YXIgbj10LnBhcmVudCxpPWZ1bmN0aW9uKHQpe2lmKCFQKHQpKXJldHVybiExO3ZhciBlPVwiXlwiPT09dC5jaGFyQXQoMCk7cmV0dXJue3ZhbDplP3Quc3Vic3RyaW5nKDEpOnQscm9vdDplfX0oZS51cmwpLG89aT9hLmNvbXBpbGUoaS52YWwse3N0YXRlOmV9KTplLnVybDtpZighbylyZXR1cm4gbnVsbDtpZighYS5pc01hdGNoZXIobykpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1cmwgJ1wiK28rXCInIGluIHN0YXRlICdcIit0K1wiJ1wiKTtyZXR1cm4gaSYmaS5yb290P286KG4mJm4ubmF2aWdhYmxlfHx1KCkpLnVybC5hcHBlbmQobyl9fTtmdW5jdGlvbiBBZSh0KXtyZXR1cm4gdC5wYXJlbnQ/dC5wYXJlbnQucGF0aC5jb25jYXQodCk6W3RdfWZ1bmN0aW9uIERlKHQpe3ZhciBlPXQucGFyZW50P0woe30sdC5wYXJlbnQuaW5jbHVkZXMpOnt9O3JldHVybiBlW3QubmFtZV09ITAsZX1mdW5jdGlvbiBxZSh0KXt2YXIgZSxyLG49ZnVuY3Rpb24odCl7cmV0dXJuIHQucHJvdmlkZXx8dC50b2tlbn0saT1tKFtbdyhcInJlc29sdmVGblwiKSxmdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVlKG4odCksdC5yZXNvbHZlRm4sdC5kZXBzLHQucG9saWN5KX1dLFt3KFwidXNlRmFjdG9yeVwiKSxmdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVlKG4odCksdC51c2VGYWN0b3J5LHQuZGVwc3x8dC5kZXBlbmRlbmNpZXMsdC5wb2xpY3kpfV0sW3coXCJ1c2VDbGFzc1wiKSxmdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVlKG4odCksZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQudXNlQ2xhc3N9LFtdLHQucG9saWN5KX1dLFt3KFwidXNlVmFsdWVcIiksZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBFZShuKHQpLGZ1bmN0aW9uKCl7cmV0dXJuIHQudXNlVmFsdWV9LFtdLHQucG9saWN5LHQudXNlVmFsdWUpfV0sW3coXCJ1c2VFeGlzdGluZ1wiKSxmdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVlKG4odCksQixbdC51c2VFeGlzdGluZ10sdC5wb2xpY3kpfV1dKSxvPW0oW1tzKHcoXCJ2YWxcIiksUCksZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBFZSh0LnRva2VuLEIsW3QudmFsXSx0LnBvbGljeSl9XSxbcyh3KFwidmFsXCIpLE8pLGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRWUodC50b2tlbixDdCh0LnZhbCksdC52YWwuc2xpY2UoMCwtMSksdC5wb2xpY3kpfV0sW3ModyhcInZhbFwiKSxDKSxmdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVlKHQudG9rZW4sdC52YWwsKGU9dC52YWwscj1BLiRpbmplY3RvcixlLiRpbmplY3R8fHImJnIuYW5ub3RhdGUoZSxyLnN0cmljdERpKXx8XCJkZWZlcnJlZFwiKSx0LnBvbGljeSk7dmFyIGUscn1dXSksYT1tKFtbcChFZSksZnVuY3Rpb24odCl7cmV0dXJuIHR9XSxbZnVuY3Rpb24odCl7cmV0dXJuISghdC50b2tlbnx8IXQucmVzb2x2ZUZuKX0saV0sW2Z1bmN0aW9uKHQpe3JldHVybiEoIXQucHJvdmlkZSYmIXQudG9rZW58fCEodC51c2VWYWx1ZXx8dC51c2VGYWN0b3J5fHx0LnVzZUV4aXN0aW5nfHx0LnVzZUNsYXNzKSl9LGldLFtmdW5jdGlvbih0KXtyZXR1cm4hISh0JiZ0LnZhbCYmKFAodC52YWwpfHxPKHQudmFsKXx8Qyh0LnZhbCkpKX0sb10sW3YoITApLGZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVzb2x2ZSB2YWx1ZTogXCIrQnQodCkpfV1dKSx1PXQucmVzb2x2ZTtyZXR1cm4oTyh1KT91OihlPXUscj10LnJlc29sdmVQb2xpY3l8fHt9LE9iamVjdC5rZXlzKGV8fHt9KS5tYXAoZnVuY3Rpb24odCl7cmV0dXJue3Rva2VuOnQsdmFsOmVbdF0sZGVwczp2b2lkIDAscG9saWN5OnJbdF19fSkpKS5tYXAoYSl9dmFyIFVlLEZlLE5lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHQpe3RoaXMubWF0Y2hlcj1lO3ZhciBuLHIsaT10aGlzLG89ZnVuY3Rpb24oKXtyZXR1cm4gZS5maW5kKFwiXCIpfSxhPWZ1bmN0aW9uKHQpe3JldHVyblwiXCI9PT10Lm5hbWV9O3RoaXMuYnVpbGRlcnM9e25hbWU6W2plXSxzZWxmOltWZV0scGFyZW50OltmdW5jdGlvbih0KXtyZXR1cm4gYSh0KT9udWxsOmUuZmluZChpLnBhcmVudE5hbWUodCkpfHxvKCl9XSxkYXRhOltJZV0sdXJsOltIZSh0LG8pXSxuYXZpZ2FibGU6WyhyPWEsZnVuY3Rpb24odCl7cmV0dXJuIXIodCkmJnQudXJsP3Q6dC5wYXJlbnQ/dC5wYXJlbnQubmF2aWdhYmxlOm51bGx9KV0scGFyYW1zOlsobj10LnBhcmFtRmFjdG9yeSxmdW5jdGlvbihyKXt2YXIgdD1yLnVybCYmci51cmwucGFyYW1ldGVycyh7aW5oZXJpdDohMX0pfHxbXSxlPWx0KGN0KG90KHIucGFyYW1zfHx7fSx0Lm1hcCh3KFwiaWRcIikpKSxmdW5jdGlvbih0LGUpe3JldHVybiBuLmZyb21Db25maWcoZSxudWxsLHIuc2VsZil9KSk7cmV0dXJuIHQuY29uY2F0KGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bdC5pZCx0XX0pLnJlZHVjZShFdCx7fSl9KV0sdmlld3M6W10scGF0aDpbQWVdLGluY2x1ZGVzOltEZV0scmVzb2x2YWJsZXM6W3FlXX19cmV0dXJuIHQucHJvdG90eXBlLmJ1aWxkZXI9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmJ1aWxkZXJzLG49clt0XXx8W107cmV0dXJuIFAodCkmJiFFKGUpPzE8bi5sZW5ndGg/bjpuWzBdOlAodCkmJkMoZSk/KHJbdF09bixyW3RdLnB1c2goZSksZnVuY3Rpb24oKXtyZXR1cm4gclt0XS5zcGxpY2Uoclt0XS5pbmRleE9mKGUsMSkpJiZudWxsfSk6dm9pZCAwfSx0LnByb3RvdHlwZS5idWlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1hdGNoZXIscj10aGlzLmJ1aWxkZXJzLG49dGhpcy5wYXJlbnROYW1lKHQpO2lmKG4mJiFlLmZpbmQobix2b2lkIDAsITEpKXJldHVybiBudWxsO2Zvcih2YXIgaSBpbiByKWlmKHIuaGFzT3duUHJvcGVydHkoaSkpe3ZhciBvPXJbaV0ucmVkdWNlKGZ1bmN0aW9uKGUscil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiByKHQsZSl9fSxHKTt0W2ldPW8odCl9cmV0dXJuIHR9LHQucHJvdG90eXBlLnBhcmVudE5hbWU9ZnVuY3Rpb24odCl7dmFyIGU9dC5uYW1lfHxcIlwiLHI9ZS5zcGxpdChcIi5cIik7aWYoXCIqKlwiPT09ci5wb3AoKSYmci5wb3AoKSxyLmxlbmd0aCl7aWYodC5wYXJlbnQpdGhyb3cgbmV3IEVycm9yKFwiU3RhdGVzIHRoYXQgc3BlY2lmeSB0aGUgJ3BhcmVudDonIHByb3BlcnR5IHNob3VsZCBub3QgaGF2ZSBhICcuJyBpbiB0aGVpciBuYW1lIChcIitlK1wiKVwiKTtyZXR1cm4gci5qb2luKFwiLlwiKX1yZXR1cm4gdC5wYXJlbnQ/UCh0LnBhcmVudCk/dC5wYXJlbnQ6dC5wYXJlbnQubmFtZTpcIlwifSx0LnByb3RvdHlwZS5uYW1lPWZ1bmN0aW9uKHQpe3ZhciBlPXQubmFtZTtpZigtMSE9PWUuaW5kZXhPZihcIi5cIil8fCF0LnBhcmVudClyZXR1cm4gZTt2YXIgcj1QKHQucGFyZW50KT90LnBhcmVudDp0LnBhcmVudC5uYW1lO3JldHVybiByP3IrXCIuXCIrZTplfSx0fSgpLExlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gci5jcmVhdGUodHx8e30pfXJldHVybiByLmNyZWF0ZT1mdW5jdGlvbih0KXt0PXIuaXNTdGF0ZUNsYXNzKHQpP25ldyB0OnQ7dmFyIGU9eih6KHQsci5wcm90b3R5cGUpKTtyZXR1cm4gdC4kJHN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGUuc2VsZj10LGUuX19zdGF0ZU9iamVjdENhY2hlPXtuYW1lR2xvYjpWdC5mcm9tU3RyaW5nKGUubmFtZSl9LGV9LHIucHJvdG90eXBlLmlzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT09dHx8dGhpcy5zZWxmPT09dHx8dGhpcy5mcW4oKT09PXR9LHIucHJvdG90eXBlLmZxbj1mdW5jdGlvbigpe2lmKCEodGhpcy5wYXJlbnQmJnRoaXMucGFyZW50IGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvcikpcmV0dXJuIHRoaXMubmFtZTt2YXIgdD10aGlzLnBhcmVudC5mcW4oKTtyZXR1cm4gdD90K1wiLlwiK3RoaXMubmFtZTp0aGlzLm5hbWV9LHIucHJvdG90eXBlLnJvb3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LnJvb3QoKXx8dGhpc30sci5wcm90b3R5cGUucGFyYW1ldGVycz1mdW5jdGlvbihlKXtyZXR1cm4oKGU9ZXQoZSx7aW5oZXJpdDohMCxtYXRjaGluZ0tleXM6bnVsbH0pKS5pbmhlcml0JiZ0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQucGFyYW1ldGVycygpfHxbXSkuY29uY2F0KGx0KHRoaXMucGFyYW1zKSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiFlLm1hdGNoaW5nS2V5c3x8ZS5tYXRjaGluZ0tleXMuaGFzT3duUHJvcGVydHkodC5pZCl9KX0sci5wcm90b3R5cGUucGFyYW1ldGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPXt9KSx0aGlzLnVybCYmdGhpcy51cmwucGFyYW1ldGVyKHQsZSl8fHN0KGx0KHRoaXMucGFyYW1zKSx5KFwiaWRcIix0KSl8fGUuaW5oZXJpdCYmdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LnBhcmFtZXRlcih0KX0sci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcW4oKX0sci5pc1N0YXRlQ2xhc3M9ZnVuY3Rpb24odCl7cmV0dXJuIEModCkmJiEwPT09dC5fX3VpUm91dGVyU3RhdGV9LHIuaXNTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gayh0Ll9fc3RhdGVPYmplY3RDYWNoZSl9LHJ9KCksTWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX3N0YXRlcz10fXJldHVybiB0LnByb3RvdHlwZS5pc1JlbGF0aXZlPWZ1bmN0aW9uKHQpe3JldHVybiAwPT09KHQ9dHx8XCJcIikuaW5kZXhPZihcIi5cIil8fDA9PT10LmluZGV4T2YoXCJeXCIpfSx0LnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQsZSxyKXtpZih2b2lkIDA9PT1yJiYocj0hMCksdHx8XCJcIj09PXQpe3ZhciBuPVAodCksaT1uP3Q6dC5uYW1lO3RoaXMuaXNSZWxhdGl2ZShpKSYmKGk9dGhpcy5yZXNvbHZlUGF0aChpLGUpKTt2YXIgbz10aGlzLl9zdGF0ZXNbaV07aWYobyYmKG58fCEobnx8byE9PXQmJm8uc2VsZiE9PXQpKSlyZXR1cm4gbztpZihuJiZyKXt2YXIgYT1sdCh0aGlzLl9zdGF0ZXMpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5fX3N0YXRlT2JqZWN0Q2FjaGUubmFtZUdsb2ImJnQuX19zdGF0ZU9iamVjdENhY2hlLm5hbWVHbG9iLm1hdGNoZXMoaSl9KTtyZXR1cm4gMTxhLmxlbmd0aCYmY29uc29sZS5sb2coXCJzdGF0ZU1hdGNoZXIuZmluZDogRm91bmQgbXVsdGlwbGUgbWF0Y2hlcyBmb3IgXCIraStcIiB1c2luZyBnbG9iOiBcIixhLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5uYW1lfSkpLGFbMF19fX0sdC5wcm90b3R5cGUucmVzb2x2ZVBhdGg9ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJObyByZWZlcmVuY2UgcG9pbnQgZ2l2ZW4gZm9yIHBhdGggJ1wiK3QrXCInXCIpO2Zvcih2YXIgcj10aGlzLmZpbmQoZSksbj10LnNwbGl0KFwiLlwiKSxpPW4ubGVuZ3RoLG89MCxhPXI7bzxpO28rKylpZihcIlwiIT09bltvXXx8MCE9PW8pe2lmKFwiXlwiIT09bltvXSlicmVhaztpZighYS5wYXJlbnQpdGhyb3cgbmV3IEVycm9yKFwiUGF0aCAnXCIrdCtcIicgbm90IHZhbGlkIGZvciBzdGF0ZSAnXCIrci5uYW1lK1wiJ1wiKTthPWEucGFyZW50fWVsc2UgYT1yO3ZhciB1PW4uc2xpY2Uobykuam9pbihcIi5cIik7cmV0dXJuIGEubmFtZSsoYS5uYW1lJiZ1P1wiLlwiOlwiXCIpK3V9LHR9KCksQmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxyLG4pe3RoaXMucm91dGVyPXQsdGhpcy5zdGF0ZXM9ZSx0aGlzLmJ1aWxkZXI9cix0aGlzLmxpc3RlbmVycz1uLHRoaXMucXVldWU9W119cmV0dXJuIHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLnF1ZXVlPVtdfSx0LnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnF1ZXVlLHI9TGUuY3JlYXRlKHQpLG49ci5uYW1lO2lmKCFQKG4pKXRocm93IG5ldyBFcnJvcihcIlN0YXRlIG11c3QgaGF2ZSBhIHZhbGlkIG5hbWVcIik7aWYodGhpcy5zdGF0ZXMuaGFzT3duUHJvcGVydHkobil8fEooZS5tYXAodyhcIm5hbWVcIikpLG4pKXRocm93IG5ldyBFcnJvcihcIlN0YXRlICdcIituK1wiJyBpcyBhbHJlYWR5IGRlZmluZWRcIik7cmV0dXJuIGUucHVzaChyKSx0aGlzLmZsdXNoKCkscn0sdC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcyx0PXRoaXMucXVldWUscj10aGlzLnN0YXRlcyxuPXRoaXMuYnVpbGRlcixpPVtdLG89W10sYT17fSx1PWZ1bmN0aW9uKHQpe3JldHVybiBlLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eSh0KSYmZS5zdGF0ZXNbdF19LHM9ZnVuY3Rpb24oKXtpLmxlbmd0aCYmZS5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdChcInJlZ2lzdGVyZWRcIixpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5zZWxmfSkpfSl9OzA8dC5sZW5ndGg7KXt2YXIgYz10LnNoaWZ0KCksZj1jLm5hbWUsbD1uLmJ1aWxkKGMpLGg9by5pbmRleE9mKGMpO2lmKGwpe3ZhciBwPXUoZik7aWYocCYmcC5uYW1lPT09Zil0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIrZitcIicgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO3ZhciB2PXUoZitcIi4qKlwiKTt2JiZ0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlcmVnaXN0ZXIodikscltmXT1jLHRoaXMuYXR0YWNoUm91dGUoYyksMDw9aCYmby5zcGxpY2UoaCwxKSxpLnB1c2goYyl9ZWxzZXt2YXIgZD1hW2ZdO2lmKGFbZl09dC5sZW5ndGgsMDw9aCYmZD09PXQubGVuZ3RoKXJldHVybiB0LnB1c2goYykscygpLHI7aDwwJiZvLnB1c2goYyksdC5wdXNoKGMpfX1yZXR1cm4gcygpLHJ9LHQucHJvdG90eXBlLmF0dGFjaFJvdXRlPWZ1bmN0aW9uKHQpe2lmKCF0LmFic3RyYWN0JiZ0LnVybCl7dmFyIGU9dGhpcy5yb3V0ZXIudXJsU2VydmljZS5ydWxlcztlLnJ1bGUoZS51cmxSdWxlRmFjdG9yeS5jcmVhdGUodCkpfX0sdH0oKSxHZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5yb3V0ZXI9dCx0aGlzLnN0YXRlcz17fSx0aGlzLmxpc3RlbmVycz1bXSx0aGlzLm1hdGNoZXI9bmV3IE1lKHRoaXMuc3RhdGVzKSx0aGlzLmJ1aWxkZXI9bmV3IE5lKHRoaXMubWF0Y2hlcix0LnVybE1hdGNoZXJGYWN0b3J5KSx0aGlzLnN0YXRlUXVldWU9bmV3IEJlKHQsdGhpcy5zdGF0ZXMsdGhpcy5idWlsZGVyLHRoaXMubGlzdGVuZXJzKSx0aGlzLl9yZWdpc3RlclJvb3QoKX1yZXR1cm4gdC5wcm90b3R5cGUuX3JlZ2lzdGVyUm9vdD1mdW5jdGlvbigpeyh0aGlzLl9yb290PXRoaXMuc3RhdGVRdWV1ZS5yZWdpc3Rlcih7bmFtZTpcIlwiLHVybDpcIl5cIix2aWV3czpudWxsLHBhcmFtczp7XCIjXCI6e3ZhbHVlOm51bGwsdHlwZTpcImhhc2hcIixkeW5hbWljOiEwfX0sYWJzdHJhY3Q6ITB9KSkubmF2aWdhYmxlPW51bGx9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuc3RhdGVRdWV1ZS5kaXNwb3NlKCksdGhpcy5saXN0ZW5lcnM9W10sdGhpcy5nZXQoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmdldCh0KSYmZS5kZXJlZ2lzdGVyKHQpfSl9LHQucHJvdG90eXBlLm9uU3RhdGVzQ2hhbmdlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5saXN0ZW5lcnMucHVzaCh0KSxmdW5jdGlvbigpe0sodGhpcy5saXN0ZW5lcnMpKHQpfS5iaW5kKHRoaXMpfSx0LnByb3RvdHlwZS5yb290PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jvb3R9LHQucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0YXRlUXVldWUucmVnaXN0ZXIodCl9LHQucHJvdG90eXBlLl9kZXJlZ2lzdGVyVHJlZT1mdW5jdGlvbih0KXt2YXIgcj10aGlzLG49dGhpcy5nZXQoKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuJCRzdGF0ZSgpfSksaT1mdW5jdGlvbihlKXt2YXIgdD1uLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4tMSE9PWUuaW5kZXhPZih0LnBhcmVudCl9KTtyZXR1cm4gMD09PXQubGVuZ3RoP3Q6dC5jb25jYXQoaSh0KSl9LGU9aShbdF0pLG89W3RdLmNvbmNhdChlKS5yZXZlcnNlKCk7cmV0dXJuIG8uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1yLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzO2UucnVsZXMoKS5maWx0ZXIoeShcInN0YXRlXCIsdCkpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUucmVtb3ZlUnVsZSh0KX0pLGRlbGV0ZSByLnN0YXRlc1t0Lm5hbWVdfSksb30sdC5wcm90b3R5cGUuZGVyZWdpc3Rlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCh0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBkZXJlZ2lzdGVyIHN0YXRlOyBub3QgZm91bmQ6IFwiK3QpO3ZhciByPXRoaXMuX2RlcmVnaXN0ZXJUcmVlKGUuJCRzdGF0ZSgpKTtyZXR1cm4gdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdChcImRlcmVnaXN0ZXJlZFwiLHIubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNlbGZ9KSl9KSxyfSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0YXRlcykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0YXRlc1t0XS5zZWxmfSk7dmFyIG49dGhpcy5tYXRjaGVyLmZpbmQodCxlKTtyZXR1cm4gbiYmbi5zZWxmfHxudWxsfSx0LnByb3RvdHlwZS5kZWNvcmF0b3I9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5idWlsZGVyLmJ1aWxkZXIodCxlKX0sdH0oKTsoVWU9ZC5UcmFuc2l0aW9uSG9va1BoYXNlfHwoZC5UcmFuc2l0aW9uSG9va1BoYXNlPXt9KSlbVWUuQ1JFQVRFPTBdPVwiQ1JFQVRFXCIsVWVbVWUuQkVGT1JFPTFdPVwiQkVGT1JFXCIsVWVbVWUuUlVOPTJdPVwiUlVOXCIsVWVbVWUuU1VDQ0VTUz0zXT1cIlNVQ0NFU1NcIixVZVtVZS5FUlJPUj00XT1cIkVSUk9SXCIsKEZlPWQuVHJhbnNpdGlvbkhvb2tTY29wZXx8KGQuVHJhbnNpdGlvbkhvb2tTY29wZT17fSkpW0ZlLlRSQU5TSVRJT049MF09XCJUUkFOU0lUSU9OXCIsRmVbRmUuU1RBVEU9MV09XCJTVEFURVwiO3ZhciBXZT17Y3VycmVudDpHLHRyYW5zaXRpb246bnVsbCx0cmFjZURhdGE6e30sYmluZDpudWxsfSx6ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIG8odCxlLHIsbil7dmFyIGk9dGhpczt0aGlzLnRyYW5zaXRpb249dCx0aGlzLnN0YXRlQ29udGV4dD1lLHRoaXMucmVnaXN0ZXJlZEhvb2s9cix0aGlzLm9wdGlvbnM9bix0aGlzLmlzU3VwZXJzZWRlZD1mdW5jdGlvbigpe3JldHVybiBpLnR5cGUuaG9va1BoYXNlPT09ZC5UcmFuc2l0aW9uSG9va1BoYXNlLlJVTiYmIWkub3B0aW9ucy50cmFuc2l0aW9uLmlzQWN0aXZlKCl9LHRoaXMub3B0aW9ucz1ldChuLFdlKSx0aGlzLnR5cGU9ci5ldmVudFR5cGV9cmV0dXJuIG8uY2hhaW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuaW52b2tlSG9vaygpfSl9LGV8fEEuJHEud2hlbigpKX0sby5pbnZva2VIb29rcz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdLmludm9rZUhvb2soKTtpZihJKG4pKXt2YXIgaT10LnNsaWNlKHIrMSk7cmV0dXJuIG8uY2hhaW4oaSxuKS50aGVuKGUpfX1yZXR1cm4gZSgpfSxvLnJ1bkFsbEhvb2tzPWZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnZva2VIb29rKCl9KX0sby5wcm90b3R5cGUubG9nRXJyb3I9ZnVuY3Rpb24odCl7dGhpcy50cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVNlcnZpY2UuZGVmYXVsdEVycm9ySGFuZGxlcigpKHQpfSxvLnByb3RvdHlwZS5pbnZva2VIb29rPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxyPXRoaXMucmVnaXN0ZXJlZEhvb2s7aWYoIXIuX2RlcmVnaXN0ZXJlZCl7dmFyIHQ9dGhpcy5nZXROb3RDdXJyZW50UmVqZWN0aW9uKCk7aWYodClyZXR1cm4gdDt2YXIgbj10aGlzLm9wdGlvbnM7Y2UudHJhY2VIb29rSW52b2NhdGlvbih0aGlzLHRoaXMudHJhbnNpdGlvbixuKTt2YXIgaT1mdW5jdGlvbih0KXtyZXR1cm4gci5ldmVudFR5cGUuZ2V0RXJyb3JIYW5kbGVyKGUpKHQpfSxvPWZ1bmN0aW9uKHQpe3JldHVybiByLmV2ZW50VHlwZS5nZXRSZXN1bHRIYW5kbGVyKGUpKHQpfTt0cnl7dmFyIGE9ci5jYWxsYmFjay5jYWxsKG4uYmluZCxlLnRyYW5zaXRpb24sZS5zdGF0ZUNvbnRleHQpO3JldHVybiF0aGlzLnR5cGUuc3luY2hyb25vdXMmJkkoYSk/YS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gQXQubm9ybWFsaXplKHQpLnRvUHJvbWlzZSgpfSkudGhlbihvLGkpOm8oYSl9Y2F0Y2godCl7cmV0dXJuIGkoQXQubm9ybWFsaXplKHQpKX1maW5hbGx5e3IuaW52b2tlTGltaXQmJisrci5pbnZva2VDb3VudD49ci5pbnZva2VMaW1pdCYmci5kZXJlZ2lzdGVyKCl9fX0sby5wcm90b3R5cGUuaGFuZGxlSG9va1Jlc3VsdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLHI9dGhpcy5nZXROb3RDdXJyZW50UmVqZWN0aW9uKCk7cmV0dXJuIHJ8fChJKHQpP3QudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5oYW5kbGVIb29rUmVzdWx0KHQpfSk6KGNlLnRyYWNlSG9va1Jlc3VsdCh0LHRoaXMudHJhbnNpdGlvbix0aGlzLm9wdGlvbnMpLCExPT09dD9BdC5hYm9ydGVkKFwiSG9vayBhYm9ydGVkIHRyYW5zaXRpb25cIikudG9Qcm9taXNlKCk6cChTZSkodCk/QXQucmVkaXJlY3RlZCh0KS50b1Byb21pc2UoKTp2b2lkIDApKX0sby5wcm90b3R5cGUuZ2V0Tm90Q3VycmVudFJlamVjdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudHJhbnNpdGlvbi5yb3V0ZXI7cmV0dXJuIHQuX2Rpc3Bvc2VkP0F0LmFib3J0ZWQoXCJVSVJvdXRlciBpbnN0YW5jZSAjXCIrdC4kaWQrXCIgaGFzIGJlZW4gc3RvcHBlZCAoZGlzcG9zZWQpXCIpLnRvUHJvbWlzZSgpOnRoaXMudHJhbnNpdGlvbi5fYWJvcnRlZD9BdC5hYm9ydGVkKCkudG9Qcm9taXNlKCk6dGhpcy5pc1N1cGVyc2VkZWQoKT9BdC5zdXBlcnNlZGVkKHRoaXMub3B0aW9ucy5jdXJyZW50KCkpLnRvUHJvbWlzZSgpOnZvaWQgMH0sby5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMsZT10aGlzLnJlZ2lzdGVyZWRIb29rO3JldHVybihSKFwidHJhY2VEYXRhLmhvb2tUeXBlXCIpKHQpfHxcImludGVybmFsXCIpK1wiIGNvbnRleHQ6IFwiKyhSKFwidHJhY2VEYXRhLmNvbnRleHQuc3RhdGUubmFtZVwiKSh0KXx8UihcInRyYWNlRGF0YS5jb250ZXh0XCIpKHQpfHxcInVua25vd25cIikrXCIsIFwiK0R0KDIwMCxOdChlLmNhbGxiYWNrKSl9LG8uSEFORExFX1JFU1VMVD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuaGFuZGxlSG9va1Jlc3VsdCh0KX19LG8uTE9HX1JFSkVDVEVEX1JFU1VMVD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7SSh0KSYmdC5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5sb2dFcnJvcihBdC5ub3JtYWxpemUodCkpfSl9fSxvLkxPR19FUlJPUj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUubG9nRXJyb3IodCl9fSxvLlJFSkVDVF9FUlJPUj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGp0KHQpfX0sby5USFJPV19FUlJPUj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCl7dGhyb3cgdH19LG99KCk7ZnVuY3Rpb24gSmUodCxlLHIpe3ZhciBpPVAoZSk/W2VdOmU7cmV0dXJuISEoQyhpKT9pOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1pLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG49bmV3IFZ0KGVbcl0pO2lmKG4mJm4ubWF0Y2hlcyh0Lm5hbWUpfHwhbiYmZVtyXT09PXQubmFtZSlyZXR1cm4hMH1yZXR1cm4hMX0pKHQscil9dmFyIFFlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUscixuLGksbyl7dm9pZCAwPT09byYmKG89e30pLHRoaXMudHJhblN2Yz10LHRoaXMuZXZlbnRUeXBlPWUsdGhpcy5jYWxsYmFjaz1yLHRoaXMubWF0Y2hDcml0ZXJpYT1uLHRoaXMucmVtb3ZlSG9va0Zyb21SZWdpc3RyeT1pLHRoaXMuaW52b2tlQ291bnQ9MCx0aGlzLl9kZXJlZ2lzdGVyZWQ9ITEsdGhpcy5wcmlvcml0eT1vLnByaW9yaXR5fHwwLHRoaXMuYmluZD1vLmJpbmR8fG51bGwsdGhpcy5pbnZva2VMaW1pdD1vLmludm9rZUxpbWl0fXJldHVybiB0LnByb3RvdHlwZS5fbWF0Y2hpbmdOb2Rlcz1mdW5jdGlvbih0LGUscil7aWYoITA9PT1lKXJldHVybiB0O3ZhciBuPXQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBKZSh0LnN0YXRlLGUscil9KTtyZXR1cm4gbi5sZW5ndGg/bjpudWxsfSx0LnByb3RvdHlwZS5fZ2V0RGVmYXVsdE1hdGNoQ3JpdGVyaWE9ZnVuY3Rpb24oKXtyZXR1cm4gY3QodGhpcy50cmFuU3ZjLl9wbHVnaW5hcGkuX2dldFBhdGhUeXBlcygpLGZ1bmN0aW9uKCl7cmV0dXJuITB9KX0sdC5wcm90b3R5cGUuX2dldE1hdGNoaW5nTm9kZXM9ZnVuY3Rpb24obyxhKXt2YXIgdT10aGlzLHM9TCh0aGlzLl9nZXREZWZhdWx0TWF0Y2hDcml0ZXJpYSgpLHRoaXMubWF0Y2hDcml0ZXJpYSk7cmV0dXJuIGx0KHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZS5zY29wZT09PWQuVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURSxuPW9bZS5uYW1lXXx8W10saT1yP246W0N0KG4pXTtyZXR1cm4gdFtlLm5hbWVdPXUuX21hdGNoaW5nTm9kZXMoaSxzW2UubmFtZV0sYSksdH0se30pfSx0LnByb3RvdHlwZS5tYXRjaGVzPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5fZ2V0TWF0Y2hpbmdOb2Rlcyh0LGUpO3JldHVybiBsdChyKS5ldmVyeShCKT9yOm51bGx9LHQucHJvdG90eXBlLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUhvb2tGcm9tUmVnaXN0cnkodGhpcyksdGhpcy5fZGVyZWdpc3RlcmVkPSEwfSx0fSgpO2Z1bmN0aW9uIEtlKHQsaSxvKXt2YXIgYT0odC5fcmVnaXN0ZXJlZEhvb2tzPXQuX3JlZ2lzdGVyZWRIb29rc3x8e30pW28ubmFtZV09W10sdT1LKGEpO2Z1bmN0aW9uIGUodCxlLHIpe3ZvaWQgMD09PXImJihyPXt9KTt2YXIgbj1uZXcgUWUoaSxvLGUsdCx1LHIpO3JldHVybiBhLnB1c2gobiksbi5kZXJlZ2lzdGVyLmJpbmQobil9cmV0dXJuIHRbby5uYW1lXT1lfXZhciBZZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy50cmFuc2l0aW9uPXR9cmV0dXJuIHQucHJvdG90eXBlLmJ1aWxkSG9va3NGb3JQaGFzZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLl9wbHVnaW5hcGkuX2dldEV2ZW50cyh0KS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUuYnVpbGRIb29rcyh0KX0pLnJlZHVjZSh2dCxbXSkuZmlsdGVyKEIpfSx0LnByb3RvdHlwZS5idWlsZEhvb2tzPWZ1bmN0aW9uKG8pe3ZhciBhPXRoaXMudHJhbnNpdGlvbix0PWEudHJlZUNoYW5nZXMoKSxlPXRoaXMuZ2V0TWF0Y2hpbmdIb29rcyhvLHQsYSk7aWYoIWUpcmV0dXJuW107dmFyIHU9e3RyYW5zaXRpb246YSxjdXJyZW50OmEub3B0aW9ucygpLmN1cnJlbnR9O3JldHVybiBlLm1hcChmdW5jdGlvbihpKXtyZXR1cm4gaS5tYXRjaGVzKHQsYSlbby5jcml0ZXJpYU1hdGNoUGF0aC5uYW1lXS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9TCh7YmluZDppLmJpbmQsdHJhY2VEYXRhOntob29rVHlwZTpvLm5hbWUsY29udGV4dDp0fX0sdSkscj1vLmNyaXRlcmlhTWF0Y2hQYXRoLnNjb3BlPT09ZC5UcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFP3Quc3RhdGUuc2VsZjpudWxsLG49bmV3IHplKGEscixpLGUpO3JldHVybntob29rOmksbm9kZTp0LHRyYW5zaXRpb25Ib29rOm59fSl9KS5yZWR1Y2UodnQsW10pLnNvcnQoZnVuY3Rpb24oaSl7dm9pZCAwPT09aSYmKGk9ITEpO3JldHVybiBmdW5jdGlvbih0LGUpe3ZhciByPWk/LTE6MSxuPSh0Lm5vZGUuc3RhdGUucGF0aC5sZW5ndGgtZS5ub2RlLnN0YXRlLnBhdGgubGVuZ3RoKSpyO3JldHVybiAwIT09bj9uOmUuaG9vay5wcmlvcml0eS10Lmhvb2sucHJpb3JpdHl9fShvLnJldmVyc2VTb3J0KSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYW5zaXRpb25Ib29rfSl9LHQucHJvdG90eXBlLmdldE1hdGNoaW5nSG9va3M9ZnVuY3Rpb24oZSxyLG4pe3ZhciB0PWUuaG9va1BoYXNlPT09ZC5UcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURSxpPXRoaXMudHJhbnNpdGlvbi5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7cmV0dXJuKHQ/W2ldOlt0aGlzLnRyYW5zaXRpb24saV0pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRIb29rcyhlLm5hbWUpfSkuZmlsdGVyKF90KE8sXCJicm9rZW4gZXZlbnQgbmFtZWQ6IFwiK2UubmFtZSkpLnJlZHVjZSh2dCxbXSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hdGNoZXMocixuKX0pfSx0fSgpO3ZhciBaZT13KFwic2VsZlwiKSxYZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxlLHIpe3ZhciBuPXRoaXM7aWYodGhpcy5fZGVmZXJyZWQ9QS4kcS5kZWZlcigpLHRoaXMucHJvbWlzZT10aGlzLl9kZWZlcnJlZC5wcm9taXNlLHRoaXMuX3JlZ2lzdGVyZWRIb29rcz17fSx0aGlzLl9ob29rQnVpbGRlcj1uZXcgWWUodGhpcyksdGhpcy5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBuLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb249PT1ufSx0aGlzLnJvdXRlcj1yLCEodGhpcy5fdGFyZ2V0U3RhdGU9ZSkudmFsaWQoKSl0aHJvdyBuZXcgRXJyb3IoZS5lcnJvcigpKTt0aGlzLl9vcHRpb25zPUwoe2N1cnJlbnQ6dih0aGlzKX0sZS5vcHRpb25zKCkpLHRoaXMuJGlkPXIudHJhbnNpdGlvblNlcnZpY2UuX3RyYW5zaXRpb25Db3VudCsrO3ZhciBpPSRlLmJ1aWxkVG9QYXRoKHQsZSk7dGhpcy5fdHJlZUNoYW5nZXM9JGUudHJlZUNoYW5nZXModCxpLHRoaXMuX29wdGlvbnMucmVsb2FkU3RhdGUpLHRoaXMuY3JlYXRlVHJhbnNpdGlvbkhvb2tSZWdGbnMoKTt2YXIgbz10aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UoZC5UcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURSk7emUuaW52b2tlSG9va3MobyxmdW5jdGlvbigpe3JldHVybiBudWxsfSksdGhpcy5hcHBseVZpZXdDb25maWdzKHIpfXJldHVybiBlLnByb3RvdHlwZS5vbkJlZm9yZT1mdW5jdGlvbih0LGUscil7fSxlLnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKHQsZSxyKXt9LGUucHJvdG90eXBlLm9uRXhpdD1mdW5jdGlvbih0LGUscil7fSxlLnByb3RvdHlwZS5vblJldGFpbj1mdW5jdGlvbih0LGUscil7fSxlLnByb3RvdHlwZS5vbkVudGVyPWZ1bmN0aW9uKHQsZSxyKXt9LGUucHJvdG90eXBlLm9uRmluaXNoPWZ1bmN0aW9uKHQsZSxyKXt9LGUucHJvdG90eXBlLm9uU3VjY2Vzcz1mdW5jdGlvbih0LGUscil7fSxlLnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKHQsZSxyKXt9LGUucHJvdG90eXBlLmNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5fcGx1Z2luYXBpLl9nZXRFdmVudHMoKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuaG9va1BoYXNlIT09ZC5UcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURX0pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIEtlKGUsZS5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UsdCl9KX0sZS5wcm90b3R5cGUuZ2V0SG9va3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3JlZ2lzdGVyZWRIb29rc1t0XX0sZS5wcm90b3R5cGUuYXBwbHlWaWV3Q29uZmlncz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl90cmVlQ2hhbmdlcy5lbnRlcmluZy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RhdGV9KTskZS5hcHBseVZpZXdDb25maWdzKHQudHJhbnNpdGlvblNlcnZpY2UuJHZpZXcsdGhpcy5fdHJlZUNoYW5nZXMudG8sZSl9LGUucHJvdG90eXBlLiRmcm9tPWZ1bmN0aW9uKCl7cmV0dXJuIEN0KHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pLnN0YXRlfSxlLnByb3RvdHlwZS4kdG89ZnVuY3Rpb24oKXtyZXR1cm4gQ3QodGhpcy5fdHJlZUNoYW5nZXMudG8pLnN0YXRlfSxlLnByb3RvdHlwZS5mcm9tPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20oKS5zZWxmfSxlLnByb3RvdHlwZS50bz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0bygpLnNlbGZ9LGUucHJvdG90eXBlLnRhcmdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldFN0YXRlfSxlLnByb3RvdHlwZS5pcz1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGU/dGhpcy5pcyh7dG86dC4kdG8oKS5uYW1lLGZyb206dC4kZnJvbSgpLm5hbWV9KTohKHQudG8mJiFKZSh0aGlzLiR0bygpLHQudG8sdGhpcyl8fHQuZnJvbSYmIUplKHRoaXMuJGZyb20oKSx0LmZyb20sdGhpcykpfSxlLnByb3RvdHlwZS5wYXJhbXM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVwidG9cIiksT2JqZWN0LmZyZWV6ZSh0aGlzLl90cmVlQ2hhbmdlc1t0XS5tYXAodyhcInBhcmFtVmFsdWVzXCIpKS5yZWR1Y2UocnQse30pKX0sZS5wcm90b3R5cGUucGFyYW1zQ2hhbmdlZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyYW1zKFwiZnJvbVwiKSxyPXRoaXMucGFyYW1zKFwidG9cIiksZT1bXS5jb25jYXQodGhpcy5fdHJlZUNoYW5nZXMudG8pLmNvbmNhdCh0aGlzLl90cmVlQ2hhbmdlcy5mcm9tKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQucGFyYW1TY2hlbWF9KS5yZWR1Y2UoZHQsW10pLnJlZHVjZSh5dCxbXSk7cmV0dXJuIHllLmNoYW5nZWQoZSx0LHIpLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0W2UuaWRdPXJbZS5pZF0sdH0se30pfSxlLnByb3RvdHlwZS5pbmplY3Rvcj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PVwidG9cIik7dmFyIHI9dGhpcy5fdHJlZUNoYW5nZXNbdF07cmV0dXJuIGUmJihyPSRlLnN1YlBhdGgocixmdW5jdGlvbih0KXtyZXR1cm4gdC5zdGF0ZT09PWV8fHQuc3RhdGUubmFtZT09PWV9KSksbmV3IE9lKHIpLmluamVjdG9yKCl9LGUucHJvdG90eXBlLmdldFJlc29sdmVUb2tlbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVwidG9cIiksbmV3IE9lKHRoaXMuX3RyZWVDaGFuZ2VzW3RdKS5nZXRUb2tlbnMoKX0sZS5wcm90b3R5cGUuYWRkUmVzb2x2YWJsZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPVwiXCIpLHQ9cChFZSkodCk/dDpuZXcgRWUodCk7dmFyIHI9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLm5hbWUsbj10aGlzLl90cmVlQ2hhbmdlcy50byxpPXN0KG4sZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RhdGUubmFtZT09PXJ9KTtuZXcgT2UobikuYWRkUmVzb2x2YWJsZXMoW3RdLGkuc3RhdGUpfSxlLnByb3RvdHlwZS5yZWRpcmVjdGVkRnJvbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zLnJlZGlyZWN0ZWRGcm9tfHxudWxsfSxlLnByb3RvdHlwZS5vcmlnaW5hbFRyYW5zaXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlZGlyZWN0ZWRGcm9tKCk7cmV0dXJuIHQmJnQub3JpZ2luYWxUcmFuc2l0aW9uKCl8fHRoaXN9LGUucHJvdG90eXBlLm9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc30sZS5wcm90b3R5cGUuZW50ZXJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gZnQodGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmcsdyhcInN0YXRlXCIpKS5tYXAoWmUpfSxlLnByb3RvdHlwZS5leGl0aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGZ0KHRoaXMuX3RyZWVDaGFuZ2VzLmV4aXRpbmcsdyhcInN0YXRlXCIpKS5tYXAoWmUpLnJldmVyc2UoKX0sZS5wcm90b3R5cGUucmV0YWluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnQodGhpcy5fdHJlZUNoYW5nZXMucmV0YWluZWQsdyhcInN0YXRlXCIpKS5tYXAoWmUpfSxlLnByb3RvdHlwZS52aWV3cz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PXQmJih0PVwiZW50ZXJpbmdcIik7dmFyIHI9dGhpcy5fdHJlZUNoYW5nZXNbdF07cmV0dXJuKHI9ZT9yLmZpbHRlcih5KFwic3RhdGVcIixlKSk6cikubWFwKHcoXCJ2aWV3c1wiKSkuZmlsdGVyKEIpLnJlZHVjZSh2dCxbXSl9LGUucHJvdG90eXBlLnRyZWVDaGFuZ2VzPWZ1bmN0aW9uKHQpe3JldHVybiB0P3RoaXMuX3RyZWVDaGFuZ2VzW3RdOnRoaXMuX3RyZWVDaGFuZ2VzfSxlLnByb3RvdHlwZS5yZWRpcmVjdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MSxyPXRoaXM7bnVsbCE9KHI9ci5yZWRpcmVjdGVkRnJvbSgpKTspaWYoMjA8KytlKXRocm93IG5ldyBFcnJvcihcIlRvbyBtYW55IGNvbnNlY3V0aXZlIFRyYW5zaXRpb24gcmVkaXJlY3RzICgyMCspXCIpO3ZhciBuPXtyZWRpcmVjdGVkRnJvbTp0aGlzLHNvdXJjZTpcInJlZGlyZWN0XCJ9O1widXJsXCI9PT10aGlzLm9wdGlvbnMoKS5zb3VyY2UmJiExIT09dC5vcHRpb25zKCkubG9jYXRpb24mJihuLmxvY2F0aW9uPVwicmVwbGFjZVwiKTt2YXIgaT1MKHt9LHRoaXMub3B0aW9ucygpLHQub3B0aW9ucygpLG4pO3Q9dC53aXRoT3B0aW9ucyhpLCEwKTt2YXIgbyxhPXRoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLmNyZWF0ZSh0aGlzLl90cmVlQ2hhbmdlcy5mcm9tLHQpLHU9dGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmcscz1hLl90cmVlQ2hhbmdlcy5lbnRlcmluZztyZXR1cm4gJGUubWF0Y2hpbmcocyx1LCRlLm5vbkR5bmFtaWNQYXJhbXMpLmZpbHRlcihsKChvPXQub3B0aW9ucygpLnJlbG9hZFN0YXRlLGZ1bmN0aW9uKHQpe3JldHVybiBvJiZ0LnN0YXRlLmluY2x1ZGVzW28ubmFtZV19KSkpLmZvckVhY2goZnVuY3Rpb24odCxlKXt0LnJlc29sdmFibGVzPXVbZV0ucmVzb2x2YWJsZXN9KSxhfSxlLnByb3RvdHlwZS5fY2hhbmdlZFBhcmFtcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3RyZWVDaGFuZ2VzO2lmKCF0aGlzLl9vcHRpb25zLnJlbG9hZCYmKCF0LmV4aXRpbmcubGVuZ3RoJiYhdC5lbnRlcmluZy5sZW5ndGgmJnQudG8ubGVuZ3RoPT09dC5mcm9tLmxlbmd0aCYmIVJ0KHQudG8sdC5mcm9tKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHRbMF0uc3RhdGUhPT10WzFdLnN0YXRlfSkucmVkdWNlKHB0LCExKSkpe3ZhciBlPXQudG8ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBhcmFtU2NoZW1hfSkscj1bdC50byx0LmZyb21dLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQucGFyYW1WYWx1ZXN9KX0pO3JldHVybiBSdChlLHJbMF0sclsxXSkubWFwKGZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0scj10WzFdLG49dFsyXTtyZXR1cm4geWUuY2hhbmdlZChlLHIsbil9KS5yZWR1Y2UodnQsW10pfX0sZS5wcm90b3R5cGUuZHluYW1pYz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NoYW5nZWRQYXJhbXMoKTtyZXR1cm4hIXQmJnQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmR5bmFtaWN9KS5yZWR1Y2UocHQsITEpfSxlLnByb3RvdHlwZS5pZ25vcmVkPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9pZ25vcmVkUmVhc29uKCl9LGUucHJvdG90eXBlLl9pZ25vcmVkUmVhc29uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uLG49dGhpcy5fb3B0aW9ucy5yZWxvYWRTdGF0ZSxlPWZ1bmN0aW9uKHQsZSl7aWYodC5sZW5ndGghPT1lLmxlbmd0aClyZXR1cm4hMTt2YXIgcj0kZS5tYXRjaGluZyh0LGUpO3JldHVybiB0Lmxlbmd0aD09PXIuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiFufHwhdC5zdGF0ZS5pbmNsdWRlc1tuLm5hbWVdfSkubGVuZ3RofSxyPXRoaXMudHJlZUNoYW5nZXMoKSxpPXQmJnQudHJlZUNoYW5nZXMoKTtyZXR1cm4gaSYmZShpLnRvLHIudG8pJiZlKGkuZXhpdGluZyxyLmV4aXRpbmcpP1wiU2FtZUFzUGVuZGluZ1wiOjA9PT1yLmV4aXRpbmcubGVuZ3RoJiYwPT09ci5lbnRlcmluZy5sZW5ndGgmJmUoci5mcm9tLHIudG8pP1wiU2FtZUFzQ3VycmVudFwiOnZvaWQgMH0sZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxyPXplLnJ1bkFsbEhvb2tzLG49ZnVuY3Rpb24odCl7cmV0dXJuIGUuX2hvb2tCdWlsZGVyLmJ1aWxkSG9va3NGb3JQaGFzZSh0KX0sdD1uKGQuVHJhbnNpdGlvbkhvb2tQaGFzZS5CRUZPUkUpO3JldHVybiB6ZS5pbnZva2VIb29rcyh0LGZ1bmN0aW9uKCl7dmFyIHQ9ZS5yb3V0ZXIuZ2xvYmFscztyZXR1cm4gdC5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZD1lLiRpZCx0LnRyYW5zaXRpb249ZSx0LnRyYW5zaXRpb25IaXN0b3J5LmVucXVldWUoZSksY2UudHJhY2VUcmFuc2l0aW9uU3RhcnQoZSksQS4kcS53aGVuKHZvaWQgMCl9KS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9bihkLlRyYW5zaXRpb25Ib29rUGhhc2UuUlVOKTtyZXR1cm4gemUuaW52b2tlSG9va3ModCxmdW5jdGlvbigpe3JldHVybiBBLiRxLndoZW4odm9pZCAwKX0pfSkudGhlbihmdW5jdGlvbigpe2NlLnRyYWNlU3VjY2VzcyhlLiR0bygpLGUpLGUuc3VjY2Vzcz0hMCxlLl9kZWZlcnJlZC5yZXNvbHZlKGUudG8oKSkscihuKGQuVHJhbnNpdGlvbkhvb2tQaGFzZS5TVUNDRVNTKSl9LGZ1bmN0aW9uKHQpe2NlLnRyYWNlRXJyb3IodCxlKSxlLnN1Y2Nlc3M9ITEsZS5fZGVmZXJyZWQucmVqZWN0KHQpLGUuX2Vycm9yPXQscihuKGQuVHJhbnNpdGlvbkhvb2tQaGFzZS5FUlJPUikpfSksdGhpcy5wcm9taXNlfSxlLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmVycm9yKCl8fHZvaWQgMCE9PXRoaXMuc3VjY2Vzc30sZS5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXtfKHRoaXMuc3VjY2VzcykmJih0aGlzLl9hYm9ydGVkPSEwKX0sZS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiR0bygpO2lmKHQuc2VsZi5hYnN0cmFjdClyZXR1cm4gQXQuaW52YWxpZChcIkNhbm5vdCB0cmFuc2l0aW9uIHRvIGFic3RyYWN0IHN0YXRlICdcIit0Lm5hbWUrXCInXCIpO3ZhciBlPXQucGFyYW1ldGVycygpLHI9dGhpcy5wYXJhbXMoKSxuPWUuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LnZhbGlkYXRlcyhyW3QuaWRdKX0pO2lmKG4ubGVuZ3RoKXt2YXIgaT1uLm1hcChmdW5jdGlvbih0KXtyZXR1cm5cIltcIit0LmlkK1wiOlwiK0J0KHJbdC5pZF0pK1wiXVwifSkuam9pbihcIiwgXCIpLG89XCJUaGUgZm9sbG93aW5nIHBhcmFtZXRlciB2YWx1ZXMgYXJlIG5vdCB2YWxpZCBmb3Igc3RhdGUgJ1wiK3QubmFtZStcIic6IFwiK2k7cmV0dXJuIEF0LmludmFsaWQobyl9cmV0dXJuITE9PT10aGlzLnN1Y2Nlc3M/dGhpcy5fZXJyb3I6dm9pZCAwfSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZnJvbSgpLGU9dGhpcy50bygpLHI9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10W1wiI1wiXSYmdm9pZCAwIT09dFtcIiNcIl0/dDpvdCh0LFtcIiNcIl0pfTtyZXR1cm5cIlRyYW5zaXRpb24jXCIrdGhpcy4kaWQrXCIoICdcIisoayh0KT90Lm5hbWU6dCkrXCInXCIrQnQocih0aGlzLl90cmVlQ2hhbmdlcy5mcm9tLm1hcCh3KFwicGFyYW1WYWx1ZXNcIikpLnJlZHVjZShydCx7fSkpKStcIiAtPiBcIisodGhpcy52YWxpZCgpP1wiXCI6XCIoWCkgXCIpK1wiJ1wiKyhrKGUpP2UubmFtZTplKStcIidcIitCdChyKHRoaXMucGFyYW1zKCkpKStcIiApXCJ9LGUuZGlUb2tlbj1lfSgpO2Z1bmN0aW9uIHRyKHQsZSl7dmFyIHI9W1wiXCIsXCJcIl0sbj10LnJlcGxhY2UoL1tcXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0vZyxcIlxcXFwkJlwiKTtpZighZSlyZXR1cm4gbjtzd2l0Y2goZS5zcXVhc2gpe2Nhc2UhMTpyPVtcIihcIixcIilcIisoZS5pc09wdGlvbmFsP1wiP1wiOlwiXCIpXTticmVhaztjYXNlITA6bj1uLnJlcGxhY2UoL1xcLyQvLFwiXCIpLHI9W1wiKD86LyhcIixcIil8Lyk/XCJdO2JyZWFrO2RlZmF1bHQ6cj1bXCIoXCIrZS5zcXVhc2grXCJ8XCIsXCIpP1wiXX1yZXR1cm4gbityWzBdK2UudHlwZS5wYXR0ZXJuLnNvdXJjZStyWzFdfXZhciBlcj1adChcIi9cIikscnI9e3N0YXRlOntwYXJhbXM6e319LHN0cmljdDohMCxjYXNlSW5zZW5zaXRpdmU6ITB9LG5yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbShvLGEsdCxlKXt2YXIgdT10aGlzO3RoaXMuX2NhY2hlPXtwYXRoOlt0aGlzXX0sdGhpcy5fY2hpbGRyZW49W10sdGhpcy5fcGFyYW1zPVtdLHRoaXMuX3NlZ21lbnRzPVtdLHRoaXMuX2NvbXBpbGVkPVtdLHRoaXMuY29uZmlnPWU9ZXQoZSxyciksdGhpcy5wYXR0ZXJuPW87Zm9yKHZhciByLG4saSxzPS8oWzoqXSkoW1xcd1xcW1xcXV0rKXxcXHsoW1xcd1xcW1xcXV0rKSg/OlxcOlxccyooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nLGM9LyhbOl0/KShbXFx3XFxbXFxdLi1dKyl8XFx7KFtcXHdcXFtcXF0uLV0rKSg/OlxcOlxccyooKD86W157fVxcXFxdK3xcXFxcLnxcXHsoPzpbXnt9XFxcXF0rfFxcXFwuKSpcXH0pKykpP1xcfS9nLGY9W10sbD0wLGg9ZnVuY3Rpb24odCl7aWYoIW0ubmFtZVZhbGlkYXRvci50ZXN0KHQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVyIG5hbWUgJ1wiK3QrXCInIGluIHBhdHRlcm4gJ1wiK28rXCInXCIpO2lmKHN0KHUuX3BhcmFtcyx5KFwiaWRcIix0KSkpdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICdcIit0K1wiJyBpbiBwYXR0ZXJuICdcIitvK1wiJ1wiKX0scD1mdW5jdGlvbih0LGUpe3ZhciByLG49dFsyXXx8dFszXSxpPWU/dFs0XTp0WzRdfHwoXCIqXCI9PT10WzFdP1wiW1xcXFxzXFxcXFNdKlwiOm51bGwpO3JldHVybntpZDpuLHJlZ2V4cDppLHNlZ21lbnQ6by5zdWJzdHJpbmcobCx0LmluZGV4KSx0eXBlOmk/YS50eXBlKGkpfHwocj1pLHooYS50eXBlKGU/XCJxdWVyeVwiOlwicGF0aFwiKSx7cGF0dGVybjpuZXcgUmVnRXhwKHIsdS5jb25maWcuY2FzZUluc2Vuc2l0aXZlP1wiaVwiOnZvaWQgMCl9KSk6bnVsbH19OyhyPXMuZXhlYyhvKSkmJiEoMDw9KG49cChyLCExKSkuc2VnbWVudC5pbmRleE9mKFwiP1wiKSk7KWgobi5pZCksdGhpcy5fcGFyYW1zLnB1c2godC5mcm9tUGF0aChuLmlkLG4udHlwZSxlLnN0YXRlKSksdGhpcy5fc2VnbWVudHMucHVzaChuLnNlZ21lbnQpLGYucHVzaChbbi5zZWdtZW50LEN0KHRoaXMuX3BhcmFtcyldKSxsPXMubGFzdEluZGV4O3ZhciB2PShpPW8uc3Vic3RyaW5nKGwpKS5pbmRleE9mKFwiP1wiKTtpZigwPD12KXt2YXIgZD1pLnN1YnN0cmluZyh2KTtpZihpPWkuc3Vic3RyaW5nKDAsdiksMDxkLmxlbmd0aClmb3IobD0wO3I9Yy5leGVjKGQpOyloKChuPXAociwhMCkpLmlkKSx0aGlzLl9wYXJhbXMucHVzaCh0LmZyb21TZWFyY2gobi5pZCxuLnR5cGUsZS5zdGF0ZSkpLGw9cy5sYXN0SW5kZXh9dGhpcy5fc2VnbWVudHMucHVzaChpKSx0aGlzLl9jb21waWxlZD1mLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdHIuYXBwbHkobnVsbCx0KX0pLmNvbmNhdCh0cihpKSl9cmV0dXJuIG0uZW5jb2RlRGFzaGVzPWZ1bmN0aW9uKHQpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQodCkucmVwbGFjZSgvLS9nLGZ1bmN0aW9uKHQpe3JldHVyblwiJTVDJVwiK3QuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKX0pfSxtLnBhdGhTZWdtZW50c0FuZFBhcmFtcz1mdW5jdGlvbih0KXtyZXR1cm4gUnQodC5fc2VnbWVudHMsdC5fcGFyYW1zLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5sb2NhdGlvbj09PWQuRGVmVHlwZS5QQVRIfSkuY29uY2F0KHZvaWQgMCkpLnJlZHVjZSh2dCxbXSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiXCIhPT10JiZFKHQpfSl9LG0ucXVlcnlQYXJhbXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BhcmFtcy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQubG9jYXRpb249PT1kLkRlZlR5cGUuU0VBUkNIfSl9LG0uY29tcGFyZT1mdW5jdGlvbih0LGUpe3ZhciByPWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9jYWNoZS53ZWlnaHRzPXQuX2NhY2hlLndlaWdodHN8fChlPXQsZS5fY2FjaGUuc2VnbWVudHM9ZS5fY2FjaGUuc2VnbWVudHN8fGUuX2NhY2hlLnBhdGgubWFwKG0ucGF0aFNlZ21lbnRzQW5kUGFyYW1zKS5yZWR1Y2UodnQsW10pLnJlZHVjZShYdCxbXSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBQKHQpP2VyKHQpOnR9KS5yZWR1Y2UodnQsW10pKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCIvXCI9PT10PzE6UCh0KT8yOnQgaW5zdGFuY2VvZiB5ZT8zOnZvaWQgMH0pO3ZhciBlfSxuPXIodCksaT1yKGUpOyFmdW5jdGlvbih0LGUscil7Zm9yKHZhciBuPU1hdGgubWF4KHQubGVuZ3RoLGUubGVuZ3RoKTt0Lmxlbmd0aDxuOyl0LnB1c2gocik7Zm9yKDtlLmxlbmd0aDxuOyllLnB1c2gocil9KG4saSwwKTt2YXIgbyxhLHU9UnQobixpKTtmb3IoYT0wO2E8dS5sZW5ndGg7YSsrKWlmKDAhPT0obz11W2FdWzBdLXVbYV1bMV0pKXJldHVybiBvO3JldHVybiAwfSxtLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLnB1c2godCksdC5fY2FjaGU9e3BhdGg6dGhpcy5fY2FjaGUucGF0aC5jb25jYXQodCkscGFyZW50OnRoaXMscGF0dGVybjpudWxsfSx0fSxtLnByb3RvdHlwZS5pc1Jvb3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FjaGUucGF0aFswXT09PXRoaXN9LG0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF0dGVybn0sbS5wcm90b3R5cGUuZXhlYz1mdW5jdGlvbih0LG4sZSxyKXt2YXIgaT10aGlzO3ZvaWQgMD09PW4mJihuPXt9KSx2b2lkIDA9PT1yJiYocj17fSk7dmFyIG8sYSx1LHM9KG89dGhpcy5fY2FjaGUsYT1cInBhdHRlcm5cIix1PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBSZWdFeHAoW1wiXlwiLGd0KGkuX2NhY2hlLnBhdGgubWFwKHcoXCJfY29tcGlsZWRcIikpKS5qb2luKFwiXCIpLCExPT09aS5jb25maWcuc3RyaWN0P1wiLz9cIjpcIlwiLFwiJFwiXS5qb2luKFwiXCIpLGkuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZT9cImlcIjp2b2lkIDApfSxvW2FdPW9bYV18fHUoKSkuZXhlYyh0KTtpZighcylyZXR1cm4gbnVsbDt2YXIgYyxmPXRoaXMucGFyYW1ldGVycygpLGw9Zi5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIXQuaXNTZWFyY2goKX0pLGg9Zi5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNTZWFyY2goKX0pLHA9dGhpcy5fY2FjaGUucGF0aC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuX3NlZ21lbnRzLmxlbmd0aC0xfSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX0pLHY9e307aWYocCE9PXMubGVuZ3RoLTEpdGhyb3cgbmV3IEVycm9yKFwiVW5iYWxhbmNlZCBjYXB0dXJlIGdyb3VwIGluIHJvdXRlICdcIit0aGlzLnBhdHRlcm4rXCInXCIpO2Zvcih2YXIgZD0wO2Q8cDtkKyspe2Zvcih2YXIgbT1sW2RdLHk9c1tkKzFdLGc9MDtnPG0ucmVwbGFjZS5sZW5ndGg7ZysrKW0ucmVwbGFjZVtnXS5mcm9tPT09eSYmKHk9bS5yZXBsYWNlW2ddLnRvKTt5JiYhMD09PW0uYXJyYXkmJih2b2lkIDAseT1mdChmdCgoYz1mdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbihcIlwiKX0pKHkpLnNwbGl0KC8tKD8hXFxcXCkvKSxjKSxmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9cXFxcLS9nLFwiLVwiKX0pLnJldmVyc2UoKSksRSh5KSYmKHk9bS50eXBlLmRlY29kZSh5KSksdlttLmlkXT1tLnZhbHVlKHkpfXJldHVybiBoLmZvckVhY2goZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5bdC5pZF0scj0wO3I8dC5yZXBsYWNlLmxlbmd0aDtyKyspdC5yZXBsYWNlW3JdLmZyb209PT1lJiYoZT10LnJlcGxhY2Vbcl0udG8pO0UoZSkmJihlPXQudHlwZS5kZWNvZGUoZSkpLHZbdC5pZF09dC52YWx1ZShlKX0pLGUmJih2W1wiI1wiXT1lKSx2fSxtLnByb3RvdHlwZS5wYXJhbWV0ZXJzPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD17fSksITE9PT10LmluaGVyaXQ/dGhpcy5fcGFyYW1zOmd0KHRoaXMuX2NhY2hlLnBhdGgubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYXJhbXN9KSl9LG0ucHJvdG90eXBlLnBhcmFtZXRlcj1mdW5jdGlvbihuLHQpe3ZhciBpPXRoaXM7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBlPXRoaXMuX2NhY2hlLnBhcmVudDtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPWkuX3BhcmFtczt0PGUubGVuZ3RoO3QrKyl7dmFyIHI9ZVt0XTtpZihyLmlkPT09bilyZXR1cm4gcn19KCl8fCExIT09dC5pbmhlcml0JiZlJiZlLnBhcmFtZXRlcihuLHQpfHxudWxsfSxtLnByb3RvdHlwZS52YWxpZGF0ZXM9ZnVuY3Rpb24obil7cmV0dXJuIG49bnx8e30sdGhpcy5wYXJhbWV0ZXJzKCkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBuLmhhc093blByb3BlcnR5KHQuaWQpfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiByPW5bKGU9dCkuaWRdLCFlfHxlLnZhbGlkYXRlcyhyKTt2YXIgZSxyfSkucmVkdWNlKGh0LCEwKX0sbS5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEmJihhPXt9KTt2YXIgdD10aGlzLl9jYWNoZS5wYXRoLGU9dC5tYXAobS5wYXRoU2VnbWVudHNBbmRQYXJhbXMpLnJlZHVjZSh2dCxbXSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBQKHQpP3Q6bih0KX0pLHI9dC5tYXAobS5xdWVyeVBhcmFtcykucmVkdWNlKHZ0LFtdKS5tYXAobik7aWYoZS5jb25jYXQocikuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiExPT09dC5pc1ZhbGlkfSkubGVuZ3RoKXJldHVybiBudWxsO2Z1bmN0aW9uIG4odCl7dmFyIGU9dC52YWx1ZShhW3QuaWRdKSxyPXQudmFsaWRhdGVzKGUpLG49dC5pc0RlZmF1bHRWYWx1ZShlKSxpPSEhbiYmdC5zcXVhc2gsbz10LnR5cGUuZW5jb2RlKGUpO3JldHVybntwYXJhbTp0LHZhbHVlOmUsaXNWYWxpZDpyLGlzRGVmYXVsdFZhbHVlOm4sc3F1YXNoOmksZW5jb2RlZDpvfX12YXIgaT1lLnJlZHVjZShmdW5jdGlvbih0LGUpe2lmKFAoZSkpcmV0dXJuIHQrZTt2YXIgcj1lLnNxdWFzaCxuPWUuZW5jb2RlZCxpPWUucGFyYW07cmV0dXJuITA9PT1yP3QubWF0Y2goL1xcLyQvKT90LnNsaWNlKDAsLTEpOnQ6UChyKT90K3I6ITEhPT1yP3Q6bnVsbD09bj90Ok8obik/dCtmdChuLG0uZW5jb2RlRGFzaGVzKS5qb2luKFwiLVwiKTppLnJhdz90K246dCtlbmNvZGVVUklDb21wb25lbnQobil9LFwiXCIpLG89ci5tYXAoZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJhbSxyPXQuc3F1YXNoLG49dC5lbmNvZGVkLGk9dC5pc0RlZmF1bHRWYWx1ZTtpZighKG51bGw9PW58fGkmJiExIT09cikmJihPKG4pfHwobj1bbl0pLDAhPT1uLmxlbmd0aCkpcmV0dXJuIGUucmF3fHwobj1mdChuLGVuY29kZVVSSUNvbXBvbmVudCkpLG4ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLmlkK1wiPVwiK3R9KX0pLmZpbHRlcihCKS5yZWR1Y2UodnQsW10pLmpvaW4oXCImXCIpO3JldHVybiBpKyhvP1wiP1wiK286XCJcIikrKGFbXCIjXCJdP1wiI1wiK2FbXCIjXCJdOlwiXCIpfSxtLm5hbWVWYWxpZGF0b3I9L15cXHcrKFstLl0rXFx3KykqKD86XFxbXFxdKT8kLyxtfSgpLGlyPWZ1bmN0aW9uKCl7cmV0dXJuKGlyPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBpIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiYodFtpXT1lW2ldKTtyZXR1cm4gdH0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMucm91dGVyPXR9cmV0dXJuIHQucHJvdG90eXBlLmZyb21Db25maWc9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBuZXcgeWUodCxlLGQuRGVmVHlwZS5DT05GSUcsdGhpcy5yb3V0ZXIudXJsU2VydmljZS5jb25maWcscil9LHQucHJvdG90eXBlLmZyb21QYXRoPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gbmV3IHllKHQsZSxkLkRlZlR5cGUuUEFUSCx0aGlzLnJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZyxyKX0sdC5wcm90b3R5cGUuZnJvbVNlYXJjaD1mdW5jdGlvbih0LGUscil7cmV0dXJuIG5ldyB5ZSh0LGUsZC5EZWZUeXBlLlNFQVJDSCx0aGlzLnJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZyxyKX0sdH0oKSxhcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIG49dGhpczt0aGlzLnJvdXRlcj10LHRoaXMucGFyYW1GYWN0b3J5PW5ldyBvcih0aGlzLnJvdXRlciksdGhpcy5jYXNlSW5zZW5zaXRpdmU9ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZSh0KX0sdGhpcy5kZWZhdWx0U3F1YXNoUG9saWN5PWZ1bmN0aW9uKHQpe3JldHVybiBuLnJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZy5kZWZhdWx0U3F1YXNoUG9saWN5KHQpfSx0aGlzLnN0cmljdE1vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UuY29uZmlnLnN0cmljdE1vZGUodCl9LHRoaXMudHlwZT1mdW5jdGlvbih0LGUscil7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UuY29uZmlnLnR5cGUodCxlLHIpfHxufSxMKHRoaXMse1VybE1hdGNoZXI6bnIsUGFyYW06eWV9KX1yZXR1cm4gdC5wcm90b3R5cGUuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMucm91dGVyLnVybFNlcnZpY2UuY29uZmlnLG49ZSYmIWUuc3RhdGUmJmUucGFyYW1zO2U9bj9pcih7c3RhdGU6e3BhcmFtczpufX0sZSk6ZTt2YXIgaT17c3RyaWN0OnIuX2lzU3RyaWN0TW9kZSxjYXNlSW5zZW5zaXRpdmU6ci5faXNDYXNlSW5zZW5zaXRpdmV9O3JldHVybiBuZXcgbnIodCxyLnBhcmFtVHlwZXMsdGhpcy5wYXJhbUZhY3RvcnksTChpLGUpKX0sdC5wcm90b3R5cGUuaXNNYXRjaGVyPWZ1bmN0aW9uKHIpe2lmKCFrKHIpKXJldHVybiExO3ZhciBuPSEwO3JldHVybiBOKG5yLnByb3RvdHlwZSxmdW5jdGlvbih0LGUpe0ModCkmJihuPW4mJkUocltlXSkmJkMocltlXSkpfSksbn0sdC5wcm90b3R5cGUuJGdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucm91dGVyLnVybFNlcnZpY2UuY29uZmlnO3JldHVybiB0LnBhcmFtVHlwZXMuZW5xdWV1ZT0hMSx0LnBhcmFtVHlwZXMuX2ZsdXNoVHlwZVF1ZXVlKCksdGhpc30sdH0oKSx1cj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5yb3V0ZXI9dH1yZXR1cm4gdC5wcm90b3R5cGUuY29tcGlsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkuY29tcGlsZSh0KX0sdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcyxuPUxlLmlzU3RhdGUsaT1tKFtbUCxmdW5jdGlvbih0KXtyZXR1cm4gaShyLmNvbXBpbGUodCkpfV0sW3AobnIpLGZ1bmN0aW9uKHQpe3JldHVybiByLmZyb21VcmxNYXRjaGVyKHQsZSl9XSxbbixmdW5jdGlvbih0KXtyZXR1cm4gci5mcm9tU3RhdGUodCxyLnJvdXRlcil9XSxbcChSZWdFeHApLGZ1bmN0aW9uKHQpe3JldHVybiByLmZyb21SZWdFeHAodCxlKX1dLFtDLGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgc3IodCxlKX1dXSksbz1pKHQpO2lmKCFvKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgJ3doYXQnIGluIHdoZW4oKVwiKTtyZXR1cm4gb30sdC5wcm90b3R5cGUuZnJvbVVybE1hdGNoZXI9ZnVuY3Rpb24ocixlKXt2YXIgdD1lO1AoZSkmJihlPXRoaXMucm91dGVyLnVybE1hdGNoZXJGYWN0b3J5LmNvbXBpbGUoZSkpLHAobnIpKGUpJiYodD1mdW5jdGlvbih0KXtyZXR1cm4gZS5mb3JtYXQodCl9KTt2YXIgbj17dXJsTWF0Y2hlcjpyLG1hdGNoUHJpb3JpdHk6ZnVuY3Rpb24oZSl7dmFyIHQ9ci5wYXJhbWV0ZXJzKCkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzT3B0aW9uYWx9KTtyZXR1cm4gdC5sZW5ndGg/dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIGVbdC5pZF19KS5sZW5ndGgvdC5sZW5ndGg6MWUtNn0sdHlwZTpcIlVSTE1BVENIRVJcIn07cmV0dXJuIEwobmV3IHNyKGZ1bmN0aW9uKHQpe3ZhciBlPXIuZXhlYyh0LnBhdGgsdC5zZWFyY2gsdC5oYXNoKTtyZXR1cm4gci52YWxpZGF0ZXMoZSkmJmV9LHQpLG4pfSx0LnByb3RvdHlwZS5mcm9tU3RhdGU9ZnVuY3Rpb24obixpKXt2YXIgdD17c3RhdGU6bix0eXBlOlwiU1RBVEVcIn07cmV0dXJuIEwodGhpcy5mcm9tVXJsTWF0Y2hlcihuLnVybCxmdW5jdGlvbih0KXt2YXIgZT1pLnN0YXRlU2VydmljZSxyPWkuZ2xvYmFscztlLmhyZWYobix0KSE9PWUuaHJlZihyLmN1cnJlbnQsci5wYXJhbXMpJiZlLnRyYW5zaXRpb25UbyhuLHQse2luaGVyaXQ6ITAsc291cmNlOlwidXJsXCJ9KX0pLHQpfSx0LnByb3RvdHlwZS5mcm9tUmVnRXhwPWZ1bmN0aW9uKGUsdCl7aWYoZS5nbG9iYWx8fGUuc3RpY2t5KXRocm93IG5ldyBFcnJvcihcIlJ1bGUgUmVnRXhwIG11c3Qgbm90IGJlIGdsb2JhbCBvciBzdGlja3lcIik7dmFyIHI9UCh0KT9mdW5jdGlvbihyKXtyZXR1cm4gdC5yZXBsYWNlKC9cXCQoXFwkfFxcZHsxLDJ9KS8sZnVuY3Rpb24odCxlKXtyZXR1cm4gcltcIiRcIj09PWU/MDpOdW1iZXIoZSldfSl9OnQsbj17cmVnZXhwOmUsdHlwZTpcIlJFR0VYUFwifTtyZXR1cm4gTChuZXcgc3IoZnVuY3Rpb24odCl7cmV0dXJuIGUuZXhlYyh0LnBhdGgpfSxyKSxuKX0sdC5pc1VybFJ1bGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJltcInR5cGVcIixcIm1hdGNoXCIsXCJoYW5kbGVyXCJdLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiBFKGVbdF0pfSl9LHR9KCksc3I9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzO3RoaXMubWF0Y2g9dCx0aGlzLnR5cGU9XCJSQVdcIix0aGlzLm1hdGNoUHJpb3JpdHk9ZnVuY3Rpb24odCl7cmV0dXJuIDAtci4kaWR9LHRoaXMuaGFuZGxlcj1lfHxCfTt2YXIgY3IsZnI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBuPXRoaXM7dGhpcy5yb3V0ZXI9dCx0aGlzLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2Uuc3luYyh0KX0sdGhpcy5saXN0ZW49ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UubGlzdGVuKHQpfSx0aGlzLmRlZmVySW50ZXJjZXB0PWZ1bmN0aW9uKHQpe3JldHVybiBuLnJvdXRlci51cmxTZXJ2aWNlLmRlZmVySW50ZXJjZXB0KHQpfSx0aGlzLm1hdGNoPWZ1bmN0aW9uKHQpe3JldHVybiBuLnJvdXRlci51cmxTZXJ2aWNlLm1hdGNoKHQpfSx0aGlzLmluaXRpYWw9ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UucnVsZXMuaW5pdGlhbCh0KX0sdGhpcy5vdGhlcndpc2U9ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UucnVsZXMub3RoZXJ3aXNlKHQpfSx0aGlzLnJlbW92ZVJ1bGU9ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UucnVsZXMucmVtb3ZlUnVsZSh0KX0sdGhpcy5ydWxlPWZ1bmN0aW9uKHQpe3JldHVybiBuLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLnJ1bGUodCl9LHRoaXMucnVsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbi5yb3V0ZXIudXJsU2VydmljZS5ydWxlcy5ydWxlcygpfSx0aGlzLnNvcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG4ucm91dGVyLnVybFNlcnZpY2UucnVsZXMuc29ydCh0KX0sdGhpcy53aGVuPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gbi5yb3V0ZXIudXJsU2VydmljZS5ydWxlcy53aGVuKHQsZSxyKX0sdGhpcy51cmxSdWxlRmFjdG9yeT1uZXcgdXIodCl9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnJvdXRlci5sb2NhdGlvblNlcnZpY2U7dD90aGlzLmxvY2F0aW9uPWUudXJsKCk6ZS51cmwoKSE9PXRoaXMubG9jYXRpb24mJmUudXJsKHRoaXMubG9jYXRpb24sITApfSx0LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yJiYhIXIucmVwbGFjZTt0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnVybCh0LmZvcm1hdChlfHx7fSksbil9LHQucHJvdG90eXBlLmhyZWY9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQuZm9ybWF0KGUpO2lmKG51bGw9PW4pcmV0dXJuIG51bGw7cj1yfHx7YWJzb2x1dGU6ITF9O3ZhciBpLG8sYSx1LHM9dGhpcy5yb3V0ZXIudXJsU2VydmljZS5jb25maWcsYz1zLmh0bWw1TW9kZSgpO2lmKGN8fG51bGw9PT1ufHwobj1cIiNcIitzLmhhc2hQcmVmaXgoKStuKSxpPW4sbz1jLGE9ci5hYnNvbHV0ZSxuPVwiL1wiPT09KHU9cy5iYXNlSHJlZigpKT9pOm8/enQodSkraTphP3Uuc2xpY2UoMSkraTppLCFyLmFic29sdXRlfHwhbilyZXR1cm4gbjt2YXIgZj0hYyYmbj9cIi9cIjpcIlwiLGw9cy5wb3J0KCksaD04MD09PWx8fDQ0Mz09PWw/XCJcIjpcIjpcIitsO3JldHVybltzLnByb3RvY29sKCksXCI6Ly9cIixzLmhvc3QoKSxoLGYsbl0uam9pbihcIlwiKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaW50ZXJjZXB0RGVmZXJyZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm91dGVyLnVybFNlcnZpY2UuaW50ZXJjZXB0RGVmZXJyZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdH0oKSxscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHModCl7dmFyIHI9dGhpczt0aGlzLnJvdXRlcj10LHRoaXMuX3VpVmlld3M9W10sdGhpcy5fdmlld0NvbmZpZ3M9W10sdGhpcy5fdmlld0NvbmZpZ0ZhY3Rvcmllcz17fSx0aGlzLl9saXN0ZW5lcnM9W10sdGhpcy5fcGx1Z2luYXBpPXtfcm9vdFZpZXdDb250ZXh0OnRoaXMuX3Jvb3RWaWV3Q29udGV4dC5iaW5kKHRoaXMpLF92aWV3Q29uZmlnRmFjdG9yeTp0aGlzLl92aWV3Q29uZmlnRmFjdG9yeS5iaW5kKHRoaXMpLF9yZWdpc3RlcmVkVUlWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiBzdChyLl91aVZpZXdzLGZ1bmN0aW9uKHQpe3JldHVybiByLnJvdXRlci4kaWQrXCIuXCIrdC5pZD09PWV9KX0sX3JlZ2lzdGVyZWRVSVZpZXdzOmZ1bmN0aW9uKCl7cmV0dXJuIHIuX3VpVmlld3N9LF9hY3RpdmVWaWV3Q29uZmlnczpmdW5jdGlvbigpe3JldHVybiByLl92aWV3Q29uZmlnc30sX29uU3luYzpmdW5jdGlvbih0KXtyZXR1cm4gci5fbGlzdGVuZXJzLnB1c2godCksZnVuY3Rpb24oKXtyZXR1cm4gSyhyLl9saXN0ZW5lcnMsdCl9fX19cmV0dXJuIHMubm9ybWFsaXplVUlWaWV3VGFyZ2V0PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9XCJcIik7dmFyIHI9ZS5zcGxpdChcIkBcIiksbj1yWzBdfHxcIiRkZWZhdWx0XCIsaT1QKHJbMV0pP3JbMV06XCJeXCIsbz0vXihcXF4oPzpcXC5cXF4pKilcXC4oLiokKS8uZXhlYyhuKTtvJiYoaT1vWzFdLG49b1syXSksXCIhXCI9PT1uLmNoYXJBdCgwKSYmKG49bi5zdWJzdHIoMSksaT1cIlwiKTsvXihcXF4oPzpcXC5cXF4pKikkLy5leGVjKGkpP2k9aS5zcGxpdChcIi5cIikucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQucGFyZW50fSx0KS5uYW1lOlwiLlwiPT09aSYmKGk9dC5uYW1lKTtyZXR1cm57dWlWaWV3TmFtZTpuLHVpVmlld0NvbnRleHRBbmNob3I6aX19LHMucHJvdG90eXBlLl9yb290Vmlld0NvbnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jvb3RDb250ZXh0PXR8fHRoaXMuX3Jvb3RDb250ZXh0fSxzLnByb3RvdHlwZS5fdmlld0NvbmZpZ0ZhY3Rvcnk9ZnVuY3Rpb24odCxlKXt0aGlzLl92aWV3Q29uZmlnRmFjdG9yaWVzW3RdPWV9LHMucHJvdG90eXBlLmNyZWF0ZVZpZXdDb25maWc9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLl92aWV3Q29uZmlnRmFjdG9yaWVzW2UuJHR5cGVdO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIlZpZXdTZXJ2aWNlOiBObyB2aWV3IGNvbmZpZyBmYWN0b3J5IHJlZ2lzdGVyZWQgZm9yIHR5cGUgXCIrZS4kdHlwZSk7dmFyIG49cih0LGUpO3JldHVybiBPKG4pP246W25dfSxzLnByb3RvdHlwZS5kZWFjdGl2YXRlVmlld0NvbmZpZz1mdW5jdGlvbih0KXtjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoXCI8LSBSZW1vdmluZ1wiLHQpLEsodGhpcy5fdmlld0NvbmZpZ3MsdCl9LHMucHJvdG90eXBlLmFjdGl2YXRlVmlld0NvbmZpZz1mdW5jdGlvbih0KXtjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoXCItPiBSZWdpc3RlcmluZ1wiLHQpLHRoaXMuX3ZpZXdDb25maWdzLnB1c2godCl9LHMucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24oKXt2YXIgcj10aGlzLG49dGhpcy5fdWlWaWV3cy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuW3QuZnFuLHRdfSkucmVkdWNlKEV0LHt9KTtmdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT10LnZpZXdEZWNsLiRjb250ZXh0LHI9MDsrK3ImJmUucGFyZW50OyllPWUucGFyZW50O3JldHVybiByfXZhciBvPWMoZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIGUqKHQociktdChuKSl9KSx0PXRoaXMuX3VpVmlld3Muc29ydChvKGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnBhcmVudD9lKHQucGFyZW50KSsxOjF9O3JldHVybiAxZTQqdC5mcW4uc3BsaXQoXCIuXCIpLmxlbmd0aCtlKHQuY3JlYXRpb25Db250ZXh0KX0sMSkpLm1hcChmdW5jdGlvbih0KXt2YXIgZT1yLl92aWV3Q29uZmlncy5maWx0ZXIocy5tYXRjaGVzKG4sdCkpO3JldHVybiAxPGUubGVuZ3RoJiZlLnNvcnQobyhpLC0xKSkse3VpVmlldzp0LHZpZXdDb25maWc6ZVswXX19KSxlPXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnZpZXdDb25maWd9KSxhPXRoaXMuX3ZpZXdDb25maWdzLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hSihlLHQpfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybnt1aVZpZXc6dm9pZCAwLHZpZXdDb25maWc6dH19KTt0LmZvckVhY2goZnVuY3Rpb24odCl7LTEhPT1yLl91aVZpZXdzLmluZGV4T2YodC51aVZpZXcpJiZ0LnVpVmlldy5jb25maWdVcGRhdGVkKHQudmlld0NvbmZpZyl9KTt2YXIgdT10LmNvbmNhdChhKTt0aGlzLl9saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdCh1KX0pLGNlLnRyYWNlVmlld1N5bmModSl9LHMucHJvdG90eXBlLnJlZ2lzdGVyVUlWaWV3PWZ1bmN0aW9uKGUpe2NlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudChcIi0+IFJlZ2lzdGVyaW5nXCIsZSk7dmFyIHQ9dGhpcy5fdWlWaWV3cztyZXR1cm4gdC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuZnFuPT09ZS5mcW4mJnQuJHR5cGU9PT1lLiR0eXBlfSkubGVuZ3RoJiZjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoXCIhISEhIGR1cGxpY2F0ZSB1aVZpZXcgbmFtZWQ6XCIsZSksdC5wdXNoKGUpLHRoaXMuc3luYygpLGZ1bmN0aW9uKCl7LTEhPT10LmluZGV4T2YoZSk/KGNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudChcIjwtIERlcmVnaXN0ZXJpbmdcIixlKSxLKHQpKGUpKTpjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoXCJUcmllZCByZW1vdmluZyBub24tcmVnaXN0ZXJlZCB1aVZpZXdcIixlKX19LHMucHJvdG90eXBlLmF2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl91aVZpZXdzLm1hcCh3KFwiZnFuXCIpKX0scy5wcm90b3R5cGUuYWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VpVmlld3MuZmlsdGVyKHcoXCIkY29uZmlnXCIpKS5tYXAodyhcIm5hbWVcIikpfSxzLm1hdGNoZXM9ZnVuY3Rpb24odSxzKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYocy4kdHlwZSE9PXQudmlld0RlY2wuJHR5cGUpcmV0dXJuITE7dmFyIGU9dC52aWV3RGVjbCxyPWUuJHVpVmlld05hbWUuc3BsaXQoXCIuXCIpLG49cy5mcW4uc3BsaXQoXCIuXCIpO2lmKCFNKHIsbi5zbGljZSgwLXIubGVuZ3RoKSkpcmV0dXJuITE7dmFyIGk9MS1yLmxlbmd0aHx8dm9pZCAwLG89bi5zbGljZSgwLGkpLmpvaW4oXCIuXCIpLGE9dVtvXS5jcmVhdGlvbkNvbnRleHQ7cmV0dXJuIGUuJHVpVmlld0NvbnRleHRBbmNob3I9PT0oYSYmYS5uYW1lKX19LHN9KCksaHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5wYXJhbXM9bmV3IHdlLHRoaXMubGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQ9LTEsdGhpcy50cmFuc2l0aW9uSGlzdG9yeT1uZXcgSXQoW10sMSksdGhpcy5zdWNjZXNzZnVsVHJhbnNpdGlvbnM9bmV3IEl0KFtdLDEpfXJldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2l0aW9uSGlzdG9yeS5jbGVhcigpLHRoaXMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLmNsZWFyKCksdGhpcy50cmFuc2l0aW9uPW51bGx9LHR9KCk7ZnVuY3Rpb24gcHIodCl7aWYoIShDKHQpfHxQKHQpfHxwKFNlKSh0KXx8U2UuaXNEZWYodCkpKXRocm93IG5ldyBFcnJvcihcIidoYW5kbGVyJyBtdXN0IGJlIGEgc3RyaW5nLCBmdW5jdGlvbiwgVGFyZ2V0U3RhdGUsIG9yIGhhdmUgYSBzdGF0ZTogJ25ld3RhcmdldCcgcHJvcGVydHlcIik7cmV0dXJuIEModCk/dDp2KHQpfWNyPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLG8sYSx1LHMsYyxmPShyPXQsKGUucHJpb3JpdHl8fDApLShyLnByaW9yaXR5fHwwKSk7cmV0dXJuIDAhPT1mP2Y6KG49ZSwwIT09KGY9KChpPXtTVEFURTo0LFVSTE1BVENIRVI6NCxSRUdFWFA6MyxSQVc6MixPVEhFUjoxfSlbdC50eXBlXXx8MCktKGlbbi50eXBlXXx8MCkpP2Y6KGE9ZSwwIT09KGY9KG89dCkudXJsTWF0Y2hlciYmYS51cmxNYXRjaGVyP25yLmNvbXBhcmUoby51cmxNYXRjaGVyLGEudXJsTWF0Y2hlcik6MCk/Zjoocz1lLChjPXtTVEFURTohMCxVUkxNQVRDSEVSOiEwfSlbKHU9dCkudHlwZV0mJmNbcy50eXBlXT8wOih1LiRpZHx8MCktKHMuJGlkfHwwKSkpKX07dmFyIHZyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLnJvdXRlcj10LHRoaXMuX3NvcnRGbj1jcix0aGlzLl9ydWxlcz1bXSx0aGlzLl9pZD0wLHRoaXMudXJsUnVsZUZhY3Rvcnk9bmV3IHVyKHQpfXJldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKHQpe3RoaXMuX3J1bGVzPVtdLGRlbGV0ZSB0aGlzLl9vdGhlcndpc2VGbn0sdC5wcm90b3R5cGUuaW5pdGlhbD1mdW5jdGlvbih0KXt2YXIgZT1wcih0KTt0aGlzLnJ1bGUodGhpcy51cmxSdWxlRmFjdG9yeS5jcmVhdGUoZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09PWUuZ2xvYmFscy50cmFuc2l0aW9uSGlzdG9yeS5zaXplKCkmJiEhL15cXC8/JC8uZXhlYyh0LnBhdGgpfSxlKSl9LHQucHJvdG90eXBlLm90aGVyd2lzZT1mdW5jdGlvbih0KXt2YXIgZT1wcih0KTt0aGlzLl9vdGhlcndpc2VGbj10aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZSh2KCEwKSxlKSx0aGlzLl9zb3J0ZWQ9ITF9LHQucHJvdG90eXBlLnJlbW92ZVJ1bGU9ZnVuY3Rpb24odCl7Syh0aGlzLl9ydWxlcyx0KX0sdC5wcm90b3R5cGUucnVsZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCF1ci5pc1VybFJ1bGUodCkpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBydWxlXCIpO3JldHVybiB0LiRpZD10aGlzLl9pZCsrLHQucHJpb3JpdHk9dC5wcmlvcml0eXx8MCx0aGlzLl9ydWxlcy5wdXNoKHQpLHRoaXMuX3NvcnRlZD0hMSxmdW5jdGlvbigpe3JldHVybiBlLnJlbW92ZVJ1bGUodCl9fSx0LnByb3RvdHlwZS5ydWxlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVuc3VyZVNvcnRlZCgpLHRoaXMuX3J1bGVzLmNvbmNhdCh0aGlzLl9vdGhlcndpc2VGbj9bdGhpcy5fb3RoZXJ3aXNlRm5dOltdKX0sdC5wcm90b3R5cGUuc29ydD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5zdGFibGVTb3J0KHRoaXMuX3J1bGVzLHRoaXMuX3NvcnRGbj10fHx0aGlzLl9zb3J0Rm4pLHI9MCxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXS5fZ3JvdXA9cixuPGUubGVuZ3RoLTEmJjAhPT10aGlzLl9zb3J0Rm4oZVtuXSxlW24rMV0pJiZyKys7dGhpcy5fcnVsZXM9ZSx0aGlzLl9zb3J0ZWQ9ITB9LHQucHJvdG90eXBlLmVuc3VyZVNvcnRlZD1mdW5jdGlvbigpe3RoaXMuX3NvcnRlZHx8dGhpcy5zb3J0KCl9LHQucHJvdG90eXBlLnN0YWJsZVNvcnQ9ZnVuY3Rpb24odCxuKXt2YXIgZT10Lm1hcChmdW5jdGlvbih0LGUpe3JldHVybntlbGVtOnQsaWR4OmV9fSk7cmV0dXJuIGUuc29ydChmdW5jdGlvbih0LGUpe3ZhciByPW4odC5lbGVtLGUuZWxlbSk7cmV0dXJuIDA9PT1yP3QuaWR4LWUuaWR4OnJ9KSxlLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lbGVtfSl9LHQucHJvdG90eXBlLndoZW49ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXRoaXMudXJsUnVsZUZhY3RvcnkuY3JlYXRlKHQsZSk7cmV0dXJuIEUociYmci5wcmlvcml0eSkmJihuLnByaW9yaXR5PXIucHJpb3JpdHkpLHRoaXMucnVsZShuKSxufSx0fSgpLGRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgZT10aGlzO3RoaXMucm91dGVyPXQsdGhpcy5wYXJhbVR5cGVzPW5ldyBnZSx0aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZT0hMSx0aGlzLl9pc1N0cmljdE1vZGU9ITAsdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeT0hMSx0aGlzLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gZS5wYXJhbVR5cGVzLmRpc3Bvc2UoKX0sdGhpcy5iYXNlSHJlZj1mdW5jdGlvbigpe3JldHVybiBlLnJvdXRlci5sb2NhdGlvbkNvbmZpZy5iYXNlSHJlZigpfSx0aGlzLmhhc2hQcmVmaXg9ZnVuY3Rpb24odCl7cmV0dXJuIGUucm91dGVyLmxvY2F0aW9uQ29uZmlnLmhhc2hQcmVmaXgodCl9LHRoaXMuaG9zdD1mdW5jdGlvbigpe3JldHVybiBlLnJvdXRlci5sb2NhdGlvbkNvbmZpZy5ob3N0KCl9LHRoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIGUucm91dGVyLmxvY2F0aW9uQ29uZmlnLmh0bWw1TW9kZSgpfSx0aGlzLnBvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gZS5yb3V0ZXIubG9jYXRpb25Db25maWcucG9ydCgpfSx0aGlzLnByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIGUucm91dGVyLmxvY2F0aW9uQ29uZmlnLnByb3RvY29sKCl9fXJldHVybiB0LnByb3RvdHlwZS5jYXNlSW5zZW5zaXRpdmU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlPUUodCk/dDp0aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZX0sdC5wcm90b3R5cGUuZGVmYXVsdFNxdWFzaFBvbGljeT1mdW5jdGlvbih0KXtpZihFKHQpJiYhMCE9PXQmJiExIT09dCYmIVAodCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzcXVhc2ggcG9saWN5OiBcIit0K1wiLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIGFyYml0cmFyeS1zdHJpbmdcIik7cmV0dXJuIHRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3k9RSh0KT90OnRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3l9LHQucHJvdG90eXBlLnN0cmljdE1vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2lzU3RyaWN0TW9kZT1FKHQpP3Q6dGhpcy5faXNTdHJpY3RNb2RlfSx0LnByb3RvdHlwZS50eXBlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj10aGlzLnBhcmFtVHlwZXMudHlwZSh0LGUscik7cmV0dXJuIEUoZSk/dGhpczpufSx0fSgpLG1yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgbj10aGlzO3RoaXMucm91dGVyPXQsdGhpcy5pbnRlcmNlcHREZWZlcnJlZD0hMSx0aGlzLnJ1bGVzPW5ldyB2cih0aGlzLnJvdXRlciksdGhpcy5jb25maWc9bmV3IGRyKHRoaXMucm91dGVyKSx0aGlzLnVybD1mdW5jdGlvbih0LGUscil7cmV0dXJuIG4ucm91dGVyLmxvY2F0aW9uU2VydmljZS51cmwodCxlLHIpfSx0aGlzLnBhdGg9ZnVuY3Rpb24oKXtyZXR1cm4gbi5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlLnBhdGgoKX0sdGhpcy5zZWFyY2g9ZnVuY3Rpb24oKXtyZXR1cm4gbi5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlLnNlYXJjaCgpfSx0aGlzLmhhc2g9ZnVuY3Rpb24oKXtyZXR1cm4gbi5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlLmhhc2goKX0sdGhpcy5vbkNoYW5nZT1mdW5jdGlvbih0KXtyZXR1cm4gbi5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlLm9uQ2hhbmdlKHQpfX1yZXR1cm4gdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMubGlzdGVuKCExKSx0aGlzLnJ1bGVzLmRpc3Bvc2UoKX0sdC5wcm90b3R5cGUucGFydHM9ZnVuY3Rpb24oKXtyZXR1cm57cGF0aDp0aGlzLnBhdGgoKSxzZWFyY2g6dGhpcy5zZWFyY2goKSxoYXNoOnRoaXMuaGFzaCgpfX0sdC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtpZighdHx8IXQuZGVmYXVsdFByZXZlbnRlZCl7dmFyIGU9dGhpcy5yb3V0ZXIscj1lLnVybFNlcnZpY2Usbj1lLnN0YXRlU2VydmljZSxpPXtwYXRoOnIucGF0aCgpLHNlYXJjaDpyLnNlYXJjaCgpLGhhc2g6ci5oYXNoKCl9LG89dGhpcy5tYXRjaChpKTttKFtbUCxmdW5jdGlvbih0KXtyZXR1cm4gci51cmwodCwhMCl9XSxbU2UuaXNEZWYsZnVuY3Rpb24odCl7cmV0dXJuIG4uZ28odC5zdGF0ZSx0LnBhcmFtcyx0Lm9wdGlvbnMpfV0sW3AoU2UpLGZ1bmN0aW9uKHQpe3JldHVybiBuLmdvKHQuc3RhdGUoKSx0LnBhcmFtcygpLHQub3B0aW9ucygpKX1dXSkobyYmby5ydWxlLmhhbmRsZXIoby5tYXRjaCxpLHRoaXMucm91dGVyKSl9fSx0LnByb3RvdHlwZS5saXN0ZW49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighMSE9PXQpcmV0dXJuIHRoaXMuX3N0b3BMaXN0ZW5pbmdGbj10aGlzLl9zdG9wTGlzdGVuaW5nRm58fHRoaXMucm91dGVyLnVybFNlcnZpY2Uub25DaGFuZ2UoZnVuY3Rpb24odCl7cmV0dXJuIGUuc3luYyh0KX0pO3RoaXMuX3N0b3BMaXN0ZW5pbmdGbiYmdGhpcy5fc3RvcExpc3RlbmluZ0ZuKCksZGVsZXRlIHRoaXMuX3N0b3BMaXN0ZW5pbmdGbn0sdC5wcm90b3R5cGUuZGVmZXJJbnRlcmNlcHQ9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ITApLHRoaXMuaW50ZXJjZXB0RGVmZXJyZWQ9dH0sdC5wcm90b3R5cGUubWF0Y2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0PUwoe3BhdGg6XCJcIixzZWFyY2g6e30saGFzaDpcIlwifSx0KTtmb3IodmFyIHIsbixpLG89dGhpcy5ydWxlcy5ydWxlcygpLGE9MDthPG8ubGVuZ3RoJiYoIXJ8fHIucnVsZS5fZ3JvdXA9PT1vW2FdLl9ncm91cCk7YSsrKXt2YXIgdT0obj1vW2FdLHZvaWQgMCwoaT1uLm1hdGNoKHQsZS5yb3V0ZXIpKSYme21hdGNoOmkscnVsZTpuLHdlaWdodDpuLm1hdGNoUHJpb3JpdHkoaSl9KTtyPSFyfHx1JiZ1LndlaWdodD5yLndlaWdodD91OnJ9cmV0dXJuIHJ9LHR9KCkseXI9MCxncj1IKFwiTG9jYXRpb25TZXJ2aWNlc1wiLFtcInVybFwiLFwicGF0aFwiLFwic2VhcmNoXCIsXCJoYXNoXCIsXCJvbkNoYW5nZVwiXSksd3I9SChcIkxvY2F0aW9uQ29uZmlnXCIsW1wicG9ydFwiLFwicHJvdG9jb2xcIixcImhvc3RcIixcImJhc2VIcmVmXCIsXCJodG1sNU1vZGVcIixcImhhc2hQcmVmaXhcIl0pLF9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZvaWQgMD09PXQmJih0PWdyKSx2b2lkIDA9PT1lJiYoZT13ciksdGhpcy5sb2NhdGlvblNlcnZpY2U9dCx0aGlzLmxvY2F0aW9uQ29uZmlnPWUsdGhpcy4kaWQ9eXIrKyx0aGlzLl9kaXNwb3NlZD0hMSx0aGlzLl9kaXNwb3NhYmxlcz1bXSx0aGlzLnRyYWNlPWNlLHRoaXMudmlld1NlcnZpY2U9bmV3IGxyKHRoaXMpLHRoaXMuZ2xvYmFscz1uZXcgaHIsdGhpcy50cmFuc2l0aW9uU2VydmljZT1uZXcgTHIodGhpcyksdGhpcy51cmxNYXRjaGVyRmFjdG9yeT1uZXcgYXIodGhpcyksdGhpcy51cmxSb3V0ZXI9bmV3IGZyKHRoaXMpLHRoaXMudXJsU2VydmljZT1uZXcgbXIodGhpcyksdGhpcy5zdGF0ZVJlZ2lzdHJ5PW5ldyBHZSh0aGlzKSx0aGlzLnN0YXRlU2VydmljZT1uZXcgTXIodGhpcyksdGhpcy5fcGx1Z2lucz17fSx0aGlzLnZpZXdTZXJ2aWNlLl9wbHVnaW5hcGkuX3Jvb3RWaWV3Q29udGV4dCh0aGlzLnN0YXRlUmVnaXN0cnkucm9vdCgpKSx0aGlzLmdsb2JhbHMuJGN1cnJlbnQ9dGhpcy5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSx0aGlzLmdsb2JhbHMuY3VycmVudD10aGlzLmdsb2JhbHMuJGN1cnJlbnQuc2VsZix0aGlzLmRpc3Bvc2FibGUodGhpcy5nbG9iYWxzKSx0aGlzLmRpc3Bvc2FibGUodGhpcy5zdGF0ZVNlcnZpY2UpLHRoaXMuZGlzcG9zYWJsZSh0aGlzLnN0YXRlUmVnaXN0cnkpLHRoaXMuZGlzcG9zYWJsZSh0aGlzLnRyYW5zaXRpb25TZXJ2aWNlKSx0aGlzLmRpc3Bvc2FibGUodGhpcy51cmxTZXJ2aWNlKSx0aGlzLmRpc3Bvc2FibGUodCksdGhpcy5kaXNwb3NhYmxlKGUpfXJldHVybiB0LnByb3RvdHlwZS5kaXNwb3NhYmxlPWZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3Bvc2FibGVzLnB1c2godCl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0JiZDKHQuZGlzcG9zZSk/dC5kaXNwb3NlKHRoaXMpOih0aGlzLl9kaXNwb3NlZD0hMCx0aGlzLl9kaXNwb3NhYmxlcy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24odCl7dHJ5e1wiZnVuY3Rpb25cIj09dHlwZW9mIHQuZGlzcG9zZSYmdC5kaXNwb3NlKGUpLEsoZS5fZGlzcG9zYWJsZXMsdCl9Y2F0Y2godCl7fX0pKX0sdC5wcm90b3R5cGUucGx1Z2luPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciByPW5ldyB0KHRoaXMsZSk7aWYoIXIubmFtZSl0aHJvdyBuZXcgRXJyb3IoXCJSZXF1aXJlZCBwcm9wZXJ0eSBgbmFtZWAgbWlzc2luZyBvbiBwbHVnaW46IFwiK3IpO3JldHVybiB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKHIpLHRoaXMuX3BsdWdpbnNbci5uYW1lXT1yfSx0LnByb3RvdHlwZS5nZXRQbHVnaW49ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dGhpcy5fcGx1Z2luc1t0XTpsdCh0aGlzLl9wbHVnaW5zKX0sdH0oKTtmdW5jdGlvbiBTcihlKXtlLmFkZFJlc29sdmFibGUoRWUuZnJvbURhdGEoX3IsZS5yb3V0ZXIpLFwiXCIpLGUuYWRkUmVzb2x2YWJsZShFZS5mcm9tRGF0YShYZSxlKSxcIlwiKSxlLmFkZFJlc29sdmFibGUoRWUuZnJvbURhdGEoXCIkdHJhbnNpdGlvbiRcIixlKSxcIlwiKSxlLmFkZFJlc29sdmFibGUoRWUuZnJvbURhdGEoXCIkc3RhdGVQYXJhbXNcIixlLnBhcmFtcygpKSxcIlwiKSxlLmVudGVyaW5nKCkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmFkZFJlc29sdmFibGUoRWUuZnJvbURhdGEoXCIkc3RhdGUkXCIsdCksdCl9KX12YXIgJHI9SihbXCIkdHJhbnNpdGlvbiRcIixYZV0pLGJyPWZ1bmN0aW9uKHQpe3ZhciBlPWx0KHQudHJlZUNoYW5nZXMoKSkucmVkdWNlKHZ0LFtdKS5yZWR1Y2UoeXQsW10pLHI9ZnVuY3Rpb24odCl7cmV0dXJuICRyKHQudG9rZW4pP0VlLmZyb21EYXRhKHQudG9rZW4sbnVsbCk6dH07ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QucmVzb2x2YWJsZXM9dC5yZXNvbHZhYmxlcy5tYXAocil9KX0sUnI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50bygpLnJlZGlyZWN0VG87aWYodCl7dmFyIHI9ZS5yb3V0ZXIuc3RhdGVTZXJ2aWNlO3JldHVybiBDKHQpP0EuJHEud2hlbih0KGUpKS50aGVuKG4pOm4odCl9ZnVuY3Rpb24gbih0KXtpZih0KXJldHVybiB0IGluc3RhbmNlb2YgU2U/dDpQKHQpP3IudGFyZ2V0KHQsZS5wYXJhbXMoKSxlLm9wdGlvbnMoKSk6dC5zdGF0ZXx8dC5wYXJhbXM/ci50YXJnZXQodC5zdGF0ZXx8ZS50bygpLHQucGFyYW1zfHxlLnBhcmFtcygpLGUub3B0aW9ucygpKTp2b2lkIDB9fTtmdW5jdGlvbiBFcihyKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4oMCxlLiQkc3RhdGUoKVtyXSkodCxlKX19dmFyIENyPUVyKFwib25FeGl0XCIpLFRyPUVyKFwib25SZXRhaW5cIiksUHI9RXIoXCJvbkVudGVyXCIpLGtyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgT2UodC50cmVlQ2hhbmdlcygpLnRvKS5yZXNvbHZlUGF0aChcIkVBR0VSXCIsdCkudGhlbihHKX0sT3I9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IE9lKHQudHJlZUNoYW5nZXMoKS50bykuc3ViQ29udGV4dChlLiQkc3RhdGUoKSkucmVzb2x2ZVBhdGgoXCJMQVpZXCIsdCkudGhlbihHKX0seHI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBPZSh0LnRyZWVDaGFuZ2VzKCkudG8pLnJlc29sdmVQYXRoKFwiTEFaWVwiLHQpLnRoZW4oRyl9LGpyPWZ1bmN0aW9uKHQpe3ZhciBlPUEuJHEscj10LnZpZXdzKFwiZW50ZXJpbmdcIik7aWYoci5sZW5ndGgpcmV0dXJuIGUuYWxsKHIubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLndoZW4odC5sb2FkKCkpfSkpLnRoZW4oRyl9LFZyPWZ1bmN0aW9uKHQpe3ZhciBlPXQudmlld3MoXCJlbnRlcmluZ1wiKSxyPXQudmlld3MoXCJleGl0aW5nXCIpO2lmKGUubGVuZ3RofHxyLmxlbmd0aCl7dmFyIG49dC5yb3V0ZXIudmlld1NlcnZpY2U7ci5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuLmRlYWN0aXZhdGVWaWV3Q29uZmlnKHQpfSksZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuLmFjdGl2YXRlVmlld0NvbmZpZyh0KX0pLG4uc3luYygpfX0sSXI9ZnVuY3Rpb24odCl7dmFyIGU9dC5yb3V0ZXIuZ2xvYmFscyxyPWZ1bmN0aW9uKCl7ZS50cmFuc2l0aW9uPT09dCYmKGUudHJhbnNpdGlvbj1udWxsKX07dC5vblN1Y2Nlc3Moe30sZnVuY3Rpb24oKXtlLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5lbnF1ZXVlKHQpLGUuJGN1cnJlbnQ9dC4kdG8oKSxlLmN1cnJlbnQ9ZS4kY3VycmVudC5zZWxmLFR0KHQucGFyYW1zKCksZS5wYXJhbXMpfSx7cHJpb3JpdHk6MWU0fSksdC5wcm9taXNlLnRoZW4ocixyKX0sSHI9ZnVuY3Rpb24odCl7dmFyIGU9dC5vcHRpb25zKCkscj10LnJvdXRlci5zdGF0ZVNlcnZpY2Usbj10LnJvdXRlci51cmxSb3V0ZXI7aWYoXCJ1cmxcIiE9PWUuc291cmNlJiZlLmxvY2F0aW9uJiZyLiRjdXJyZW50Lm5hdmlnYWJsZSl7dmFyIGk9e3JlcGxhY2U6XCJyZXBsYWNlXCI9PT1lLmxvY2F0aW9ufTtuLnB1c2goci4kY3VycmVudC5uYXZpZ2FibGUudXJsLHIucGFyYW1zLGkpfW4udXBkYXRlKCEwKX0sQXI9ZnVuY3Rpb24oYSl7dmFyIHU9YS5yb3V0ZXI7dmFyIHQ9YS5lbnRlcmluZygpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hIXQuJCRzdGF0ZSgpLmxhenlMb2FkfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBEcihhLHQpfSk7cmV0dXJuIEEuJHEuYWxsKHQpLnRoZW4oZnVuY3Rpb24oKXtpZihcInVybFwiIT09YS5vcmlnaW5hbFRyYW5zaXRpb24oKS5vcHRpb25zKCkuc291cmNlKXt2YXIgdD1hLnRhcmdldFN0YXRlKCk7cmV0dXJuIHUuc3RhdGVTZXJ2aWNlLnRhcmdldCh0LmlkZW50aWZpZXIoKSx0LnBhcmFtcygpLHQub3B0aW9ucygpKX12YXIgZT11LnVybFNlcnZpY2Uscj1lLm1hdGNoKGUucGFydHMoKSksbj1yJiZyLnJ1bGU7aWYobiYmXCJTVEFURVwiPT09bi50eXBlKXt2YXIgaT1uLnN0YXRlLG89ci5tYXRjaDtyZXR1cm4gdS5zdGF0ZVNlcnZpY2UudGFyZ2V0KGksbyxhLm9wdGlvbnMoKSl9dS51cmxTZXJ2aWNlLnN5bmMoKX0pfTtmdW5jdGlvbiBEcihlLHIpe3ZhciBuPXIuJCRzdGF0ZSgpLmxhenlMb2FkLHQ9bi5fcHJvbWlzZTtpZighdCl7dD1uLl9wcm9taXNlPUEuJHEud2hlbihuKGUscikpLnRoZW4oZnVuY3Rpb24odCl7dCYmQXJyYXkuaXNBcnJheSh0LnN0YXRlcykmJnQuc3RhdGVzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUucm91dGVyLnN0YXRlUmVnaXN0cnkucmVnaXN0ZXIodCl9KTtyZXR1cm4gdH0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGRlbGV0ZSByLmxhenlMb2FkLGRlbGV0ZSByLiQkc3RhdGUoKS5sYXp5TG9hZCxkZWxldGUgbi5fcHJvbWlzZSx0fSxmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlIG4uX3Byb21pc2UsQS4kcS5yZWplY3QodCl9KX1yZXR1cm4gdH12YXIgcXI9ZnVuY3Rpb24odCxlLHIsbixpLG8sYSx1KXt2b2lkIDA9PT1pJiYoaT0hMSksdm9pZCAwPT09byYmKG89emUuSEFORExFX1JFU1VMVCksdm9pZCAwPT09YSYmKGE9emUuUkVKRUNUX0VSUk9SKSx2b2lkIDA9PT11JiYodT0hMSksdGhpcy5uYW1lPXQsdGhpcy5ob29rUGhhc2U9ZSx0aGlzLmhvb2tPcmRlcj1yLHRoaXMuY3JpdGVyaWFNYXRjaFBhdGg9bix0aGlzLnJldmVyc2VTb3J0PWksdGhpcy5nZXRSZXN1bHRIYW5kbGVyPW8sdGhpcy5nZXRFcnJvckhhbmRsZXI9YSx0aGlzLnN5bmNocm9ub3VzPXV9O2Z1bmN0aW9uIFVyKHQpe3ZhciBlPXQuX2lnbm9yZWRSZWFzb24oKTtpZihlKXtjZS50cmFjZVRyYW5zaXRpb25JZ25vcmVkKHQpO3ZhciByPXQucm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbjtyZXR1cm5cIlNhbWVBc0N1cnJlbnRcIj09PWUmJnImJnIuYWJvcnQoKSxBdC5pZ25vcmVkKCkudG9Qcm9taXNlKCl9fWZ1bmN0aW9uIEZyKHQpe2lmKCF0LnZhbGlkKCkpdGhyb3cgbmV3IEVycm9yKHQuZXJyb3IoKS50b1N0cmluZygpKX12YXIgTnI9e2xvY2F0aW9uOiEwLHJlbGF0aXZlOm51bGwsaW5oZXJpdDohMSxub3RpZnk6ITAscmVsb2FkOiExLGN1c3RvbTp7fSxjdXJyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHNvdXJjZTpcInVua25vd25cIn0sTHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX3RyYW5zaXRpb25Db3VudD0wLHRoaXMuX2V2ZW50VHlwZXM9W10sdGhpcy5fcmVnaXN0ZXJlZEhvb2tzPXt9LHRoaXMuX2NyaXRlcmlhUGF0aHM9e30sdGhpcy5fcm91dGVyPXQsdGhpcy4kdmlldz10LnZpZXdTZXJ2aWNlLHRoaXMuX2RlcmVnaXN0ZXJIb29rRm5zPXt9LHRoaXMuX3BsdWdpbmFwaT1XKHYodGhpcykse30sdih0aGlzKSxbXCJfZGVmaW5lUGF0aFR5cGVcIixcIl9kZWZpbmVFdmVudFwiLFwiX2dldFBhdGhUeXBlc1wiLFwiX2dldEV2ZW50c1wiLFwiZ2V0SG9va3NcIl0pLHRoaXMuX2RlZmluZUNvcmVQYXRocygpLHRoaXMuX2RlZmluZUNvcmVFdmVudHMoKSx0aGlzLl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MoKSx0Lmdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLm9uRXZpY3QoYnIpfXJldHVybiB0LnByb3RvdHlwZS5vbkNyZWF0ZT1mdW5jdGlvbih0LGUscil7fSx0LnByb3RvdHlwZS5vbkJlZm9yZT1mdW5jdGlvbih0LGUscil7fSx0LnByb3RvdHlwZS5vblN0YXJ0PWZ1bmN0aW9uKHQsZSxyKXt9LHQucHJvdG90eXBlLm9uRXhpdD1mdW5jdGlvbih0LGUscil7fSx0LnByb3RvdHlwZS5vblJldGFpbj1mdW5jdGlvbih0LGUscil7fSx0LnByb3RvdHlwZS5vbkVudGVyPWZ1bmN0aW9uKHQsZSxyKXt9LHQucHJvdG90eXBlLm9uRmluaXNoPWZ1bmN0aW9uKHQsZSxyKXt9LHQucHJvdG90eXBlLm9uU3VjY2Vzcz1mdW5jdGlvbih0LGUscil7fSx0LnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKHQsZSxyKXt9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24odCl7bHQodGhpcy5fcmVnaXN0ZXJlZEhvb2tzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7dC5fZGVyZWdpc3RlcmVkPSEwLEsoZSx0KX0pfSl9LHQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgWGUodCxlLHRoaXMuX3JvdXRlcil9LHQucHJvdG90eXBlLl9kZWZpbmVDb3JlRXZlbnRzPWZ1bmN0aW9uKCl7dmFyIHQ9ZC5UcmFuc2l0aW9uSG9va1BoYXNlLGU9emUscj10aGlzLl9jcml0ZXJpYVBhdGhzO3RoaXMuX2RlZmluZUV2ZW50KFwib25DcmVhdGVcIix0LkNSRUFURSwwLHIudG8sITEsZS5MT0dfUkVKRUNURURfUkVTVUxULGUuVEhST1dfRVJST1IsITApLHRoaXMuX2RlZmluZUV2ZW50KFwib25CZWZvcmVcIix0LkJFRk9SRSwwLHIudG8pLHRoaXMuX2RlZmluZUV2ZW50KFwib25TdGFydFwiLHQuUlVOLDAsci50byksdGhpcy5fZGVmaW5lRXZlbnQoXCJvbkV4aXRcIix0LlJVTiwxMDAsci5leGl0aW5nLCEwKSx0aGlzLl9kZWZpbmVFdmVudChcIm9uUmV0YWluXCIsdC5SVU4sMjAwLHIucmV0YWluZWQpLHRoaXMuX2RlZmluZUV2ZW50KFwib25FbnRlclwiLHQuUlVOLDMwMCxyLmVudGVyaW5nKSx0aGlzLl9kZWZpbmVFdmVudChcIm9uRmluaXNoXCIsdC5SVU4sNDAwLHIudG8pLHRoaXMuX2RlZmluZUV2ZW50KFwib25TdWNjZXNzXCIsdC5TVUNDRVNTLDAsci50bywhMSxlLkxPR19SRUpFQ1RFRF9SRVNVTFQsZS5MT0dfRVJST1IsITApLHRoaXMuX2RlZmluZUV2ZW50KFwib25FcnJvclwiLHQuRVJST1IsMCxyLnRvLCExLGUuTE9HX1JFSkVDVEVEX1JFU1VMVCxlLkxPR19FUlJPUiwhMCl9LHQucHJvdG90eXBlLl9kZWZpbmVDb3JlUGF0aHM9ZnVuY3Rpb24oKXt2YXIgdD1kLlRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUsZT1kLlRyYW5zaXRpb25Ib29rU2NvcGUuVFJBTlNJVElPTjt0aGlzLl9kZWZpbmVQYXRoVHlwZShcInRvXCIsZSksdGhpcy5fZGVmaW5lUGF0aFR5cGUoXCJmcm9tXCIsZSksdGhpcy5fZGVmaW5lUGF0aFR5cGUoXCJleGl0aW5nXCIsdCksdGhpcy5fZGVmaW5lUGF0aFR5cGUoXCJyZXRhaW5lZFwiLHQpLHRoaXMuX2RlZmluZVBhdGhUeXBlKFwiZW50ZXJpbmdcIix0KX0sdC5wcm90b3R5cGUuX2RlZmluZUV2ZW50PWZ1bmN0aW9uKHQsZSxyLG4saSxvLGEsdSl7dm9pZCAwPT09aSYmKGk9ITEpLHZvaWQgMD09PW8mJihvPXplLkhBTkRMRV9SRVNVTFQpLHZvaWQgMD09PWEmJihhPXplLlJFSkVDVF9FUlJPUiksdm9pZCAwPT09dSYmKHU9ITEpO3ZhciBzPW5ldyBxcih0LGUscixuLGksbyxhLHUpO3RoaXMuX2V2ZW50VHlwZXMucHVzaChzKSxLZSh0aGlzLHRoaXMscyl9LHQucHJvdG90eXBlLl9nZXRFdmVudHM9ZnVuY3Rpb24oZSl7cmV0dXJuKEUoZSk/dGhpcy5fZXZlbnRUeXBlcy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuaG9va1BoYXNlPT09ZX0pOnRoaXMuX2V2ZW50VHlwZXMuc2xpY2UoKSkuc29ydChmdW5jdGlvbih0LGUpe3ZhciByPXQuaG9va1BoYXNlLWUuaG9va1BoYXNlO3JldHVybiAwPT09cj90Lmhvb2tPcmRlci1lLmhvb2tPcmRlcjpyfSl9LHQucHJvdG90eXBlLl9kZWZpbmVQYXRoVHlwZT1mdW5jdGlvbih0LGUpe3RoaXMuX2NyaXRlcmlhUGF0aHNbdF09e25hbWU6dCxzY29wZTplfX0sdC5wcm90b3R5cGUuX2dldFBhdGhUeXBlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jcml0ZXJpYVBhdGhzfSx0LnByb3RvdHlwZS5nZXRIb29rcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZEhvb2tzW3RdfSx0LnByb3RvdHlwZS5fcmVnaXN0ZXJDb3JlVHJhbnNpdGlvbkhvb2tzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGVyZWdpc3Rlckhvb2tGbnM7dC5hZGRDb3JlUmVzb2x2ZXM9dGhpcy5vbkNyZWF0ZSh7fSxTciksdC5pZ25vcmVkPXRoaXMub25CZWZvcmUoe30sVXIse3ByaW9yaXR5Oi05OTk5fSksdC5pbnZhbGlkPXRoaXMub25CZWZvcmUoe30sRnIse3ByaW9yaXR5Oi0xZTR9KSx0LnJlZGlyZWN0VG89dGhpcy5vblN0YXJ0KHt0bzpmdW5jdGlvbih0KXtyZXR1cm4hIXQucmVkaXJlY3RUb319LFJyKSx0Lm9uRXhpdD10aGlzLm9uRXhpdCh7ZXhpdGluZzpmdW5jdGlvbih0KXtyZXR1cm4hIXQub25FeGl0fX0sQ3IpLHQub25SZXRhaW49dGhpcy5vblJldGFpbih7cmV0YWluZWQ6ZnVuY3Rpb24odCl7cmV0dXJuISF0Lm9uUmV0YWlufX0sVHIpLHQub25FbnRlcj10aGlzLm9uRW50ZXIoe2VudGVyaW5nOmZ1bmN0aW9uKHQpe3JldHVybiEhdC5vbkVudGVyfX0sUHIpLHQuZWFnZXJSZXNvbHZlPXRoaXMub25TdGFydCh7fSxrcix7cHJpb3JpdHk6MWUzfSksdC5sYXp5UmVzb2x2ZT10aGlzLm9uRW50ZXIoe2VudGVyaW5nOnYoITApfSxPcix7cHJpb3JpdHk6MWUzfSksdC5yZXNvbHZlQWxsPXRoaXMub25GaW5pc2goe30seHIse3ByaW9yaXR5OjFlM30pLHQubG9hZFZpZXdzPXRoaXMub25GaW5pc2goe30sanIpLHQuYWN0aXZhdGVWaWV3cz10aGlzLm9uU3VjY2Vzcyh7fSxWciksdC51cGRhdGVHbG9iYWxzPXRoaXMub25DcmVhdGUoe30sSXIpLHQudXBkYXRlVXJsPXRoaXMub25TdWNjZXNzKHt9LEhyLHtwcmlvcml0eTo5OTk5fSksdC5sYXp5TG9hZD10aGlzLm9uQmVmb3JlKHtlbnRlcmluZzpmdW5jdGlvbih0KXtyZXR1cm4hIXQubGF6eUxvYWR9fSxBcil9LHR9KCksTXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiByKHQpe3RoaXMucm91dGVyPXQsdGhpcy5pbnZhbGlkQ2FsbGJhY2tzPVtdLHRoaXMuX2RlZmF1bHRFcnJvckhhbmRsZXI9ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEVycm9yJiZ0LnN0YWNrPyhjb25zb2xlLmVycm9yKHQpLGNvbnNvbGUuZXJyb3IodC5zdGFjaykpOnQgaW5zdGFuY2VvZiBBdD8oY29uc29sZS5lcnJvcih0LnRvU3RyaW5nKCkpLHQuZGV0YWlsJiZ0LmRldGFpbC5zdGFjayYmY29uc29sZS5lcnJvcih0LmRldGFpbC5zdGFjaykpOmNvbnNvbGUuZXJyb3IodCl9O3ZhciBlPU9iamVjdC5rZXlzKHIucHJvdG90eXBlKS5maWx0ZXIobChKKFtcImN1cnJlbnRcIixcIiRjdXJyZW50XCIsXCJwYXJhbXNcIixcInRyYW5zaXRpb25cIl0pKSk7Vyh2KHIucHJvdG90eXBlKSx0aGlzLHYodGhpcyksZSl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInRyYW5zaXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJwYXJhbXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMucGFyYW1zfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImN1cnJlbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMuY3VycmVudH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCIkY3VycmVudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy4kY3VycmVudH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0RXJyb3JIYW5kbGVyKEcpLHRoaXMuaW52YWxpZENhbGxiYWNrcz1bXX0sci5wcm90b3R5cGUuX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZT1mdW5jdGlvbih0LHIpe3ZhciBuPXRoaXMsaT0kZS5tYWtlVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSx0KSxlPXRoaXMucm91dGVyLmdsb2JhbHMsbz1mdW5jdGlvbigpe3JldHVybiBlLnRyYW5zaXRpb25IaXN0b3J5LnBlZWtUYWlsKCl9LGE9bygpLHU9bmV3IEl0KHRoaXMuaW52YWxpZENhbGxiYWNrcy5zbGljZSgpKSxzPW5ldyBPZSh0KS5pbmplY3RvcigpLGM9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIFNlKXt2YXIgZT10O3JldHVybihlPW4udGFyZ2V0KGUuaWRlbnRpZmllcigpLGUucGFyYW1zKCksZS5vcHRpb25zKCkpKS52YWxpZCgpP28oKSE9PWE/QXQuc3VwZXJzZWRlZCgpLnRvUHJvbWlzZSgpOm4udHJhbnNpdGlvblRvKGUuaWRlbnRpZmllcigpLGUucGFyYW1zKCksZS5vcHRpb25zKCkpOkF0LmludmFsaWQoZS5lcnJvcigpKS50b1Byb21pc2UoKX19O3JldHVybiBmdW5jdGlvbiBlKCl7dmFyIHQ9dS5kZXF1ZXVlKCk7cmV0dXJuIHZvaWQgMD09PXQ/QXQuaW52YWxpZChyLmVycm9yKCkpLnRvUHJvbWlzZSgpOkEuJHEud2hlbih0KHIsaSxzKSkudGhlbihjKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0fHxlKCl9KX0oKX0sci5wcm90b3R5cGUub25JbnZhbGlkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludmFsaWRDYWxsYmFja3MucHVzaCh0KSxmdW5jdGlvbigpe0sodGhpcy5pbnZhbGlkQ2FsbGJhY2tzKSh0KX0uYmluZCh0aGlzKX0sci5wcm90b3R5cGUucmVsb2FkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRyYW5zaXRpb25Ubyh0aGlzLmN1cnJlbnQsdGhpcy5wYXJhbXMse3JlbG9hZDohRSh0KXx8dCxpbmhlcml0OiExLG5vdGlmeTohMX0pfSxyLnByb3RvdHlwZS5nbz1mdW5jdGlvbih0LGUscil7dmFyIG49ZXQocix7cmVsYXRpdmU6dGhpcy4kY3VycmVudCxpbmhlcml0OiEwfSxOcik7cmV0dXJuIHRoaXMudHJhbnNpdGlvblRvKHQsZSxuKX0sci5wcm90b3R5cGUudGFyZ2V0PWZ1bmN0aW9uKHQsZSxyKXtpZih2b2lkIDA9PT1yJiYocj17fSksayhyLnJlbG9hZCkmJiFyLnJlbG9hZC5uYW1lKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdFwiKTt2YXIgbj10aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5O2lmKHIucmVsb2FkU3RhdGU9ITA9PT1yLnJlbG9hZD9uLnJvb3QoKTpuLm1hdGNoZXIuZmluZChyLnJlbG9hZCxyLnJlbGF0aXZlKSxyLnJlbG9hZCYmIXIucmVsb2FkU3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCByZWxvYWQgc3RhdGUgJ1wiKyhQKHIucmVsb2FkKT9yLnJlbG9hZDpyLnJlbG9hZC5uYW1lKStcIidcIik7cmV0dXJuIG5ldyBTZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LHQsZSxyKX0sci5wcm90b3R5cGUuZ2V0Q3VycmVudFBhdGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5yb3V0ZXIuZ2xvYmFscy5zdWNjZXNzZnVsVHJhbnNpdGlvbnMucGVla1RhaWwoKTtyZXR1cm4gZT9lLnRyZWVDaGFuZ2VzKCkudG86W25ldyBfZSh0LnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LnJvb3QoKSldfSxyLnByb3RvdHlwZS50cmFuc2l0aW9uVG89ZnVuY3Rpb24odCxlLHIpe3ZhciBvPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLHZvaWQgMD09PXImJihyPXt9KTt2YXIgYT10aGlzLnJvdXRlcix1PWEuZ2xvYmFscztyPWV0KHIsTnIpO3I9TChyLHtjdXJyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHUudHJhbnNpdGlvbn19KTt2YXIgbj10aGlzLnRhcmdldCh0LGUsciksaT10aGlzLmdldEN1cnJlbnRQYXRoKCk7aWYoIW4uZXhpc3RzKCkpcmV0dXJuIHRoaXMuX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZShpLG4pO2lmKCFuLnZhbGlkKCkpcmV0dXJuIGp0KG4uZXJyb3IoKSk7dmFyIHM9ZnVuY3Rpb24oaSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBBdCl7dmFyIGU9YS5nbG9iYWxzLmxhc3RTdGFydGVkVHJhbnNpdGlvbklkPD1pLiRpZDtpZih0LnR5cGU9PT1kLlJlamVjdFR5cGUuSUdOT1JFRClyZXR1cm4gZSYmYS51cmxSb3V0ZXIudXBkYXRlKCksQS4kcS53aGVuKHUuY3VycmVudCk7dmFyIHI9dC5kZXRhaWw7aWYodC50eXBlPT09ZC5SZWplY3RUeXBlLlNVUEVSU0VERUQmJnQucmVkaXJlY3RlZCYmciBpbnN0YW5jZW9mIFNlKXt2YXIgbj1pLnJlZGlyZWN0KHIpO3JldHVybiBuLnJ1bigpLmNhdGNoKHMobikpfWlmKHQudHlwZT09PWQuUmVqZWN0VHlwZS5BQk9SVEVEKXJldHVybiBlJiZhLnVybFJvdXRlci51cGRhdGUoKSxBLiRxLnJlamVjdCh0KX1yZXR1cm4gby5kZWZhdWx0RXJyb3JIYW5kbGVyKCkodCksQS4kcS5yZWplY3QodCl9fSxjPXRoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLmNyZWF0ZShpLG4pLGY9Yy5ydW4oKS5jYXRjaChzKGMpKTtyZXR1cm4geHQoZiksTChmLHt0cmFuc2l0aW9uOmN9KX0sci5wcm90b3R5cGUuaXM9ZnVuY3Rpb24odCxlLHIpe3I9ZXQocix7cmVsYXRpdmU6dGhpcy4kY3VycmVudH0pO3ZhciBuPXRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHQsci5yZWxhdGl2ZSk7aWYoRShuKSl7aWYodGhpcy4kY3VycmVudCE9PW4pcmV0dXJuITE7aWYoIWUpcmV0dXJuITA7dmFyIGk9bi5wYXJhbWV0ZXJzKHtpbmhlcml0OiEwLG1hdGNoaW5nS2V5czplfSk7cmV0dXJuIHllLmVxdWFscyhpLHllLnZhbHVlcyhpLGUpLHRoaXMucGFyYW1zKX19LHIucHJvdG90eXBlLmluY2x1ZGVzPWZ1bmN0aW9uKHQsZSxyKXtyPWV0KHIse3JlbGF0aXZlOnRoaXMuJGN1cnJlbnR9KTt2YXIgbj1QKHQpJiZWdC5mcm9tU3RyaW5nKHQpO2lmKG4pe2lmKCFuLm1hdGNoZXModGhpcy4kY3VycmVudC5uYW1lKSlyZXR1cm4hMTt0PXRoaXMuJGN1cnJlbnQubmFtZX12YXIgaT10aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5Lm1hdGNoZXIuZmluZCh0LHIucmVsYXRpdmUpLG89dGhpcy4kY3VycmVudC5pbmNsdWRlcztpZihFKGkpKXtpZighRShvW2kubmFtZV0pKXJldHVybiExO2lmKCFlKXJldHVybiEwO3ZhciBhPWkucGFyYW1ldGVycyh7aW5oZXJpdDohMCxtYXRjaGluZ0tleXM6ZX0pO3JldHVybiB5ZS5lcXVhbHMoYSx5ZS52YWx1ZXMoYSxlKSx0aGlzLnBhcmFtcyl9fSxyLnByb3RvdHlwZS5ocmVmPWZ1bmN0aW9uKHQsZSxyKXtyPWV0KHIse2xvc3N5OiEwLGluaGVyaXQ6ITAsYWJzb2x1dGU6ITEscmVsYXRpdmU6dGhpcy4kY3VycmVudH0pLGU9ZXx8e307dmFyIG49dGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQodCxyLnJlbGF0aXZlKTtpZighRShuKSlyZXR1cm4gbnVsbDtyLmluaGVyaXQmJihlPXRoaXMucGFyYW1zLiRpbmhlcml0KGUsdGhpcy4kY3VycmVudCxuKSk7dmFyIGk9biYmci5sb3NzeT9uLm5hdmlnYWJsZTpuO3JldHVybiBpJiZ2b2lkIDAhPT1pLnVybCYmbnVsbCE9PWkudXJsP3RoaXMucm91dGVyLnVybFJvdXRlci5ocmVmKGkudXJsLGUse2Fic29sdXRlOnIuYWJzb2x1dGV9KTpudWxsfSxyLnByb3RvdHlwZS5kZWZhdWx0RXJyb3JIYW5kbGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9kZWZhdWx0RXJyb3JIYW5kbGVyPXR8fHRoaXMuX2RlZmF1bHRFcnJvckhhbmRsZXJ9LHIucHJvdG90eXBlLmdldD1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnk7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3IuZ2V0KCk6ci5nZXQodCxlfHx0aGlzLiRjdXJyZW50KX0sci5wcm90b3R5cGUubGF6eUxvYWQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLmdldCh0KTtpZighcnx8IXIubGF6eUxvYWQpdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCBsYXp5IGxvYWQgXCIrdCk7dmFyIG49dGhpcy5nZXRDdXJyZW50UGF0aCgpLGk9JGUubWFrZVRhcmdldFN0YXRlKHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnksbik7cmV0dXJuIERyKGU9ZXx8dGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKG4saSkscil9LHJ9KCksQnI9e3doZW46ZnVuY3Rpb24ocil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQocil9KX0scmVqZWN0OmZ1bmN0aW9uKHIpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LGUpe2Uocil9KX0sZGVmZXI6ZnVuY3Rpb24oKXt2YXIgcj17fTtyZXR1cm4gci5wcm9taXNlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsZSl7ci5yZXNvbHZlPXQsci5yZWplY3Q9ZX0pLHJ9LGFsbDpmdW5jdGlvbih0KXtpZihPKHQpKXJldHVybiBQcm9taXNlLmFsbCh0KTtpZihrKHQpKXt2YXIgZT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV0udGhlbihmdW5jdGlvbih0KXtyZXR1cm57a2V5OmUsdmFsOnR9fSl9KTtyZXR1cm4gQnIuYWxsKGUpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZS5rZXldPWUudmFsLHR9LHt9KX0pfX19LEdyPXt9LFdyPS8oKFxcL1xcLy4qJCl8KFxcL1xcKltcXHNcXFNdKj9cXCpcXC8pKS9nbSx6cj0vKFteXFxzLF0rKS9nLEpyPXtnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIEdyW3RdfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPUpyLmdldCh0KX0saW52b2tlOmZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1MKHt9LEdyLHJ8fHt9KSxpPUpyLmFubm90YXRlKHQpLG89X3QoZnVuY3Rpb24odCl7cmV0dXJuIG4uaGFzT3duUHJvcGVydHkodCl9LGZ1bmN0aW9uKHQpe3JldHVyblwiREkgY2FuJ3QgZmluZCBpbmplY3RhYmxlOiAnXCIrdCtcIidcIn0pLGE9aS5maWx0ZXIobykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSk7cmV0dXJuIEModCk/dC5hcHBseShlLGEpOnQuc2xpY2UoLTEpWzBdLmFwcGx5KGUsYSl9LGFubm90YXRlOmZ1bmN0aW9uKHQpe2lmKCFWKHQpKXRocm93IG5ldyBFcnJvcihcIk5vdCBhbiBpbmplY3RhYmxlIGZ1bmN0aW9uOiBcIit0KTtpZih0JiZ0LiRpbmplY3QpcmV0dXJuIHQuJGluamVjdDtpZihPKHQpKXJldHVybiB0LnNsaWNlKDAsLTEpO3ZhciBlPXQudG9TdHJpbmcoKS5yZXBsYWNlKFdyLFwiXCIpO3JldHVybiBlLnNsaWNlKGUuaW5kZXhPZihcIihcIikrMSxlLmluZGV4T2YoXCIpXCIpKS5tYXRjaCh6cil8fFtdfX0sUXI9ZnVuY3Rpb24odCxlKXt2YXIgcj1lWzBdLG49ZVsxXTtyZXR1cm4gdC5oYXNPd25Qcm9wZXJ0eShyKT9PKHRbcl0pP3Rbcl0ucHVzaChuKTp0W3JdPVt0W3JdLG5dOnRbcl09bix0fSxLcj1mdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdChcIiZcIikuZmlsdGVyKEIpLm1hcChLdCkucmVkdWNlKFFyLHt9KX07ZnVuY3Rpb24gWXIodCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHR8fFwiXCJ9LHI9SnQodCkubWFwKGUpLG49clswXSxpPXJbMV0sbz1RdChuKS5tYXAoZSk7cmV0dXJue3BhdGg6b1swXSxzZWFyY2g6b1sxXSxoYXNoOmksdXJsOnR9fXZhciBacj1mdW5jdGlvbih0KXt2YXIgZT10LnBhdGgoKSxyPXQuc2VhcmNoKCksbj10Lmhhc2goKSxpPU9iamVjdC5rZXlzKHIpLm1hcChmdW5jdGlvbihlKXt2YXIgdD1yW2VdO3JldHVybihPKHQpP3Q6W3RdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUrXCI9XCIrdH0pfSkucmVkdWNlKHZ0LFtdKS5qb2luKFwiJlwiKTtyZXR1cm4gZSsoaT9cIj9cIitpOlwiXCIpKyhuP1wiI1wiK246XCJcIil9O2Z1bmN0aW9uIFhyKG4saSxvLGEpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT10LmxvY2F0aW9uU2VydmljZT1uZXcgbyh0KSxyPXQubG9jYXRpb25Db25maWc9bmV3IGEodCxpKTtyZXR1cm57bmFtZTpuLHNlcnZpY2U6ZSxjb25maWd1cmF0aW9uOnIsZGlzcG9zZTpmdW5jdGlvbih0KXt0LmRpc3Bvc2UoZSksdC5kaXNwb3NlKHIpfX19fXZhciB0bixlbixybixubj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgcj10aGlzO3RoaXMuZmlyZUFmdGVyVXBkYXRlPWUsdGhpcy5fbGlzdGVuZXJzPVtdLHRoaXMuX2xpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiByLl9saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdChlKX0pfSx0aGlzLmhhc2g9ZnVuY3Rpb24oKXtyZXR1cm4gWXIoci5fZ2V0KCkpLmhhc2h9LHRoaXMucGF0aD1mdW5jdGlvbigpe3JldHVybiBZcihyLl9nZXQoKSkucGF0aH0sdGhpcy5zZWFyY2g9ZnVuY3Rpb24oKXtyZXR1cm4gS3IoWXIoci5fZ2V0KCkpLnNlYXJjaCl9LHRoaXMuX2xvY2F0aW9uPUQubG9jYXRpb24sdGhpcy5faGlzdG9yeT1ELmhpc3Rvcnl9cmV0dXJuIHQucHJvdG90eXBlLnVybD1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0hMCksRShlKSYmZSE9PXRoaXMuX2dldCgpJiYodGhpcy5fc2V0KG51bGwsbnVsbCxlLHQpLHRoaXMuZmlyZUFmdGVyVXBkYXRlJiZ0aGlzLl9saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdCh7dXJsOmV9KX0pKSxacih0aGlzKX0sdC5wcm90b3R5cGUub25DaGFuZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fbGlzdGVuZXJzLnB1c2godCksZnVuY3Rpb24oKXtyZXR1cm4gSyhlLl9saXN0ZW5lcnMsdCl9fSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKHQpe3R0KHRoaXMuX2xpc3RlbmVycyl9LHR9KCksb249KHRuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHRuPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0W3JdPWVbcl0pfSkodCxlKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fXRuKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooci5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IHIpfSksYW49ZnVuY3Rpb24ocil7ZnVuY3Rpb24gdCh0KXt2YXIgZT1yLmNhbGwodGhpcyx0LCExKXx8dGhpcztyZXR1cm4gRC5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLGUuX2xpc3RlbmVyLCExKSxlfXJldHVybiBvbih0LHIpLHQucHJvdG90eXBlLl9nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gWXQodGhpcy5fbG9jYXRpb24uaGFzaCl9LHQucHJvdG90eXBlLl9zZXQ9ZnVuY3Rpb24odCxlLHIsbil7dGhpcy5fbG9jYXRpb24uaGFzaD1yfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKHQpe3IucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLHQpLEQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIix0aGlzLl9saXN0ZW5lcil9LHR9KG5uKSx1bj0oZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4oZW49T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShyKSYmKHRbcl09ZVtyXSl9KSh0LGUpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZW4odCxlKSx0LnByb3RvdHlwZT1udWxsPT09ZT9PYmplY3QuY3JlYXRlKGUpOihyLnByb3RvdHlwZT1lLnByb3RvdHlwZSxuZXcgcil9KSxzbj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiBlLmNhbGwodGhpcyx0LCEwKXx8dGhpc31yZXR1cm4gdW4odCxlKSx0LnByb3RvdHlwZS5fZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH0sdC5wcm90b3R5cGUuX3NldD1mdW5jdGlvbih0LGUscixuKXt0aGlzLl91cmw9cn0sdH0obm4pLGNuPShybj1mdW5jdGlvbih0LGUpe3JldHVybihybj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1lW3JdKX0pKHQsZSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9dH1ybih0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KHIucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyByKX0pLGZuPWZ1bmN0aW9uKHIpe2Z1bmN0aW9uIHQodCl7dmFyIGU9ci5jYWxsKHRoaXMsdCwhMCl8fHRoaXM7cmV0dXJuIGUuX2NvbmZpZz10LnVybFNlcnZpY2UuY29uZmlnLEQuYWRkRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsZS5fbGlzdGVuZXIsITEpLGV9cmV0dXJuIGNuKHQsciksdC5wcm90b3R5cGUuX2dldEJhc2VQcmVmaXg9ZnVuY3Rpb24oKXtyZXR1cm4genQodGhpcy5fY29uZmlnLmJhc2VIcmVmKCkpfSx0LnByb3RvdHlwZS5fZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbG9jYXRpb24sZT10LnBhdGhuYW1lLHI9dC5oYXNoLG49dC5zZWFyY2g7bj1RdChuKVsxXSxyPUp0KHIpWzFdO3ZhciBpPXRoaXMuX2dldEJhc2VQcmVmaXgoKSxvPWU9PT10aGlzLl9jb25maWcuYmFzZUhyZWYoKSxhPWUuc3Vic3RyKDAsaS5sZW5ndGgpPT09aTtyZXR1cm4oZT1vP1wiL1wiOmE/ZS5zdWJzdHJpbmcoaS5sZW5ndGgpOmUpKyhuP1wiP1wiK246XCJcIikrKHI/XCIjXCIrcjpcIlwiKX0sdC5wcm90b3R5cGUuX3NldD1mdW5jdGlvbih0LGUscixuKXt2YXIgaT10aGlzLl9nZXRCYXNlUHJlZml4KCksbz1yJiZcIi9cIiE9PXJbMF0/XCIvXCI6XCJcIixhPVwiXCI9PT1yfHxcIi9cIj09PXI/dGhpcy5fY29uZmlnLmJhc2VIcmVmKCk6aStvK3I7bj90aGlzLl9oaXN0b3J5LnJlcGxhY2VTdGF0ZSh0LGUsYSk6dGhpcy5faGlzdG9yeS5wdXNoU3RhdGUodCxlLGEpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKHQpe3IucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLHQpLEQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsdGhpcy5fbGlzdGVuZXIpfSx0fShubiksbG49ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuZGlzcG9zZT1HLHRoaXMuX2Jhc2VIcmVmPVwiXCIsdGhpcy5fcG9ydD04MCx0aGlzLl9wcm90b2NvbD1cImh0dHBcIix0aGlzLl9ob3N0PVwibG9jYWxob3N0XCIsdGhpcy5faGFzaFByZWZpeD1cIlwiLHRoaXMucG9ydD1mdW5jdGlvbigpe3JldHVybiBlLl9wb3J0fSx0aGlzLnByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIGUuX3Byb3RvY29sfSx0aGlzLmhvc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5faG9zdH0sdGhpcy5iYXNlSHJlZj1mdW5jdGlvbigpe3JldHVybiBlLl9iYXNlSHJlZn0sdGhpcy5odG1sNU1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdGhpcy5oYXNoUHJlZml4PWZ1bmN0aW9uKHQpe3JldHVybiBFKHQpP2UuX2hhc2hQcmVmaXg9dDplLl9oYXNoUHJlZml4fX0saG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMuX2lzSHRtbDU9ZSx0aGlzLl9iYXNlSHJlZj12b2lkIDAsdGhpcy5faGFzaFByZWZpeD1cIlwifXJldHVybiB0LnByb3RvdHlwZS5wb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIGxvY2F0aW9uLnBvcnQ/TnVtYmVyKGxvY2F0aW9uLnBvcnQpOlwiaHR0cHNcIj09PXRoaXMucHJvdG9jb2woKT80NDM6ODB9LHQucHJvdG90eXBlLnByb3RvY29sPWZ1bmN0aW9uKCl7cmV0dXJuIGxvY2F0aW9uLnByb3RvY29sLnJlcGxhY2UoLzovZyxcIlwiKX0sdC5wcm90b3R5cGUuaG9zdD1mdW5jdGlvbigpe3JldHVybiBsb2NhdGlvbi5ob3N0bmFtZX0sdC5wcm90b3R5cGUuaHRtbDVNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSHRtbDV9LHQucHJvdG90eXBlLmhhc2hQcmVmaXg9ZnVuY3Rpb24odCl7cmV0dXJuIEUodCk/dGhpcy5faGFzaFByZWZpeD10OnRoaXMuX2hhc2hQcmVmaXh9LHQucHJvdG90eXBlLmJhc2VIcmVmPWZ1bmN0aW9uKHQpe3JldHVybiBFKHQpJiYodGhpcy5fYmFzZUhyZWY9dCksXyh0aGlzLl9iYXNlSHJlZikmJih0aGlzLl9iYXNlSHJlZj10aGlzLmdldEJhc2VIcmVmKCkpLHRoaXMuX2Jhc2VIcmVmfSx0LnByb3RvdHlwZS5nZXRCYXNlSHJlZj1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKVswXTtyZXR1cm4gdCYmdC5ocmVmP3QuaHJlZi5yZXBsYWNlKC9eKFteLzpdKjopP1xcL1xcL1teL10qLyxcIlwiKTp0aGlzLl9pc0h0bWw1P1wiL1wiOmxvY2F0aW9uLnBhdGhuYW1lfHxcIi9cIn0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe30sdH0oKTtmdW5jdGlvbiBwbih0KXtyZXR1cm4gQS4kaW5qZWN0b3I9SnIse25hbWU6XCJ2YW5pbGxhLnNlcnZpY2VzXCIsJHE6QS4kcT1CciwkaW5qZWN0b3I6SnIsZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybiBudWxsfX19dmFyIHZuPVhyKFwidmFuaWxsYS5oYXNoQmFuZ0xvY2F0aW9uXCIsITEsYW4saG4pLGRuPVhyKFwidmFuaWxsYS5wdXNoU3RhdGVMb2NhdGlvblwiLCEwLGZuLGhuKSxtbj1YcihcInZhbmlsbGEubWVtb3J5TG9jYXRpb25cIiwhMSxzbixsbikseW49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKHQpe30sdH0oKSxnbj1PYmplY3QuZnJlZXplKHtyb290OkQsZnJvbUpzb246VSx0b0pzb246Rixmb3JFYWNoOk4sZXh0ZW5kOkwsZXF1YWxzOk0saWRlbnRpdHk6Qixub29wOkcsY3JlYXRlUHJveHlGdW5jdGlvbnM6Vyxpbmhlcml0OnosaW5BcnJheTpKLF9pbkFycmF5OlEscmVtb3ZlRnJvbTpLLF9yZW1vdmVGcm9tOlkscHVzaFRvOlosX3B1c2hUbzpYLGRlcmVnQWxsOnR0LGRlZmF1bHRzOmV0LG1lcmdlUjpydCxhbmNlc3RvcnM6bnQscGljazppdCxvbWl0Om90LHBsdWNrOmF0LGZpbHRlcjp1dCxmaW5kOnN0LG1hcE9iajpjdCxtYXA6ZnQsdmFsdWVzOmx0LGFsbFRydWVSOmh0LGFueVRydWVSOnB0LHVubmVzdFI6dnQsZmxhdHRlblI6ZHQscHVzaFI6bXQsdW5pcVI6eXQsdW5uZXN0Omd0LGZsYXR0ZW46d3QsYXNzZXJ0UHJlZGljYXRlOl90LGFzc2VydE1hcDpTdCxhc3NlcnRGbjokdCxwYWlyczpidCxhcnJheVR1cGxlczpSdCxhcHBseVBhaXJzOkV0LHRhaWw6Q3QsY29weTpUdCxfZXh0ZW5kOlB0LHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZTp4dCxzaWxlbnRSZWplY3Rpb246anQsbWFrZVN0dWI6SCxzZXJ2aWNlczpBLEdsb2I6VnQsY3Vycnk6Yyxjb21wb3NlOnIscGlwZTpzLHByb3A6dyxwcm9wRXE6eSxwYXJzZTpSLG5vdDpsLGFuZDpuLG9yOmksYWxsOmYsYW55OmgsaXM6cCxlcTpvLHZhbDp2LGludm9rZTphLHBhdHRlcm46bSxpc1VuZGVmaW5lZDpfLGlzRGVmaW5lZDpFLGlzTnVsbDpTLGlzTnVsbE9yVW5kZWZpbmVkOiQsaXNGdW5jdGlvbjpDLGlzTnVtYmVyOlQsaXNTdHJpbmc6UCxpc09iamVjdDprLGlzQXJyYXk6Tyxpc0RhdGU6eCxpc1JlZ0V4cDpqLGlzSW5qZWN0YWJsZTpWLGlzUHJvbWlzZTpJLFF1ZXVlOkl0LG1heExlbmd0aDpEdCxwYWRTdHJpbmc6cXQsa2Vib2JTdHJpbmc6VXQsZnVuY3Rpb25Ub1N0cmluZzpGdCxmblRvU3RyaW5nOk50LHN0cmluZ2lmeTpCdCxiZWZvcmVBZnRlclN1YnN0cjpHdCxob3N0UmVnZXg6V3Qsc3RyaXBMYXN0UGF0aEVsZW1lbnQ6enQsc3BsaXRIYXNoOkp0LHNwbGl0UXVlcnk6UXQsc3BsaXRFcXVhbDpLdCx0cmltSGFzaFZhbDpZdCxzcGxpdE9uRGVsaW06WnQsam9pbk5laWdoYm9yc1I6WHQsZ2V0IENhdGVnb3J5KCl7cmV0dXJuIGQuQ2F0ZWdvcnl9LFRyYWNlOnNlLHRyYWNlOmNlLGdldCBEZWZUeXBlKCl7cmV0dXJuIGQuRGVmVHlwZX0sUGFyYW06eWUsUGFyYW1UeXBlczpnZSxTdGF0ZVBhcmFtczp3ZSxQYXJhbVR5cGU6ZmUsUGF0aE5vZGU6X2UsUGF0aFV0aWxzOiRlLHJlc29sdmVQb2xpY2llczpiZSxkZWZhdWx0UmVzb2x2ZVBvbGljeTpSZSxSZXNvbHZhYmxlOkVlLE5BVElWRV9JTkpFQ1RPUl9UT0tFTjprZSxSZXNvbHZlQ29udGV4dDpPZSxyZXNvbHZhYmxlc0J1aWxkZXI6cWUsU3RhdGVCdWlsZGVyOk5lLFN0YXRlT2JqZWN0OkxlLFN0YXRlTWF0Y2hlcjpNZSxTdGF0ZVF1ZXVlTWFuYWdlcjpCZSxTdGF0ZVJlZ2lzdHJ5OkdlLFN0YXRlU2VydmljZTpNcixUYXJnZXRTdGF0ZTpTZSxnZXQgVHJhbnNpdGlvbkhvb2tQaGFzZSgpe3JldHVybiBkLlRyYW5zaXRpb25Ib29rUGhhc2V9LGdldCBUcmFuc2l0aW9uSG9va1Njb3BlKCl7cmV0dXJuIGQuVHJhbnNpdGlvbkhvb2tTY29wZX0sSG9va0J1aWxkZXI6WWUsbWF0Y2hTdGF0ZTpKZSxSZWdpc3RlcmVkSG9vazpRZSxtYWtlRXZlbnQ6S2UsZ2V0IFJlamVjdFR5cGUoKXtyZXR1cm4gZC5SZWplY3RUeXBlfSxSZWplY3Rpb246QXQsVHJhbnNpdGlvbjpYZSxUcmFuc2l0aW9uSG9vazp6ZSxUcmFuc2l0aW9uRXZlbnRUeXBlOnFyLGRlZmF1bHRUcmFuc09wdHM6TnIsVHJhbnNpdGlvblNlcnZpY2U6THIsVXJsUnVsZXM6dnIsVXJsQ29uZmlnOmRyLFVybE1hdGNoZXI6bnIsUGFyYW1GYWN0b3J5Om9yLFVybE1hdGNoZXJGYWN0b3J5OmFyLFVybFJvdXRlcjpmcixVcmxSdWxlRmFjdG9yeTp1cixCYXNlVXJsUnVsZTpzcixVcmxTZXJ2aWNlOm1yLFZpZXdTZXJ2aWNlOmxyLFVJUm91dGVyR2xvYmFsczpocixVSVJvdXRlcjpfciwkcTpCciwkaW5qZWN0b3I6SnIsQmFzZUxvY2F0aW9uU2VydmljZXM6bm4sSGFzaExvY2F0aW9uU2VydmljZTphbixNZW1vcnlMb2NhdGlvblNlcnZpY2U6c24sUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlOmZuLE1lbW9yeUxvY2F0aW9uQ29uZmlnOmxuLEJyb3dzZXJMb2NhdGlvbkNvbmZpZzpobixrZXlWYWxzVG9PYmplY3RSOlFyLGdldFBhcmFtczpLcixwYXJzZVVybDpZcixidWlsZFVybDpacixsb2NhdGlvblBsdWdpbkZhY3Rvcnk6WHIsc2VydmljZXNQbHVnaW46cG4saGFzaExvY2F0aW9uUGx1Z2luOnZuLHB1c2hTdGF0ZUxvY2F0aW9uUGx1Z2luOmRuLG1lbW9yeUxvY2F0aW9uUGx1Z2luOm1uLFVJUm91dGVyUGx1Z2luQmFzZTp5bn0pO2Z1bmN0aW9uIHduKCl7dmFyIHI9bnVsbDtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gcj1yfHxBLiRpbmplY3Rvci5nZXQoXCIkdGVtcGxhdGVGYWN0b3J5XCIpLFtuZXcgYm4odCxlLHIpXX19dmFyIF9uPWZ1bmN0aW9uKHQscil7cmV0dXJuIHQucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR8fEUocltlXSl9LCExKX07ZnVuY3Rpb24gU24obil7aWYoIW4ucGFyZW50KXJldHVybnt9O3ZhciBpPVtcImNvbXBvbmVudFwiLFwiYmluZGluZ3NcIixcImNvbXBvbmVudFByb3ZpZGVyXCJdLG89W1widGVtcGxhdGVQcm92aWRlclwiLFwidGVtcGxhdGVVcmxcIixcInRlbXBsYXRlXCIsXCJub3RpZnlcIixcImFzeW5jXCJdLmNvbmNhdChbXCJjb250cm9sbGVyXCIsXCJjb250cm9sbGVyUHJvdmlkZXJcIixcImNvbnRyb2xsZXJBc1wiLFwicmVzb2x2ZUFzXCJdKSx0PWkuY29uY2F0KG8pO2lmKEUobi52aWV3cykmJl9uKHQsbikpdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgJ1wiK24ubmFtZStcIicgaGFzIGEgJ3ZpZXdzJyBvYmplY3QuIEl0IGNhbm5vdCBhbHNvIGhhdmUgXFxcInZpZXcgcHJvcGVydGllc1xcXCIgYXQgdGhlIHN0YXRlIGxldmVsLiAgTW92ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMgaW50byBhIHZpZXcgKGluIHRoZSAndmlld3MnIG9iamVjdCk6ICBcIit0LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gRShuW3RdKX0pLmpvaW4oXCIsIFwiKSk7dmFyIGE9e30sZT1uLnZpZXdzfHx7JGRlZmF1bHQ6aXQobix0KX07cmV0dXJuIE4oZSxmdW5jdGlvbih0LGUpe2lmKGU9ZXx8XCIkZGVmYXVsdFwiLFAodCkmJih0PXtjb21wb25lbnQ6dH0pLHQ9TCh7fSx0KSxfbihpLHQpJiZfbihvLHQpKXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjb21iaW5lOiBcIitpLmpvaW4oXCJ8XCIpK1wiIHdpdGg6IFwiK28uam9pbihcInxcIikrXCIgaW4gc3RhdGV2aWV3OiAnXCIrZStcIkBcIituLm5hbWUrXCInXCIpO3QucmVzb2x2ZUFzPXQucmVzb2x2ZUFzfHxcIiRyZXNvbHZlXCIsdC4kdHlwZT1cIm5nMVwiLHQuJGNvbnRleHQ9bix0LiRuYW1lPWU7dmFyIHI9bHIubm9ybWFsaXplVUlWaWV3VGFyZ2V0KHQuJGNvbnRleHQsdC4kbmFtZSk7dC4kdWlWaWV3TmFtZT1yLnVpVmlld05hbWUsdC4kdWlWaWV3Q29udGV4dEFuY2hvcj1yLnVpVmlld0NvbnRleHRBbmNob3IsYVtlXT10fSksYX12YXIgJG49MCxibj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3ZhciBuPXRoaXM7dGhpcy5wYXRoPXQsdGhpcy52aWV3RGVjbD1lLHRoaXMuZmFjdG9yeT1yLHRoaXMuJGlkPSRuKyssdGhpcy5sb2FkZWQ9ITEsdGhpcy5nZXRUZW1wbGF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBuLmNvbXBvbmVudD9uLmZhY3RvcnkubWFrZUNvbXBvbmVudFRlbXBsYXRlKHQsZSxuLmNvbXBvbmVudCxuLnZpZXdEZWNsLmJpbmRpbmdzKTpuLnRlbXBsYXRlfX1yZXR1cm4gdC5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1BLiRxLHI9bmV3IE9lKHRoaXMucGF0aCksbj10aGlzLnBhdGgucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIEwodCxlLnBhcmFtVmFsdWVzKX0se30pLGk9e3RlbXBsYXRlOnQud2hlbih0aGlzLmZhY3RvcnkuZnJvbUNvbmZpZyh0aGlzLnZpZXdEZWNsLG4scikpLGNvbnRyb2xsZXI6dC53aGVuKHRoaXMuZ2V0Q29udHJvbGxlcihyKSl9O3JldHVybiB0LmFsbChpKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoXCJMb2FkZWRcIixlKSxlLmNvbnRyb2xsZXI9dC5jb250cm9sbGVyLEwoZSx0LnRlbXBsYXRlKSxlfSl9LHQucHJvdG90eXBlLmdldENvbnRyb2xsZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52aWV3RGVjbC5jb250cm9sbGVyUHJvdmlkZXI7aWYoIVYoZSkpcmV0dXJuIHRoaXMudmlld0RlY2wuY29udHJvbGxlcjt2YXIgcj1BLiRpbmplY3Rvci5hbm5vdGF0ZShlKSxuPU8oZSk/Q3QoZSk6ZTtyZXR1cm4gbmV3IEVlKFwiXCIsbixyKS5nZXQodCl9LHR9KCksUm49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIG49dGhpczt0aGlzLl91c2VIdHRwPWIudmVyc2lvbi5taW5vcjwzLHRoaXMuJGdldD1bXCIkaHR0cFwiLFwiJHRlbXBsYXRlQ2FjaGVcIixcIiRpbmplY3RvclwiLGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gbi4kdGVtcGxhdGVSZXF1ZXN0PXIuaGFzJiZyLmhhcyhcIiR0ZW1wbGF0ZVJlcXVlc3RcIikmJnIuZ2V0KFwiJHRlbXBsYXRlUmVxdWVzdFwiKSxuLiRodHRwPXQsbi4kdGVtcGxhdGVDYWNoZT1lLG59XX1yZXR1cm4gdC5wcm90b3R5cGUudXNlSHR0cFNlcnZpY2U9ZnVuY3Rpb24odCl7dGhpcy5fdXNlSHR0cD10fSx0LnByb3RvdHlwZS5mcm9tQ29uZmlnPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1mdW5jdGlvbih0KXtyZXR1cm4gQS4kcS53aGVuKHQpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJue3RlbXBsYXRlOnR9fSl9LGk9ZnVuY3Rpb24odCl7cmV0dXJuIEEuJHEud2hlbih0KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybntjb21wb25lbnQ6dH19KX07cmV0dXJuIEUodC50ZW1wbGF0ZSk/bih0aGlzLmZyb21TdHJpbmcodC50ZW1wbGF0ZSxlKSk6RSh0LnRlbXBsYXRlVXJsKT9uKHRoaXMuZnJvbVVybCh0LnRlbXBsYXRlVXJsLGUpKTpFKHQudGVtcGxhdGVQcm92aWRlcik/bih0aGlzLmZyb21Qcm92aWRlcih0LnRlbXBsYXRlUHJvdmlkZXIsZSxyKSk6RSh0LmNvbXBvbmVudCk/aSh0LmNvbXBvbmVudCk6RSh0LmNvbXBvbmVudFByb3ZpZGVyKT9pKHRoaXMuZnJvbUNvbXBvbmVudFByb3ZpZGVyKHQuY29tcG9uZW50UHJvdmlkZXIsZSxyKSk6bihcIjx1aS12aWV3PjwvdWktdmlldz5cIil9LHQucHJvdG90eXBlLmZyb21TdHJpbmc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQyh0KT90KGUpOnR9LHQucHJvdG90eXBlLmZyb21Vcmw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQyh0KSYmKHQ9dChlKSksbnVsbD09dD9udWxsOnRoaXMuX3VzZUh0dHA/dGhpcy4kaHR0cC5nZXQodCx7Y2FjaGU6dGhpcy4kdGVtcGxhdGVDYWNoZSxoZWFkZXJzOntBY2NlcHQ6XCJ0ZXh0L2h0bWxcIn19KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRhdGF9KTp0aGlzLiR0ZW1wbGF0ZVJlcXVlc3QodCl9LHQucHJvdG90eXBlLmZyb21Qcm92aWRlcj1mdW5jdGlvbih0LGUscil7dmFyIG49QS4kaW5qZWN0b3IuYW5ub3RhdGUodCksaT1PKHQpP0N0KHQpOnQ7cmV0dXJuIG5ldyBFZShcIlwiLGksbikuZ2V0KHIpfSx0LnByb3RvdHlwZS5mcm9tQ29tcG9uZW50UHJvdmlkZXI9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPUEuJGluamVjdG9yLmFubm90YXRlKHQpLGk9Tyh0KT9DdCh0KTp0O3JldHVybiBuZXcgRWUoXCJcIixpLG4pLmdldChyKX0sdC5wcm90b3R5cGUubWFrZUNvbXBvbmVudFRlbXBsYXRlPWZ1bmN0aW9uKHMsYyx0LGYpe2Y9Znx8e307dmFyIGw9Mzw9Yi52ZXJzaW9uLm1pbm9yP1wiOjpcIjpcIlwiLGg9ZnVuY3Rpb24odCl7dmFyIGU9VXQodCk7cmV0dXJuL14oeHxkYXRhKS0vLmV4ZWMoZSk/XCJ4LVwiK2U6ZX0sZT1mdW5jdGlvbih0KXt2YXIgZT1BLiRpbmplY3Rvci5nZXQodCtcIkRpcmVjdGl2ZVwiKTtpZighZXx8IWUubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBmaW5kIGNvbXBvbmVudCBuYW1lZCAnXCIrdCtcIidcIik7cmV0dXJuIGUubWFwKEVuKS5yZWR1Y2UodnQsW10pfSh0KS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9dC5uYW1lLHI9dC50eXBlLG49aChlKTtpZihzLmF0dHIobikmJiFmW2VdKXJldHVybiBuK1wiPSdcIitzLmF0dHIobikrXCInXCI7dmFyIGk9ZltlXXx8ZTtpZihcIkBcIj09PXIpcmV0dXJuIG4rXCI9J3t7XCIrbCtcIiRyZXNvbHZlLlwiK2krXCJ9fSdcIjtpZihcIiZcIiE9PXIpcmV0dXJuIG4rXCI9J1wiK2wrXCIkcmVzb2x2ZS5cIitpK1wiJ1wiO3ZhciBvPWMuZ2V0UmVzb2x2YWJsZShpKSxhPW8mJm8uZGF0YSx1PWEmJkEuJGluamVjdG9yLmFubm90YXRlKGEpfHxbXTtyZXR1cm4gbitcIj0nJHJlc29sdmUuXCIraSsoTyhhKT9cIltcIisoYS5sZW5ndGgtMSkrXCJdXCI6XCJcIikrXCIoXCIrdS5qb2luKFwiLFwiKStcIiknXCJ9KS5qb2luKFwiIFwiKSxyPWgodCk7cmV0dXJuXCI8XCIrcitcIiBcIitlK1wiPjwvXCIrcitcIj5cIn0sdH0oKTt2YXIgRW49ZnVuY3Rpb24odCl7cmV0dXJuIGsodC5iaW5kVG9Db250cm9sbGVyKT9Dbih0LmJpbmRUb0NvbnRyb2xsZXIpOkNuKHQuc2NvcGUpfSxDbj1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmtleXMoZXx8e30pLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bdCwvXihbPTxAJl0pWz9dPyguKikvLmV4ZWMoZVt0XSldfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBFKHQpJiZPKHRbMV0pfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybntuYW1lOnRbMV1bMl18fHRbMF0sdHlwZTp0WzFdWzFdfX0pfSxUbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHIodCxlKXt0aGlzLnN0YXRlUmVnaXN0cnk9dCx0aGlzLnN0YXRlU2VydmljZT1lLFcodihyLnByb3RvdHlwZSksdGhpcyx2KHRoaXMpKX1yZXR1cm4gci5wcm90b3R5cGUuZGVjb3JhdG9yPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3RhdGVSZWdpc3RyeS5kZWNvcmF0b3IodCxlKXx8dGhpc30sci5wcm90b3R5cGUuc3RhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gayh0KT9lPXQ6ZS5uYW1lPXQsdGhpcy5zdGF0ZVJlZ2lzdHJ5LnJlZ2lzdGVyKGUpLHRoaXN9LHIucHJvdG90eXBlLm9uSW52YWxpZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdGF0ZVNlcnZpY2Uub25JbnZhbGlkKHQpfSxyfSgpLFBuPWZ1bmN0aW9uKHIpe3JldHVybiBmdW5jdGlvbih0LGUpe3ZhciBpPXRbcl0sbz1cIm9uRXhpdFwiPT09cj9cImZyb21cIjpcInRvXCI7cmV0dXJuIGk/ZnVuY3Rpb24odCxlKXt2YXIgcj1uZXcgT2UodC50cmVlQ2hhbmdlcyhvKSkuc3ViQ29udGV4dChlLiQkc3RhdGUoKSksbj1MKEduKHIpLHskc3RhdGUkOmUsJHRyYW5zaXRpb24kOnR9KTtyZXR1cm4gQS4kaW5qZWN0b3IuaW52b2tlKGksdGhpcyxuKX06dm9pZCAwfX0sa249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX3VybExpc3RlbmVycz1bXSx0aGlzLiRsb2NhdGlvblByb3ZpZGVyPXQ7dmFyIGU9dih0KTtXKGUsdGhpcyxlLFtcImhhc2hQcmVmaXhcIl0pfXJldHVybiB0Lm1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dC51cmxNYXRjaGVyRmFjdG9yeS50eXBlKFwicGF0aFwiKTtlLmVuY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dD90LnRvU3RyaW5nKCkucmVwbGFjZSgvKH58XFwvKS9nLGZ1bmN0aW9uKHQpe3JldHVybntcIn5cIjpcIn5+XCIsXCIvXCI6XCJ+MkZcIn1bdF19KTp0fSxlLmRlY29kZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dD90LnRvU3RyaW5nKCkucmVwbGFjZSgvKH5+fH4yRikvZyxmdW5jdGlvbih0KXtyZXR1cm57XCJ+flwiOlwiflwiLFwifjJGXCI6XCIvXCJ9W3RdfSk6dH19LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLm9uQ2hhbmdlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3VybExpc3RlbmVycy5wdXNoKHQpLGZ1bmN0aW9uKCl7cmV0dXJuIEsoZS5fdXJsTGlzdGVuZXJzKSh0KX19LHQucHJvdG90eXBlLmh0bWw1TW9kZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKCk7cmV0dXJuKHQ9ayh0KT90LmVuYWJsZWQ6dCkmJnRoaXMuJHNuaWZmZXIuaGlzdG9yeX0sdC5wcm90b3R5cGUuYmFzZUhyZWY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFzZUhyZWZ8fCh0aGlzLl9iYXNlSHJlZj10aGlzLiRicm93c2VyLmJhc2VIcmVmKCl8fHRoaXMuJHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSl9LHQucHJvdG90eXBlLnVybD1mdW5jdGlvbih0LGUscil7cmV0dXJuIHZvaWQgMD09PWUmJihlPSExKSxFKHQpJiZ0aGlzLiRsb2NhdGlvbi51cmwodCksZSYmdGhpcy4kbG9jYXRpb24ucmVwbGFjZSgpLHImJnRoaXMuJGxvY2F0aW9uLnN0YXRlKHIpLHRoaXMuJGxvY2F0aW9uLnVybCgpfSx0LnByb3RvdHlwZS5fcnVudGltZVNlcnZpY2VzPWZ1bmN0aW9uKHQsZSxyLG4saSl7dmFyIG89dGhpczt0aGlzLiRsb2NhdGlvbj1lLHRoaXMuJHNuaWZmZXI9cix0aGlzLiRicm93c2VyPW4sdGhpcy4kd2luZG93PWksdC4kb24oXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsZnVuY3Rpb24oZSl7cmV0dXJuIG8uX3VybExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSl9KTt2YXIgYT12KGUpO1coYSx0aGlzLGEsW1wicmVwbGFjZVwiLFwicGF0aFwiLFwic2VhcmNoXCIsXCJoYXNoXCJdKSxXKGEsdGhpcyxhLFtcInBvcnRcIixcInByb3RvY29sXCIsXCJob3N0XCJdKX0sdH0oKSxPbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHIodCl7dGhpcy5yb3V0ZXI9dH1yZXR1cm4gci5pbmplY3RhYmxlSGFuZGxlcj1mdW5jdGlvbihlLHIpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gQS4kaW5qZWN0b3IuaW52b2tlKHIsbnVsbCx7JG1hdGNoOnQsJHN0YXRlUGFyYW1zOmUuZ2xvYmFscy5wYXJhbXN9KX19LHIucHJvdG90eXBlLiRnZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJvdXRlci51cmxTZXJ2aWNlO3JldHVybiB0aGlzLnJvdXRlci51cmxSb3V0ZXIudXBkYXRlKCEwKSx0LmludGVyY2VwdERlZmVycmVkfHx0Lmxpc3RlbigpLHRoaXMucm91dGVyLnVybFJvdXRlcn0sci5wcm90b3R5cGUucnVsZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCFDKHQpKXRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIHI9bmV3IHNyKGZ1bmN0aW9uKCl7cmV0dXJuIHQoQS4kaW5qZWN0b3IsZS5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlKX0sQik7cmV0dXJuIHRoaXMucm91dGVyLnVybFNlcnZpY2UucnVsZXMucnVsZShyKSx0aGlzfSxyLnByb3RvdHlwZS5vdGhlcndpc2U9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxyPXRoaXMucm91dGVyLnVybFNlcnZpY2UucnVsZXM7aWYoUCh0KSlyLm90aGVyd2lzZSh0KTtlbHNle2lmKCFDKHQpKXRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgc3RyaW5nIG9yIGZ1bmN0aW9uXCIpO3Iub3RoZXJ3aXNlKGZ1bmN0aW9uKCl7cmV0dXJuIHQoQS4kaW5qZWN0b3IsZS5yb3V0ZXIubG9jYXRpb25TZXJ2aWNlKX0pfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS53aGVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKE8oZSl8fEMoZSkpJiYoZT1yLmluamVjdGFibGVIYW5kbGVyKHRoaXMucm91dGVyLGUpKSx0aGlzLnJvdXRlci51cmxTZXJ2aWNlLnJ1bGVzLndoZW4odCxlKSx0aGlzfSxyLnByb3RvdHlwZS5kZWZlckludGVyY2VwdD1mdW5jdGlvbih0KXt0aGlzLnJvdXRlci51cmxTZXJ2aWNlLmRlZmVySW50ZXJjZXB0KHQpfSxyfSgpO2IubW9kdWxlKFwidWkucm91dGVyLmFuZ3VsYXIxXCIsW10pO3ZhciB4bj1iLm1vZHVsZShcInVpLnJvdXRlci5pbml0XCIsW1wibmdcIl0pLGpuPWIubW9kdWxlKFwidWkucm91dGVyLnV0aWxcIixbXCJ1aS5yb3V0ZXIuaW5pdFwiXSksVm49Yi5tb2R1bGUoXCJ1aS5yb3V0ZXIucm91dGVyXCIsW1widWkucm91dGVyLnV0aWxcIl0pLEluPWIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIsW1widWkucm91dGVyLnJvdXRlclwiLFwidWkucm91dGVyLnV0aWxcIixcInVpLnJvdXRlci5hbmd1bGFyMVwiXSksSG49Yi5tb2R1bGUoXCJ1aS5yb3V0ZXJcIixbXCJ1aS5yb3V0ZXIuaW5pdFwiLFwidWkucm91dGVyLnN0YXRlXCIsXCJ1aS5yb3V0ZXIuYW5ndWxhcjFcIl0pLEFuPShiLm1vZHVsZShcInVpLnJvdXRlci5jb21wYXRcIixbXCJ1aS5yb3V0ZXJcIl0pLG51bGwpO2Z1bmN0aW9uIERuKHQpeyhBbj10aGlzLnJvdXRlcj1uZXcgX3IpLnN0YXRlUHJvdmlkZXI9bmV3IFRuKEFuLnN0YXRlUmVnaXN0cnksQW4uc3RhdGVTZXJ2aWNlKSxBbi5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcihcInZpZXdzXCIsU24pLEFuLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKFwib25FeGl0XCIsUG4oXCJvbkV4aXRcIikpLEFuLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKFwib25SZXRhaW5cIixQbihcIm9uUmV0YWluXCIpKSxBbi5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcihcIm9uRW50ZXJcIixQbihcIm9uRW50ZXJcIikpLEFuLnZpZXdTZXJ2aWNlLl9wbHVnaW5hcGkuX3ZpZXdDb25maWdGYWN0b3J5KFwibmcxXCIsd24oKSk7dmFyIHU9QW4ubG9jYXRpb25TZXJ2aWNlPUFuLmxvY2F0aW9uQ29uZmlnPW5ldyBrbih0KTtmdW5jdGlvbiBlKHQsZSxyLG4saSxvLGEpe3JldHVybiB1Ll9ydW50aW1lU2VydmljZXMoaSx0LG4sZSxyKSxkZWxldGUgQW4ucm91dGVyLGRlbGV0ZSBBbi4kZ2V0LEFufXJldHVybiBrbi5tb25rZXlQYXRjaFBhdGhQYXJhbWV0ZXJUeXBlKEFuKSwoKEFuLnJvdXRlcj1BbikuJGdldD1lKS4kaW5qZWN0PVtcIiRsb2NhdGlvblwiLFwiJGJyb3dzZXJcIixcIiR3aW5kb3dcIixcIiRzbmlmZmVyXCIsXCIkcm9vdFNjb3BlXCIsXCIkaHR0cFwiLFwiJHRlbXBsYXRlQ2FjaGVcIl0sQW59RG4uJGluamVjdD1bXCIkbG9jYXRpb25Qcm92aWRlclwiXTt2YXIgcW49ZnVuY3Rpb24ocil7cmV0dXJuW1wiJHVpUm91dGVyUHJvdmlkZXJcIixmdW5jdGlvbih0KXt2YXIgZT10LnJvdXRlcltyXTtyZXR1cm4gZS4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9XX07ZnVuY3Rpb24gVW4oZSx0LHIpe2lmKEEuJGluamVjdG9yPWUsQS4kcT10LCFlLmhhc093blByb3BlcnR5KFwic3RyaWN0RGlcIikpdHJ5e2UuaW52b2tlKGZ1bmN0aW9uKHQpe30pfWNhdGNoKHQpe2Uuc3RyaWN0RGk9ISEvc3RyaWN0IG1vZGUvLmV4ZWModCYmdC50b1N0cmluZygpKX1yLnN0YXRlUmVnaXN0cnkuZ2V0KCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LiQkc3RhdGUoKS5yZXNvbHZhYmxlc30pLnJlZHVjZSh2dCxbXSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiZGVmZXJyZWRcIj09PXQuZGVwc30pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuZGVwcz1lLmFubm90YXRlKHQucmVzb2x2ZUZuLGUuc3RyaWN0RGkpfSl9VW4uJGluamVjdD1bXCIkaW5qZWN0b3JcIixcIiRxXCIsXCIkdWlSb3V0ZXJcIl07ZnVuY3Rpb24gRm4odCl7dC4kd2F0Y2goZnVuY3Rpb24oKXtjZS5hcHByb3hpbWF0ZURpZ2VzdHMrK30pfUZuLiRpbmplY3Q9W1wiJHJvb3RTY29wZVwiXSx4bi5wcm92aWRlcihcIiR1aVJvdXRlclwiLERuKSxWbi5wcm92aWRlcihcIiR1cmxSb3V0ZXJcIixbXCIkdWlSb3V0ZXJQcm92aWRlclwiLGZ1bmN0aW9uKHQpe3JldHVybiB0LnVybFJvdXRlclByb3ZpZGVyPW5ldyBPbih0KX1dKSxqbi5wcm92aWRlcihcIiR1cmxTZXJ2aWNlXCIscW4oXCJ1cmxTZXJ2aWNlXCIpKSxqbi5wcm92aWRlcihcIiR1cmxNYXRjaGVyRmFjdG9yeVwiLFtcIiR1aVJvdXRlclByb3ZpZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gQW4udXJsTWF0Y2hlckZhY3Rvcnl9XSksam4ucHJvdmlkZXIoXCIkdGVtcGxhdGVGYWN0b3J5XCIsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFJufSksSW4ucHJvdmlkZXIoXCIkc3RhdGVSZWdpc3RyeVwiLHFuKFwic3RhdGVSZWdpc3RyeVwiKSksSW4ucHJvdmlkZXIoXCIkdWlSb3V0ZXJHbG9iYWxzXCIscW4oXCJnbG9iYWxzXCIpKSxJbi5wcm92aWRlcihcIiR0cmFuc2l0aW9uc1wiLHFuKFwidHJhbnNpdGlvblNlcnZpY2VcIikpLEluLnByb3ZpZGVyKFwiJHN0YXRlXCIsW1wiJHVpUm91dGVyUHJvdmlkZXJcIixmdW5jdGlvbigpe3JldHVybiBMKEFuLnN0YXRlUHJvdmlkZXIseyRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQW4uc3RhdGVTZXJ2aWNlfX0pfV0pLEluLmZhY3RvcnkoXCIkc3RhdGVQYXJhbXNcIixbXCIkdWlSb3V0ZXJcIixmdW5jdGlvbih0KXtyZXR1cm4gdC5nbG9iYWxzLnBhcmFtc31dKSxIbi5mYWN0b3J5KFwiJHZpZXdcIixmdW5jdGlvbigpe3JldHVybiBBbi52aWV3U2VydmljZX0pLEhuLnNlcnZpY2UoXCIkdHJhY2VcIixmdW5jdGlvbigpe3JldHVybiBjZX0pLEhuLnJ1bihGbiksam4ucnVuKFtcIiR1cmxNYXRjaGVyRmFjdG9yeVwiLGZ1bmN0aW9uKHQpe31dKSxJbi5ydW4oW1wiJHN0YXRlXCIsZnVuY3Rpb24odCl7fV0pLFZuLnJ1bihbXCIkdXJsUm91dGVyXCIsZnVuY3Rpb24odCl7fV0pLHhuLnJ1bihVbik7dmFyIE5uLExuLE1uLEJuLEduPWZ1bmN0aW9uKHIpe3JldHVybiByLmdldFRva2VucygpLmZpbHRlcihQKS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9ci5nZXRSZXNvbHZhYmxlKHQpO3JldHVyblt0LFwiTk9XQUlUXCI9PT1yLmdldFBvbGljeShlKS5hc3luYz9lLnByb21pc2U6ZS5kYXRhXX0pLnJlZHVjZShFdCx7fSl9O2Z1bmN0aW9uIFduKHQpe3ZhciBlLHI9dC5tYXRjaCgvXlxccyooe1tefV0qfSlcXHMqJC8pO2lmKHImJih0PVwiKFwiK3JbMV0rXCIpXCIpLCEoZT10LnJlcGxhY2UoL1xcbi9nLFwiIFwiKS5tYXRjaCgvXlxccyooW14oXSo/KVxccyooXFwoKC4qKVxcKSk/XFxzKiQvKSl8fDQhPT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0YXRlIHJlZiAnXCIrdCtcIidcIik7cmV0dXJue3N0YXRlOmVbMV18fG51bGwscGFyYW1FeHByOmVbM118fG51bGx9fWZ1bmN0aW9uIHpuKHQpe3ZhciBlPXQucGFyZW50KCkuaW5oZXJpdGVkRGF0YShcIiR1aVZpZXdcIikscj1SKFwiJGNmZy5wYXRoXCIpKGUpO3JldHVybiByP0N0KHIpLnN0YXRlLm5hbWU6dm9pZCAwfWZ1bmN0aW9uIEpuKHQsZSxyKXt2YXIgbixpPXIudWlTdGF0ZXx8dC5jdXJyZW50Lm5hbWUsbz1MKChuPXQse3JlbGF0aXZlOnpuKGUpfHxuLiRjdXJyZW50LGluaGVyaXQ6ITAsc291cmNlOlwic3JlZlwifSksci51aVN0YXRlT3B0c3x8e30pLGE9dC5ocmVmKGksci51aVN0YXRlUGFyYW1zLG8pO3JldHVybnt1aVN0YXRlOmksdWlTdGF0ZVBhcmFtczpyLnVpU3RhdGVQYXJhbXMsdWlTdGF0ZU9wdHM6byxocmVmOmF9fWZ1bmN0aW9uIFFuKHQpe3ZhciBlPVwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0LnByb3AoXCJocmVmXCIpKSxyPVwiRk9STVwiPT09dFswXS5ub2RlTmFtZTtyZXR1cm57YXR0cjpyP1wiYWN0aW9uXCI6ZT9cInhsaW5rOmhyZWZcIjpcImhyZWZcIixpc0FuY2hvcjpcIkFcIj09PXQucHJvcChcInRhZ05hbWVcIikudG9VcHBlckNhc2UoKSxjbGlja2FibGU6IXJ9fWZ1bmN0aW9uIEtuKG8sYSx1LHMsYyl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXQud2hpY2h8fHQuYnV0dG9uLHI9YygpO2lmKCEoMTxlfHx0LmN0cmxLZXl8fHQubWV0YUtleXx8dC5zaGlmdEtleXx8by5hdHRyKFwidGFyZ2V0XCIpKSl7dmFyIG49dShmdW5jdGlvbigpe28uYXR0cihcImRpc2FibGVkXCIpfHxhLmdvKHIudWlTdGF0ZSxyLnVpU3RhdGVQYXJhbXMsci51aVN0YXRlT3B0cyl9KTt0LnByZXZlbnREZWZhdWx0KCk7dmFyIGk9cy5pc0FuY2hvciYmIXIuaHJlZj8xOjA7dC5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2ktLTw9MCYmdS5jYW5jZWwobil9fX19ZnVuY3Rpb24gWW4oaSx0LG8sZSl7dmFyIGE7ZSYmKGE9ZS5ldmVudHMpLE8oYSl8fChhPVtcImNsaWNrXCJdKTtmb3IodmFyIHI9aS5vbj9cIm9uXCI6XCJiaW5kXCIsbj0wLHU9YTtuPHUubGVuZ3RoO24rKyl7dmFyIHM9dVtuXTtpW3JdKHMsbyl9dC4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWkub2ZmP1wib2ZmXCI6XCJ1bmJpbmRcIixlPTAscj1hO2U8ci5sZW5ndGg7ZSsrKXt2YXIgbj1yW2VdO2lbdF0obixvKX19KX1mdW5jdGlvbiBabihuKXt2YXIgdD1mdW5jdGlvbih0LGUscil7cmV0dXJuIG4uaXModCxlLHIpfTtyZXR1cm4gdC4kc3RhdGVmdWw9ITAsdH1mdW5jdGlvbiBYbihuKXt2YXIgdD1mdW5jdGlvbih0LGUscil7cmV0dXJuIG4uaW5jbHVkZXModCxlLHIpfTtyZXR1cm4gdC4kc3RhdGVmdWw9ITAsdH1mdW5jdGlvbiB0aShkLG0seSx0LGcsZSl7dmFyIHc9UihcInZpZXdEZWNsLmNvbnRyb2xsZXJBc1wiKSxfPVIoXCJ2aWV3RGVjbC5yZXNvbHZlQXNcIik7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxjb21waWxlOmZ1bmN0aW9uKHQpe3ZhciB2PXQuaHRtbCgpO3JldHVybiB0LmVtcHR5KCksZnVuY3Rpb24oZSxyKXt2YXIgdD1yLmRhdGEoXCIkdWlWaWV3XCIpO2lmKCF0KXJldHVybiByLmh0bWwodiksdm9pZCBkKHIuY29udGVudHMoKSkoZSk7dmFyIG49dC4kY2ZnfHx7dmlld0RlY2w6e30sZ2V0VGVtcGxhdGU6R30saT1uLnBhdGgmJm5ldyBPZShuLnBhdGgpO3IuaHRtbChuLmdldFRlbXBsYXRlKHIsaSl8fHYpLGNlLnRyYWNlVUlWaWV3RmlsbCh0LiR1aVZpZXcsci5odG1sKCkpO3ZhciBvPWQoci5jb250ZW50cygpKSxhPW4uY29udHJvbGxlcix1PXcobikscz1fKG4pLGM9aSYmR24oaSk7aWYoZVtzXT1jLGEpe3ZhciBmPW0oYSxMKHt9LGMseyRzY29wZTplLCRlbGVtZW50OnJ9KSk7dSYmKGVbdV09ZixlW3VdW3NdPWMpLHIuZGF0YShcIiRuZ0NvbnRyb2xsZXJDb250cm9sbGVyXCIsZiksci5jaGlsZHJlbigpLmRhdGEoXCIkbmdDb250cm9sbGVyQ29udHJvbGxlclwiLGYpLG5pKGcseSxmLGUsbil9aWYoUChuLmNvbXBvbmVudCkpdmFyIGw9VXQobi5jb21wb25lbnQpLGg9bmV3IFJlZ0V4cChcIl4oeC18ZGF0YS0pP1wiK2wrXCIkXCIsXCJpXCIpLHA9ZS4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgdD1bXS5zbGljZS5jYWxsKHJbMF0uY2hpbGRyZW4pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC50YWdOYW1lJiZoLmV4ZWModC50YWdOYW1lKX0pO3JldHVybiB0JiZiLmVsZW1lbnQodCkuZGF0YShcIiRcIituLmNvbXBvbmVudCtcIkNvbnRyb2xsZXJcIil9LGZ1bmN0aW9uKHQpe3QmJihuaShnLHksdCxlLG4pLHAoKSl9KTtvKGUpfX19fU5uPVtcIiR1aVJvdXRlclwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihoLHApe3ZhciB2PWguc3RhdGVTZXJ2aWNlO3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOltcIj9edWlTcmVmQWN0aXZlXCIsXCI/XnVpU3JlZkFjdGl2ZUVxXCJdLGxpbms6ZnVuY3Rpb24odCxlLHIsbil7dmFyIGksbz1RbihlKSxhPW5bMV18fG5bMF0sdT1udWxsLHM9e30sYz1mdW5jdGlvbigpe3JldHVybiBKbih2LGUscyl9LGY9V24oci51aVNyZWYpO2Z1bmN0aW9uIGwoKXt2YXIgdD1jKCk7dSYmdSgpLGEmJih1PWEuJCRhZGRTdGF0ZUluZm8odC51aVN0YXRlLHQudWlTdGF0ZVBhcmFtcykpLG51bGwhPXQuaHJlZiYmci4kc2V0KG8uYXR0cix0LmhyZWYpfXMudWlTdGF0ZT1mLnN0YXRlLHMudWlTdGF0ZU9wdHM9ci51aVNyZWZPcHRzP3QuJGV2YWwoci51aVNyZWZPcHRzKTp7fSxmLnBhcmFtRXhwciYmKHQuJHdhdGNoKGYucGFyYW1FeHByLGZ1bmN0aW9uKHQpe3MudWlTdGF0ZVBhcmFtcz1MKHt9LHQpLGwoKX0sITApLHMudWlTdGF0ZVBhcmFtcz1MKHt9LHQuJGV2YWwoZi5wYXJhbUV4cHIpKSksbCgpLHQuJG9uKFwiJGRlc3Ryb3lcIixoLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKGwpKSx0LiRvbihcIiRkZXN0cm95XCIsaC50cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sbCkpLG8uY2xpY2thYmxlJiYoaT1LbihlLHYscCxvLGMpLFluKGUsdCxpLHMudWlTdGF0ZU9wdHMpKX19fV0sTG49W1wiJHVpUm91dGVyXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKHAsdil7dmFyIGQ9cC5zdGF0ZVNlcnZpY2U7cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6W1wiP151aVNyZWZBY3RpdmVcIixcIj9edWlTcmVmQWN0aXZlRXFcIl0sbGluazpmdW5jdGlvbihyLHQsbixlKXt2YXIgaSxvPVFuKHQpLGE9ZVsxXXx8ZVswXSx1PW51bGwscz17fSxjPWZ1bmN0aW9uKCl7cmV0dXJuIEpuKGQsdCxzKX0sZj1bXCJ1aVN0YXRlXCIsXCJ1aVN0YXRlUGFyYW1zXCIsXCJ1aVN0YXRlT3B0c1wiXSxsPWYucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZV09Ryx0fSx7fSk7ZnVuY3Rpb24gaCgpe3ZhciB0PWMoKTt1JiZ1KCksYSYmKHU9YS4kJGFkZFN0YXRlSW5mbyh0LnVpU3RhdGUsdC51aVN0YXRlUGFyYW1zKSksbnVsbCE9dC5ocmVmJiZuLiRzZXQoby5hdHRyLHQuaHJlZil9Zi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3NbZV09bltlXT9yLiRldmFsKG5bZV0pOm51bGwsbi4kb2JzZXJ2ZShlLGZ1bmN0aW9uKHQpe2xbZV0oKSxsW2VdPXIuJHdhdGNoKHQsZnVuY3Rpb24odCl7c1tlXT10LGgoKX0sITApfSl9KSxoKCksci4kb24oXCIkZGVzdHJveVwiLHAuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQoaCkpLHIuJG9uKFwiJGRlc3Ryb3lcIixwLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSxoKSksby5jbGlja2FibGUmJihpPUtuKHQsZCx2LG8sYyksWW4odCxyLGkscy51aVN0YXRlT3B0cykpfX19XSxNbj1bXCIkc3RhdGVcIixcIiRzdGF0ZVBhcmFtc1wiLFwiJGludGVycG9sYXRlXCIsXCIkdWlSb3V0ZXJcIixmdW5jdGlvbih2LHQsZCxtKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixmdW5jdGlvbih1LHMsdCl7dmFyIGMsbixlLHIsaSxmPVtdO2M9ZCh0LnVpU3JlZkFjdGl2ZUVxfHxcIlwiLCExKSh1KTt0cnl7bj11LiRldmFsKHQudWlTcmVmQWN0aXZlKX1jYXRjaCh0KXt9ZnVuY3Rpb24gbyh0KXt0LnByb21pc2UudGhlbihwLEcpfWZ1bmN0aW9uIGEoKXtsKG4pfWZ1bmN0aW9uIGwodCl7ayh0KSYmKGY9W10sTih0LGZ1bmN0aW9uKHQsZSl7dmFyIHI9ZnVuY3Rpb24odCxlKXt2YXIgcj1Xbih0KTtoKHIuc3RhdGUsdS4kZXZhbChyLnBhcmFtRXhwciksZSl9O1AodCk/cih0LGUpOk8odCkmJk4odCxmdW5jdGlvbih0KXtyKHQsZSl9KX0pKX1mdW5jdGlvbiBoKHQsZSxyKXt2YXIgbj17c3RhdGU6di5nZXQodCx6bihzKSl8fHtuYW1lOnR9LHBhcmFtczplLGFjdGl2ZUNsYXNzOnJ9O3JldHVybiBmLnB1c2gobiksZnVuY3Rpb24oKXtLKGYpKG4pfX1mdW5jdGlvbiBwKCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoL1xccy8pLmZpbHRlcihCKX0sdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuYWN0aXZlQ2xhc3N9KS5tYXAoZSkucmVkdWNlKHZ0LFtdKX0scj10KGYpLmNvbmNhdChlKGMpKS5yZWR1Y2UoeXQsW10pLG49dChmLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdi5pbmNsdWRlcyh0LnN0YXRlLm5hbWUsdC5wYXJhbXMpfSkpLGk9ISFmLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdi5pcyh0LnN0YXRlLm5hbWUsdC5wYXJhbXMpfSkubGVuZ3RoP2UoYyk6W10sbz1uLmNvbmNhdChpKS5yZWR1Y2UoeXQsW10pLGE9ci5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIUoobyx0KX0pO3UuJGV2YWxBc3luYyhmdW5jdGlvbigpe28uZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gcy5hZGRDbGFzcyh0KX0pLGEuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gcy5yZW1vdmVDbGFzcyh0KX0pfSl9bChuPW58fGQodC51aVNyZWZBY3RpdmV8fFwiXCIsITEpKHUpKSx0aGlzLiQkYWRkU3RhdGVJbmZvPWZ1bmN0aW9uKHQsZSl7aWYoIShrKG4pJiYwPGYubGVuZ3RoKSl7dmFyIHI9aCh0LGUsbik7cmV0dXJuIHAoKSxyfX0sdS4kb24oXCIkZGVzdHJveVwiLChlPW0uc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQoYSkscj1tLnRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sbyksaT11LiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIixwKSxmdW5jdGlvbigpe2UoKSxyKCksaSgpfSkpLG0uZ2xvYmFscy50cmFuc2l0aW9uJiZvKG0uZ2xvYmFscy50cmFuc2l0aW9uKSxwKCl9XX19XSxiLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVNyZWZcIixObikuZGlyZWN0aXZlKFwidWlTcmVmQWN0aXZlXCIsTW4pLmRpcmVjdGl2ZShcInVpU3JlZkFjdGl2ZUVxXCIsTW4pLmRpcmVjdGl2ZShcInVpU3RhdGVcIixMbiksWm4uJGluamVjdD1bXCIkc3RhdGVcIl0sWG4uJGluamVjdD1bXCIkc3RhdGVcIl0sYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZmlsdGVyKFwiaXNTdGF0ZVwiLFpuKS5maWx0ZXIoXCJpbmNsdWRlZEJ5U3RhdGVcIixYbiksQm49W1wiJHZpZXdcIixcIiRhbmltYXRlXCIsXCIkdWlWaWV3U2Nyb2xsXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRxXCIsZnVuY3Rpb24oaSxvLGcsdyxfKXt2YXIgUz17JGNmZzp7dmlld0RlY2w6eyRjb250ZXh0OmkuX3BsdWdpbmFwaS5fcm9vdFZpZXdDb250ZXh0KCl9fSwkdWlWaWV3Ont9fSwkPXtjb3VudDowLHJlc3RyaWN0OlwiRUNBXCIsdGVybWluYWw6ITAscHJpb3JpdHk6NDAwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsY29tcGlsZTpmdW5jdGlvbih0LGUseSl7cmV0dXJuIGZ1bmN0aW9uKGEsdSx0KXt2YXIgcyxjLGYsbCxlLGg9dC5vbmxvYWR8fFwiXCIscD10LmF1dG9zY3JvbGwsdj17ZW50ZXI6ZnVuY3Rpb24odCxlLHIpezI8Yi52ZXJzaW9uLm1pbm9yP28uZW50ZXIodCxudWxsLGUpLnRoZW4ocik6by5lbnRlcih0LG51bGwsZSxyKX0sbGVhdmU6ZnVuY3Rpb24odCxlKXsyPGIudmVyc2lvbi5taW5vcj9vLmxlYXZlKHQpLnRoZW4oZSk6by5sZWF2ZSh0LGUpfX0scj11LmluaGVyaXRlZERhdGEoXCIkdWlWaWV3XCIpfHxTLGQ9dyh0LnVpVmlld3x8dC5uYW1lfHxcIlwiKShhKXx8XCIkZGVmYXVsdFwiLG09eyR0eXBlOlwibmcxXCIsaWQ6JC5jb3VudCsrLG5hbWU6ZCxmcW46ci4kdWlWaWV3LmZxbj9yLiR1aVZpZXcuZnFuK1wiLlwiK2Q6ZCxjb25maWc6bnVsbCxjb25maWdVcGRhdGVkOmZ1bmN0aW9uKHQpe2lmKHQmJiEodCBpbnN0YW5jZW9mIGJuKSlyZXR1cm47aWYoZT1sLHI9dCxlPT09cilyZXR1cm47dmFyIGUscjtjZS50cmFjZVVJVmlld0NvbmZpZ1VwZGF0ZWQobSx0JiZ0LnZpZXdEZWNsJiZ0LnZpZXdEZWNsLiRjb250ZXh0KSxuKGw9dCl9LGdldCBjcmVhdGlvbkNvbnRleHQoKXt2YXIgdD1SKFwiJGNmZy52aWV3RGVjbC4kY29udGV4dFwiKShyKSxlPVIoXCIkdWlWaWV3LmNyZWF0aW9uQ29udGV4dFwiKShyKTtyZXR1cm4gdHx8ZX19O2Z1bmN0aW9uIG4odCl7dmFyIGU9YS4kbmV3KCkscj1fLmRlZmVyKCksbj1fLmRlZmVyKCksaT17JGNmZzp0LCR1aVZpZXc6bX0sbz17JGFuaW1FbnRlcjpyLnByb21pc2UsJGFuaW1MZWF2ZTpuLnByb21pc2UsJCRhbmltTGVhdmU6bn07ZS4kZW1pdChcIiR2aWV3Q29udGVudExvYWRpbmdcIixkKSxjPXkoZSxmdW5jdGlvbih0KXt0LmRhdGEoXCIkdWlWaWV3QW5pbVwiLG8pLHQuZGF0YShcIiR1aVZpZXdcIixpKSx2LmVudGVyKHQsdSxmdW5jdGlvbigpe3IucmVzb2x2ZSgpLGYmJmYuJGVtaXQoXCIkdmlld0NvbnRlbnRBbmltYXRpb25FbmRlZFwiKSwoRShwKSYmIXB8fGEuJGV2YWwocCkpJiZnKHQpfSksZnVuY3Rpb24oKXtpZihzJiYoY2UudHJhY2VVSVZpZXdFdmVudChcIlJlbW92aW5nIChwcmV2aW91cykgZWxcIixzLmRhdGEoXCIkdWlWaWV3XCIpKSxzLnJlbW92ZSgpLHM9bnVsbCksZiYmKGNlLnRyYWNlVUlWaWV3RXZlbnQoXCJEZXN0cm95aW5nIHNjb3BlXCIsbSksZi4kZGVzdHJveSgpLGY9bnVsbCksYyl7dmFyIHQ9Yy5kYXRhKFwiJHVpVmlld0FuaW1cIik7Y2UudHJhY2VVSVZpZXdFdmVudChcIkFuaW1hdGUgb3V0XCIsdCksdi5sZWF2ZShjLGZ1bmN0aW9uKCl7dC4kJGFuaW1MZWF2ZS5yZXNvbHZlKCkscz1udWxsfSkscz1jLGM9bnVsbH19KCl9KSwoZj1lKS4kZW1pdChcIiR2aWV3Q29udGVudExvYWRlZFwiLHR8fGwpLGYuJGV2YWwoaCl9Y2UudHJhY2VVSVZpZXdFdmVudChcIkxpbmtpbmdcIixtKSx1LmRhdGEoXCIkdWlWaWV3XCIseyR1aVZpZXc6bX0pLG4oKSxlPWkucmVnaXN0ZXJVSVZpZXcobSksYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Y2UudHJhY2VVSVZpZXdFdmVudChcIkRlc3Ryb3lpbmcvVW5yZWdpc3RlcmluZ1wiLG0pLGUoKX0pfX19O3JldHVybiAkfV0sdGkuJGluamVjdD1bXCIkY29tcGlsZVwiLFwiJGNvbnRyb2xsZXJcIixcIiR0cmFuc2l0aW9uc1wiLFwiJHZpZXdcIixcIiRxXCIsXCIkdGltZW91dFwiXTt2YXIgZWk9XCJmdW5jdGlvblwiPT10eXBlb2YgYi5tb2R1bGUoXCJ1aS5yb3V0ZXJcIikuY29tcG9uZW50LHJpPTA7ZnVuY3Rpb24gbmkobix0LGMsZSxyKXshQyhjLiRvbkluaXQpfHxyLnZpZXdEZWNsLmNvbXBvbmVudCYmZWl8fGMuJG9uSW5pdCgpO3ZhciBmPUN0KHIucGF0aCkuc3RhdGUuc2VsZixpPXtiaW5kOmN9O2lmKEMoYy51aU9uUGFyYW1zQ2hhbmdlZCkpe3ZhciBsPW5ldyBPZShyLnBhdGgpLmdldFJlc29sdmFibGUoXCIkdHJhbnNpdGlvbiRcIikuZGF0YTtlLiRvbihcIiRkZXN0cm95XCIsdC5vblN1Y2Nlc3Moe30sZnVuY3Rpb24odCl7aWYodCE9PWwmJi0xPT09dC5leGl0aW5nKCkuaW5kZXhPZihmKSl7dmFyIHI9dC5wYXJhbXMoXCJ0b1wiKSxuPXQucGFyYW1zKFwiZnJvbVwiKSxlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBhcmFtU2NoZW1hfSxpPXQudHJlZUNoYW5nZXMoXCJ0b1wiKS5tYXAoZSkucmVkdWNlKHZ0LFtdKSxvPXQudHJlZUNoYW5nZXMoXCJmcm9tXCIpLm1hcChlKS5yZWR1Y2UodnQsW10pLGE9aS5maWx0ZXIoZnVuY3Rpb24odCl7dmFyIGU9by5pbmRleE9mKHQpO3JldHVybi0xPT09ZXx8IW9bZV0udHlwZS5lcXVhbHMoclt0LmlkXSxuW3QuaWRdKX0pO2lmKGEubGVuZ3RoKXt2YXIgdT1hLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5pZH0pLHM9dXQocixmdW5jdGlvbih0LGUpe3JldHVybi0xIT09dS5pbmRleE9mKGUpfSk7Yy51aU9uUGFyYW1zQ2hhbmdlZChzLHQpfX19LGkpKX1pZihDKGMudWlDYW5FeGl0KSl7dmFyIG89cmkrKyxhPVwiX3VpQ2FuRXhpdElkc1wiLHU9ZnVuY3Rpb24odCl7cmV0dXJuISF0JiYodFthXSYmITA9PT10W2FdW29dfHx1KHQucmVkaXJlY3RlZEZyb20oKSkpfSxzPXtleGl0aW5nOmYubmFtZX07ZS4kb24oXCIkZGVzdHJveVwiLHQub25CZWZvcmUocyxmdW5jdGlvbih0KXt2YXIgZSxyPXRbYV09dFthXXx8e307cmV0dXJuIHUodCl8fChlPW4ud2hlbihjLnVpQ2FuRXhpdCh0KSkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHJbb109ITEhPT10fSksZX0saSkpfX1iLm1vZHVsZShcInVpLnJvdXRlci5zdGF0ZVwiKS5kaXJlY3RpdmUoXCJ1aVZpZXdcIixCbiksYi5tb2R1bGUoXCJ1aS5yb3V0ZXIuc3RhdGVcIikuZGlyZWN0aXZlKFwidWlWaWV3XCIsdGkpLGIubW9kdWxlKFwidWkucm91dGVyLnN0YXRlXCIpLnByb3ZpZGVyKFwiJHVpVmlld1Njcm9sbFwiLGZ1bmN0aW9uKCl7dmFyIHI9ITE7dGhpcy51c2VBbmNob3JTY3JvbGw9ZnVuY3Rpb24oKXtyPSEwfSx0aGlzLiRnZXQ9W1wiJGFuY2hvclNjcm9sbFwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbih0LGUpe3JldHVybiByP3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUoZnVuY3Rpb24oKXt0WzBdLnNjcm9sbEludG9WaWV3KCl9LDAsITEpfX1dfSk7ZC5kZWZhdWx0PVwidWkucm91dGVyXCIsZC5jb3JlPWduLGQud2F0Y2hEaWdlc3RzPUZuLGQuZ2V0TG9jYWxzPUduLGQuZ2V0TmcxVmlld0NvbmZpZ0ZhY3Rvcnk9d24sZC5uZzFWaWV3c0J1aWxkZXI9U24sZC5OZzFWaWV3Q29uZmlnPWJuLGQuU3RhdGVQcm92aWRlcj1UbixkLlVybFJvdXRlclByb3ZpZGVyPU9uLGQucm9vdD1ELGQuZnJvbUpzb249VSxkLnRvSnNvbj1GLGQuZm9yRWFjaD1OLGQuZXh0ZW5kPUwsZC5lcXVhbHM9TSxkLmlkZW50aXR5PUIsZC5ub29wPUcsZC5jcmVhdGVQcm94eUZ1bmN0aW9ucz1XLGQuaW5oZXJpdD16LGQuaW5BcnJheT1KLGQuX2luQXJyYXk9USxkLnJlbW92ZUZyb209SyxkLl9yZW1vdmVGcm9tPVksZC5wdXNoVG89WixkLl9wdXNoVG89WCxkLmRlcmVnQWxsPXR0LGQuZGVmYXVsdHM9ZXQsZC5tZXJnZVI9cnQsZC5hbmNlc3RvcnM9bnQsZC5waWNrPWl0LGQub21pdD1vdCxkLnBsdWNrPWF0LGQuZmlsdGVyPXV0LGQuZmluZD1zdCxkLm1hcE9iaj1jdCxkLm1hcD1mdCxkLnZhbHVlcz1sdCxkLmFsbFRydWVSPWh0LGQuYW55VHJ1ZVI9cHQsZC51bm5lc3RSPXZ0LGQuZmxhdHRlblI9ZHQsZC5wdXNoUj1tdCxkLnVuaXFSPXl0LGQudW5uZXN0PWd0LGQuZmxhdHRlbj13dCxkLmFzc2VydFByZWRpY2F0ZT1fdCxkLmFzc2VydE1hcD1TdCxkLmFzc2VydEZuPSR0LGQucGFpcnM9YnQsZC5hcnJheVR1cGxlcz1SdCxkLmFwcGx5UGFpcnM9RXQsZC50YWlsPUN0LGQuY29weT1UdCxkLl9leHRlbmQ9UHQsZC5zaWxlbmNlVW5jYXVnaHRJblByb21pc2U9eHQsZC5zaWxlbnRSZWplY3Rpb249anQsZC5tYWtlU3R1Yj1ILGQuc2VydmljZXM9QSxkLkdsb2I9VnQsZC5jdXJyeT1jLGQuY29tcG9zZT1yLGQucGlwZT1zLGQucHJvcD13LGQucHJvcEVxPXksZC5wYXJzZT1SLGQubm90PWwsZC5hbmQ9bixkLm9yPWksZC5hbGw9ZixkLmFueT1oLGQuaXM9cCxkLmVxPW8sZC52YWw9dixkLmludm9rZT1hLGQucGF0dGVybj1tLGQuaXNVbmRlZmluZWQ9XyxkLmlzRGVmaW5lZD1FLGQuaXNOdWxsPVMsZC5pc051bGxPclVuZGVmaW5lZD0kLGQuaXNGdW5jdGlvbj1DLGQuaXNOdW1iZXI9VCxkLmlzU3RyaW5nPVAsZC5pc09iamVjdD1rLGQuaXNBcnJheT1PLGQuaXNEYXRlPXgsZC5pc1JlZ0V4cD1qLGQuaXNJbmplY3RhYmxlPVYsZC5pc1Byb21pc2U9SSxkLlF1ZXVlPUl0LGQubWF4TGVuZ3RoPUR0LGQucGFkU3RyaW5nPXF0LGQua2Vib2JTdHJpbmc9VXQsZC5mdW5jdGlvblRvU3RyaW5nPUZ0LGQuZm5Ub1N0cmluZz1OdCxkLnN0cmluZ2lmeT1CdCxkLmJlZm9yZUFmdGVyU3Vic3RyPUd0LGQuaG9zdFJlZ2V4PVd0LGQuc3RyaXBMYXN0UGF0aEVsZW1lbnQ9enQsZC5zcGxpdEhhc2g9SnQsZC5zcGxpdFF1ZXJ5PVF0LGQuc3BsaXRFcXVhbD1LdCxkLnRyaW1IYXNoVmFsPVl0LGQuc3BsaXRPbkRlbGltPVp0LGQuam9pbk5laWdoYm9yc1I9WHQsZC5UcmFjZT1zZSxkLnRyYWNlPWNlLGQuUGFyYW09eWUsZC5QYXJhbVR5cGVzPWdlLGQuU3RhdGVQYXJhbXM9d2UsZC5QYXJhbVR5cGU9ZmUsZC5QYXRoTm9kZT1fZSxkLlBhdGhVdGlscz0kZSxkLnJlc29sdmVQb2xpY2llcz1iZSxkLmRlZmF1bHRSZXNvbHZlUG9saWN5PVJlLGQuUmVzb2x2YWJsZT1FZSxkLk5BVElWRV9JTkpFQ1RPUl9UT0tFTj1rZSxkLlJlc29sdmVDb250ZXh0PU9lLGQucmVzb2x2YWJsZXNCdWlsZGVyPXFlLGQuU3RhdGVCdWlsZGVyPU5lLGQuU3RhdGVPYmplY3Q9TGUsZC5TdGF0ZU1hdGNoZXI9TWUsZC5TdGF0ZVF1ZXVlTWFuYWdlcj1CZSxkLlN0YXRlUmVnaXN0cnk9R2UsZC5TdGF0ZVNlcnZpY2U9TXIsZC5UYXJnZXRTdGF0ZT1TZSxkLkhvb2tCdWlsZGVyPVllLGQubWF0Y2hTdGF0ZT1KZSxkLlJlZ2lzdGVyZWRIb29rPVFlLGQubWFrZUV2ZW50PUtlLGQuUmVqZWN0aW9uPUF0LGQuVHJhbnNpdGlvbj1YZSxkLlRyYW5zaXRpb25Ib29rPXplLGQuVHJhbnNpdGlvbkV2ZW50VHlwZT1xcixkLmRlZmF1bHRUcmFuc09wdHM9TnIsZC5UcmFuc2l0aW9uU2VydmljZT1McixkLlVybFJ1bGVzPXZyLGQuVXJsQ29uZmlnPWRyLGQuVXJsTWF0Y2hlcj1ucixkLlBhcmFtRmFjdG9yeT1vcixkLlVybE1hdGNoZXJGYWN0b3J5PWFyLGQuVXJsUm91dGVyPWZyLGQuVXJsUnVsZUZhY3Rvcnk9dXIsZC5CYXNlVXJsUnVsZT1zcixkLlVybFNlcnZpY2U9bXIsZC5WaWV3U2VydmljZT1scixkLlVJUm91dGVyR2xvYmFscz1ocixkLlVJUm91dGVyPV9yLGQuJHE9QnIsZC4kaW5qZWN0b3I9SnIsZC5CYXNlTG9jYXRpb25TZXJ2aWNlcz1ubixkLkhhc2hMb2NhdGlvblNlcnZpY2U9YW4sZC5NZW1vcnlMb2NhdGlvblNlcnZpY2U9c24sZC5QdXNoU3RhdGVMb2NhdGlvblNlcnZpY2U9Zm4sZC5NZW1vcnlMb2NhdGlvbkNvbmZpZz1sbixkLkJyb3dzZXJMb2NhdGlvbkNvbmZpZz1obixkLmtleVZhbHNUb09iamVjdFI9UXIsZC5nZXRQYXJhbXM9S3IsZC5wYXJzZVVybD1ZcixkLmJ1aWxkVXJsPVpyLGQubG9jYXRpb25QbHVnaW5GYWN0b3J5PVhyLGQuc2VydmljZXNQbHVnaW49cG4sZC5oYXNoTG9jYXRpb25QbHVnaW49dm4sZC5wdXNoU3RhdGVMb2NhdGlvblBsdWdpbj1kbixkLm1lbW9yeUxvY2F0aW9uUGx1Z2luPW1uLGQuVUlSb3V0ZXJQbHVnaW5CYXNlPXluLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXVpLXJvdXRlci5taW4uanMubWFwXG4iLCIvKiEgbmdzdG9yYWdlIDAuMy4xMCB8IENvcHlyaWdodCAoYykgMjAxNiBHaWFzIEtheSBMZWUgfCBNSVQgTGljZW5zZSAqLyFmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiYW5ndWxhclwiXSxiKTphLmhhc093blByb3BlcnR5KFwiYW5ndWxhclwiKT9iKGEuYW5ndWxhcik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJhbmd1bGFyXCIpKSl9KHRoaXMsZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihhLGIpe3ZhciBjO3RyeXtjPWFbYl19Y2F0Y2goZCl7Yz0hMX1pZihjKXt2YXIgZT1cIl9fXCIrTWF0aC5yb3VuZCgxZTcqTWF0aC5yYW5kb20oKSk7dHJ5e2FbYl0uc2V0SXRlbShlLGUpLGFbYl0ucmVtb3ZlSXRlbShlLGUpfWNhdGNoKGQpe2M9ITF9fXJldHVybiBjfWZ1bmN0aW9uIGMoYyl7dmFyIGQ9Yih3aW5kb3csYyk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9XCJuZ1N0b3JhZ2UtXCI7dGhpcy5zZXRLZXlQcmVmaXg9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcIltuZ1N0b3JhZ2VdIC0gXCIrYytcIlByb3ZpZGVyLnNldEtleVByZWZpeCgpIGV4cGVjdHMgYSBTdHJpbmcuXCIpO2U9YX07dmFyIGY9YS50b0pzb24sZz1hLmZyb21Kc29uO3RoaXMuc2V0U2VyaWFsaXplcj1mdW5jdGlvbihhKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJbbmdTdG9yYWdlXSAtIFwiK2MrXCJQcm92aWRlci5zZXRTZXJpYWxpemVyIGV4cGVjdHMgYSBmdW5jdGlvbi5cIik7Zj1hfSx0aGlzLnNldERlc2VyaWFsaXplcj1mdW5jdGlvbihhKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJbbmdTdG9yYWdlXSAtIFwiK2MrXCJQcm92aWRlci5zZXREZXNlcmlhbGl6ZXIgZXhwZWN0cyBhIGZ1bmN0aW9uLlwiKTtnPWF9LHRoaXMuc3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuISFkfSx0aGlzLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gZCYmZyhkLmdldEl0ZW0oZSthKSl9LHRoaXMuc2V0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGQmJmQuc2V0SXRlbShlK2EsZihiKSl9LHRoaXMucmVtb3ZlPWZ1bmN0aW9uKGEpe2QmJmQucmVtb3ZlSXRlbShlK2EpfSx0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJHdpbmRvd1wiLFwiJGxvZ1wiLFwiJHRpbWVvdXRcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGQsaCxpLGosayl7dmFyIGwsbSxuPWUubGVuZ3RoLG89YihoLGMpLHA9b3x8KGkud2FybihcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYiBTdG9yYWdlIVwiKSx7c2V0SXRlbTphLm5vb3AsZ2V0SXRlbTphLm5vb3AscmVtb3ZlSXRlbTphLm5vb3B9KSxxPXskZGVmYXVsdDpmdW5jdGlvbihiKXtmb3IodmFyIGMgaW4gYilhLmlzRGVmaW5lZChxW2NdKXx8KHFbY109YS5jb3B5KGJbY10pKTtyZXR1cm4gcS4kc3luYygpLHF9LCRyZXNldDpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gcSlcIiRcIj09PWJbMF18fGRlbGV0ZSBxW2JdJiZwLnJlbW92ZUl0ZW0oZStiKTtyZXR1cm4gcS4kZGVmYXVsdChhKX0sJHN5bmM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wLGM9cC5sZW5ndGg7Yz5iO2IrKykoYT1wLmtleShiKSkmJmU9PT1hLnNsaWNlKDAsbikmJihxW2Euc2xpY2UobildPWcocC5nZXRJdGVtKGEpKSl9LCRhcHBseTpmdW5jdGlvbigpe3ZhciBiO2lmKG09bnVsbCwhYS5lcXVhbHMocSxsKSl7Yj1hLmNvcHkobCksYS5mb3JFYWNoKHEsZnVuY3Rpb24oYyxkKXthLmlzRGVmaW5lZChjKSYmXCIkXCIhPT1kWzBdJiYocC5zZXRJdGVtKGUrZCxmKGMpKSxkZWxldGUgYltkXSl9KTtmb3IodmFyIGMgaW4gYilwLnJlbW92ZUl0ZW0oZStjKTtsPWEuY29weShxKX19LCRzdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gcS4kc3luYygpLGw9YS5jb3B5KHEpLGQuJHdhdGNoKGZ1bmN0aW9uKCl7bXx8KG09aihxLiRhcHBseSwxMDAsITEpKX0pLGguYWRkRXZlbnRMaXN0ZW5lciYmaC5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLGZ1bmN0aW9uKGIpe2lmKGIua2V5KXt2YXIgYz1rWzBdO2MuaGFzRm9jdXMmJmMuaGFzRm9jdXMoKXx8ZSE9PWIua2V5LnNsaWNlKDAsbil8fChiLm5ld1ZhbHVlP3FbYi5rZXkuc2xpY2UobildPWcoYi5uZXdWYWx1ZSk6ZGVsZXRlIHFbYi5rZXkuc2xpY2UobildLGw9YS5jb3B5KHEpLGQuJGFwcGx5KCkpfX0pLGguYWRkRXZlbnRMaXN0ZW5lciYmaC5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsZnVuY3Rpb24oKXtxLiRhcHBseSgpfSkscX1dfX1yZXR1cm4gYT1hJiZhLm1vZHVsZT9hOndpbmRvdy5hbmd1bGFyLGEubW9kdWxlKFwibmdTdG9yYWdlXCIsW10pLnByb3ZpZGVyKFwiJGxvY2FsU3RvcmFnZVwiLGMoXCJsb2NhbFN0b3JhZ2VcIikpLnByb3ZpZGVyKFwiJHNlc3Npb25TdG9yYWdlXCIsYyhcInNlc3Npb25TdG9yYWdlXCIpKX0pOyIsIi8qKlxuICogQGxpY2Vuc2UgQW5ndWxhckpTIHYxLjcuOFxuICogKGMpIDIwMTAtMjAxOCBHb29nbGUsIEluYy4gaHR0cDovL2FuZ3VsYXJqcy5vcmdcbiAqIExpY2Vuc2U6IE1JVFxuICovXG4oZnVuY3Rpb24od2luZG93LCBhbmd1bGFyKSB7XG5cbid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIHJvdXRlVG9SZWdFeHA6IHRydWUgKi9cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIHRvIHBhcnNlLiAoSXQgaXMgYXNzdW1lZCB0byBoYXZlIHF1ZXJ5IGFuZCBoYXNoIHN0cmlwcGVkIG9mZi4pXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIE9wdGlvbnMuXG4gKiBAcmV0dXJuIHtPYmplY3R9IC0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgcGF0aCBwYXJhbWV0ZXIgbmFtZXMgKGBrZXlzYCkgYW5kIGEgcmVndWxhclxuICogICAgIGV4cHJlc3Npb24gKGByZWdleHBgKSB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IGEgbWF0Y2hpbmcgVVJMIGFuZCBleHRyYWN0IHRoZSBwYXRoXG4gKiAgICAgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gcGF0aCwgZXh0cmFjdGluZyBwYXRoIHBhcmFtZXRlciBuYW1lcyBhbmQgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggVVJMcy5cbiAqXG4gKiBPcmlnaW5hbGx5IGluc3BpcmVkIGJ5IGBwYXRoUmV4cGAgaW4gYHZpc2lvbm1lZGlhL2V4cHJlc3MvbGliL3V0aWxzLmpzYC5cbiAqL1xuZnVuY3Rpb24gcm91dGVUb1JlZ0V4cChwYXRoLCBvcHRzKSB7XG4gIHZhciBrZXlzID0gW107XG5cbiAgdmFyIHBhdHRlcm4gPSBwYXRoXG4gICAgLnJlcGxhY2UoLyhbKCkuXSkvZywgJ1xcXFwkMScpXG4gICAgLnJlcGxhY2UoLyhcXC8pPzooXFx3KykoXFwqXFw/fFs/Kl0pPy9nLCBmdW5jdGlvbihfLCBzbGFzaCwga2V5LCBvcHRpb24pIHtcbiAgICAgIHZhciBvcHRpb25hbCA9IG9wdGlvbiA9PT0gJz8nIHx8IG9wdGlvbiA9PT0gJyo/JztcbiAgICAgIHZhciBzdGFyID0gb3B0aW9uID09PSAnKicgfHwgb3B0aW9uID09PSAnKj8nO1xuICAgICAga2V5cy5wdXNoKHtuYW1lOiBrZXksIG9wdGlvbmFsOiBvcHRpb25hbH0pO1xuICAgICAgc2xhc2ggPSBzbGFzaCB8fCAnJztcbiAgICAgIHJldHVybiAoXG4gICAgICAgIChvcHRpb25hbCA/ICcoPzonICsgc2xhc2ggOiBzbGFzaCArICcoPzonKSArXG4gICAgICAgIChzdGFyID8gJyguKz8pJyA6ICcoW14vXSspJykgK1xuICAgICAgICAob3B0aW9uYWwgPyAnPyk/JyA6ICcpJylcbiAgICAgICk7XG4gICAgfSlcbiAgICAucmVwbGFjZSgvKFsvJCpdKS9nLCAnXFxcXCQxJyk7XG5cbiAgaWYgKG9wdHMuaWdub3JlVHJhaWxpbmdTbGFzaGVzKSB7XG4gICAgcGF0dGVybiA9IHBhdHRlcm4ucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLyonO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBrZXlzOiBrZXlzLFxuICAgIHJlZ2V4cDogbmV3IFJlZ0V4cChcbiAgICAgICdeJyArIHBhdHRlcm4gKyAnKD86Wz8jXXwkKScsXG4gICAgICBvcHRzLmNhc2VJbnNlbnNpdGl2ZU1hdGNoID8gJ2knIDogJydcbiAgICApXG4gIH07XG59XG5cbid1c2Ugc3RyaWN0JztcblxuLyogZ2xvYmFsIHJvdXRlVG9SZWdFeHA6IGZhbHNlICovXG5cbi8qKlxuICogQG5nZG9jIG9iamVjdFxuICogQG5hbWUgYW5ndWxhci5tb2NrXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBOYW1lc3BhY2UgZnJvbSAnYW5ndWxhci1tb2Nrcy5qcycgd2hpY2ggY29udGFpbnMgdGVzdGluZyByZWxhdGVkIGNvZGUuXG4gKlxuICovXG5hbmd1bGFyLm1vY2sgPSB7fTtcblxuLyoqXG4gKiAhIFRoaXMgaXMgYSBwcml2YXRlIHVuZG9jdW1lbnRlZCBzZXJ2aWNlICFcbiAqXG4gKiBAbmFtZSAkYnJvd3NlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBzZXJ2aWNlIGlzIGEgbW9jayBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgbmcuJGJyb3dzZXJ9LiBJdCBwcm92aWRlcyBmYWtlXG4gKiBpbXBsZW1lbnRhdGlvbiBmb3IgY29tbW9ubHkgdXNlZCBicm93c2VyIGFwaXMgdGhhdCBhcmUgaGFyZCB0byB0ZXN0LCBlLmcuIHNldFRpbWVvdXQsIHhocixcbiAqIGNvb2tpZXMsIGV0Yy5cbiAqXG4gKiBUaGUgYXBpIG9mIHRoaXMgc2VydmljZSBpcyB0aGUgc2FtZSBhcyB0aGF0IG9mIHRoZSByZWFsIHtAbGluayBuZy4kYnJvd3NlciAkYnJvd3Nlcn0sIGV4Y2VwdFxuICogdGhhdCB0aGVyZSBhcmUgc2V2ZXJhbCBoZWxwZXIgbWV0aG9kcyBhdmFpbGFibGUgd2hpY2ggY2FuIGJlIHVzZWQgaW4gdGVzdHMuXG4gKi9cbmFuZ3VsYXIubW9jay4kQnJvd3NlclByb3ZpZGVyID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFtcbiAgICAnJGxvZycsICckJHRhc2tUcmFja2VyRmFjdG9yeScsXG4gICAgZnVuY3Rpb24oJGxvZywgJCR0YXNrVHJhY2tlckZhY3RvcnkpIHtcbiAgICAgIHJldHVybiBuZXcgYW5ndWxhci5tb2NrLiRCcm93c2VyKCRsb2csICQkdGFza1RyYWNrZXJGYWN0b3J5KTtcbiAgICB9XG4gIF07XG59O1xuXG5hbmd1bGFyLm1vY2suJEJyb3dzZXIgPSBmdW5jdGlvbigkbG9nLCAkJHRhc2tUcmFja2VyRmFjdG9yeSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB0YXNrVHJhY2tlciA9ICQkdGFza1RyYWNrZXJGYWN0b3J5KCRsb2cpO1xuXG4gIHRoaXMuaXNNb2NrID0gdHJ1ZTtcbiAgc2VsZi4kJHVybCA9ICdodHRwOi8vc2VydmVyLyc7XG4gIHNlbGYuJCRsYXN0VXJsID0gc2VsZi4kJHVybDsgLy8gdXNlZCBieSB1cmwgcG9sbGluZyBmblxuICBzZWxmLnBvbGxGbnMgPSBbXTtcblxuICAvLyBUYXNrLXRyYWNraW5nIEFQSVxuICBzZWxmLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QgPSB0YXNrVHJhY2tlci5jb21wbGV0ZVRhc2s7XG4gIHNlbGYuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9IHRhc2tUcmFja2VyLmluY1Rhc2tDb3VudDtcbiAgc2VsZi5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzID0gdGFza1RyYWNrZXIubm90aWZ5V2hlbk5vUGVuZGluZ1Rhc2tzO1xuXG4gIC8vIHJlZ2lzdGVyIHVybCBwb2xsaW5nIGZuXG5cbiAgc2VsZi5vblVybENoYW5nZSA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgc2VsZi5wb2xsRm5zLnB1c2goXG4gICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHNlbGYuJCRsYXN0VXJsICE9PSBzZWxmLiQkdXJsIHx8IHNlbGYuJCRzdGF0ZSAhPT0gc2VsZi4kJGxhc3RTdGF0ZSkge1xuICAgICAgICAgIHNlbGYuJCRsYXN0VXJsID0gc2VsZi4kJHVybDtcbiAgICAgICAgICBzZWxmLiQkbGFzdFN0YXRlID0gc2VsZi4kJHN0YXRlO1xuICAgICAgICAgIGxpc3RlbmVyKHNlbGYuJCR1cmwsIHNlbGYuJCRzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIGxpc3RlbmVyO1xuICB9O1xuXG4gIHNlbGYuJCRhcHBsaWNhdGlvbkRlc3Ryb3llZCA9IGFuZ3VsYXIubm9vcDtcbiAgc2VsZi4kJGNoZWNrVXJsQ2hhbmdlID0gYW5ndWxhci5ub29wO1xuXG4gIHNlbGYuZGVmZXJyZWRGbnMgPSBbXTtcbiAgc2VsZi5kZWZlcnJlZE5leHRJZCA9IDA7XG5cbiAgc2VsZi5kZWZlciA9IGZ1bmN0aW9uKGZuLCBkZWxheSwgdGFza1R5cGUpIHtcbiAgICB2YXIgdGltZW91dElkID0gc2VsZi5kZWZlcnJlZE5leHRJZCsrO1xuXG4gICAgZGVsYXkgPSBkZWxheSB8fCAwO1xuICAgIHRhc2tUeXBlID0gdGFza1R5cGUgfHwgdGFza1RyYWNrZXIuREVGQVVMVF9UQVNLX1RZUEU7XG5cbiAgICB0YXNrVHJhY2tlci5pbmNUYXNrQ291bnQodGFza1R5cGUpO1xuICAgIHNlbGYuZGVmZXJyZWRGbnMucHVzaCh7XG4gICAgICBpZDogdGltZW91dElkLFxuICAgICAgdHlwZTogdGFza1R5cGUsXG4gICAgICB0aW1lOiAoc2VsZi5kZWZlci5ub3cgKyBkZWxheSksXG4gICAgICBmbjogZm5cbiAgICB9KTtcbiAgICBzZWxmLmRlZmVycmVkRm5zLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS50aW1lIC0gYi50aW1lOyB9KTtcblxuICAgIHJldHVybiB0aW1lb3V0SWQ7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjZGVmZXIubm93XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDdXJyZW50IG1pbGxpc2Vjb25kcyBtb2NrIHRpbWUuXG4gICAqL1xuICBzZWxmLmRlZmVyLm5vdyA9IDA7XG5cblxuICBzZWxmLmRlZmVyLmNhbmNlbCA9IGZ1bmN0aW9uKGRlZmVySWQpIHtcbiAgICB2YXIgdGFza0luZGV4O1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKHNlbGYuZGVmZXJyZWRGbnMsIGZ1bmN0aW9uKHRhc2ssIGluZGV4KSB7XG4gICAgICBpZiAodGFzay5pZCA9PT0gZGVmZXJJZCkgdGFza0luZGV4ID0gaW5kZXg7XG4gICAgfSk7XG5cbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQodGFza0luZGV4KSkge1xuICAgICAgdmFyIHRhc2sgPSBzZWxmLmRlZmVycmVkRm5zLnNwbGljZSh0YXNrSW5kZXgsIDEpWzBdO1xuICAgICAgdGFza1RyYWNrZXIuY29tcGxldGVUYXNrKGFuZ3VsYXIubm9vcCwgdGFzay50eXBlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlci5mbHVzaFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogRmx1c2hlcyBhbGwgcGVuZGluZyByZXF1ZXN0cyBhbmQgZXhlY3V0ZXMgdGhlIGRlZmVyIGNhbGxiYWNrcy5cbiAgICpcbiAgICogU2VlIHtAbGluayBuZ01vY2suJGZsdXNoUGVuZGluZ3NUYXNrc30gZm9yIG1vcmUgaW5mby5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXI9fSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGZsdXNoLiBTZWUge0BsaW5rICNkZWZlci5ub3d9XG4gICAqL1xuICBzZWxmLmRlZmVyLmZsdXNoID0gZnVuY3Rpb24oZGVsYXkpIHtcbiAgICB2YXIgbmV4dFRpbWU7XG5cbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZGVsYXkpKSB7XG4gICAgICAvLyBBIGRlbGF5IHdhcyBwYXNzZWQgc28gY29tcHV0ZSB0aGUgbmV4dCB0aW1lXG4gICAgICBuZXh0VGltZSA9IHNlbGYuZGVmZXIubm93ICsgZGVsYXk7XG4gICAgfSBlbHNlIGlmIChzZWxmLmRlZmVycmVkRm5zLmxlbmd0aCkge1xuICAgICAgLy8gTm8gZGVsYXkgd2FzIHBhc3NlZCBzbyBzZXQgdGhlIG5leHQgdGltZSBzbyB0aGF0IGl0IGNsZWFycyB0aGUgZGVmZXJyZWQgcXVldWVcbiAgICAgIG5leHRUaW1lID0gc2VsZi5kZWZlcnJlZEZuc1tzZWxmLmRlZmVycmVkRm5zLmxlbmd0aCAtIDFdLnRpbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIGRlbGF5IHBhc3NlZCwgYnV0IHRoZXJlIGFyZSBubyBkZWZlcnJlZCB0YXNrcyBzbyBmbHVzaCAtIGluZGljYXRlcyBhbiBlcnJvciFcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGVmZXJyZWQgdGFza3MgdG8gYmUgZmx1c2hlZCcpO1xuICAgIH1cblxuICAgIHdoaWxlIChzZWxmLmRlZmVycmVkRm5zLmxlbmd0aCAmJiBzZWxmLmRlZmVycmVkRm5zWzBdLnRpbWUgPD0gbmV4dFRpbWUpIHtcbiAgICAgIC8vIEluY3JlbWVudCB0aGUgdGltZSBhbmQgY2FsbCB0aGUgbmV4dCBkZWZlcnJlZCBmdW5jdGlvblxuICAgICAgc2VsZi5kZWZlci5ub3cgPSBzZWxmLmRlZmVycmVkRm5zWzBdLnRpbWU7XG4gICAgICB2YXIgdGFzayA9IHNlbGYuZGVmZXJyZWRGbnMuc2hpZnQoKTtcbiAgICAgIHRhc2tUcmFja2VyLmNvbXBsZXRlVGFzayh0YXNrLmZuLCB0YXNrLnR5cGUpO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjdXJyZW50IHRpbWUgaXMgY29ycmVjdFxuICAgIHNlbGYuZGVmZXIubm93ID0gbmV4dFRpbWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyLmdldFBlbmRpbmdUYXNrc1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0dXJucyB0aGUgY3VycmVudGx5IHBlbmRpbmcgdGFza3MgdGhhdCBuZWVkIHRvIGJlIGZsdXNoZWQuXG4gICAqIFlvdSBjYW4gcmVxdWVzdCBhIHNwZWNpZmljIHR5cGUgb2YgdGFza3Mgb25seSwgYnkgc3BlY2lmeWluZyBhIGB0YXNrVHlwZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdGFza1R5cGUgLSBUaGUgdHlwZSB0YXNrcyB0byByZXR1cm4uXG4gICAqL1xuICBzZWxmLmRlZmVyLmdldFBlbmRpbmdUYXNrcyA9IGZ1bmN0aW9uKHRhc2tUeXBlKSB7XG4gICAgcmV0dXJuICF0YXNrVHlwZVxuICAgICAgICA/IHNlbGYuZGVmZXJyZWRGbnNcbiAgICAgICAgOiBzZWxmLmRlZmVycmVkRm5zLmZpbHRlcihmdW5jdGlvbih0YXNrKSB7IHJldHVybiB0YXNrLnR5cGUgPT09IHRhc2tUeXBlOyB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjZGVmZXIuZm9ybWF0UGVuZGluZ1Rhc2tzXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBGb3JtYXRzIGVhY2ggdGFzayBpbiBhIGxpc3Qgb2YgcGVuZGluZyB0YXNrcyBhcyBhIHN0cmluZywgc3VpdGFibGUgZm9yIHVzZSBpbiBlcnJvciBtZXNzYWdlcy5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSBwZW5kaW5nVGFza3MgLSBBIGxpc3Qgb2YgdGFzayBvYmplY3RzLlxuICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBIGxpc3Qgb2Ygc3RyaW5naWZpZWQgdGFza3MuXG4gICAqL1xuICBzZWxmLmRlZmVyLmZvcm1hdFBlbmRpbmdUYXNrcyA9IGZ1bmN0aW9uKHBlbmRpbmdUYXNrcykge1xuICAgIHJldHVybiBwZW5kaW5nVGFza3MubWFwKGZ1bmN0aW9uKHRhc2spIHtcbiAgICAgIHJldHVybiAne2lkOiAnICsgdGFzay5pZCArICcsIHR5cGU6ICcgKyB0YXNrLnR5cGUgKyAnLCB0aW1lOiAnICsgdGFzay50aW1lICsgJ30nO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlci52ZXJpZnlOb1BlbmRpbmdUYXNrc1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVmVyaWZpZXMgdGhhdCB0aGVyZSBhcmUgbm8gcGVuZGluZyB0YXNrcyB0aGF0IG5lZWQgdG8gYmUgZmx1c2hlZC5cbiAgICogWW91IGNhbiBjaGVjayBmb3IgYSBzcGVjaWZpYyB0eXBlIG9mIHRhc2tzIG9ubHksIGJ5IHNwZWNpZnlpbmcgYSBgdGFza1R5cGVgLlxuICAgKlxuICAgKiBTZWUge0BsaW5rICR2ZXJpZnlOb1BlbmRpbmdUYXNrc30gZm9yIG1vcmUgaW5mby5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB0YXNrVHlwZSAtIFRoZSB0eXBlIHRhc2tzIHRvIGNoZWNrIGZvci5cbiAgICovXG4gIHNlbGYuZGVmZXIudmVyaWZ5Tm9QZW5kaW5nVGFza3MgPSBmdW5jdGlvbih0YXNrVHlwZSkge1xuICAgIHZhciBwZW5kaW5nVGFza3MgPSBzZWxmLmRlZmVyLmdldFBlbmRpbmdUYXNrcyh0YXNrVHlwZSk7XG5cbiAgICBpZiAocGVuZGluZ1Rhc2tzLmxlbmd0aCkge1xuICAgICAgdmFyIGZvcm1hdHRlZFRhc2tzID0gc2VsZi5kZWZlci5mb3JtYXRQZW5kaW5nVGFza3MocGVuZGluZ1Rhc2tzKS5qb2luKCdcXG4gICcpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEZWZlcnJlZCB0YXNrcyB0byBmbHVzaCAoJyArIHBlbmRpbmdUYXNrcy5sZW5ndGggKyAnKTpcXG4gICcgK1xuICAgICAgICAgIGZvcm1hdHRlZFRhc2tzKTtcbiAgICB9XG4gIH07XG5cbiAgc2VsZi4kJGJhc2VIcmVmID0gJy8nO1xuICBzZWxmLmJhc2VIcmVmID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuJCRiYXNlSHJlZjtcbiAgfTtcbn07XG5hbmd1bGFyLm1vY2suJEJyb3dzZXIucHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNwb2xsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBydW4gYWxsIGZucyBpbiBwb2xsRm5zXG4gICAqL1xuICBwb2xsOiBmdW5jdGlvbiBwb2xsKCkge1xuICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLnBvbGxGbnMsIGZ1bmN0aW9uKHBvbGxGbikge1xuICAgICAgcG9sbEZuKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgdXJsOiBmdW5jdGlvbih1cmwsIHJlcGxhY2UsIHN0YXRlKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoc3RhdGUpKSB7XG4gICAgICBzdGF0ZSA9IG51bGw7XG4gICAgfVxuICAgIGlmICh1cmwpIHtcbiAgICAgIC8vIFRoZSBgJGJyb3dzZXJgIHNlcnZpY2UgdHJpbXMgZW1wdHkgaGFzaGVzOyBzaW11bGF0ZSBpdC5cbiAgICAgIHRoaXMuJCR1cmwgPSB1cmwucmVwbGFjZSgvIyQvLCAnJyk7XG4gICAgICAvLyBOYXRpdmUgcHVzaFN0YXRlIHNlcmlhbGl6ZXMgJiBjb3BpZXMgdGhlIG9iamVjdDsgc2ltdWxhdGUgaXQuXG4gICAgICB0aGlzLiQkc3RhdGUgPSBhbmd1bGFyLmNvcHkoc3RhdGUpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuJCR1cmw7XG4gIH0sXG5cbiAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiQkc3RhdGU7XG4gIH1cbn07XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRmbHVzaFBlbmRpbmdUYXNrc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRmx1c2hlcyBhbGwgY3VycmVudGx5IHBlbmRpbmcgdGFza3MgYW5kIGV4ZWN1dGVzIHRoZSBjb3JyZXNwb25kaW5nIGNhbGxiYWNrcy5cbiAqXG4gKiBPcHRpb25hbGx5LCB5b3UgY2FuIGFsc28gcGFzcyBhIGBkZWxheWAgYXJndW1lbnQgdG8gb25seSBmbHVzaCB0YXNrcyB0aGF0IGFyZSBzY2hlZHVsZWQgdG8gYmVcbiAqIGV4ZWN1dGVkIHdpdGhpbiBgZGVsYXlgIG1pbGxpc2Vjb25kcy4gQ3VycmVudGx5LCBgZGVsYXlgIG9ubHkgYXBwbGllcyB0byB0aW1lb3V0cywgc2luY2UgYWxsXG4gKiBvdGhlciB0YXNrcyBoYXZlIGEgZGVsYXkgb2YgMCAoaS5lLiB0aGV5IGFyZSBzY2hlZHVsZWQgdG8gYmUgZXhlY3V0ZWQgYXMgc29vbiBhcyBwb3NzaWJsZSwgYnV0XG4gKiBzdGlsbCBhc3luY2hyb25vdXNseSkuXG4gKlxuICogSWYgbm8gZGVsYXkgaXMgc3BlY2lmaWVkLCBpdCB1c2VzIGEgZGVsYXkgc3VjaCB0aGF0IGFsbCBjdXJyZW50bHkgcGVuZGluZyB0YXNrcyBhcmUgZmx1c2hlZC5cbiAqXG4gKiBUaGUgdHlwZXMgb2YgdGFza3MgdGhhdCBhcmUgZmx1c2hlZCBpbmNsdWRlOlxuICpcbiAqIC0gUGVuZGluZyB0aW1lb3V0cyAodmlhIHtAbGluayAkdGltZW91dH0pLlxuICogLSBQZW5kaW5nIHRhc2tzIHNjaGVkdWxlZCB2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5QXN5bmMgJGFwcGx5QXN5bmN9LlxuICogLSBQZW5kaW5nIHRhc2tzIHNjaGVkdWxlZCB2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luYyAkZXZhbEFzeW5jfS5cbiAqICAgVGhlc2UgaW5jbHVkZSB0YXNrcyBzY2hlZHVsZWQgdmlhIGAkZXZhbEFzeW5jKClgIGluZGlyZWN0bHkgKHN1Y2ggYXMge0BsaW5rICRxfSBwcm9taXNlcykuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICAgUGVyaW9kaWMgdGFza3Mgc2NoZWR1bGVkIHZpYSB7QGxpbmsgJGludGVydmFsfSB1c2UgYSBkaWZmZXJlbnQgcXVldWUgYW5kIGFyZSBub3QgZmx1c2hlZCBieVxuICogICBgJGZsdXNoUGVuZGluZ1Rhc2tzKClgLiBVc2Uge0BsaW5rIG5nTW9jay4kaW50ZXJ2YWwjZmx1c2ggJGludGVydmFsLmZsdXNoKG1pbGxpcyl9IGluc3RlYWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0ge251bWJlcj19IGRlbGF5IC0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZmx1c2guXG4gKi9cbmFuZ3VsYXIubW9jay4kRmx1c2hQZW5kaW5nVGFza3NQcm92aWRlciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBbXG4gICAgJyRicm93c2VyJyxcbiAgICBmdW5jdGlvbigkYnJvd3Nlcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICRmbHVzaFBlbmRpbmdUYXNrcyhkZWxheSkge1xuICAgICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIuZmx1c2goZGVsYXkpO1xuICAgICAgfTtcbiAgICB9XG4gIF07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkdmVyaWZ5Tm9QZW5kaW5nVGFza3NcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFZlcmlmaWVzIHRoYXQgdGhlcmUgYXJlIG5vIHBlbmRpbmcgdGFza3MgdGhhdCBuZWVkIHRvIGJlIGZsdXNoZWQuIEl0IHRocm93cyBhbiBlcnJvciBpZiB0aGVyZSBhcmVcbiAqIHN0aWxsIHBlbmRpbmcgdGFza3MuXG4gKlxuICogWW91IGNhbiBjaGVjayBmb3IgYSBzcGVjaWZpYyB0eXBlIG9mIHRhc2tzIG9ubHksIGJ5IHNwZWNpZnlpbmcgYSBgdGFza1R5cGVgLlxuICpcbiAqIEF2YWlsYWJsZSB0YXNrIHR5cGVzOlxuICpcbiAqIC0gYCR0aW1lb3V0YDogUGVuZGluZyB0aW1lb3V0cyAodmlhIHtAbGluayAkdGltZW91dH0pLlxuICogLSBgJGh0dHBgOiBQZW5kaW5nIEhUVFAgcmVxdWVzdHMgKHZpYSB7QGxpbmsgJGh0dHB9KS5cbiAqIC0gYCRyb3V0ZWA6IEluLXByb2dyZXNzIHJvdXRlIHRyYW5zaXRpb25zICh2aWEge0BsaW5rICRyb3V0ZX0pLlxuICogLSBgJGFwcGx5QXN5bmNgOiBQZW5kaW5nIHRhc2tzIHNjaGVkdWxlZCB2aWEge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5QXN5bmMgJGFwcGx5QXN5bmN9LlxuICogLSBgJGV2YWxBc3luY2A6IFBlbmRpbmcgdGFza3Mgc2NoZWR1bGVkIHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jICRldmFsQXN5bmN9LlxuICogICBUaGVzZSBpbmNsdWRlIHRhc2tzIHNjaGVkdWxlZCB2aWEgYCRldmFsQXN5bmMoKWAgaW5kaXJlY3RseSAoc3VjaCBhcyB7QGxpbmsgJHF9IHByb21pc2VzKS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogICBQZXJpb2RpYyB0YXNrcyBzY2hlZHVsZWQgdmlhIHtAbGluayAkaW50ZXJ2YWx9IHVzZSBhIGRpZmZlcmVudCBxdWV1ZSBhbmQgYXJlIG5vdCB0YWtlbiBpbnRvXG4gKiAgIGFjY291bnQgYnkgYCR2ZXJpZnlOb1BlbmRpbmdUYXNrcygpYC4gVGhlcmUgaXMgY3VycmVudGx5IG5vIHdheSB0byB2ZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm9cbiAqICAgcGVuZGluZyB7QGxpbmsgJGludGVydmFsfSB0YXNrcy5cbiAqIDwvZGl2PlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gdGFza1R5cGUgLSBUaGUgdHlwZSBvZiB0YXNrcyB0byBjaGVjayBmb3IuXG4gKi9cbmFuZ3VsYXIubW9jay4kVmVyaWZ5Tm9QZW5kaW5nVGFza3NQcm92aWRlciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBbXG4gICAgJyRicm93c2VyJyxcbiAgICBmdW5jdGlvbigkYnJvd3Nlcikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICR2ZXJpZnlOb1BlbmRpbmdUYXNrcyh0YXNrVHlwZSkge1xuICAgICAgICByZXR1cm4gJGJyb3dzZXIuZGVmZXIudmVyaWZ5Tm9QZW5kaW5nVGFza3ModGFza1R5cGUpO1xuICAgICAgfTtcbiAgICB9XG4gIF07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29uZmlndXJlcyB0aGUgbW9jayBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXJ9IHRvIHJldGhyb3cgb3IgdG8gbG9nIGVycm9yc1xuICogcGFzc2VkIHRvIHRoZSBgJGV4Y2VwdGlvbkhhbmRsZXJgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRleGNlcHRpb25IYW5kbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBNb2NrIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlcn0gdGhhdCByZXRocm93cyBvciBsb2dzIGVycm9ycyBwYXNzZWRcbiAqIHRvIGl0LiBTZWUge0BsaW5rIG5nTW9jay4kZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXJ9IGZvciBjb25maWd1cmF0aW9uXG4gKiBpbmZvcm1hdGlvbi5cbiAqXG4gKlxuICogYGBganNcbiAqICAgZGVzY3JpYmUoJyRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXInLCBmdW5jdGlvbigpIHtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBjYXB0dXJlIGxvZyBtZXNzYWdlcyBhbmQgZXhjZXB0aW9ucycsIGZ1bmN0aW9uKCkge1xuICpcbiAqICAgICAgIG1vZHVsZShmdW5jdGlvbigkZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyKSB7XG4gKiAgICAgICAgICRleGNlcHRpb25IYW5kbGVyUHJvdmlkZXIubW9kZSgnbG9nJyk7XG4gKiAgICAgICB9KTtcbiAqXG4gKiAgICAgICBpbmplY3QoZnVuY3Rpb24oJGxvZywgJGV4Y2VwdGlvbkhhbmRsZXIsICR0aW1lb3V0KSB7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygxKTsgfSk7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygyKTsgdGhyb3cgJ2JhbmFuYSBwZWVsJzsgfSk7XG4gKiAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAkbG9nLmxvZygzKTsgfSk7XG4gKiAgICAgICAgIGV4cGVjdCgkZXhjZXB0aW9uSGFuZGxlci5lcnJvcnMpLnRvRXF1YWwoW10pO1xuICogICAgICAgICBleHBlY3QoJGxvZy5hc3NlcnRFbXB0eSgpKTtcbiAqICAgICAgICAgJHRpbWVvdXQuZmx1c2goKTtcbiAqICAgICAgICAgZXhwZWN0KCRleGNlcHRpb25IYW5kbGVyLmVycm9ycykudG9FcXVhbChbJ2JhbmFuYSBwZWVsJ10pO1xuICogICAgICAgICBleHBlY3QoJGxvZy5sb2cubG9ncykudG9FcXVhbChbWzFdLCBbMl0sIFszXV0pO1xuICogICAgICAgfSk7XG4gKiAgICAgfSk7XG4gKiAgIH0pO1xuICogYGBgXG4gKi9cblxuYW5ndWxhci5tb2NrLiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGhhbmRsZXI7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlciNtb2RlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBsb2dnaW5nIG1vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIE1vZGUgb2Ygb3BlcmF0aW9uLCBkZWZhdWx0cyB0byBgcmV0aHJvd2AuXG4gICAqXG4gICAqICAgLSBgbG9nYDogU29tZXRpbWVzIGl0IGlzIGRlc2lyYWJsZSB0byB0ZXN0IHRoYXQgYW4gZXJyb3IgaXMgdGhyb3duLCBmb3IgdGhpcyBjYXNlIHRoZSBgbG9nYFxuICAgKiAgICAgbW9kZSBzdG9yZXMgYW4gYXJyYXkgb2YgZXJyb3JzIGluIGAkZXhjZXB0aW9uSGFuZGxlci5lcnJvcnNgLCB0byBhbGxvdyBsYXRlciBhc3NlcnRpb24gb2ZcbiAgICogICAgIHRoZW0uIFNlZSB7QGxpbmsgbmdNb2NrLiRsb2cjYXNzZXJ0RW1wdHkgYXNzZXJ0RW1wdHkoKX0gYW5kXG4gICAqICAgICB7QGxpbmsgbmdNb2NrLiRsb2cjcmVzZXQgcmVzZXQoKX0uXG4gICAqICAgLSBgcmV0aHJvd2A6IElmIGFueSBlcnJvcnMgYXJlIHBhc3NlZCB0byB0aGUgaGFuZGxlciBpbiB0ZXN0cywgaXQgdHlwaWNhbGx5IG1lYW5zIHRoYXQgdGhlcmVcbiAgICogICAgIGlzIGEgYnVnIGluIHRoZSBhcHBsaWNhdGlvbiBvciB0ZXN0LCBzbyB0aGlzIG1vY2sgd2lsbCBtYWtlIHRoZXNlIHRlc3RzIGZhaWwuIEZvciBhbnlcbiAgICogICAgIGltcGxlbWVudGF0aW9ucyB0aGF0IGV4cGVjdCBleGNlcHRpb25zIHRvIGJlIHRocm93biwgdGhlIGByZXRocm93YCBtb2RlIHdpbGwgYWxzbyBtYWludGFpblxuICAgKiAgICAgYSBsb2cgb2YgdGhyb3duIGVycm9ycyBpbiBgJGV4Y2VwdGlvbkhhbmRsZXIuZXJyb3JzYC5cbiAgICovXG4gIHRoaXMubW9kZSA9IGZ1bmN0aW9uKG1vZGUpIHtcblxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAnbG9nJzpcbiAgICAgIGNhc2UgJ3JldGhyb3cnOlxuICAgICAgICB2YXIgZXJyb3JzID0gW107XG4gICAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobW9kZSA9PT0gJ3JldGhyb3cnKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaGFuZGxlci5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1vZGUgXFwnJyArIG1vZGUgKyAnXFwnLCBvbmx5IFxcJ2xvZ1xcJy9cXCdyZXRocm93XFwnIG1vZGVzIGFyZSBhbGxvd2VkIScpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGFuZGxlcjtcbiAgfTtcblxuICB0aGlzLm1vZGUoJ3JldGhyb3cnKTtcbn07XG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvZ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9jayBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgbmcuJGxvZ30gdGhhdCBnYXRoZXJzIGFsbCBsb2dnZWQgbWVzc2FnZXMgaW4gYXJyYXlzXG4gKiAob25lIGFycmF5IHBlciBsb2dnaW5nIGxldmVsKS4gVGhlc2UgYXJyYXlzIGFyZSBleHBvc2VkIGFzIGBsb2dzYCBwcm9wZXJ0eSBvZiBlYWNoIG9mIHRoZVxuICogbGV2ZWwtc3BlY2lmaWMgbG9nIGZ1bmN0aW9uLCBlLmcuIGZvciBsZXZlbCBgZXJyb3JgIHRoZSBhcnJheSBpcyBleHBvc2VkIGFzIGAkbG9nLmVycm9yLmxvZ3NgLlxuICpcbiAqL1xuYW5ndWxhci5tb2NrLiRMb2dQcm92aWRlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGVidWcgPSB0cnVlO1xuXG4gIGZ1bmN0aW9uIGNvbmNhdChhcnJheTEsIGFycmF5MiwgaW5kZXgpIHtcbiAgICByZXR1cm4gYXJyYXkxLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnJheTIsIGluZGV4KSk7XG4gIH1cblxuICB0aGlzLmRlYnVnRW5hYmxlZCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoZmxhZykpIHtcbiAgICAgIGRlYnVnID0gZmxhZztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciAkbG9nID0ge1xuICAgICAgbG9nOiBmdW5jdGlvbigpIHsgJGxvZy5sb2cubG9ncy5wdXNoKGNvbmNhdChbXSwgYXJndW1lbnRzLCAwKSk7IH0sXG4gICAgICB3YXJuOiBmdW5jdGlvbigpIHsgJGxvZy53YXJuLmxvZ3MucHVzaChjb25jYXQoW10sIGFyZ3VtZW50cywgMCkpOyB9LFxuICAgICAgaW5mbzogZnVuY3Rpb24oKSB7ICRsb2cuaW5mby5sb2dzLnB1c2goY29uY2F0KFtdLCBhcmd1bWVudHMsIDApKTsgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbigpIHsgJGxvZy5lcnJvci5sb2dzLnB1c2goY29uY2F0KFtdLCBhcmd1bWVudHMsIDApKTsgfSxcbiAgICAgIGRlYnVnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgJGxvZy5kZWJ1Zy5sb2dzLnB1c2goY29uY2F0KFtdLCBhcmd1bWVudHMsIDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGxvZyNyZXNldFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmVzZXQgYWxsIG9mIHRoZSBsb2dnaW5nIGFycmF5cyB0byBlbXB0eS5cbiAgICAgKi9cbiAgICAkbG9nLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICogQG5hbWUgJGxvZyNsb2cubG9nc1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQXJyYXkgb2YgbWVzc2FnZXMgbG9nZ2VkIHVzaW5nIHtAbGluayBuZy4kbG9nI2xvZyBgbG9nKClgfS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAqICRsb2cubG9nKCdTb21lIExvZycpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy5sb2cubG9ncy51bnNoaWZ0KCk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqL1xuICAgICAgJGxvZy5sb2cubG9ncyA9IFtdO1xuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAqIEBuYW1lICRsb2cjaW5mby5sb2dzXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBcnJheSBvZiBtZXNzYWdlcyBsb2dnZWQgdXNpbmcge0BsaW5rIG5nLiRsb2cjaW5mbyBgaW5mbygpYH0uXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAkbG9nLmluZm8oJ1NvbWUgSW5mbycpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy5pbmZvLmxvZ3MudW5zaGlmdCgpO1xuICAgICAgICogYGBgXG4gICAgICAgKi9cbiAgICAgICRsb2cuaW5mby5sb2dzID0gW107XG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICogQG5hbWUgJGxvZyN3YXJuLmxvZ3NcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFycmF5IG9mIG1lc3NhZ2VzIGxvZ2dlZCB1c2luZyB7QGxpbmsgbmcuJGxvZyN3YXJuIGB3YXJuKClgfS5cbiAgICAgICAqXG4gICAgICAgKiBAZXhhbXBsZVxuICAgICAgICogYGBganNcbiAgICAgICAqICRsb2cud2FybignU29tZSBXYXJuaW5nJyk7XG4gICAgICAgKiB2YXIgZmlyc3QgPSAkbG9nLndhcm4ubG9ncy51bnNoaWZ0KCk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqL1xuICAgICAgJGxvZy53YXJuLmxvZ3MgPSBbXTtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAgKiBAbmFtZSAkbG9nI2Vycm9yLmxvZ3NcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFycmF5IG9mIG1lc3NhZ2VzIGxvZ2dlZCB1c2luZyB7QGxpbmsgbmcuJGxvZyNlcnJvciBgZXJyb3IoKWB9LlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogJGxvZy5lcnJvcignU29tZSBFcnJvcicpO1xuICAgICAgICogdmFyIGZpcnN0ID0gJGxvZy5lcnJvci5sb2dzLnVuc2hpZnQoKTtcbiAgICAgICAqIGBgYFxuICAgICAgICovXG4gICAgICAkbG9nLmVycm9yLmxvZ3MgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAqIEBuYW1lICRsb2cjZGVidWcubG9nc1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQXJyYXkgb2YgbWVzc2FnZXMgbG9nZ2VkIHVzaW5nIHtAbGluayBuZy4kbG9nI2RlYnVnIGBkZWJ1ZygpYH0uXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAkbG9nLmRlYnVnKCdTb21lIEVycm9yJyk7XG4gICAgICAgKiB2YXIgZmlyc3QgPSAkbG9nLmRlYnVnLmxvZ3MudW5zaGlmdCgpO1xuICAgICAgICogYGBgXG4gICAgICAgKi9cbiAgICAgICRsb2cuZGVidWcubG9ncyA9IFtdO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGxvZyNhc3NlcnRFbXB0eVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQXNzZXJ0IHRoYXQgYWxsIG9mIHRoZSBsb2dnaW5nIG1ldGhvZHMgaGF2ZSBubyBsb2dnZWQgbWVzc2FnZXMuIElmIGFueSBtZXNzYWdlcyBhcmUgcHJlc2VudCxcbiAgICAgKiBhbiBleGNlcHRpb24gaXMgdGhyb3duLlxuICAgICAqL1xuICAgICRsb2cuYXNzZXJ0RW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChbJ2Vycm9yJywgJ3dhcm4nLCAnaW5mbycsICdsb2cnLCAnZGVidWcnXSwgZnVuY3Rpb24obG9nTGV2ZWwpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRsb2dbbG9nTGV2ZWxdLmxvZ3MsIGZ1bmN0aW9uKGxvZykge1xuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChsb2csIGZ1bmN0aW9uKGxvZ0l0ZW0pIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKCdNT0NLICRsb2cgKCcgKyBsb2dMZXZlbCArICcpOiAnICsgU3RyaW5nKGxvZ0l0ZW0pICsgJ1xcbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKGxvZ0l0ZW0uc3RhY2sgfHwgJycpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIGVycm9ycy51bnNoaWZ0KCdFeHBlY3RlZCAkbG9nIHRvIGJlIGVtcHR5ISBFaXRoZXIgYSBtZXNzYWdlIHdhcyBsb2dnZWQgdW5leHBlY3RlZGx5LCBvciAnICtcbiAgICAgICAgICAnYW4gZXhwZWN0ZWQgbG9nIG1lc3NhZ2Ugd2FzIG5vdCBjaGVja2VkIGFuZCByZW1vdmVkOicpO1xuICAgICAgICBlcnJvcnMucHVzaCgnJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcnMuam9pbignXFxuLS0tLS0tLS0tXFxuJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkbG9nLnJlc2V0KCk7XG4gICAgcmV0dXJuICRsb2c7XG4gIH07XG59O1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRpbnRlcnZhbFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTW9jayBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgJGludGVydmFsIHNlcnZpY2UuXG4gKlxuICogVXNlIHtAbGluayBuZ01vY2suJGludGVydmFsI2ZsdXNoIGAkaW50ZXJ2YWwuZmx1c2gobWlsbGlzKWB9IHRvXG4gKiBtb3ZlIGZvcndhcmQgYnkgYG1pbGxpc2AgbWlsbGlzZWNvbmRzIGFuZCB0cmlnZ2VyIGFueSBmdW5jdGlvbnMgc2NoZWR1bGVkIHRvIHJ1biBpbiB0aGF0XG4gKiB0aW1lLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm4gQSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgcmVwZWF0ZWRseS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZWFjaCBmdW5jdGlvbiBjYWxsLlxuICogQHBhcmFtIHtudW1iZXI9fSBbY291bnQ9MF0gTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdC4gSWYgbm90IHNldCwgb3IgMCwgd2lsbCByZXBlYXRcbiAqICAgaW5kZWZpbml0ZWx5LlxuICogQHBhcmFtIHtib29sZWFuPX0gW2ludm9rZUFwcGx5PXRydWVdIElmIHNldCB0byBgZmFsc2VgIHNraXBzIG1vZGVsIGRpcnR5IGNoZWNraW5nLCBvdGhlcndpc2VcbiAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICogQHBhcmFtIHsuLi4qPX0gUGFzcyBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgdG8gdGhlIGV4ZWN1dGVkIGZ1bmN0aW9uLlxuICogQHJldHVybnMge3Byb21pc2V9IEEgcHJvbWlzZSB3aGljaCB3aWxsIGJlIG5vdGlmaWVkIG9uIGVhY2ggaXRlcmF0aW9uLlxuICovXG5hbmd1bGFyLm1vY2suJEludGVydmFsUHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckYnJvd3NlcicsICckJGludGVydmFsRmFjdG9yeScsXG4gICAgICAgZnVuY3Rpb24oJGJyb3dzZXIsICAgJCRpbnRlcnZhbEZhY3RvcnkpIHtcbiAgICB2YXIgcmVwZWF0Rm5zID0gW10sXG4gICAgICAgIG5leHRSZXBlYXRJZCA9IDAsXG4gICAgICAgIG5vdyA9IDAsXG4gICAgICAgIHNldEludGVydmFsRm4gPSBmdW5jdGlvbih0aWNrLCBkZWxheSwgZGVmZXJyZWQsIHNraXBBcHBseSkge1xuICAgICAgICAgIHZhciBpZCA9IG5leHRSZXBlYXRJZCsrO1xuICAgICAgICAgIHZhciBmbiA9ICFza2lwQXBwbHkgPyB0aWNrIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aWNrKCk7XG4gICAgICAgICAgICAkYnJvd3Nlci5kZWZlci5mbHVzaCgpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXBlYXRGbnMucHVzaCh7XG4gICAgICAgICAgICBuZXh0VGltZTogKG5vdyArIChkZWxheSB8fCAwKSksXG4gICAgICAgICAgICBkZWxheTogZGVsYXkgfHwgMSxcbiAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIGRlZmVycmVkOiBkZWZlcnJlZFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlcGVhdEZucy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEubmV4dFRpbWUgLSBiLm5leHRUaW1lOyB9KTtcblxuICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXJJbnRlcnZhbEZuID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICBmb3IgKHZhciBmbkluZGV4ID0gcmVwZWF0Rm5zLmxlbmd0aCAtIDE7IGZuSW5kZXggPj0gMDsgZm5JbmRleC0tKSB7XG4gICAgICAgICAgICBpZiAocmVwZWF0Rm5zW2ZuSW5kZXhdLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICByZXBlYXRGbnMuc3BsaWNlKGZuSW5kZXgsIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICB2YXIgJGludGVydmFsID0gJCRpbnRlcnZhbEZhY3Rvcnkoc2V0SW50ZXJ2YWxGbiwgY2xlYXJJbnRlcnZhbEZuKTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaW50ZXJ2YWwjY2FuY2VsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBDYW5jZWxzIGEgdGFzayBhc3NvY2lhdGVkIHdpdGggdGhlIGBwcm9taXNlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7cHJvbWlzZX0gcHJvbWlzZSBBIHByb21pc2UgZnJvbSBjYWxsaW5nIHRoZSBgJGludGVydmFsYCBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgd2FzIHN1Y2Nlc3NmdWxseSBjYW5jZWxsZWQuXG4gICAgICovXG4gICAgJGludGVydmFsLmNhbmNlbCA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIGlmICghcHJvbWlzZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBmb3IgKHZhciBmbkluZGV4ID0gcmVwZWF0Rm5zLmxlbmd0aCAtIDE7IGZuSW5kZXggPj0gMDsgZm5JbmRleC0tKSB7XG4gICAgICAgIGlmIChyZXBlYXRGbnNbZm5JbmRleF0uaWQgPT09IHByb21pc2UuJCRpbnRlcnZhbElkKSB7XG4gICAgICAgICAgdmFyIGRlZmVycmVkID0gcmVwZWF0Rm5zW2ZuSW5kZXhdLmRlZmVycmVkO1xuICAgICAgICAgIGRlZmVycmVkLnByb21pc2UudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uKCkge30pO1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgnY2FuY2VsZWQnKTtcbiAgICAgICAgICByZXBlYXRGbnMuc3BsaWNlKGZuSW5kZXgsIDEpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRpbnRlcnZhbCNmbHVzaFxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogUnVucyBpbnRlcnZhbCB0YXNrcyBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBuZXh0IGBtaWxsaXNgIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaWxsaXMgbWF4aW11bSB0aW1lb3V0IGFtb3VudCB0byBmbHVzaCB1cCB1bnRpbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGFtb3VudCBvZiB0aW1lIG1vdmVkIGZvcndhcmQuXG4gICAgICovXG4gICAgJGludGVydmFsLmZsdXNoID0gZnVuY3Rpb24obWlsbGlzKSB7XG4gICAgICB2YXIgYmVmb3JlID0gbm93O1xuICAgICAgbm93ICs9IG1pbGxpcztcbiAgICAgIHdoaWxlIChyZXBlYXRGbnMubGVuZ3RoICYmIHJlcGVhdEZuc1swXS5uZXh0VGltZSA8PSBub3cpIHtcbiAgICAgICAgdmFyIHRhc2sgPSByZXBlYXRGbnNbMF07XG4gICAgICAgIHRhc2suZm4oKTtcbiAgICAgICAgaWYgKHRhc2submV4dFRpbWUgPT09IGJlZm9yZSkge1xuICAgICAgICAgIC8vIHRoaXMgY2FuIG9ubHkgaGFwcGVuIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgICAgLy8gYSB6ZXJvLWRlbGF5IGludGVydmFsIGdldHMgdHJpZ2dlcmVkXG4gICAgICAgICAgdGFzay5uZXh0VGltZSsrO1xuICAgICAgICB9XG4gICAgICAgIHRhc2submV4dFRpbWUgKz0gdGFzay5kZWxheTtcbiAgICAgICAgcmVwZWF0Rm5zLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYS5uZXh0VGltZSAtIGIubmV4dFRpbWU7fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWlsbGlzO1xuICAgIH07XG5cbiAgICByZXR1cm4gJGludGVydmFsO1xuICB9XTtcbn07XG5cblxuZnVuY3Rpb24ganNvblN0cmluZ1RvRGF0ZShzdHJpbmcpIHtcbiAgLy8gVGhlIFJfSVNPODA2MV9TVFIgcmVnZXggaXMgbmV2ZXIgZ29pbmcgdG8gZml0IGludG8gdGhlIDEwMCBjaGFyIGxpbWl0IVxuICAvLyBlc2xpdC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gIHZhciBSX0lTTzgwNjFfU1RSID0gL14oLT9cXGR7NH0pLT8oXFxkXFxkKS0/KFxcZFxcZCkoPzpUKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlxcLihcXGR7M30pKT8pPyk/KFp8KFsrLV0pKFxcZFxcZCk6PyhcXGRcXGQpKSk/JC87XG5cbiAgdmFyIG1hdGNoO1xuICBpZiAoKG1hdGNoID0gc3RyaW5nLm1hdGNoKFJfSVNPODA2MV9TVFIpKSkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCksXG4gICAgICAgIHR6SG91ciA9IDAsXG4gICAgICAgIHR6TWluICA9IDA7XG4gICAgaWYgKG1hdGNoWzldKSB7XG4gICAgICB0ekhvdXIgPSB0b0ludChtYXRjaFs5XSArIG1hdGNoWzEwXSk7XG4gICAgICB0ek1pbiA9IHRvSW50KG1hdGNoWzldICsgbWF0Y2hbMTFdKTtcbiAgICB9XG4gICAgZGF0ZS5zZXRVVENGdWxsWWVhcih0b0ludChtYXRjaFsxXSksIHRvSW50KG1hdGNoWzJdKSAtIDEsIHRvSW50KG1hdGNoWzNdKSk7XG4gICAgZGF0ZS5zZXRVVENIb3Vycyh0b0ludChtYXRjaFs0XSB8fCAwKSAtIHR6SG91cixcbiAgICAgICAgICAgICAgICAgICAgIHRvSW50KG1hdGNoWzVdIHx8IDApIC0gdHpNaW4sXG4gICAgICAgICAgICAgICAgICAgICB0b0ludChtYXRjaFs2XSB8fCAwKSxcbiAgICAgICAgICAgICAgICAgICAgIHRvSW50KG1hdGNoWzddIHx8IDApKTtcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuICByZXR1cm4gc3RyaW5nO1xufVxuXG5mdW5jdGlvbiB0b0ludChzdHIpIHtcbiAgcmV0dXJuIHBhcnNlSW50KHN0ciwgMTApO1xufVxuXG5mdW5jdGlvbiBwYWROdW1iZXJJbk1vY2sobnVtLCBkaWdpdHMsIHRyaW0pIHtcbiAgdmFyIG5lZyA9ICcnO1xuICBpZiAobnVtIDwgMCkge1xuICAgIG5lZyA9ICAnLSc7XG4gICAgbnVtID0gLW51bTtcbiAgfVxuICBudW0gPSAnJyArIG51bTtcbiAgd2hpbGUgKG51bS5sZW5ndGggPCBkaWdpdHMpIG51bSA9ICcwJyArIG51bTtcbiAgaWYgKHRyaW0pIHtcbiAgICBudW0gPSBudW0uc3Vic3RyKG51bS5sZW5ndGggLSBkaWdpdHMpO1xuICB9XG4gIHJldHVybiBuZWcgKyBudW07XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgYW5ndWxhci5tb2NrLlR6RGF0ZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogKk5PVEUqOiB0aGlzIGlzIG5vdCBhbiBpbmplY3RhYmxlIGluc3RhbmNlLCBqdXN0IGEgZ2xvYmFsbHkgYXZhaWxhYmxlIG1vY2sgY2xhc3Mgb2YgYERhdGVgLlxuICpcbiAqIE1vY2sgb2YgdGhlIERhdGUgdHlwZSB3aGljaCBoYXMgaXRzIHRpbWV6b25lIHNwZWNpZmllZCB2aWEgY29uc3RydWN0b3IgYXJnLlxuICpcbiAqIFRoZSBtYWluIHB1cnBvc2UgaXMgdG8gY3JlYXRlIERhdGUtbGlrZSBpbnN0YW5jZXMgd2l0aCB0aW1lem9uZSBmaXhlZCB0byB0aGUgc3BlY2lmaWVkIHRpbWV6b25lXG4gKiBvZmZzZXQsIHNvIHRoYXQgd2UgY2FuIHRlc3QgY29kZSB0aGF0IGRlcGVuZHMgb24gbG9jYWwgdGltZXpvbmUgc2V0dGluZ3Mgd2l0aG91dCBkZXBlbmRlbmN5IG9uXG4gKiB0aGUgdGltZSB6b25lIHNldHRpbmdzIG9mIHRoZSBtYWNoaW5lIHdoZXJlIHRoZSBjb2RlIGlzIHJ1bm5pbmcuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQgb2YgdGhlICpkZXNpcmVkKiB0aW1lem9uZSBpbiBob3VycyAoZnJhY3Rpb25zIHdpbGwgYmUgaG9ub3JlZClcbiAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpfSB0aW1lc3RhbXAgVGltZXN0YW1wIHJlcHJlc2VudGluZyB0aGUgZGVzaXJlZCB0aW1lIGluICpVVEMqXG4gKlxuICogQGV4YW1wbGVcbiAqICEhISEgV0FSTklORyAhISEhIVxuICogVGhpcyBpcyBub3QgYSBjb21wbGV0ZSBEYXRlIG9iamVjdCBzbyBvbmx5IG1ldGhvZHMgdGhhdCB3ZXJlIGltcGxlbWVudGVkIGNhbiBiZSBjYWxsZWQgc2FmZWx5LlxuICogVG8gbWFrZSBtYXR0ZXJzIHdvcnNlLCBUekRhdGUgaW5zdGFuY2VzIGluaGVyaXQgc3R1ZmYgZnJvbSBEYXRlIHZpYSBhIHByb3RvdHlwZS5cbiAqXG4gKiBXZSBkbyBvdXIgYmVzdCB0byBpbnRlcmNlcHQgY2FsbHMgdG8gXCJ1bmltcGxlbWVudGVkXCIgbWV0aG9kcywgYnV0IHNpbmNlIHRoZSBsaXN0IG9mIG1ldGhvZHMgaXNcbiAqIGluY29tcGxldGUgd2UgbWlnaHQgYmUgbWlzc2luZyBzb21lIG5vbi1zdGFuZGFyZCBtZXRob2RzLiBUaGlzIGNhbiByZXN1bHQgaW4gZXJyb3JzIGxpa2U6XG4gKiBcIkRhdGUucHJvdG90eXBlLmZvbyBjYWxsZWQgb24gaW5jb21wYXRpYmxlIE9iamVjdFwiLlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgbmV3WWVhckluQnJhdGlzbGF2YSA9IG5ldyBUekRhdGUoLTEsICcyMDA5LTEyLTMxVDIzOjAwOjAwWicpO1xuICogbmV3WWVhckluQnJhdGlzbGF2YS5nZXRUaW1lem9uZU9mZnNldCgpID0+IC02MDtcbiAqIG5ld1llYXJJbkJyYXRpc2xhdmEuZ2V0RnVsbFllYXIoKSA9PiAyMDEwO1xuICogbmV3WWVhckluQnJhdGlzbGF2YS5nZXRNb250aCgpID0+IDA7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldERhdGUoKSA9PiAxO1xuICogbmV3WWVhckluQnJhdGlzbGF2YS5nZXRIb3VycygpID0+IDA7XG4gKiBuZXdZZWFySW5CcmF0aXNsYXZhLmdldE1pbnV0ZXMoKSA9PiAwO1xuICogbmV3WWVhckluQnJhdGlzbGF2YS5nZXRTZWNvbmRzKCkgPT4gMDtcbiAqIGBgYFxuICpcbiAqL1xuYW5ndWxhci5tb2NrLlR6RGF0ZSA9IGZ1bmN0aW9uKG9mZnNldCwgdGltZXN0YW1wKSB7XG4gIHZhciBzZWxmID0gbmV3IERhdGUoMCk7XG4gIGlmIChhbmd1bGFyLmlzU3RyaW5nKHRpbWVzdGFtcCkpIHtcbiAgICB2YXIgdHNTdHIgPSB0aW1lc3RhbXA7XG5cbiAgICBzZWxmLm9yaWdEYXRlID0ganNvblN0cmluZ1RvRGF0ZSh0aW1lc3RhbXApO1xuXG4gICAgdGltZXN0YW1wID0gc2VsZi5vcmlnRGF0ZS5nZXRUaW1lKCk7XG4gICAgaWYgKGlzTmFOKHRpbWVzdGFtcCkpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsXG4gICAgICB0aHJvdyB7XG4gICAgICAgIG5hbWU6ICdJbGxlZ2FsIEFyZ3VtZW50JyxcbiAgICAgICAgbWVzc2FnZTogJ0FyZyBcXCcnICsgdHNTdHIgKyAnXFwnIHBhc3NlZCBpbnRvIFR6RGF0ZSBjb25zdHJ1Y3RvciBpcyBub3QgYSB2YWxpZCBkYXRlIHN0cmluZydcbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNlbGYub3JpZ0RhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICB9XG5cbiAgdmFyIGxvY2FsT2Zmc2V0ID0gbmV3IERhdGUodGltZXN0YW1wKS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICBzZWxmLm9mZnNldERpZmYgPSBsb2NhbE9mZnNldCAqIDYwICogMTAwMCAtIG9mZnNldCAqIDEwMDAgKiA2MCAqIDYwO1xuICBzZWxmLmRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKyBzZWxmLm9mZnNldERpZmYpO1xuXG4gIHNlbGYuZ2V0VGltZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0VGltZSgpIC0gc2VsZi5vZmZzZXREaWZmO1xuICB9O1xuXG4gIHNlbGYudG9Mb2NhbGVEYXRlU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgfTtcblxuICBzZWxmLmdldEZ1bGxZZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXRGdWxsWWVhcigpO1xuICB9O1xuXG4gIHNlbGYuZ2V0TW9udGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldE1vbnRoKCk7XG4gIH07XG5cbiAgc2VsZi5nZXREYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXREYXRlKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRIb3VycyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0SG91cnMoKTtcbiAgfTtcblxuICBzZWxmLmdldE1pbnV0ZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldE1pbnV0ZXMoKTtcbiAgfTtcblxuICBzZWxmLmdldFNlY29uZHMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5kYXRlLmdldFNlY29uZHMoKTtcbiAgfTtcblxuICBzZWxmLmdldE1pbGxpc2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRUaW1lem9uZU9mZnNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBvZmZzZXQgKiA2MDtcbiAgfTtcblxuICBzZWxmLmdldFVUQ0Z1bGxZZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ01vbnRoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDTW9udGgoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ0RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2VsZi5vcmlnRGF0ZS5nZXRVVENEYXRlKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRVVENIb3VycyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLm9yaWdEYXRlLmdldFVUQ0hvdXJzKCk7XG4gIH07XG5cbiAgc2VsZi5nZXRVVENNaW51dGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYub3JpZ0RhdGUuZ2V0VVRDTWludXRlcygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0VVRDU2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLm9yaWdEYXRlLmdldFVUQ1NlY29uZHMoKTtcbiAgfTtcblxuICBzZWxmLmdldFVUQ01pbGxpc2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLm9yaWdEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICB9O1xuXG4gIHNlbGYuZ2V0RGF5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuZGF0ZS5nZXREYXkoKTtcbiAgfTtcblxuICAvLyBwcm92aWRlIHRoaXMgbWV0aG9kIG9ubHkgb24gYnJvd3NlcnMgdGhhdCBhbHJlYWR5IGhhdmUgaXRcbiAgaWYgKHNlbGYudG9JU09TdHJpbmcpIHtcbiAgICBzZWxmLnRvSVNPU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGFkTnVtYmVySW5Nb2NrKHNlbGYub3JpZ0RhdGUuZ2V0VVRDRnVsbFllYXIoKSwgNCkgKyAnLScgK1xuICAgICAgICAgICAgcGFkTnVtYmVySW5Nb2NrKHNlbGYub3JpZ0RhdGUuZ2V0VVRDTW9udGgoKSArIDEsIDIpICsgJy0nICtcbiAgICAgICAgICAgIHBhZE51bWJlckluTW9jayhzZWxmLm9yaWdEYXRlLmdldFVUQ0RhdGUoKSwgMikgKyAnVCcgK1xuICAgICAgICAgICAgcGFkTnVtYmVySW5Nb2NrKHNlbGYub3JpZ0RhdGUuZ2V0VVRDSG91cnMoKSwgMikgKyAnOicgK1xuICAgICAgICAgICAgcGFkTnVtYmVySW5Nb2NrKHNlbGYub3JpZ0RhdGUuZ2V0VVRDTWludXRlcygpLCAyKSArICc6JyArXG4gICAgICAgICAgICBwYWROdW1iZXJJbk1vY2soc2VsZi5vcmlnRGF0ZS5nZXRVVENTZWNvbmRzKCksIDIpICsgJy4nICtcbiAgICAgICAgICAgIHBhZE51bWJlckluTW9jayhzZWxmLm9yaWdEYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpLCAzKSArICdaJztcbiAgICB9O1xuICB9XG5cbiAgLy9oaWRlIGFsbCBtZXRob2RzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIG1vY2sgdGhhdCB0aGUgRGF0ZSBwcm90b3R5cGUgZXhwb3Nlc1xuICB2YXIgdW5pbXBsZW1lbnRlZE1ldGhvZHMgPSBbJ2dldFVUQ0RheScsXG4gICAgICAnZ2V0WWVhcicsICdzZXREYXRlJywgJ3NldEZ1bGxZZWFyJywgJ3NldEhvdXJzJywgJ3NldE1pbGxpc2Vjb25kcycsXG4gICAgICAnc2V0TWludXRlcycsICdzZXRNb250aCcsICdzZXRTZWNvbmRzJywgJ3NldFRpbWUnLCAnc2V0VVRDRGF0ZScsICdzZXRVVENGdWxsWWVhcicsXG4gICAgICAnc2V0VVRDSG91cnMnLCAnc2V0VVRDTWlsbGlzZWNvbmRzJywgJ3NldFVUQ01pbnV0ZXMnLCAnc2V0VVRDTW9udGgnLCAnc2V0VVRDU2Vjb25kcycsXG4gICAgICAnc2V0WWVhcicsICd0b0RhdGVTdHJpbmcnLCAndG9HTVRTdHJpbmcnLCAndG9KU09OJywgJ3RvTG9jYWxlRm9ybWF0JywgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgICAgICd0b0xvY2FsZVRpbWVTdHJpbmcnLCAndG9Tb3VyY2UnLCAndG9TdHJpbmcnLCAndG9UaW1lU3RyaW5nJywgJ3RvVVRDU3RyaW5nJywgJ3ZhbHVlT2YnXTtcblxuICBhbmd1bGFyLmZvckVhY2godW5pbXBsZW1lbnRlZE1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICBzZWxmW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBcXCcnICsgbWV0aG9kTmFtZSArICdcXCcgaXMgbm90IGltcGxlbWVudGVkIGluIHRoZSBUekRhdGUgbW9jaycpO1xuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiBzZWxmO1xufTtcblxuLy9tYWtlIFwidHpEYXRlSW5zdGFuY2UgaW5zdGFuY2VvZiBEYXRlXCIgcmV0dXJuIHRydWVcbmFuZ3VsYXIubW9jay5UekRhdGUucHJvdG90eXBlID0gRGF0ZS5wcm90b3R5cGU7XG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGFuaW1hdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIE1vY2sgaW1wbGVtZW50YXRpb24gb2YgdGhlIHtAbGluayBuZy4kYW5pbWF0ZSBgJGFuaW1hdGVgfSBzZXJ2aWNlLiBFeHBvc2VzIHR3byBhZGRpdGlvbmFsIG1ldGhvZHNcbiAqIGZvciB0ZXN0aW5nIGFuaW1hdGlvbnMuXG4gKlxuICogWW91IG5lZWQgdG8gcmVxdWlyZSB0aGUgYG5nQW5pbWF0ZU1vY2tgIG1vZHVsZSBpbiB5b3VyIHRlc3Qgc3VpdGUgZm9yIGluc3RhbmNlIGBiZWZvcmVFYWNoKG1vZHVsZSgnbmdBbmltYXRlTW9jaycpKWBcbiAqL1xuYW5ndWxhci5tb2NrLmFuaW1hdGUgPSBhbmd1bGFyLm1vZHVsZSgnbmdBbmltYXRlTW9jaycsIFsnbmcnXSlcbiAgLmluZm8oeyBhbmd1bGFyVmVyc2lvbjogJzEuNy44JyB9KVxuXG4gIC5jb25maWcoWyckcHJvdmlkZScsIGZ1bmN0aW9uKCRwcm92aWRlKSB7XG5cbiAgICAkcHJvdmlkZS5mYWN0b3J5KCckJGZvcmNlUmVmbG93JywgZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiByZWZsb3dGbigpIHtcbiAgICAgICAgcmVmbG93Rm4udG90YWxSZWZsb3dzKys7XG4gICAgICB9XG4gICAgICByZWZsb3dGbi50b3RhbFJlZmxvd3MgPSAwO1xuICAgICAgcmV0dXJuIHJlZmxvd0ZuO1xuICAgIH0pO1xuXG4gICAgJHByb3ZpZGUuZmFjdG9yeSgnJCRhbmltYXRlQXN5bmNSdW4nLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBxdWV1ZSA9IFtdO1xuICAgICAgdmFyIHF1ZXVlRm4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgcXVldWUucHVzaChmbik7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgcXVldWVGbi5mbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocXVldWUubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHF1ZXVlW2ldKCk7XG4gICAgICAgIH1cbiAgICAgICAgcXVldWUgPSBbXTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gcXVldWVGbjtcbiAgICB9KTtcblxuICAgICRwcm92aWRlLmRlY29yYXRvcignJCRhbmltYXRlSnMnLCBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICAgICAgdmFyIHJ1bm5lcnMgPSBbXTtcblxuICAgICAgdmFyIGFuaW1hdGVKc0NvbnN0cnVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhbmltYXRvciA9ICRkZWxlZ2F0ZS5hcHBseSgkZGVsZWdhdGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIC8vIElmIG5vIGphdmFzY3JpcHQgYW5pbWF0aW9uIGlzIGZvdW5kLCBhbmltYXRvciBpcyB1bmRlZmluZWRcbiAgICAgICAgaWYgKGFuaW1hdG9yKSB7XG4gICAgICAgICAgcnVubmVycy5wdXNoKGFuaW1hdG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW5pbWF0b3I7XG4gICAgICB9O1xuXG4gICAgICBhbmltYXRlSnNDb25zdHJ1Y3Rvci4kY2xvc2VBbmRGbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBydW5uZXJzLmZvckVhY2goZnVuY3Rpb24ocnVubmVyKSB7XG4gICAgICAgICAgcnVubmVyLmVuZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcnVubmVycyA9IFtdO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGFuaW1hdGVKc0NvbnN0cnVjdG9yO1xuICAgIH1dKTtcblxuICAgICRwcm92aWRlLmRlY29yYXRvcignJGFuaW1hdGVDc3MnLCBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICAgICAgdmFyIHJ1bm5lcnMgPSBbXTtcblxuICAgICAgdmFyIGFuaW1hdGVDc3NDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGFuaW1hdG9yID0gJGRlbGVnYXRlKGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICBydW5uZXJzLnB1c2goYW5pbWF0b3IpO1xuICAgICAgICByZXR1cm4gYW5pbWF0b3I7XG4gICAgICB9O1xuXG4gICAgICBhbmltYXRlQ3NzQ29uc3RydWN0b3IuJGNsb3NlQW5kRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcnVubmVycy5mb3JFYWNoKGZ1bmN0aW9uKHJ1bm5lcikge1xuICAgICAgICAgIHJ1bm5lci5lbmQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJ1bm5lcnMgPSBbXTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBhbmltYXRlQ3NzQ29uc3RydWN0b3I7XG4gICAgfV0pO1xuXG4gICAgJHByb3ZpZGUuZGVjb3JhdG9yKCckYW5pbWF0ZScsIFsnJGRlbGVnYXRlJywgJyR0aW1lb3V0JywgJyRicm93c2VyJywgJyQkckFGJywgJyRhbmltYXRlQ3NzJywgJyQkYW5pbWF0ZUpzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICckJGZvcmNlUmVmbG93JywgJyQkYW5pbWF0ZUFzeW5jUnVuJywgJyRyb290U2NvcGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCRkZWxlZ2F0ZSwgICAkdGltZW91dCwgICAkYnJvd3NlciwgICAkJHJBRiwgICAkYW5pbWF0ZUNzcywgICAkJGFuaW1hdGVKcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJGZvcmNlUmVmbG93LCAgICQkYW5pbWF0ZUFzeW5jUnVuLCAgJHJvb3RTY29wZSkge1xuICAgICAgdmFyIGFuaW1hdGUgPSB7XG4gICAgICAgIHF1ZXVlOiBbXSxcbiAgICAgICAgY2FuY2VsOiAkZGVsZWdhdGUuY2FuY2VsLFxuICAgICAgICBvbjogJGRlbGVnYXRlLm9uLFxuICAgICAgICBvZmY6ICRkZWxlZ2F0ZS5vZmYsXG4gICAgICAgIHBpbjogJGRlbGVnYXRlLnBpbixcbiAgICAgICAgZ2V0IHJlZmxvd3MoKSB7XG4gICAgICAgICAgcmV0dXJuICQkZm9yY2VSZWZsb3cudG90YWxSZWZsb3dzO1xuICAgICAgICB9LFxuICAgICAgICBlbmFibGVkOiAkZGVsZWdhdGUuZW5hYmxlZCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGFuaW1hdGUjY2xvc2VBbmRGbHVzaFxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBtZXRob2Qgd2lsbCBjbG9zZSBhbGwgcGVuZGluZyBhbmltYXRpb25zIChib3RoIHtAbGluayBuZ0FuaW1hdGUjamF2YXNjcmlwdC1iYXNlZC1hbmltYXRpb25zIEphdmFzY3JpcHR9XG4gICAgICAgICAqIGFuZCB7QGxpbmsgbmdBbmltYXRlLiRhbmltYXRlQ3NzIENTU30pIGFuZCBpdCB3aWxsIGFsc28gZmx1c2ggYW55IHJlbWFpbmluZyBhbmltYXRpb24gZnJhbWVzIGFuZC9vciBjYWxsYmFja3MuXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZUFuZEZsdXNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyB3ZSBhbGxvdyB0aGUgZmx1c2ggY29tbWFuZCB0byBzd2FsbG93IHRoZSBlcnJvcnNcbiAgICAgICAgICAvLyBiZWNhdXNlIGRlcGVuZGluZyBvbiB3aGV0aGVyIENTUyBvciBKUyBhbmltYXRpb25zIGFyZVxuICAgICAgICAgIC8vIHVzZWQsIHRoZXJlIG1heSBub3QgYmUgYSBSQUYgZmx1c2guIFRoZSBwcmltYXJ5IGZsdXNoXG4gICAgICAgICAgLy8gYXQgdGhlIGVuZCBvZiB0aGlzIGZ1bmN0aW9uIG11c3QgdGhyb3cgYW4gZXhjZXB0aW9uXG4gICAgICAgICAgLy8gYmVjYXVzZSBpdCB3aWxsIHRyYWNrIGlmIHRoZXJlIHdlcmUgcGVuZGluZyBhbmltYXRpb25zXG4gICAgICAgICAgdGhpcy5mbHVzaCh0cnVlKTtcbiAgICAgICAgICAkYW5pbWF0ZUNzcy4kY2xvc2VBbmRGbHVzaCgpO1xuICAgICAgICAgICQkYW5pbWF0ZUpzLiRjbG9zZUFuZEZsdXNoKCk7XG4gICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNmbHVzaFxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBmbHVzaCB0aGUgcGVuZGluZyBjYWxsYmFja3MgYW5kIGFuaW1hdGlvbiBmcmFtZXMgdG8gZWl0aGVyIHN0YXJ0XG4gICAgICAgICAqIGFuIGFuaW1hdGlvbiBvciBjb25jbHVkZSBhbiBhbmltYXRpb24uIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IGFjdHVhbGx5IGNsb3NlIGFuXG4gICAgICAgICAqIGFjdGl2ZWx5IHJ1bm5pbmcgYW5pbWF0aW9uIChzZWUge0BsaW5rIG5nTW9jay4kYW5pbWF0ZSNjbG9zZUFuZEZsdXNoIGBjbG9zZUFuZEZsdXNoKClgfSBmb3IgdGhhdCkuXG4gICAgICAgICAqL1xuICAgICAgICBmbHVzaDogZnVuY3Rpb24oaGlkZUVycm9ycykge1xuICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuXG4gICAgICAgICAgdmFyIGRvTmV4dFJ1biwgc29tZXRoaW5nRmx1c2hlZCA9IGZhbHNlO1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIGRvTmV4dFJ1biA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoJCRyQUYucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICQkckFGLmZsdXNoKCk7XG4gICAgICAgICAgICAgIGRvTmV4dFJ1biA9IHNvbWV0aGluZ0ZsdXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJCRhbmltYXRlQXN5bmNSdW4uZmx1c2goKSkge1xuICAgICAgICAgICAgICBkb05leHRSdW4gPSBzb21ldGhpbmdGbHVzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlIChkb05leHRSdW4pO1xuXG4gICAgICAgICAgaWYgKCFzb21ldGhpbmdGbHVzaGVkICYmICFoaWRlRXJyb3JzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHBlbmRpbmcgYW5pbWF0aW9ucyByZWFkeSB0byBiZSBjbG9zZWQgb3IgZmx1c2hlZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBhbmd1bGFyLmZvckVhY2goXG4gICAgICAgIFsnYW5pbWF0ZScsJ2VudGVyJywnbGVhdmUnLCdtb3ZlJywnYWRkQ2xhc3MnLCdyZW1vdmVDbGFzcycsJ3NldENsYXNzJ10sIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICBhbmltYXRlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBhbmltYXRlLnF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6IG1ldGhvZCxcbiAgICAgICAgICAgIGVsZW1lbnQ6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICAgIG9wdGlvbnM6IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBhcmdzOiBhcmd1bWVudHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gJGRlbGVnYXRlW21ldGhvZF0uYXBwbHkoJGRlbGVnYXRlLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBhbmltYXRlO1xuICAgIH1dKTtcblxuICB9XSk7XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIubW9jay5kdW1wXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiAqTk9URSo6IFRoaXMgaXMgbm90IGFuIGluamVjdGFibGUgaW5zdGFuY2UsIGp1c3QgYSBnbG9iYWxseSBhdmFpbGFibGUgZnVuY3Rpb24uXG4gKlxuICogTWV0aG9kIGZvciBzZXJpYWxpemluZyBjb21tb24gQW5ndWxhckpTIG9iamVjdHMgKHNjb3BlLCBlbGVtZW50cywgZXRjLi4pIGludG8gc3RyaW5ncy5cbiAqIEl0IGlzIHVzZWZ1bCBmb3IgbG9nZ2luZyBvYmplY3RzIHRvIHRoZSBjb25zb2xlIHdoZW4gZGVidWdnaW5nLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IC0gYW55IG9iamVjdCB0byB0dXJuIGludG8gc3RyaW5nLlxuICogQHJldHVybiB7c3RyaW5nfSBhIHNlcmlhbGl6ZWQgc3RyaW5nIG9mIHRoZSBhcmd1bWVudFxuICovXG5hbmd1bGFyLm1vY2suZHVtcCA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICByZXR1cm4gc2VyaWFsaXplKG9iamVjdCk7XG5cbiAgZnVuY3Rpb24gc2VyaWFsaXplKG9iamVjdCkge1xuICAgIHZhciBvdXQ7XG5cbiAgICBpZiAoYW5ndWxhci5pc0VsZW1lbnQob2JqZWN0KSkge1xuICAgICAgb2JqZWN0ID0gYW5ndWxhci5lbGVtZW50KG9iamVjdCk7XG4gICAgICBvdXQgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXY+PC9kaXY+Jyk7XG4gICAgICBhbmd1bGFyLmZvckVhY2gob2JqZWN0LCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIG91dC5hcHBlbmQoYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLmNsb25lKCkpO1xuICAgICAgfSk7XG4gICAgICBvdXQgPSBvdXQuaHRtbCgpO1xuICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgIG91dCA9IFtdO1xuICAgICAgYW5ndWxhci5mb3JFYWNoKG9iamVjdCwgZnVuY3Rpb24obykge1xuICAgICAgICBvdXQucHVzaChzZXJpYWxpemUobykpO1xuICAgICAgfSk7XG4gICAgICBvdXQgPSAnWyAnICsgb3V0LmpvaW4oJywgJykgKyAnIF0nO1xuICAgIH0gZWxzZSBpZiAoYW5ndWxhci5pc09iamVjdChvYmplY3QpKSB7XG4gICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKG9iamVjdC4kZXZhbCkgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKG9iamVjdC4kYXBwbHkpKSB7XG4gICAgICAgIG91dCA9IHNlcmlhbGl6ZVNjb3BlKG9iamVjdCk7XG4gICAgICB9IGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG91dCA9IG9iamVjdC5zdGFjayB8fCAoJycgKyBvYmplY3QubmFtZSArICc6ICcgKyBvYmplY3QubWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUT0RPKGkpOiB0aGlzIHByZXZlbnRzIG1ldGhvZHMgYmVpbmcgbG9nZ2VkLFxuICAgICAgICAvLyB3ZSBzaG91bGQgaGF2ZSBhIGJldHRlciB3YXkgdG8gc2VyaWFsaXplIG9iamVjdHNcbiAgICAgICAgb3V0ID0gYW5ndWxhci50b0pzb24ob2JqZWN0LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb3V0ID0gU3RyaW5nKG9iamVjdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZVNjb3BlKHNjb3BlLCBvZmZzZXQpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgICcgICc7XG4gICAgdmFyIGxvZyA9IFtvZmZzZXQgKyAnU2NvcGUoJyArIHNjb3BlLiRpZCArICcpOiB7J107XG4gICAgZm9yICh2YXIga2V5IGluIHNjb3BlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNjb3BlLCBrZXkpICYmICFrZXkubWF0Y2goL14oXFwkfHRoaXMpLykpIHtcbiAgICAgICAgbG9nLnB1c2goJyAgJyArIGtleSArICc6ICcgKyBhbmd1bGFyLnRvSnNvbihzY29wZVtrZXldKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBjaGlsZCA9IHNjb3BlLiQkY2hpbGRIZWFkO1xuICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgbG9nLnB1c2goc2VyaWFsaXplU2NvcGUoY2hpbGQsIG9mZnNldCArICcgICcpKTtcbiAgICAgIGNoaWxkID0gY2hpbGQuJCRuZXh0U2libGluZztcbiAgICB9XG4gICAgbG9nLnB1c2goJ30nKTtcbiAgICByZXR1cm4gbG9nLmpvaW4oJ1xcbicgKyBvZmZzZXQpO1xuICB9XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcbiAqIEBkZXNjcmlwdGlvblxuICogRmFrZSBIVFRQIGJhY2tlbmQgaW1wbGVtZW50YXRpb24gc3VpdGFibGUgZm9yIHVuaXQgdGVzdGluZyBhcHBsaWNhdGlvbnMgdGhhdCB1c2UgdGhlXG4gKiB7QGxpbmsgbmcuJGh0dHAgJGh0dHAgc2VydmljZX0uXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICoqTm90ZSoqOiBGb3IgZmFrZSBIVFRQIGJhY2tlbmQgaW1wbGVtZW50YXRpb24gc3VpdGFibGUgZm9yIGVuZC10by1lbmQgdGVzdGluZyBvciBiYWNrZW5kLWxlc3NcbiAqIGRldmVsb3BtZW50IHBsZWFzZSBzZWUge0BsaW5rIG5nTW9ja0UyRS4kaHR0cEJhY2tlbmQgZTJlICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIDwvZGl2PlxuICpcbiAqIER1cmluZyB1bml0IHRlc3RpbmcsIHdlIHdhbnQgb3VyIHVuaXQgdGVzdHMgdG8gcnVuIHF1aWNrbHkgYW5kIGhhdmUgbm8gZXh0ZXJuYWwgZGVwZW5kZW5jaWVzIHNvXG4gKiB3ZSBkb27igJl0IHdhbnQgdG8gc2VuZCBbWEhSXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi94bWxodHRwcmVxdWVzdCkgb3JcbiAqIFtKU09OUF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9KU09OUCkgcmVxdWVzdHMgdG8gYSByZWFsIHNlcnZlci4gQWxsIHdlIHJlYWxseSBuZWVkIGlzXG4gKiB0byB2ZXJpZnkgd2hldGhlciBhIGNlcnRhaW4gcmVxdWVzdCBoYXMgYmVlbiBzZW50IG9yIG5vdCwgb3IgYWx0ZXJuYXRpdmVseSBqdXN0IGxldCB0aGVcbiAqIGFwcGxpY2F0aW9uIG1ha2UgcmVxdWVzdHMsIHJlc3BvbmQgd2l0aCBwcmUtdHJhaW5lZCByZXNwb25zZXMgYW5kIGFzc2VydCB0aGF0IHRoZSBlbmQgcmVzdWx0IGlzXG4gKiB3aGF0IHdlIGV4cGVjdCBpdCB0byBiZS5cbiAqXG4gKiBUaGlzIG1vY2sgaW1wbGVtZW50YXRpb24gY2FuIGJlIHVzZWQgdG8gcmVzcG9uZCB3aXRoIHN0YXRpYyBvciBkeW5hbWljIHJlc3BvbnNlcyB2aWEgdGhlXG4gKiBgZXhwZWN0YCBhbmQgYHdoZW5gIGFwaXMgYW5kIHRoZWlyIHNob3J0Y3V0cyAoYGV4cGVjdEdFVGAsIGB3aGVuUE9TVGAsIGV0YykuXG4gKlxuICogV2hlbiBhbiBBbmd1bGFySlMgYXBwbGljYXRpb24gbmVlZHMgc29tZSBkYXRhIGZyb20gYSBzZXJ2ZXIsIGl0IGNhbGxzIHRoZSAkaHR0cCBzZXJ2aWNlLCB3aGljaFxuICogc2VuZHMgdGhlIHJlcXVlc3QgdG8gYSByZWFsIHNlcnZlciB1c2luZyAkaHR0cEJhY2tlbmQgc2VydmljZS4gV2l0aCBkZXBlbmRlbmN5IGluamVjdGlvbiwgaXQgaXNcbiAqIGVhc3kgdG8gaW5qZWN0ICRodHRwQmFja2VuZCBtb2NrICh3aGljaCBoYXMgdGhlIHNhbWUgQVBJIGFzICRodHRwQmFja2VuZCkgYW5kIHVzZSBpdCB0byB2ZXJpZnlcbiAqIHRoZSByZXF1ZXN0cyBhbmQgcmVzcG9uZCB3aXRoIHNvbWUgdGVzdGluZyBkYXRhIHdpdGhvdXQgc2VuZGluZyBhIHJlcXVlc3QgdG8gYSByZWFsIHNlcnZlci5cbiAqXG4gKiBUaGVyZSBhcmUgdHdvIHdheXMgdG8gc3BlY2lmeSB3aGF0IHRlc3QgZGF0YSBzaG91bGQgYmUgcmV0dXJuZWQgYXMgaHR0cCByZXNwb25zZXMgYnkgdGhlIG1vY2tcbiAqIGJhY2tlbmQgd2hlbiB0aGUgY29kZSB1bmRlciB0ZXN0IG1ha2VzIGh0dHAgcmVxdWVzdHM6XG4gKlxuICogLSBgJGh0dHBCYWNrZW5kLmV4cGVjdGAgLSBzcGVjaWZpZXMgYSByZXF1ZXN0IGV4cGVjdGF0aW9uXG4gKiAtIGAkaHR0cEJhY2tlbmQud2hlbmAgLSBzcGVjaWZpZXMgYSBiYWNrZW5kIGRlZmluaXRpb25cbiAqXG4gKlxuICogIyMgUmVxdWVzdCBFeHBlY3RhdGlvbnMgdnMgQmFja2VuZCBEZWZpbml0aW9uc1xuICpcbiAqIFJlcXVlc3QgZXhwZWN0YXRpb25zIHByb3ZpZGUgYSB3YXkgdG8gbWFrZSBhc3NlcnRpb25zIGFib3V0IHJlcXVlc3RzIG1hZGUgYnkgdGhlIGFwcGxpY2F0aW9uIGFuZFxuICogdG8gZGVmaW5lIHJlc3BvbnNlcyBmb3IgdGhvc2UgcmVxdWVzdHMuIFRoZSB0ZXN0IHdpbGwgZmFpbCBpZiB0aGUgZXhwZWN0ZWQgcmVxdWVzdHMgYXJlIG5vdCBtYWRlXG4gKiBvciB0aGV5IGFyZSBtYWRlIGluIHRoZSB3cm9uZyBvcmRlci5cbiAqXG4gKiBCYWNrZW5kIGRlZmluaXRpb25zIGFsbG93IHlvdSB0byBkZWZpbmUgYSBmYWtlIGJhY2tlbmQgZm9yIHlvdXIgYXBwbGljYXRpb24gd2hpY2ggZG9lc24ndCBhc3NlcnRcbiAqIGlmIGEgcGFydGljdWxhciByZXF1ZXN0IHdhcyBtYWRlIG9yIG5vdCwgaXQganVzdCByZXR1cm5zIGEgdHJhaW5lZCByZXNwb25zZSBpZiBhIHJlcXVlc3QgaXMgbWFkZS5cbiAqIFRoZSB0ZXN0IHdpbGwgcGFzcyB3aGV0aGVyIG9yIG5vdCB0aGUgcmVxdWVzdCBnZXRzIG1hZGUgZHVyaW5nIHRlc3RpbmcuXG4gKlxuICpcbiAqIDx0YWJsZSBjbGFzcz1cInRhYmxlXCI+XG4gKiAgIDx0cj48dGggd2lkdGg9XCIyMjBweFwiPjwvdGg+PHRoPlJlcXVlc3QgZXhwZWN0YXRpb25zPC90aD48dGg+QmFja2VuZCBkZWZpbml0aW9uczwvdGg+PC90cj5cbiAqICAgPHRyPlxuICogICAgIDx0aD5TeW50YXg8L3RoPlxuICogICAgIDx0ZD4uZXhwZWN0KC4uLikucmVzcG9uZCguLi4pPC90ZD5cbiAqICAgICA8dGQ+LndoZW4oLi4uKS5yZXNwb25kKC4uLik8L3RkPlxuICogICA8L3RyPlxuICogICA8dHI+XG4gKiAgICAgPHRoPlR5cGljYWwgdXNhZ2U8L3RoPlxuICogICAgIDx0ZD5zdHJpY3QgdW5pdCB0ZXN0czwvdGQ+XG4gKiAgICAgPHRkPmxvb3NlIChibGFjay1ib3gpIHVuaXQgdGVzdGluZzwvdGQ+XG4gKiAgIDwvdHI+XG4gKiAgIDx0cj5cbiAqICAgICA8dGg+RnVsZmlsbHMgbXVsdGlwbGUgcmVxdWVzdHM8L3RoPlxuICogICAgIDx0ZD5OTzwvdGQ+XG4gKiAgICAgPHRkPllFUzwvdGQ+XG4gKiAgIDwvdHI+XG4gKiAgIDx0cj5cbiAqICAgICA8dGg+T3JkZXIgb2YgcmVxdWVzdHMgbWF0dGVyczwvdGg+XG4gKiAgICAgPHRkPllFUzwvdGQ+XG4gKiAgICAgPHRkPk5PPC90ZD5cbiAqICAgPC90cj5cbiAqICAgPHRyPlxuICogICAgIDx0aD5SZXF1ZXN0IHJlcXVpcmVkPC90aD5cbiAqICAgICA8dGQ+WUVTPC90ZD5cbiAqICAgICA8dGQ+Tk88L3RkPlxuICogICA8L3RyPlxuICogICA8dHI+XG4gKiAgICAgPHRoPlJlc3BvbnNlIHJlcXVpcmVkPC90aD5cbiAqICAgICA8dGQ+b3B0aW9uYWwgKHNlZSBiZWxvdyk8L3RkPlxuICogICAgIDx0ZD5ZRVM8L3RkPlxuICogICA8L3RyPlxuICogPC90YWJsZT5cbiAqXG4gKiBJbiBjYXNlcyB3aGVyZSBib3RoIGJhY2tlbmQgZGVmaW5pdGlvbnMgYW5kIHJlcXVlc3QgZXhwZWN0YXRpb25zIGFyZSBzcGVjaWZpZWQgZHVyaW5nIHVuaXRcbiAqIHRlc3RpbmcsIHRoZSByZXF1ZXN0IGV4cGVjdGF0aW9ucyBhcmUgZXZhbHVhdGVkIGZpcnN0LlxuICpcbiAqIElmIGEgcmVxdWVzdCBleHBlY3RhdGlvbiBoYXMgbm8gcmVzcG9uc2Ugc3BlY2lmaWVkLCB0aGUgYWxnb3JpdGhtIHdpbGwgc2VhcmNoIHlvdXIgYmFja2VuZFxuICogZGVmaW5pdGlvbnMgZm9yIGFuIGFwcHJvcHJpYXRlIHJlc3BvbnNlLlxuICpcbiAqIElmIGEgcmVxdWVzdCBkaWRuJ3QgbWF0Y2ggYW55IGV4cGVjdGF0aW9uIG9yIGlmIHRoZSBleHBlY3RhdGlvbiBkb2Vzbid0IGhhdmUgdGhlIHJlc3BvbnNlXG4gKiBkZWZpbmVkLCB0aGUgYmFja2VuZCBkZWZpbml0aW9ucyBhcmUgZXZhbHVhdGVkIGluIHNlcXVlbnRpYWwgb3JkZXIgdG8gc2VlIGlmIGFueSBvZiB0aGVtIG1hdGNoXG4gKiB0aGUgcmVxdWVzdC4gVGhlIHJlc3BvbnNlIGZyb20gdGhlIGZpcnN0IG1hdGNoZWQgZGVmaW5pdGlvbiBpcyByZXR1cm5lZC5cbiAqXG4gKlxuICogIyMgRmx1c2hpbmcgSFRUUCByZXF1ZXN0c1xuICpcbiAqIFRoZSAkaHR0cEJhY2tlbmQgdXNlZCBpbiBwcm9kdWN0aW9uIGFsd2F5cyByZXNwb25kcyB0byByZXF1ZXN0cyBhc3luY2hyb25vdXNseS4gSWYgd2UgcHJlc2VydmVkXG4gKiB0aGlzIGJlaGF2aW9yIGluIHVuaXQgdGVzdGluZywgd2UnZCBoYXZlIHRvIGNyZWF0ZSBhc3luYyB1bml0IHRlc3RzLCB3aGljaCBhcmUgaGFyZCB0byB3cml0ZSxcbiAqIHRvIGZvbGxvdyBhbmQgdG8gbWFpbnRhaW4uIEJ1dCBuZWl0aGVyIGNhbiB0aGUgdGVzdGluZyBtb2NrIHJlc3BvbmQgc3luY2hyb25vdXNseTsgdGhhdCB3b3VsZFxuICogY2hhbmdlIHRoZSBleGVjdXRpb24gb2YgdGhlIGNvZGUgdW5kZXIgdGVzdC4gRm9yIHRoaXMgcmVhc29uLCB0aGUgbW9jayAkaHR0cEJhY2tlbmQgaGFzIGFcbiAqIGBmbHVzaCgpYCBtZXRob2QsIHdoaWNoIGFsbG93cyB0aGUgdGVzdCB0byBleHBsaWNpdGx5IGZsdXNoIHBlbmRpbmcgcmVxdWVzdHMuIFRoaXMgcHJlc2VydmVzXG4gKiB0aGUgYXN5bmMgYXBpIG9mIHRoZSBiYWNrZW5kLCB3aGlsZSBhbGxvd2luZyB0aGUgdGVzdCB0byBleGVjdXRlIHN5bmNocm9ub3VzbHkuXG4gKlxuICpcbiAqICMjIFVuaXQgdGVzdGluZyB3aXRoIG1vY2sgJGh0dHBCYWNrZW5kXG4gKiBUaGUgZm9sbG93aW5nIGNvZGUgc2hvd3MgaG93IHRvIHNldHVwIGFuZCB1c2UgdGhlIG1vY2sgYmFja2VuZCB3aGVuIHVuaXQgdGVzdGluZyBhIGNvbnRyb2xsZXIuXG4gKiBGaXJzdCB3ZSBjcmVhdGUgdGhlIGNvbnRyb2xsZXIgdW5kZXIgdGVzdDpcbiAqXG4gIGBgYGpzXG4gIC8vIFRoZSBtb2R1bGUgY29kZVxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnTXlBcHAnLCBbXSlcbiAgICAuY29udHJvbGxlcignTXlDb250cm9sbGVyJywgTXlDb250cm9sbGVyKTtcblxuICAvLyBUaGUgY29udHJvbGxlciBjb2RlXG4gIGZ1bmN0aW9uIE15Q29udHJvbGxlcigkc2NvcGUsICRodHRwKSB7XG4gICAgdmFyIGF1dGhUb2tlbjtcblxuICAgICRodHRwLmdldCgnL2F1dGgucHknKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBhdXRoVG9rZW4gPSByZXNwb25zZS5oZWFkZXJzKCdBLVRva2VuJyk7XG4gICAgICAkc2NvcGUudXNlciA9IHJlc3BvbnNlLmRhdGE7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAkc2NvcGUuc3RhdHVzID0gJ0ZhaWxlZC4uLic7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuc2F2ZU1lc3NhZ2UgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICB2YXIgaGVhZGVycyA9IHsgJ0F1dGhvcml6YXRpb24nOiBhdXRoVG9rZW4gfTtcbiAgICAgICRzY29wZS5zdGF0dXMgPSAnU2F2aW5nLi4uJztcblxuICAgICAgJGh0dHAucG9zdCgnL2FkZC1tc2cucHknLCBtZXNzYWdlLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSApLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgJHNjb3BlLnN0YXR1cyA9ICcnO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5zdGF0dXMgPSAnRmFpbGVkLi4uJztcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbiAgYGBgXG4gKlxuICogTm93IHdlIHNldHVwIHRoZSBtb2NrIGJhY2tlbmQgYW5kIGNyZWF0ZSB0aGUgdGVzdCBzcGVjczpcbiAqXG4gIGBgYGpzXG4gICAgLy8gdGVzdGluZyBjb250cm9sbGVyXG4gICAgZGVzY3JpYmUoJ015Q29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgIHZhciAkaHR0cEJhY2tlbmQsICRyb290U2NvcGUsIGNyZWF0ZUNvbnRyb2xsZXIsIGF1dGhSZXF1ZXN0SGFuZGxlcjtcblxuICAgICAgIC8vIFNldCB1cCB0aGUgbW9kdWxlXG4gICAgICAgYmVmb3JlRWFjaChtb2R1bGUoJ015QXBwJykpO1xuXG4gICAgICAgYmVmb3JlRWFjaChpbmplY3QoZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgICAgICAvLyBTZXQgdXAgdGhlIG1vY2sgaHR0cCBzZXJ2aWNlIHJlc3BvbnNlc1xuICAgICAgICAgJGh0dHBCYWNrZW5kID0gJGluamVjdG9yLmdldCgnJGh0dHBCYWNrZW5kJyk7XG4gICAgICAgICAvLyBiYWNrZW5kIGRlZmluaXRpb24gY29tbW9uIGZvciBhbGwgdGVzdHNcbiAgICAgICAgIGF1dGhSZXF1ZXN0SGFuZGxlciA9ICRodHRwQmFja2VuZC53aGVuKCdHRVQnLCAnL2F1dGgucHknKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVzcG9uZCh7dXNlcklkOiAndXNlclgnfSwgeydBLVRva2VuJzogJ3h4eCd9KTtcblxuICAgICAgICAgLy8gR2V0IGhvbGQgb2YgYSBzY29wZSAoaS5lLiB0aGUgcm9vdCBzY29wZSlcbiAgICAgICAgICRyb290U2NvcGUgPSAkaW5qZWN0b3IuZ2V0KCckcm9vdFNjb3BlJyk7XG4gICAgICAgICAvLyBUaGUgJGNvbnRyb2xsZXIgc2VydmljZSBpcyB1c2VkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgY29udHJvbGxlcnNcbiAgICAgICAgIHZhciAkY29udHJvbGxlciA9ICRpbmplY3Rvci5nZXQoJyRjb250cm9sbGVyJyk7XG5cbiAgICAgICAgIGNyZWF0ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgcmV0dXJuICRjb250cm9sbGVyKCdNeUNvbnRyb2xsZXInLCB7JyRzY29wZScgOiAkcm9vdFNjb3BlIH0pO1xuICAgICAgICAgfTtcbiAgICAgICB9KSk7XG5cblxuICAgICAgIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICRodHRwQmFja2VuZC52ZXJpZnlOb091dHN0YW5kaW5nRXhwZWN0YXRpb24oKTtcbiAgICAgICAgICRodHRwQmFja2VuZC52ZXJpZnlOb091dHN0YW5kaW5nUmVxdWVzdCgpO1xuICAgICAgIH0pO1xuXG5cbiAgICAgICBpdCgnc2hvdWxkIGZldGNoIGF1dGhlbnRpY2F0aW9uIHRva2VuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZXhwZWN0R0VUKCcvYXV0aC5weScpO1xuICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBjcmVhdGVDb250cm9sbGVyKCk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZmx1c2goKTtcbiAgICAgICB9KTtcblxuXG4gICAgICAgaXQoJ3Nob3VsZCBmYWlsIGF1dGhlbnRpY2F0aW9uJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgIC8vIE5vdGljZSBob3cgeW91IGNhbiBjaGFuZ2UgdGhlIHJlc3BvbnNlIGV2ZW4gYWZ0ZXIgaXQgd2FzIHNldFxuICAgICAgICAgYXV0aFJlcXVlc3RIYW5kbGVyLnJlc3BvbmQoNDAxLCAnJyk7XG5cbiAgICAgICAgICRodHRwQmFja2VuZC5leHBlY3RHRVQoJy9hdXRoLnB5Jyk7XG4gICAgICAgICB2YXIgY29udHJvbGxlciA9IGNyZWF0ZUNvbnRyb2xsZXIoKTtcbiAgICAgICAgICRodHRwQmFja2VuZC5mbHVzaCgpO1xuICAgICAgICAgZXhwZWN0KCRyb290U2NvcGUuc3RhdHVzKS50b0JlKCdGYWlsZWQuLi4nKTtcbiAgICAgICB9KTtcblxuXG4gICAgICAgaXQoJ3Nob3VsZCBzZW5kIG1zZyB0byBzZXJ2ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBjb250cm9sbGVyID0gY3JlYXRlQ29udHJvbGxlcigpO1xuICAgICAgICAgJGh0dHBCYWNrZW5kLmZsdXNoKCk7XG5cbiAgICAgICAgIC8vIG5vdyB5b3UgZG9u4oCZdCBjYXJlIGFib3V0IHRoZSBhdXRoZW50aWNhdGlvbiwgYnV0XG4gICAgICAgICAvLyB0aGUgY29udHJvbGxlciB3aWxsIHN0aWxsIHNlbmQgdGhlIHJlcXVlc3QgYW5kXG4gICAgICAgICAvLyAkaHR0cEJhY2tlbmQgd2lsbCByZXNwb25kIHdpdGhvdXQgeW91IGhhdmluZyB0b1xuICAgICAgICAgLy8gc3BlY2lmeSB0aGUgZXhwZWN0YXRpb24gYW5kIHJlc3BvbnNlIGZvciB0aGlzIHJlcXVlc3RcblxuICAgICAgICAgJGh0dHBCYWNrZW5kLmV4cGVjdFBPU1QoJy9hZGQtbXNnLnB5JywgJ21lc3NhZ2UgY29udGVudCcpLnJlc3BvbmQoMjAxLCAnJyk7XG4gICAgICAgICAkcm9vdFNjb3BlLnNhdmVNZXNzYWdlKCdtZXNzYWdlIGNvbnRlbnQnKTtcbiAgICAgICAgIGV4cGVjdCgkcm9vdFNjb3BlLnN0YXR1cykudG9CZSgnU2F2aW5nLi4uJyk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZmx1c2goKTtcbiAgICAgICAgIGV4cGVjdCgkcm9vdFNjb3BlLnN0YXR1cykudG9CZSgnJyk7XG4gICAgICAgfSk7XG5cblxuICAgICAgIGl0KCdzaG91bGQgc2VuZCBhdXRoIGhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBjcmVhdGVDb250cm9sbGVyKCk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZmx1c2goKTtcblxuICAgICAgICAgJGh0dHBCYWNrZW5kLmV4cGVjdFBPU1QoJy9hZGQtbXNnLnB5JywgdW5kZWZpbmVkLCBmdW5jdGlvbihoZWFkZXJzKSB7XG4gICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBoZWFkZXIgd2FzIHNlbnQsIGlmIGl0IHdhc24ndCB0aGUgZXhwZWN0YXRpb24gd29uJ3RcbiAgICAgICAgICAgLy8gbWF0Y2ggdGhlIHJlcXVlc3QgYW5kIHRoZSB0ZXN0IHdpbGwgZmFpbFxuICAgICAgICAgICByZXR1cm4gaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID09PSAneHh4JztcbiAgICAgICAgIH0pLnJlc3BvbmQoMjAxLCAnJyk7XG5cbiAgICAgICAgICRyb290U2NvcGUuc2F2ZU1lc3NhZ2UoJ3doYXRldmVyJyk7XG4gICAgICAgICAkaHR0cEJhY2tlbmQuZmx1c2goKTtcbiAgICAgICB9KTtcbiAgICB9KTtcbiAgYGBgXG4gKlxuICogIyMgRHluYW1pYyByZXNwb25zZXNcbiAqXG4gKiBZb3UgZGVmaW5lIGEgcmVzcG9uc2UgdG8gYSByZXF1ZXN0IGJ5IGNoYWluaW5nIGEgY2FsbCB0byBgcmVzcG9uZCgpYCBvbnRvIGEgZGVmaW5pdGlvbiBvciBleHBlY3RhdGlvbi5cbiAqIElmIHlvdSBwcm92aWRlIGEgKipjYWxsYmFjayoqIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIgdG8gYHJlc3BvbmQoY2FsbGJhY2spYCB0aGVuIHlvdSBjYW4gZHluYW1pY2FsbHkgZ2VuZXJhdGVcbiAqIGEgcmVzcG9uc2UgYmFzZWQgb24gdGhlIHByb3BlcnRpZXMgb2YgdGhlIHJlcXVlc3QuXG4gKlxuICogVGhlIGBjYWxsYmFja2AgZnVuY3Rpb24gc2hvdWxkIGJlIG9mIHRoZSBmb3JtIGBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKWAuXG4gKlxuICogIyMjIFF1ZXJ5IHBhcmFtZXRlcnNcbiAqXG4gKiBCeSBkZWZhdWx0LCBxdWVyeSBwYXJhbWV0ZXJzIG9uIHJlcXVlc3QgVVJMcyBhcmUgcGFyc2VkIGludG8gdGhlIGBwYXJhbXNgIG9iamVjdC4gU28gYSByZXF1ZXN0IFVSTFxuICogb2YgYC9saXN0P3E9c2VhcmNoc3RyJm9yZGVyYnk9LW5hbWVgIHdvdWxkIHNldCBgcGFyYW1zYCB0byBiZSBge3E6ICdzZWFyY2hzdHInLCBvcmRlcmJ5OiAnLW5hbWUnfWAuXG4gKlxuICogIyMjIFJlZ2V4IHBhcmFtZXRlciBtYXRjaGluZ1xuICpcbiAqIElmIGFuIGV4cGVjdGF0aW9uIG9yIGRlZmluaXRpb24gdXNlcyBhICoqcmVnZXgqKiB0byBtYXRjaCB0aGUgVVJMLCB5b3UgY2FuIHByb3ZpZGUgYW4gYXJyYXkgb2YgKiprZXlzKiogdmlhIGFcbiAqIGBwYXJhbXNgIGFyZ3VtZW50LiBUaGUgaW5kZXggb2YgZWFjaCAqKmtleSoqIGluIHRoZSBhcnJheSB3aWxsIG1hdGNoIHRoZSBpbmRleCBvZiBhICoqZ3JvdXAqKiBpbiB0aGVcbiAqICoqcmVnZXgqKi5cbiAqXG4gKiBUaGUgYHBhcmFtc2Agb2JqZWN0IGluIHRoZSAqKmNhbGxiYWNrKiogd2lsbCBub3cgaGF2ZSBwcm9wZXJ0aWVzIHdpdGggdGhlc2Uga2V5cywgd2hpY2ggaG9sZCB0aGUgdmFsdWUgb2YgdGhlXG4gKiBjb3JyZXNwb25kaW5nICoqZ3JvdXAqKiBpbiB0aGUgKipyZWdleCoqLlxuICpcbiAqIFRoaXMgYWxzbyBhcHBsaWVzIHRvIHRoZSBgd2hlbmAgYW5kIGBleHBlY3RgIHNob3J0Y3V0IG1ldGhvZHMuXG4gKlxuICpcbiAqIGBgYGpzXG4gKiAgICRodHRwQmFja2VuZC5leHBlY3QoJ0dFVCcsIC9cXC91c2VyXFwvKC4rKS8sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBbJ2lkJ10pXG4gKiAgICAgLnJlc3BvbmQoZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcykge1xuICogICAgICAgLy8gZm9yIHJlcXVlc3RlZCB1cmwgb2YgJy91c2VyLzEyMzQnIHBhcmFtcyBpcyB7aWQ6ICcxMjM0J31cbiAqICAgICB9KTtcbiAqXG4gKiAgICRodHRwQmFja2VuZC53aGVuUEFUQ0goL1xcL3VzZXJcXC8oLispXFwvYXJ0aWNsZVxcLyguKykvLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgWyd1c2VyJywgJ2FydGljbGUnXSlcbiAqICAgICAucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKSB7XG4gKiAgICAgICAvLyBmb3IgdXJsIG9mICcvdXNlci8xMjM0L2FydGljbGUvNTY3JyBwYXJhbXMgaXMge3VzZXI6ICcxMjM0JywgYXJ0aWNsZTogJzU2Nyd9XG4gKiAgICAgfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyBNYXRjaGluZyByb3V0ZSByZXF1ZXN0c1xuICpcbiAqIEZvciBleHRyYSBjb252ZW5pZW5jZSwgYHdoZW5Sb3V0ZWAgYW5kIGBleHBlY3RSb3V0ZWAgc2hvcnRjdXRzIGFyZSBhdmFpbGFibGUuIFRoZXNlIG1ldGhvZHMgb2ZmZXIgY29sb25cbiAqIGRlbGltaXRlZCBtYXRjaGluZyBvZiB0aGUgdXJsIHBhdGgsIGlnbm9yaW5nIHRoZSBxdWVyeSBzdHJpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMuIFRoaXMgYWxsb3dzIGRlY2xhcmF0aW9uc1xuICogc2ltaWxhciB0byBob3cgYXBwbGljYXRpb24gcm91dGVzIGFyZSBjb25maWd1cmVkIHdpdGggYCRyb3V0ZVByb3ZpZGVyYC4gQmVjYXVzZSB0aGVzZSBtZXRob2RzIGNvbnZlcnRcbiAqIHRoZSBkZWZpbml0aW9uIHVybCB0byByZWdleCwgZGVjbGFyYXRpb24gb3JkZXIgaXMgaW1wb3J0YW50LiBDb21iaW5lZCB3aXRoIHF1ZXJ5IHBhcmFtZXRlciBwYXJzaW5nLFxuICogdGhlIGZvbGxvd2luZyBpcyBwb3NzaWJsZTpcbiAqXG4gIGBgYGpzXG4gICAgJGh0dHBCYWNrZW5kLndoZW5Sb3V0ZSgnR0VUJywgJy91c2Vycy86aWQnKVxuICAgICAgLnJlc3BvbmQoZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gWzIwMCwgTW9ja1VzZXJMaXN0W051bWJlcihwYXJhbXMuaWQpXV07XG4gICAgICB9KTtcblxuICAgICRodHRwQmFja2VuZC53aGVuUm91dGUoJ0dFVCcsICcvdXNlcnMnKVxuICAgICAgLnJlc3BvbmQoZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHBhcmFtcykge1xuICAgICAgICB2YXIgdXNlckxpc3QgPSBhbmd1bGFyLmNvcHkoTW9ja1VzZXJMaXN0KSxcbiAgICAgICAgICBkZWZhdWx0U29ydCA9ICdsYXN0TmFtZScsXG4gICAgICAgICAgY291bnQsIHBhZ2VzLCBpc1ByZXZpb3VzLCBpc05leHQ7XG5cbiAgICAgICAgLy8gcGFnZWQgYXBpIHJlc3BvbnNlICcvdjEvdXNlcnM/cGFnZT0yJ1xuICAgICAgICBwYXJhbXMucGFnZSA9IE51bWJlcihwYXJhbXMucGFnZSkgfHwgMTtcblxuICAgICAgICAvLyBxdWVyeSBmb3IgbGFzdCBuYW1lcyAnL3YxL3VzZXJzP3E9QXJjaGVyJ1xuICAgICAgICBpZiAocGFyYW1zLnEpIHtcbiAgICAgICAgICB1c2VyTGlzdCA9ICRmaWx0ZXIoJ2ZpbHRlcicpKHtsYXN0TmFtZTogcGFyYW1zLnF9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhZ2VzID0gTWF0aC5jZWlsKHVzZXJMaXN0Lmxlbmd0aCAvIHBhZ2luZ0xlbmd0aCk7XG4gICAgICAgIGlzUHJldmlvdXMgPSBwYXJhbXMucGFnZSA+IDE7XG4gICAgICAgIGlzTmV4dCA9IHBhcmFtcy5wYWdlIDwgcGFnZXM7XG5cbiAgICAgICAgcmV0dXJuIFsyMDAsIHtcbiAgICAgICAgICBjb3VudDogICAgdXNlckxpc3QubGVuZ3RoLFxuICAgICAgICAgIHByZXZpb3VzOiBpc1ByZXZpb3VzLFxuICAgICAgICAgIG5leHQ6ICAgICBpc05leHQsXG4gICAgICAgICAgLy8gc29ydCBmaWVsZCAtPiAnL3YxL3VzZXJzP3NvcnRCeT1maXJzdE5hbWUnXG4gICAgICAgICAgcmVzdWx0czogICRmaWx0ZXIoJ29yZGVyQnknKSh1c2VyTGlzdCwgcGFyYW1zLnNvcnRCeSB8fCBkZWZhdWx0U29ydClcbiAgICAgICAgICAgICAgICAgICAgICAuc3BsaWNlKChwYXJhbXMucGFnZSAtIDEpICogcGFnaW5nTGVuZ3RoLCBwYWdpbmdMZW5ndGgpXG4gICAgICAgIH1dO1xuICAgICAgfSk7XG4gIGBgYFxuICovXG5hbmd1bGFyLm1vY2suJGh0dHBCYWNrZW5kRGVjb3JhdG9yID1cbiAgWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JywgJyRkZWxlZ2F0ZScsIGNyZWF0ZUh0dHBCYWNrZW5kTW9ja107XG5cbi8qKlxuICogR2VuZXJhbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciAkaHR0cEJhY2tlbmQgbW9jay5cbiAqIFJldHVybnMgaW5zdGFuY2UgZm9yIHVuaXQgdGVzdGluZyAod2hlbiBubyBhcmd1bWVudHMgc3BlY2lmaWVkKTpcbiAqICAgLSBwYXNzaW5nIHRocm91Z2ggaXMgZGlzYWJsZWRcbiAqICAgLSBhdXRvIGZsdXNoaW5nIGlzIGRpc2FibGVkXG4gKlxuICogUmV0dXJucyBpbnN0YW5jZSBmb3IgZTJlIHRlc3RpbmcgKHdoZW4gYCRkZWxlZ2F0ZWAgYW5kIGAkYnJvd3NlcmAgc3BlY2lmaWVkKTpcbiAqICAgLSBwYXNzaW5nIHRocm91Z2ggKGRlbGVnYXRpbmcgcmVxdWVzdCB0byByZWFsIGJhY2tlbmQpIGlzIGVuYWJsZWRcbiAqICAgLSBhdXRvIGZsdXNoaW5nIGlzIGVuYWJsZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdD19ICRkZWxlZ2F0ZSBSZWFsICRodHRwQmFja2VuZCBpbnN0YW5jZSAoYWxsb3cgcGFzc2luZyB0aHJvdWdoIGlmIHNwZWNpZmllZClcbiAqIEBwYXJhbSB7T2JqZWN0PX0gJGJyb3dzZXIgQXV0by1mbHVzaGluZyBlbmFibGVkIGlmIHNwZWNpZmllZFxuICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiAkaHR0cEJhY2tlbmQgbW9ja1xuICovXG5mdW5jdGlvbiBjcmVhdGVIdHRwQmFja2VuZE1vY2soJHJvb3RTY29wZSwgJHRpbWVvdXQsICRkZWxlZ2F0ZSwgJGJyb3dzZXIpIHtcbiAgdmFyIGRlZmluaXRpb25zID0gW10sXG4gICAgICBleHBlY3RhdGlvbnMgPSBbXSxcbiAgICAgIG1hdGNoTGF0ZXN0RGVmaW5pdGlvbiA9IGZhbHNlLFxuICAgICAgcmVzcG9uc2VzID0gW10sXG4gICAgICByZXNwb25zZXNQdXNoID0gYW5ndWxhci5iaW5kKHJlc3BvbnNlcywgcmVzcG9uc2VzLnB1c2gpLFxuICAgICAgY29weSA9IGFuZ3VsYXIuY29weSxcbiAgICAgIC8vIFdlIGNhY2hlIHRoZSBvcmlnaW5hbCBiYWNrZW5kIHNvIHRoYXQgaWYgYm90aCBuZ01vY2sgYW5kIG5nTW9ja0UyRSBvdmVycmlkZSB0aGVcbiAgICAgIC8vIHNlcnZpY2UgdGhlIG5nTW9ja0UyRSB2ZXJzaW9uIGNhbiBwYXNzIHRocm91Z2ggdG8gdGhlIHJlYWwgYmFja2VuZFxuICAgICAgb3JpZ2luYWxIdHRwQmFja2VuZCA9ICRkZWxlZ2F0ZS4kJG9yaWdpbmFsSHR0cEJhY2tlbmQgfHwgJGRlbGVnYXRlO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlKHN0YXR1cywgZGF0YSwgaGVhZGVycywgc3RhdHVzVGV4dCkge1xuICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oc3RhdHVzKSkgcmV0dXJuIHN0YXR1cztcblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBhbmd1bGFyLmlzTnVtYmVyKHN0YXR1cylcbiAgICAgICAgICA/IFtzdGF0dXMsIGRhdGEsIGhlYWRlcnMsIHN0YXR1c1RleHQsICdjb21wbGV0ZSddXG4gICAgICAgICAgOiBbMjAwLCBzdGF0dXMsIGRhdGEsIGhlYWRlcnMsICdjb21wbGV0ZSddO1xuICAgIH07XG4gIH1cblxuICAvLyBUT0RPKHZvanRhKTogY2hhbmdlIHBhcmFtcyB0bzogbWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGNhbGxiYWNrXG4gIGZ1bmN0aW9uICRodHRwQmFja2VuZChtZXRob2QsIHVybCwgZGF0YSwgY2FsbGJhY2ssIGhlYWRlcnMsIHRpbWVvdXQsIHdpdGhDcmVkZW50aWFscywgcmVzcG9uc2VUeXBlLCBldmVudEhhbmRsZXJzLCB1cGxvYWRFdmVudEhhbmRsZXJzKSB7XG5cbiAgICB2YXIgeGhyID0gbmV3IE1vY2tYaHIoKSxcbiAgICAgICAgZXhwZWN0YXRpb24gPSBleHBlY3RhdGlvbnNbMF0sXG4gICAgICAgIHdhc0V4cGVjdGVkID0gZmFsc2U7XG5cbiAgICB4aHIuJCRldmVudHMgPSBldmVudEhhbmRsZXJzO1xuICAgIHhoci51cGxvYWQuJCRldmVudHMgPSB1cGxvYWRFdmVudEhhbmRsZXJzO1xuXG4gICAgZnVuY3Rpb24gcHJldHR5UHJpbnQoZGF0YSkge1xuICAgICAgcmV0dXJuIChhbmd1bGFyLmlzU3RyaW5nKGRhdGEpIHx8IGFuZ3VsYXIuaXNGdW5jdGlvbihkYXRhKSB8fCBkYXRhIGluc3RhbmNlb2YgUmVnRXhwKVxuICAgICAgICAgID8gZGF0YVxuICAgICAgICAgIDogYW5ndWxhci50b0pzb24oZGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd3JhcFJlc3BvbnNlKHdyYXBwZWQpIHtcbiAgICAgIGlmICghJGJyb3dzZXIgJiYgdGltZW91dCkge1xuICAgICAgICBpZiAodGltZW91dC50aGVuKSB7XG4gICAgICAgICAgdGltZW91dC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaGFuZGxlUHJlbWF0dXJlRW5kKGFuZ3VsYXIuaXNEZWZpbmVkKHRpbWVvdXQuJCR0aW1lb3V0SWQpID8gJ3RpbWVvdXQnIDogJ2Fib3J0Jyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBoYW5kbGVQcmVtYXR1cmVFbmQoJ3RpbWVvdXQnKTtcbiAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBoYW5kbGVSZXNwb25zZS5kZXNjcmlwdGlvbiA9IG1ldGhvZCArICcgJyArIHVybDtcbiAgICAgIHJldHVybiBoYW5kbGVSZXNwb25zZTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoKSB7XG4gICAgICAgIHZhciByZXNwb25zZSA9IHdyYXBwZWQucmVzcG9uc2UobWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIHdyYXBwZWQucGFyYW1zKHVybCkpO1xuICAgICAgICB4aHIuJCRyZXNwSGVhZGVycyA9IHJlc3BvbnNlWzJdO1xuICAgICAgICBjYWxsYmFjayhjb3B5KHJlc3BvbnNlWzBdKSwgY29weShyZXNwb25zZVsxXSksIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAgY29weShyZXNwb25zZVszXSB8fCAnJyksIGNvcHkocmVzcG9uc2VbNF0pKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaGFuZGxlUHJlbWF0dXJlRW5kKHJlYXNvbikge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSByZXNwb25zZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGlmIChyZXNwb25zZXNbaV0gPT09IGhhbmRsZVJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXNwb25zZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgY2FsbGJhY2soLTEsIHVuZGVmaW5lZCwgJycsIHVuZGVmaW5lZCwgcmVhc29uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZhdGFsRXJyb3IobWVzc2FnZSkge1xuICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgLy8gSW4gYWRkaXRpb24gdG8gYmVpbmcgY29udmVydGVkIHRvIGEgcmVqZWN0aW9uLCB0aGVzZSBlcnJvcnMgYWxzbyBuZWVkIHRvIGJlIHBhc3NlZCB0b1xuICAgICAgLy8gdGhlICRleGNlcHRpb25IYW5kbGVyIGFuZCBiZSByZXRocm93biAoc28gdGhhdCB0aGUgdGVzdCBmYWlscykuXG4gICAgICBlcnJvci4kJHBhc3NUb0V4Y2VwdGlvbkhhbmRsZXIgPSB0cnVlO1xuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cblxuICAgIGlmIChleHBlY3RhdGlvbiAmJiBleHBlY3RhdGlvbi5tYXRjaChtZXRob2QsIHVybCkpIHtcbiAgICAgIGlmICghZXhwZWN0YXRpb24ubWF0Y2hEYXRhKGRhdGEpKSB7XG4gICAgICAgIHRocm93IGNyZWF0ZUZhdGFsRXJyb3IoJ0V4cGVjdGVkICcgKyBleHBlY3RhdGlvbiArICcgd2l0aCBkaWZmZXJlbnQgZGF0YVxcbicgK1xuICAgICAgICAgICdFWFBFQ1RFRDogJyArIHByZXR0eVByaW50KGV4cGVjdGF0aW9uLmRhdGEpICsgJ1xcbicgK1xuICAgICAgICAgICdHT1Q6ICAgICAgJyArIGRhdGEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWV4cGVjdGF0aW9uLm1hdGNoSGVhZGVycyhoZWFkZXJzKSkge1xuICAgICAgICB0aHJvdyBjcmVhdGVGYXRhbEVycm9yKCdFeHBlY3RlZCAnICsgZXhwZWN0YXRpb24gKyAnIHdpdGggZGlmZmVyZW50IGhlYWRlcnNcXG4nICtcbiAgICAgICAgICAnRVhQRUNURUQ6ICcgKyBwcmV0dHlQcmludChleHBlY3RhdGlvbi5oZWFkZXJzKSArICdcXG4nICtcbiAgICAgICAgICAnR09UOiAgICAgICcgKyBwcmV0dHlQcmludChoZWFkZXJzKSk7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdGF0aW9ucy5zaGlmdCgpO1xuXG4gICAgICBpZiAoZXhwZWN0YXRpb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVzcG9uc2VzLnB1c2god3JhcFJlc3BvbnNlKGV4cGVjdGF0aW9uKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdhc0V4cGVjdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgaSA9IG1hdGNoTGF0ZXN0RGVmaW5pdGlvbiA/IGRlZmluaXRpb25zLmxlbmd0aCA6IC0xLCBkZWZpbml0aW9uO1xuXG4gICAgd2hpbGUgKChkZWZpbml0aW9uID0gZGVmaW5pdGlvbnNbbWF0Y2hMYXRlc3REZWZpbml0aW9uID8gLS1pIDogKytpXSkpIHtcbiAgICAgIGlmIChkZWZpbml0aW9uLm1hdGNoKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzIHx8IHt9KSkge1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi5yZXNwb25zZSkge1xuICAgICAgICAgIC8vIGlmICRicm93c2VyIHNwZWNpZmllZCwgd2UgZG8gYXV0byBmbHVzaCBhbGwgcmVxdWVzdHNcbiAgICAgICAgICAoJGJyb3dzZXIgPyAkYnJvd3Nlci5kZWZlciA6IHJlc3BvbnNlc1B1c2gpKHdyYXBSZXNwb25zZShkZWZpbml0aW9uKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmaW5pdGlvbi5wYXNzVGhyb3VnaCkge1xuICAgICAgICAgIG9yaWdpbmFsSHR0cEJhY2tlbmQobWV0aG9kLCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBoZWFkZXJzLCB0aW1lb3V0LCB3aXRoQ3JlZGVudGlhbHMsIHJlc3BvbnNlVHlwZSwgZXZlbnRIYW5kbGVycywgdXBsb2FkRXZlbnRIYW5kbGVycyk7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBjcmVhdGVGYXRhbEVycm9yKCdObyByZXNwb25zZSBkZWZpbmVkICEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3YXNFeHBlY3RlZCkge1xuICAgICAgdGhyb3cgY3JlYXRlRmF0YWxFcnJvcignTm8gcmVzcG9uc2UgZGVmaW5lZCAhJyk7XG4gICAgfVxuXG4gICAgdGhyb3cgY3JlYXRlRmF0YWxFcnJvcignVW5leHBlY3RlZCByZXF1ZXN0OiAnICsgbWV0aG9kICsgJyAnICsgdXJsICsgJ1xcbicgK1xuICAgICAgKGV4cGVjdGF0aW9uID8gJ0V4cGVjdGVkICcgKyBleHBlY3RhdGlvbiA6ICdObyBtb3JlIHJlcXVlc3QgZXhwZWN0ZWQnKSk7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZykpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzXG4gICAqICAgZGF0YSBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGF0YSBpcyBhcyBleHBlY3RlZC5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBodHRwIGhlYWRlclxuICAgKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiAgIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogICBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqXG4gICAqICAtIHJlc3BvbmQg4oCTXG4gICAqICAgICAgYGBganNcbiAgICogICAgICB7ZnVuY3Rpb24oW3N0YXR1cyxdIGRhdGFbLCBoZWFkZXJzLCBzdGF0dXNUZXh0XSlcbiAgICogICAgICB8IGZ1bmN0aW9uKGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBwYXJhbXMpfVxuICAgKiAgICAgIGBgYFxuICAgKiAgICDigJMgVGhlIHJlc3BvbmQgbWV0aG9kIHRha2VzIGEgc2V0IG9mIHN0YXRpYyBkYXRhIHRvIGJlIHJldHVybmVkIG9yIGEgZnVuY3Rpb24gdGhhdCBjYW5cbiAgICogICAgcmV0dXJuIGFuIGFycmF5IGNvbnRhaW5pbmcgcmVzcG9uc2Ugc3RhdHVzIChudW1iZXIpLCByZXNwb25zZSBkYXRhIChBcnJheXxPYmplY3R8c3RyaW5nKSxcbiAgICogICAgcmVzcG9uc2UgaGVhZGVycyAoT2JqZWN0KSwgSFRUUCBzdGF0dXMgdGV4dCAoc3RyaW5nKSwgYW5kIFhNTEh0dHBSZXF1ZXN0IHN0YXR1cyAoc3RyaW5nOlxuICAgKiAgICBgY29tcGxldGVgLCBgZXJyb3JgLCBgdGltZW91dGAgb3IgYGFib3J0YCkuIFRoZSByZXNwb25kIG1ldGhvZCByZXR1cm5zIHRoZSBgcmVxdWVzdEhhbmRsZXJgXG4gICAqICAgIG9iamVjdCBmb3IgcG9zc2libGUgb3ZlcnJpZGVzLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLndoZW4gPSBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywga2V5cykge1xuXG4gICAgYXNzZXJ0QXJnRGVmaW5lZChhcmd1bWVudHMsIDEsICd1cmwnKTtcblxuICAgIHZhciBkZWZpbml0aW9uID0gbmV3IE1vY2tIdHRwRXhwZWN0YXRpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMsIGtleXMpLFxuICAgICAgICBjaGFpbiA9IHtcbiAgICAgICAgICByZXNwb25kOiBmdW5jdGlvbihzdGF0dXMsIGRhdGEsIGhlYWRlcnMsIHN0YXR1c1RleHQpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ucGFzc1Rocm91Z2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBkZWZpbml0aW9uLnJlc3BvbnNlID0gY3JlYXRlUmVzcG9uc2Uoc3RhdHVzLCBkYXRhLCBoZWFkZXJzLCBzdGF0dXNUZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBjaGFpbjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICBpZiAoJGJyb3dzZXIpIHtcbiAgICAgIGNoYWluLnBhc3NUaHJvdWdoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRlZmluaXRpb24ucmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIGRlZmluaXRpb24ucGFzc1Rocm91Z2ggPSB0cnVlO1xuICAgICAgICByZXR1cm4gY2hhaW47XG4gICAgICB9O1xuICAgIH1cblxuICAgIGRlZmluaXRpb25zLnB1c2goZGVmaW5pdGlvbik7XG4gICAgcmV0dXJuIGNoYWluO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICAkaHR0cEJhY2tlbmQjbWF0Y2hMYXRlc3REZWZpbml0aW9uRW5hYmxlZFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHdoaWNoIG1vY2tlZCByZXNwb25zZXMgYCRodHRwQmFja2VuZGAgcmV0dXJucywgd2hlbiBkZWZpbmluZ1xuICAgKiB0aGVtIHdpdGgge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQjd2hlbiAkaHR0cEJhY2tlbmQud2hlbigpfSAoYW5kIHNob3J0Y3V0IG1ldGhvZHMpLlxuICAgKiBCeSBkZWZhdWx0LCBgJGh0dHBCYWNrZW5kYCByZXR1cm5zIHRoZSBmaXJzdCBkZWZpbml0aW9uIHRoYXQgbWF0Y2hlcy4gV2hlbiBzZXR0aW5nXG4gICAqIGAkaHR0cC5tYXRjaExhdGVzdERlZmluaXRpb25FbmFibGVkKHRydWUpYCwgaXQgd2lsbCB1c2UgdGhlIGxhc3QgcmVzcG9uc2UgdGhhdCBtYXRjaGVzLCBpLmUuIHRoZVxuICAgKiBvbmUgdGhhdCB3YXMgYWRkZWQgbGFzdC5cbiAgICpcbiAgICogYGBganNcbiAgICogaGIud2hlbignR0VUJywgJy91cmwxJykucmVzcG9uZCgyMDAsICdjb250ZW50Jywge30pO1xuICAgKiBoYi53aGVuKCdHRVQnLCAnL3VybDEnKS5yZXNwb25kKDIwMSwgJ2Fub3RoZXInLCB7fSk7XG4gICAqIGhiKCdHRVQnLCAnL3VybDEnKTsgLy8gcmVjZWl2ZXMgXCJjb250ZW50XCJcbiAgICpcbiAgICogJGh0dHAubWF0Y2hMYXRlc3REZWZpbml0aW9uRW5hYmxlZCh0cnVlKVxuICAgKiBoYignR0VUJywgJy91cmwxJyk7IC8vIHJlY2VpdmVzIFwiYW5vdGhlclwiXG4gICAqXG4gICAqIGhiLndoZW4oJ0dFVCcsICcvdXJsMScpLnJlc3BvbmQoMjAxLCAnb25lbW9yZScsIHt9KTtcbiAgICogaGIoJ0dFVCcsICcvdXJsMScpOyAvLyByZWNlaXZlcyBcIm9uZW1vcmVcIlxuICAgKiBgYGBcbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgaWYgYSB5b3UgaGF2ZSBhIGRlZmF1bHQgcmVzcG9uc2UgdGhhdCBpcyBvdmVycmlkZW4gaW5zaWRlIHNwZWNpZmljIHRlc3RzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZGlmZmVyZW50IGZyb20gY29uZmlnIG1ldGhvZHMgb24gcHJvdmlkZXJzLCBgbWF0Y2hMYXRlc3REZWZpbml0aW9uRW5hYmxlZCgpYCBjYW4gYmUgY2hhbmdlZFxuICAgKiBldmVuIHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGFscmVhZHkgcnVubmluZy5cbiAgICpcbiAgICogQHBhcmFtICB7Qm9vbGVhbj19IHZhbHVlIHZhbHVlIHRvIHNldCwgZWl0aGVyIGB0cnVlYCBvciBgZmFsc2VgLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBvbWl0dGVkLCBpdCB3aWxsIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICogQHJldHVybiB7JGh0dHBCYWNrZW5kfEJvb2xlYW59IHNlbGYgd2hlbiB1c2VkIGFzIGEgc2V0dGVyLCBhbmQgdGhlIGN1cnJlbnQgdmFsdWUgd2hlbiB1c2VkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcyBhIGdldHRlclxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLm1hdGNoTGF0ZXN0RGVmaW5pdGlvbkVuYWJsZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIG1hdGNoTGF0ZXN0RGVmaW5pdGlvbiA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtYXRjaExhdGVzdERlZmluaXRpb247XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuR0VUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgR0VUIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgaHR0cCBoZWFkZXJcbiAgICogICBvYmplY3QgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGVhZGVycyBtYXRjaCB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuSEVBRFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIEhFQUQgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBodHRwIGhlYWRlclxuICAgKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5ERUxFVEVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBERUxFVEUgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBodHRwIGhlYWRlclxuICAgKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QT1NUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgUE9TVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZykpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzXG4gICAqICAgZGF0YSBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGF0YSBpcyBhcyBleHBlY3RlZC5cbiAgICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBodHRwIGhlYWRlclxuICAgKiAgIG9iamVjdCBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBoZWFkZXJzIG1hdGNoIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QVVRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBQVVQgcmVxdWVzdHMuICBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKSk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXNcbiAgICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gICAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkpTT05QXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgSlNPTlAgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cbiAgY3JlYXRlU2hvcnRNZXRob2RzKCd3aGVuJyk7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5Sb3V0ZVxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gdGhhdCBjb21wYXJlcyBvbmx5IHdpdGggdGhlIHJlcXVlc3RlZCByb3V0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBIVFRQIHVybCBzdHJpbmcgdGhhdCBzdXBwb3J0cyBjb2xvbiBwYXJhbSBtYXRjaGluZy5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKiBTZWUge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQjd2hlbiBgd2hlbmB9IGZvciBtb3JlIGluZm8uXG4gICAqL1xuICAkaHR0cEJhY2tlbmQud2hlblJvdXRlID0gZnVuY3Rpb24obWV0aG9kLCB1cmwpIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VSb3V0ZVVybCh1cmwpO1xuICAgIHJldHVybiAkaHR0cEJhY2tlbmQud2hlbihtZXRob2QsIHBhcnNlZC5yZWdleHAsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwYXJzZWQua2V5cyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyByZXF1ZXN0IGV4cGVjdGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIEhUVFAgbWV0aG9kLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfE9iamVjdCk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXRcbiAgICogIHJlY2VpdmVzIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQsIG9yIE9iamVjdCBpZiByZXF1ZXN0IGJvZHlcbiAgICogIGlzIGluIEpTT04gZm9ybWF0LlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gICAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZXhwZWN0YXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKlxuICAgKiAgLSByZXNwb25kIOKAk1xuICAgKiAgICAgIGBgYGpzXG4gICAqICAgICAge2Z1bmN0aW9uKFtzdGF0dXMsXSBkYXRhWywgaGVhZGVycywgc3RhdHVzVGV4dF0pXG4gICAqICAgICAgfCBmdW5jdGlvbihmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKX1cbiAgICogICAgICBgYGBcbiAgICogICAg4oCTIFRoZSByZXNwb25kIG1ldGhvZCB0YWtlcyBhIHNldCBvZiBzdGF0aWMgZGF0YSB0byBiZSByZXR1cm5lZCBvciBhIGZ1bmN0aW9uIHRoYXQgY2FuXG4gICAqICAgIHJldHVybiBhbiBhcnJheSBjb250YWluaW5nIHJlc3BvbnNlIHN0YXR1cyAobnVtYmVyKSwgcmVzcG9uc2UgZGF0YSAoQXJyYXl8T2JqZWN0fHN0cmluZyksXG4gICAqICAgIHJlc3BvbnNlIGhlYWRlcnMgKE9iamVjdCksIEhUVFAgc3RhdHVzIHRleHQgKHN0cmluZyksIGFuZCBYTUxIdHRwUmVxdWVzdCBzdGF0dXMgKHN0cmluZzpcbiAgICogICAgYGNvbXBsZXRlYCwgYGVycm9yYCwgYHRpbWVvdXRgIG9yIGBhYm9ydGApLiBUaGUgcmVzcG9uZCBtZXRob2QgcmV0dXJucyB0aGUgYHJlcXVlc3RIYW5kbGVyYFxuICAgKiAgICBvYmplY3QgZm9yIHBvc3NpYmxlIG92ZXJyaWRlcy5cbiAgICovXG4gICRodHRwQmFja2VuZC5leHBlY3QgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywga2V5cykge1xuXG4gICAgYXNzZXJ0QXJnRGVmaW5lZChhcmd1bWVudHMsIDEsICd1cmwnKTtcblxuICAgIHZhciBleHBlY3RhdGlvbiA9IG5ldyBNb2NrSHR0cEV4cGVjdGF0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBoZWFkZXJzLCBrZXlzKSxcbiAgICAgICAgY2hhaW4gPSB7XG4gICAgICAgICAgcmVzcG9uZDogZnVuY3Rpb24oc3RhdHVzLCBkYXRhLCBoZWFkZXJzLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgICAgICBleHBlY3RhdGlvbi5yZXNwb25zZSA9IGNyZWF0ZVJlc3BvbnNlKHN0YXR1cywgZGF0YSwgaGVhZGVycywgc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gY2hhaW47XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgZXhwZWN0YXRpb25zLnB1c2goZXhwZWN0YXRpb24pO1xuICAgIHJldHVybiBjaGFpbjtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0R0VUXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIEdFVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGV4cGVjdGF0aW9uLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gICAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZXhwZWN0YXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gU2VlICNleHBlY3QgZm9yIG1vcmUgaW5mby5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdEhFQURcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiBmb3IgSEVBRCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGV4cGVjdGF0aW9uLlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gICAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZXhwZWN0YXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiAgIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogICBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCNleHBlY3RERUxFVEVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiBmb3IgREVMRVRFIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gICAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZXhwZWN0YXRpb24uXG4gICAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgaHR0cCBoZWFkZXJcbiAgICogICBvYmplY3QgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGVhZGVycyBtYXRjaCB0aGUgY3VycmVudCBleHBlY3RhdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdFBPU1RcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiBmb3IgUE9TVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGV4cGVjdGF0aW9uLlxuICAgKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl8T2JqZWN0KT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkgb3IgZnVuY3Rpb24gdGhhdFxuICAgKiAgcmVjZWl2ZXMgZGF0YSBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGF0YSBpcyBhcyBleHBlY3RlZCwgb3IgT2JqZWN0IGlmIHJlcXVlc3QgYm9keVxuICAgKiAgaXMgaW4gSlNPTiBmb3JtYXQuXG4gICAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgaHR0cCBoZWFkZXJcbiAgICogICBvYmplY3QgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGVhZGVycyBtYXRjaCB0aGUgY3VycmVudCBleHBlY3RhdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdFBVVFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyByZXF1ZXN0IGV4cGVjdGF0aW9uIGZvciBQVVQgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGBleHBlY3QoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAgICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBleHBlY3RhdGlvbi5cbiAgICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpfE9iamVjdCk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXRcbiAgICogIHJlY2VpdmVzIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQsIG9yIE9iamVjdCBpZiByZXF1ZXN0IGJvZHlcbiAgICogIGlzIGluIEpTT04gZm9ybWF0LlxuICAgKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycyBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGh0dHAgaGVhZGVyXG4gICAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZXhwZWN0YXRpb24uXG4gICAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgYWJvdmUuXG4gICAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgbWV0aG9kIHRoYXQgY29udHJvbHMgaG93IGEgbWF0Y2hlZFxuICAgKiAgIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZSBgcmVzcG9uZGAgYWdhaW4gaW5cbiAgICogICBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRodHRwQmFja2VuZCNleHBlY3RQQVRDSFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIG5ldyByZXF1ZXN0IGV4cGVjdGF0aW9uIGZvciBQQVRDSCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYGV4cGVjdCgpYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGV4cGVjdGF0aW9uLlxuICAgKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyl8T2JqZWN0KT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkgb3IgZnVuY3Rpb24gdGhhdFxuICAgKiAgcmVjZWl2ZXMgZGF0YSBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGF0YSBpcyBhcyBleHBlY3RlZCwgb3IgT2JqZWN0IGlmIHJlcXVlc3QgYm9keVxuICAgKiAgaXMgaW4gSlNPTiBmb3JtYXQuXG4gICAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgaHR0cCBoZWFkZXJcbiAgICogICBvYmplY3QgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGVhZGVycyBtYXRjaCB0aGUgY3VycmVudCBleHBlY3RhdGlvbi5cbiAgICogQHBhcmFtIHsoQXJyYXkpPX0ga2V5cyBBcnJheSBvZiBrZXlzIHRvIGFzc2lnbiB0byByZWdleCBtYXRjaGVzIGluIHJlcXVlc3QgdXJsIGRlc2NyaWJlZCBhYm92ZS5cbiAgICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBtZXRob2QgdGhhdCBjb250cm9scyBob3cgYSBtYXRjaGVkXG4gICAqICAgcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiAgIG9yZGVyIHRvIGNoYW5nZSBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2V4cGVjdEpTT05QXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDcmVhdGVzIGEgbmV3IHJlcXVlc3QgZXhwZWN0YXRpb24gZm9yIEpTT05QIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgZXhwZWN0KClgLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGFuIHVybFxuICAgKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGV4cGVjdGF0aW9uLlxuICAgKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIGFib3ZlLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogICByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2UgYHJlc3BvbmRgIGFnYWluIGluXG4gICAqICAgb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICAgKi9cbiAgY3JlYXRlU2hvcnRNZXRob2RzKCdleHBlY3QnKTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjZXhwZWN0Um91dGVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBuZXcgcmVxdWVzdCBleHBlY3RhdGlvbiB0aGF0IGNvbXBhcmVzIG9ubHkgd2l0aCB0aGUgcmVxdWVzdGVkIHJvdXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIEhUVFAgbWV0aG9kLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIEhUVFAgdXJsIHN0cmluZyB0aGF0IHN1cHBvcnRzIGNvbG9uIHBhcmFtIG1hdGNoaW5nLlxuICAgKiBAcmV0dXJucyB7cmVxdWVzdEhhbmRsZXJ9IFJldHVybnMgYW4gb2JqZWN0IHdpdGggYHJlc3BvbmRgIG1ldGhvZCB0aGF0IGNvbnRyb2xzIGhvdyBhIG1hdGNoZWRcbiAgICogcmVxdWVzdCBpcyBoYW5kbGVkLiBZb3UgY2FuIHNhdmUgdGhpcyBvYmplY3QgZm9yIGxhdGVyIHVzZSBhbmQgaW52b2tlIGByZXNwb25kYCBhZ2FpbiBpblxuICAgKiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gICAqIFNlZSB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCNleHBlY3QgYGV4cGVjdGB9IGZvciBtb3JlIGluZm8uXG4gICAqL1xuICAkaHR0cEJhY2tlbmQuZXhwZWN0Um91dGUgPSBmdW5jdGlvbihtZXRob2QsIHVybCkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZVJvdXRlVXJsKHVybCk7XG4gICAgcmV0dXJuICRodHRwQmFja2VuZC5leHBlY3QobWV0aG9kLCBwYXJzZWQucmVnZXhwLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcGFyc2VkLmtleXMpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI2ZsdXNoXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBGbHVzaGVzIHBlbmRpbmcgcmVxdWVzdHMgdXNpbmcgdGhlIHRyYWluZWQgcmVzcG9uc2VzLiBSZXF1ZXN0cyBhcmUgZmx1c2hlZCBpbiB0aGUgb3JkZXIgdGhleVxuICAgKiB3ZXJlIG1hZGUsIGJ1dCBpdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHNraXAgb25lIG9yIG1vcmUgcmVxdWVzdHMgKGZvciBleGFtcGxlIHRvIGhhdmUgdGhlbVxuICAgKiBmbHVzaGVkIGxhdGVyKS4gVGhpcyBpcyB1c2VmdWwgZm9yIHNpbXVsYXRpbmcgc2NlbmFyaW9zIHdoZXJlIHJlc3BvbnNlcyBhcnJpdmUgZnJvbSB0aGUgc2VydmVyXG4gICAqIGluIGFueSBvcmRlci5cbiAgICpcbiAgICogSWYgdGhlcmUgYXJlIG5vIHBlbmRpbmcgcmVxdWVzdHMgdG8gZmx1c2ggd2hlbiB0aGUgbWV0aG9kIGlzIGNhbGxlZCwgYW4gZXhjZXB0aW9uIGlzIHRocm93biAoYXNcbiAgICogdGhpcyBpcyB0eXBpY2FsbHkgYSBzaWduIG9mIHByb2dyYW1taW5nIGVycm9yKS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXI9fSBjb3VudCAtIE51bWJlciBvZiByZXNwb25zZXMgdG8gZmx1c2guIElmIHVuZGVmaW5lZC9udWxsLCBhbGwgcGVuZGluZyByZXF1ZXN0c1xuICAgKiAgICAgKHN0YXJ0aW5nIGFmdGVyIGBza2lwYCkgd2lsbCBiZSBmbHVzaGVkLlxuICAgKiBAcGFyYW0ge251bWJlcj19IFtza2lwPTBdIC0gTnVtYmVyIG9mIHBlbmRpbmcgcmVxdWVzdHMgdG8gc2tpcC4gRm9yIGV4YW1wbGUsIGEgdmFsdWUgb2YgYDVgXG4gICAqICAgICB3b3VsZCBza2lwIHRoZSBmaXJzdCA1IHBlbmRpbmcgcmVxdWVzdHMgYW5kIHN0YXJ0IGZsdXNoaW5nIGZyb20gdGhlIDZ0aCBvbndhcmRzLlxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLmZsdXNoID0gZnVuY3Rpb24oY291bnQsIHNraXAsIGRpZ2VzdCkge1xuICAgIGlmIChkaWdlc3QgIT09IGZhbHNlKSAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcblxuICAgIHNraXAgPSBza2lwIHx8IDA7XG4gICAgaWYgKHNraXAgPj0gcmVzcG9uc2VzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdObyBwZW5kaW5nIHJlcXVlc3QgdG8gZmx1c2ggIScpO1xuXG4gICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGNvdW50KSAmJiBjb3VudCAhPT0gbnVsbCkge1xuICAgICAgd2hpbGUgKGNvdW50LS0pIHtcbiAgICAgICAgdmFyIHBhcnQgPSByZXNwb25zZXMuc3BsaWNlKHNraXAsIDEpO1xuICAgICAgICBpZiAoIXBhcnQubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ05vIG1vcmUgcGVuZGluZyByZXF1ZXN0IHRvIGZsdXNoICEnKTtcbiAgICAgICAgcGFydFswXSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAocmVzcG9uc2VzLmxlbmd0aCA+IHNraXApIHtcbiAgICAgICAgcmVzcG9uc2VzLnNwbGljZShza2lwLCAxKVswXSgpO1xuICAgICAgfVxuICAgIH1cbiAgICAkaHR0cEJhY2tlbmQudmVyaWZ5Tm9PdXRzdGFuZGluZ0V4cGVjdGF0aW9uKGRpZ2VzdCk7XG4gIH07XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjdmVyaWZ5Tm9PdXRzdGFuZGluZ0V4cGVjdGF0aW9uXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBWZXJpZmllcyB0aGF0IGFsbCBvZiB0aGUgcmVxdWVzdHMgZGVmaW5lZCB2aWEgdGhlIGBleHBlY3RgIGFwaSB3ZXJlIG1hZGUuIElmIGFueSBvZiB0aGVcbiAgICogcmVxdWVzdHMgd2VyZSBub3QgbWFkZSwgdmVyaWZ5Tm9PdXRzdGFuZGluZ0V4cGVjdGF0aW9uIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAqXG4gICAqIFR5cGljYWxseSwgeW91IHdvdWxkIGNhbGwgdGhpcyBtZXRob2QgZm9sbG93aW5nIGVhY2ggdGVzdCBjYXNlIHRoYXQgYXNzZXJ0cyByZXF1ZXN0cyB1c2luZyBhblxuICAgKiBcImFmdGVyRWFjaFwiIGNsYXVzZS5cbiAgICpcbiAgICogYGBganNcbiAgICogICBhZnRlckVhY2goJGh0dHBCYWNrZW5kLnZlcmlmeU5vT3V0c3RhbmRpbmdFeHBlY3RhdGlvbik7XG4gICAqIGBgYFxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLnZlcmlmeU5vT3V0c3RhbmRpbmdFeHBlY3RhdGlvbiA9IGZ1bmN0aW9uKGRpZ2VzdCkge1xuICAgIGlmIChkaWdlc3QgIT09IGZhbHNlKSAkcm9vdFNjb3BlLiRkaWdlc3QoKTtcbiAgICBpZiAoZXhwZWN0YXRpb25zLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnNhdGlzZmllZCByZXF1ZXN0czogJyArIGV4cGVjdGF0aW9ucy5qb2luKCcsICcpKTtcbiAgICB9XG4gIH07XG5cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaHR0cEJhY2tlbmQjdmVyaWZ5Tm9PdXRzdGFuZGluZ1JlcXVlc3RcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFZlcmlmaWVzIHRoYXQgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHJlcXVlc3RzIHRoYXQgbmVlZCB0byBiZSBmbHVzaGVkLlxuICAgKlxuICAgKiBUeXBpY2FsbHksIHlvdSB3b3VsZCBjYWxsIHRoaXMgbWV0aG9kIGZvbGxvd2luZyBlYWNoIHRlc3QgY2FzZSB0aGF0IGFzc2VydHMgcmVxdWVzdHMgdXNpbmcgYW5cbiAgICogXCJhZnRlckVhY2hcIiBjbGF1c2UuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqICAgYWZ0ZXJFYWNoKCRodHRwQmFja2VuZC52ZXJpZnlOb091dHN0YW5kaW5nUmVxdWVzdCk7XG4gICAqIGBgYFxuICAgKi9cbiAgJGh0dHBCYWNrZW5kLnZlcmlmeU5vT3V0c3RhbmRpbmdSZXF1ZXN0ID0gZnVuY3Rpb24oZGlnZXN0KSB7XG4gICAgaWYgKGRpZ2VzdCAhPT0gZmFsc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgIGlmIChyZXNwb25zZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgdW5mbHVzaGVkRGVzY3JpcHRpb25zID0gcmVzcG9uc2VzLm1hcChmdW5jdGlvbihyZXMpIHsgcmV0dXJuIHJlcy5kZXNjcmlwdGlvbjsgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZmx1c2hlZCByZXF1ZXN0czogJyArIHJlc3BvbnNlcy5sZW5ndGggKyAnXFxuICAnICtcbiAgICAgICAgICAgICAgICAgICAgICB1bmZsdXNoZWREZXNjcmlwdGlvbnMuam9pbignXFxuICAnKSk7XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBCYWNrZW5kI3Jlc2V0RXhwZWN0YXRpb25zXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXNldHMgYWxsIHJlcXVlc3QgZXhwZWN0YXRpb25zLCBidXQgcHJlc2VydmVzIGFsbCBiYWNrZW5kIGRlZmluaXRpb25zLiBUeXBpY2FsbHksIHlvdSB3b3VsZFxuICAgKiBjYWxsIHJlc2V0RXhwZWN0YXRpb25zIGR1cmluZyBhIG11bHRpcGxlLXBoYXNlIHRlc3Qgd2hlbiB5b3Ugd2FudCB0byByZXVzZSB0aGUgc2FtZSBpbnN0YW5jZSBvZlxuICAgKiAkaHR0cEJhY2tlbmQgbW9jay5cbiAgICovXG4gICRodHRwQmFja2VuZC5yZXNldEV4cGVjdGF0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICAgIGV4cGVjdGF0aW9ucy5sZW5ndGggPSAwO1xuICAgIHJlc3BvbnNlcy5sZW5ndGggPSAwO1xuICB9O1xuXG4gICRodHRwQmFja2VuZC4kJG9yaWdpbmFsSHR0cEJhY2tlbmQgPSBvcmlnaW5hbEh0dHBCYWNrZW5kO1xuXG4gIHJldHVybiAkaHR0cEJhY2tlbmQ7XG5cblxuICBmdW5jdGlvbiBjcmVhdGVTaG9ydE1ldGhvZHMocHJlZml4KSB7XG4gICAgYW5ndWxhci5mb3JFYWNoKFsnR0VUJywgJ0RFTEVURScsICdKU09OUCcsICdIRUFEJ10sIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAkaHR0cEJhY2tlbmRbcHJlZml4ICsgbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgaGVhZGVycywga2V5cykge1xuICAgICAgICBhc3NlcnRBcmdEZWZpbmVkKGFyZ3VtZW50cywgMCwgJ3VybCcpO1xuXG4gICAgICAgIC8vIENoYW5nZSB1cmwgdG8gYG51bGxgIGlmIGB1bmRlZmluZWRgIHRvIHN0b3AgaXQgdGhyb3dpbmcgYW4gZXhjZXB0aW9uIGZ1cnRoZXIgZG93blxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh1cmwpKSB1cmwgPSBudWxsO1xuXG4gICAgICAgcmV0dXJuICRodHRwQmFja2VuZFtwcmVmaXhdKG1ldGhvZCwgdXJsLCB1bmRlZmluZWQsIGhlYWRlcnMsIGtleXMpO1xuICAgICB9O1xuICAgIH0pO1xuXG4gICAgYW5ndWxhci5mb3JFYWNoKFsnUFVUJywgJ1BPU1QnLCAnUEFUQ0gnXSwgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAkaHR0cEJhY2tlbmRbcHJlZml4ICsgbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgaGVhZGVycywga2V5cykge1xuICAgICAgICBhc3NlcnRBcmdEZWZpbmVkKGFyZ3VtZW50cywgMCwgJ3VybCcpO1xuXG4gICAgICAgIC8vIENoYW5nZSB1cmwgdG8gYG51bGxgIGlmIGB1bmRlZmluZWRgIHRvIHN0b3AgaXQgdGhyb3dpbmcgYW4gZXhjZXB0aW9uIGZ1cnRoZXIgZG93blxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh1cmwpKSB1cmwgPSBudWxsO1xuXG4gICAgICAgIHJldHVybiAkaHR0cEJhY2tlbmRbcHJlZml4XShtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywga2V5cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VSb3V0ZVVybCh1cmwpIHtcbiAgICB2YXIgc3RyaXBwZWRVcmwgPSBzdHJpcFF1ZXJ5QW5kSGFzaCh1cmwpO1xuICAgIHZhciBwYXJzZU9wdGlvbnMgPSB7Y2FzZUluc2Vuc2l0aXZlTWF0Y2g6IHRydWUsIGlnbm9yZVRyYWlsaW5nU2xhc2hlczogdHJ1ZX07XG4gICAgcmV0dXJuIHJvdXRlVG9SZWdFeHAoc3RyaXBwZWRVcmwsIHBhcnNlT3B0aW9ucyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0QXJnRGVmaW5lZChhcmdzLCBpbmRleCwgbmFtZSkge1xuICBpZiAoYXJncy5sZW5ndGggPiBpbmRleCAmJiBhbmd1bGFyLmlzVW5kZWZpbmVkKGFyZ3NbaW5kZXhdKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVW5kZWZpbmVkIGFyZ3VtZW50IGAnICsgbmFtZSArICdgOyB0aGUgYXJndW1lbnQgaXMgcHJvdmlkZWQgYnV0IG5vdCBkZWZpbmVkJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RyaXBRdWVyeUFuZEhhc2godXJsKSB7XG4gIHJldHVybiB1cmwucmVwbGFjZSgvWz8jXS4qJC8sICcnKTtcbn1cblxuZnVuY3Rpb24gTW9ja0h0dHBFeHBlY3RhdGlvbihleHBlY3RlZE1ldGhvZCwgZXhwZWN0ZWRVcmwsIGV4cGVjdGVkRGF0YSwgZXhwZWN0ZWRIZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZEtleXMpIHtcblxuICB0aGlzLmRhdGEgPSBleHBlY3RlZERhdGE7XG4gIHRoaXMuaGVhZGVycyA9IGV4cGVjdGVkSGVhZGVycztcblxuICB0aGlzLm1hdGNoID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGhlYWRlcnMpIHtcbiAgICBpZiAoZXhwZWN0ZWRNZXRob2QgIT09IG1ldGhvZCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghdGhpcy5tYXRjaFVybCh1cmwpKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGRhdGEpICYmICF0aGlzLm1hdGNoRGF0YShkYXRhKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChoZWFkZXJzKSAmJiAhdGhpcy5tYXRjaEhlYWRlcnMoaGVhZGVycykpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICB0aGlzLm1hdGNoVXJsID0gZnVuY3Rpb24odXJsKSB7XG4gICAgaWYgKCFleHBlY3RlZFVybCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihleHBlY3RlZFVybC50ZXN0KSkgcmV0dXJuIGV4cGVjdGVkVXJsLnRlc3QodXJsKTtcbiAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKGV4cGVjdGVkVXJsKSkgcmV0dXJuIGV4cGVjdGVkVXJsKHVybCk7XG4gICAgcmV0dXJuIChleHBlY3RlZFVybCA9PT0gdXJsIHx8IGNvbXBhcmVVcmxXaXRoUXVlcnkodXJsKSk7XG4gIH07XG5cbiAgdGhpcy5tYXRjaEhlYWRlcnMgPSBmdW5jdGlvbihoZWFkZXJzKSB7XG4gICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoZXhwZWN0ZWRIZWFkZXJzKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihleHBlY3RlZEhlYWRlcnMpKSByZXR1cm4gZXhwZWN0ZWRIZWFkZXJzKGhlYWRlcnMpO1xuICAgIHJldHVybiBhbmd1bGFyLmVxdWFscyhleHBlY3RlZEhlYWRlcnMsIGhlYWRlcnMpO1xuICB9O1xuXG4gIHRoaXMubWF0Y2hEYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGV4cGVjdGVkRGF0YSkpIHJldHVybiB0cnVlO1xuICAgIGlmIChleHBlY3RlZERhdGEgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKGV4cGVjdGVkRGF0YS50ZXN0KSkgcmV0dXJuIGV4cGVjdGVkRGF0YS50ZXN0KGRhdGEpO1xuICAgIGlmIChleHBlY3RlZERhdGEgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKGV4cGVjdGVkRGF0YSkpIHJldHVybiBleHBlY3RlZERhdGEoZGF0YSk7XG4gICAgaWYgKGV4cGVjdGVkRGF0YSAmJiAhYW5ndWxhci5pc1N0cmluZyhleHBlY3RlZERhdGEpKSB7XG4gICAgICByZXR1cm4gYW5ndWxhci5lcXVhbHMoYW5ndWxhci5mcm9tSnNvbihhbmd1bGFyLnRvSnNvbihleHBlY3RlZERhdGEpKSwgYW5ndWxhci5mcm9tSnNvbihkYXRhKSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICByZXR1cm4gZXhwZWN0ZWREYXRhID09IGRhdGE7XG4gIH07XG5cbiAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBleHBlY3RlZE1ldGhvZCArICcgJyArIGV4cGVjdGVkVXJsO1xuICB9O1xuXG4gIHRoaXMucGFyYW1zID0gZnVuY3Rpb24odXJsKSB7XG4gICAgdmFyIHF1ZXJ5U3RyID0gdXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnJyA6IHVybC5zdWJzdHJpbmcodXJsLmluZGV4T2YoJz8nKSArIDEpO1xuICAgIHZhciBzdHJpcHBlZFVybCA9IHN0cmlwUXVlcnlBbmRIYXNoKHVybCk7XG5cbiAgICByZXR1cm4gYW5ndWxhci5leHRlbmQoZXh0cmFjdFBhcmFtc0Zyb21RdWVyeShxdWVyeVN0ciksIGV4dHJhY3RQYXJhbXNGcm9tUGF0aChzdHJpcHBlZFVybCkpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbXBhcmVVcmxXaXRoUXVlcnkodXJsKSB7XG4gICAgdmFyIHVybFdpdGhRdWVyeVJlID0gL14oW14/XSopXFw/KC4qKSQvO1xuXG4gICAgdmFyIGV4cGVjdGVkTWF0Y2ggPSB1cmxXaXRoUXVlcnlSZS5leGVjKGV4cGVjdGVkVXJsKTtcbiAgICB2YXIgYWN0dWFsTWF0Y2ggPSB1cmxXaXRoUXVlcnlSZS5leGVjKHVybCk7XG5cbiAgICByZXR1cm4gISEoZXhwZWN0ZWRNYXRjaCAmJiBhY3R1YWxNYXRjaCkgJiZcbiAgICAgIChleHBlY3RlZE1hdGNoWzFdID09PSBhY3R1YWxNYXRjaFsxXSkgJiZcbiAgICAgIChub3JtYWxpemVRdWVyeShleHBlY3RlZE1hdGNoWzJdKSA9PT0gbm9ybWFsaXplUXVlcnkoYWN0dWFsTWF0Y2hbMl0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVF1ZXJ5KHF1ZXJ5U3RyKSB7XG4gICAgcmV0dXJuIHF1ZXJ5U3RyLnNwbGl0KCcmJykuc29ydCgpLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV4dHJhY3RQYXJhbXNGcm9tUGF0aChzdHJpcHBlZFVybCkge1xuICAgIHZhciBrZXlPYmogPSB7fTtcblxuICAgIGlmICghZXhwZWN0ZWRVcmwgfHwgIWFuZ3VsYXIuaXNGdW5jdGlvbihleHBlY3RlZFVybC50ZXN0KSB8fFxuICAgICAgICAhZXhwZWN0ZWRLZXlzIHx8ICFleHBlY3RlZEtleXMubGVuZ3RoKSByZXR1cm4ga2V5T2JqO1xuXG4gICAgdmFyIG1hdGNoID0gZXhwZWN0ZWRVcmwuZXhlYyhzdHJpcHBlZFVybCk7XG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIGtleU9iajtcblxuICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBtYXRjaC5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgdmFyIGtleSA9IGV4cGVjdGVkS2V5c1tpIC0gMV07XG4gICAgICB2YXIgdmFsID0gbWF0Y2hbaV07XG4gICAgICBpZiAoa2V5ICYmIHZhbCkge1xuICAgICAgICBrZXlPYmpba2V5Lm5hbWUgfHwga2V5XSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ga2V5T2JqO1xuICB9XG5cbiAgZnVuY3Rpb24gZXh0cmFjdFBhcmFtc0Zyb21RdWVyeShxdWVyeVN0cikge1xuICAgIHZhciBvYmogPSB7fSxcbiAgICAgICAga2V5VmFsdWVQYWlycyA9IHF1ZXJ5U3RyLnNwbGl0KCcmJykuXG4gICAgICAgICAgICBmaWx0ZXIoYW5ndWxhci5pZGVudGl0eSkuICAvLyBJZ25vcmUgZW1wdHkgc2VnbWVudHMuXG4gICAgICAgICAgICBtYXAoZnVuY3Rpb24oa2V5VmFsdWUpIHsgcmV0dXJuIGtleVZhbHVlLnJlcGxhY2UoL1xcKy9nLCAnJTIwJykuc3BsaXQoJz0nKTsgfSk7XG5cbiAgICBhbmd1bGFyLmZvckVhY2goa2V5VmFsdWVQYWlycywgZnVuY3Rpb24ocGFpcikge1xuICAgICAgdmFyIGtleSA9IHRyeURlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKTtcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChrZXkpKSB7XG4gICAgICAgIHZhciB2YWwgPSBhbmd1bGFyLmlzRGVmaW5lZChwYWlyWzFdKSA/IHRyeURlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKSA6IHRydWU7XG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IHZhbDtcbiAgICAgICAgfSBlbHNlIGlmIChhbmd1bGFyLmlzQXJyYXkob2JqW2tleV0pKSB7XG4gICAgICAgICAgb2JqW2tleV0ucHVzaCh2YWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9ialtrZXldID0gW29ialtrZXldLCB2YWxdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElnbm9yZSBhbnkgaW52YWxpZCB1cmkgY29tcG9uZW50XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1vY2tYaHIoKSB7XG4gIHJldHVybiBuZXcgTW9ja1hocigpO1xufVxuXG5mdW5jdGlvbiBNb2NrWGhyKCkge1xuXG4gIC8vIGhhY2sgZm9yIHRlc3RpbmcgJGh0dHAsICRodHRwQmFja2VuZFxuICBNb2NrWGhyLiQkbGFzdEluc3RhbmNlID0gdGhpcztcblxuICB0aGlzLm9wZW4gPSBmdW5jdGlvbihtZXRob2QsIHVybCwgYXN5bmMpIHtcbiAgICB0aGlzLiQkbWV0aG9kID0gbWV0aG9kO1xuICAgIHRoaXMuJCR1cmwgPSB1cmw7XG4gICAgdGhpcy4kJGFzeW5jID0gYXN5bmM7XG4gICAgdGhpcy4kJHJlcUhlYWRlcnMgPSB7fTtcbiAgICB0aGlzLiQkcmVzcEhlYWRlcnMgPSB7fTtcbiAgfTtcblxuICB0aGlzLnNlbmQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdGhpcy4kJGRhdGEgPSBkYXRhO1xuICB9O1xuXG4gIHRoaXMuc2V0UmVxdWVzdEhlYWRlciA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLiQkcmVxSGVhZGVyc1trZXldID0gdmFsdWU7XG4gIH07XG5cbiAgdGhpcy5nZXRSZXNwb25zZUhlYWRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAvLyB0aGUgbG9va3VwIG11c3QgYmUgY2FzZSBpbnNlbnNpdGl2ZSxcbiAgICAvLyB0aGF0J3Mgd2h5IHdlIHRyeSB0d28gcXVpY2sgbG9va3VwcyBmaXJzdCBhbmQgZnVsbCBzY2FuIGxhc3RcbiAgICB2YXIgaGVhZGVyID0gdGhpcy4kJHJlc3BIZWFkZXJzW25hbWVdO1xuICAgIGlmIChoZWFkZXIpIHJldHVybiBoZWFkZXI7XG5cbiAgICBuYW1lID0gYW5ndWxhci4kJGxvd2VyY2FzZShuYW1lKTtcbiAgICBoZWFkZXIgPSB0aGlzLiQkcmVzcEhlYWRlcnNbbmFtZV07XG4gICAgaWYgKGhlYWRlcikgcmV0dXJuIGhlYWRlcjtcblxuICAgIGhlYWRlciA9IHVuZGVmaW5lZDtcbiAgICBhbmd1bGFyLmZvckVhY2godGhpcy4kJHJlc3BIZWFkZXJzLCBmdW5jdGlvbihoZWFkZXJWYWwsIGhlYWRlck5hbWUpIHtcbiAgICAgIGlmICghaGVhZGVyICYmIGFuZ3VsYXIuJCRsb3dlcmNhc2UoaGVhZGVyTmFtZSkgPT09IG5hbWUpIGhlYWRlciA9IGhlYWRlclZhbDtcbiAgICB9KTtcbiAgICByZXR1cm4gaGVhZGVyO1xuICB9O1xuXG4gIHRoaXMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxpbmVzID0gW107XG5cbiAgICBhbmd1bGFyLmZvckVhY2godGhpcy4kJHJlc3BIZWFkZXJzLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICBsaW5lcy5wdXNoKGtleSArICc6ICcgKyB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xuICB9O1xuXG4gIHRoaXMuYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoaXNGdW5jdGlvbih0aGlzLm9uYWJvcnQpKSB7XG4gICAgICB0aGlzLm9uYWJvcnQoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gVGhpcyBzZWN0aW9uIHNpbXVsYXRlcyB0aGUgZXZlbnRzIG9uIGEgcmVhbCBYSFIgb2JqZWN0IChhbmQgdGhlIHVwbG9hZCBvYmplY3QpXG4gIC8vIFdoZW4gd2UgYXJlIHRlc3RpbmcgJGh0dHBCYWNrZW5kIChpbnNpZGUgdGhlIEFuZ3VsYXJKUyBwcm9qZWN0KSB3ZSBtYWtlIHBhcnRpYWwgdXNlIG9mIHRoaXNcbiAgLy8gYnV0IHN0b3JlIHRoZSBldmVudHMgZGlyZWN0bHkgb3Vyc2VsdmVzIG9uIGAkJGV2ZW50c2AsIGluc3RlYWQgb2YgZ29pbmcgdGhyb3VnaCB0aGUgYGFkZEV2ZW50TGlzdGVuZXJgXG4gIHRoaXMuJCRldmVudHMgPSB7fTtcbiAgdGhpcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh0aGlzLiQkZXZlbnRzW25hbWVdKSkgdGhpcy4kJGV2ZW50c1tuYW1lXSA9IFtdO1xuICAgIHRoaXMuJCRldmVudHNbbmFtZV0ucHVzaChsaXN0ZW5lcik7XG4gIH07XG5cbiAgdGhpcy51cGxvYWQgPSB7XG4gICAgJCRldmVudHM6IHt9LFxuICAgIGFkZEV2ZW50TGlzdGVuZXI6IHRoaXMuYWRkRXZlbnRMaXN0ZW5lclxuICB9O1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICR0aW1lb3V0XG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGlzIHNlcnZpY2UgaXMganVzdCBhIHNpbXBsZSBkZWNvcmF0b3IgZm9yIHtAbGluayBuZy4kdGltZW91dCAkdGltZW91dH0gc2VydmljZVxuICogdGhhdCBhZGRzIGEgXCJmbHVzaFwiIGFuZCBcInZlcmlmeU5vUGVuZGluZ1Rhc2tzXCIgbWV0aG9kcy5cbiAqL1xuXG5hbmd1bGFyLm1vY2suJFRpbWVvdXREZWNvcmF0b3IgPSBbJyRkZWxlZ2F0ZScsICckYnJvd3NlcicsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSwgJGJyb3dzZXIpIHtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkdGltZW91dCNmbHVzaFxuICAgKlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBzaW5jZVZlcnNpb249XCIxLjcuM1wiXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGZsdXNoZXMgYWxsIHR5cGVzIG9mIHRhc2tzIChub3Qgb25seSB0aW1lb3V0cyksIHdoaWNoIGlzIHVuaW50dWl0aXZlLlxuICAgKiBJdCBpcyByZWNvbW1lbmRlZCB0byB1c2Uge0BsaW5rIG5nTW9jay4kZmx1c2hQZW5kaW5nVGFza3N9IGluc3RlYWQuXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBGbHVzaGVzIHRoZSBxdWV1ZSBvZiBwZW5kaW5nIHRhc2tzLlxuICAgKlxuICAgKiBfVGhpcyBtZXRob2QgaXMgZXNzZW50aWFsbHkgYW4gYWxpYXMgb2Yge0BsaW5rIG5nTW9jay4kZmx1c2hQZW5kaW5nVGFza3N9Ll9cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogICBGb3IgaGlzdG9yaWNhbCByZWFzb25zLCB0aGlzIG1ldGhvZCB3aWxsIGFsc28gZmx1c2ggbm9uLWAkdGltZW91dGAgcGVuZGluZyB0YXNrcywgc3VjaCBhc1xuICAgKiAgIHtAbGluayAkcX0gcHJvbWlzZXMgYW5kIHRhc2tzIHNjaGVkdWxlZCB2aWFcbiAgICogICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luYyAkYXBwbHlBc3luY30gYW5kXG4gICAqICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWxBc3luYyAkZXZhbEFzeW5jfS5cbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gZGVsYXkgbWF4aW11bSB0aW1lb3V0IGFtb3VudCB0byBmbHVzaCB1cCB1bnRpbFxuICAgKi9cbiAgJGRlbGVnYXRlLmZsdXNoID0gZnVuY3Rpb24oZGVsYXkpIHtcbiAgICAvLyBGb3IgaGlzdG9yaWNhbCByZWFzb25zLCBgJHRpbWVvdXQuZmx1c2goKWAgZmx1c2hlcyBhbGwgdHlwZXMgb2YgcGVuZGluZyB0YXNrcy5cbiAgICAvLyBLZWVwIHRoZSBzYW1lIGJlaGF2aW9yIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSAoYW5kIGJlY2F1c2UgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvXG4gICAgLy8gc2VsZWN0aXZlbHkgZmx1c2ggc2NoZWR1bGVkIGV2ZW50cyBvdXQgb2Ygb3JkZXIpLlxuICAgICRicm93c2VyLmRlZmVyLmZsdXNoKGRlbGF5KTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkdGltZW91dCN2ZXJpZnlOb1BlbmRpbmdUYXNrc1xuICAgKlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBzaW5jZVZlcnNpb249XCIxLjcuM1wiXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHRha2VzIGFsbCB0eXBlcyBvZiB0YXNrcyAobm90IG9ubHkgdGltZW91dHMpIGludG8gYWNjb3VudCwgd2hpY2ggaXMgdW5pbnR1aXRpdmUuXG4gICAqIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB7QGxpbmsgbmdNb2NrLiR2ZXJpZnlOb1BlbmRpbmdUYXNrc30gaW5zdGVhZCwgd2hpY2ggYWRkaXRpb25hbGx5XG4gICAqIGFsbG93cyBjaGVja2luZyBmb3IgdGltZW91dHMgb25seSAod2l0aCBgJHZlcmlmeU5vUGVuZGluZ1Rhc2tzKCckdGltZW91dCcpYCkuXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBWZXJpZmllcyB0aGF0IHRoZXJlIGFyZSBubyBwZW5kaW5nIHRhc2tzIHRoYXQgbmVlZCB0byBiZSBmbHVzaGVkLiBJdCB0aHJvd3MgYW4gZXJyb3IgaWYgdGhlcmVcbiAgICogYXJlIHN0aWxsIHBlbmRpbmcgdGFza3MuXG4gICAqXG4gICAqIF9UaGlzIG1ldGhvZCBpcyBlc3NlbnRpYWxseSBhbiBhbGlhcyBvZiB7QGxpbmsgbmdNb2NrLiR2ZXJpZnlOb1BlbmRpbmdUYXNrc30gKGNhbGxlZCB3aXRoIG5vXG4gICAqIGFyZ3VtZW50cykuX1xuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAgIDxwPlxuICAgKiAgICAgRm9yIGhpc3RvcmljYWwgcmVhc29ucywgdGhpcyBtZXRob2Qgd2lsbCBhbHNvIHZlcmlmeSBub24tYCR0aW1lb3V0YCBwZW5kaW5nIHRhc2tzLCBzdWNoIGFzXG4gICAqICAgICBwZW5kaW5nIHtAbGluayAkaHR0cH0gcmVxdWVzdHMsIGluLXByb2dyZXNzIHtAbGluayAkcm91dGV9IHRyYW5zaXRpb25zLCB1bnJlc29sdmVkXG4gICAqICAgICB7QGxpbmsgJHF9IHByb21pc2VzIGFuZCB0YXNrcyBzY2hlZHVsZWQgdmlhXG4gICAqICAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHlBc3luYyAkYXBwbHlBc3luY30gYW5kXG4gICAqICAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jICRldmFsQXN5bmN9LlxuICAgKiAgIDwvcD5cbiAgICogICA8cD5cbiAgICogICAgIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB7QGxpbmsgbmdNb2NrLiR2ZXJpZnlOb1BlbmRpbmdUYXNrc30gaW5zdGVhZCwgd2hpY2ggYWRkaXRpb25hbGx5XG4gICAqICAgICBzdXBwb3J0cyB2ZXJpZnlpbmcgYSBzcGVjaWZpYyB0eXBlIG9mIHRhc2tzLiBGb3IgZXhhbXBsZSwgeW91IGNhbiB2ZXJpZnkgdGhlcmUgYXJlIG5vXG4gICAqICAgICBwZW5kaW5nIHRpbWVvdXRzIHdpdGggYCR2ZXJpZnlOb1BlbmRpbmdUYXNrcygnJHRpbWVvdXQnKWAuXG4gICAqICAgPC9wPlxuICAgKiA8L2Rpdj5cbiAgICovXG4gICRkZWxlZ2F0ZS52ZXJpZnlOb1BlbmRpbmdUYXNrcyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEZvciBoaXN0b3JpY2FsIHJlYXNvbnMsIGAkdGltZW91dC52ZXJpZnlOb1BlbmRpbmdUYXNrcygpYCB0YWtlcyBhbGwgdHlwZXMgb2YgcGVuZGluZyB0YXNrc1xuICAgIC8vIGludG8gYWNjb3VudC4gS2VlcCB0aGUgc2FtZSBiZWhhdmlvciBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gICAgdmFyIHBlbmRpbmdUYXNrcyA9ICRicm93c2VyLmRlZmVyLmdldFBlbmRpbmdUYXNrcygpO1xuXG4gICAgaWYgKHBlbmRpbmdUYXNrcy5sZW5ndGgpIHtcbiAgICAgIHZhciBmb3JtYXR0ZWRUYXNrcyA9ICRicm93c2VyLmRlZmVyLmZvcm1hdFBlbmRpbmdUYXNrcyhwZW5kaW5nVGFza3MpLmpvaW4oJ1xcbiAgJyk7XG4gICAgICB2YXIgaGFzUGVuZGluZ1RpbWVvdXQgPSBwZW5kaW5nVGFza3Muc29tZShmdW5jdGlvbih0YXNrKSB7IHJldHVybiB0YXNrLnR5cGUgPT09ICckdGltZW91dCc7IH0pO1xuICAgICAgdmFyIGV4dHJhTWVzc2FnZSA9IGhhc1BlbmRpbmdUaW1lb3V0ID8gJycgOiAnXFxuXFxuTm9uZSBvZiB0aGUgcGVuZGluZyB0YXNrcyBhcmUgdGltZW91dHMuICcgK1xuICAgICAgICAgICdJZiB5b3Ugb25seSB3YW50IHRvIHZlcmlmeSBwZW5kaW5nIHRpbWVvdXRzLCB1c2UgJyArXG4gICAgICAgICAgJ2AkdmVyaWZ5Tm9QZW5kaW5nVGFza3MoXFwnJHRpbWVvdXRcXCcpYCBpbnN0ZWFkLic7XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcignRGVmZXJyZWQgdGFza3MgdG8gZmx1c2ggKCcgKyBwZW5kaW5nVGFza3MubGVuZ3RoICsgJyk6XFxuICAnICtcbiAgICAgICAgICBmb3JtYXR0ZWRUYXNrcyArIGV4dHJhTWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAkZGVsZWdhdGU7XG59XTtcblxuYW5ndWxhci5tb2NrLiRSQUZEZWNvcmF0b3IgPSBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICB2YXIgcmFmRm4gPSBmdW5jdGlvbihmbikge1xuICAgIHZhciBpbmRleCA9IHJhZkZuLnF1ZXVlLmxlbmd0aDtcbiAgICByYWZGbi5xdWV1ZS5wdXNoKGZuKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByYWZGbi5xdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH07XG4gIH07XG5cbiAgcmFmRm4ucXVldWUgPSBbXTtcbiAgcmFmRm4uc3VwcG9ydGVkID0gJGRlbGVnYXRlLnN1cHBvcnRlZDtcblxuICByYWZGbi5mbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyYWZGbi5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gckFGIGNhbGxiYWNrcyBwcmVzZW50Jyk7XG4gICAgfVxuXG4gICAgdmFyIGxlbmd0aCA9IHJhZkZuLnF1ZXVlLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByYWZGbi5xdWV1ZVtpXSgpO1xuICAgIH1cblxuICAgIHJhZkZuLnF1ZXVlID0gcmFmRm4ucXVldWUuc2xpY2UoaSk7XG4gIH07XG5cbiAgcmV0dXJuIHJhZkZuO1xufV07XG5cbi8qKlxuICpcbiAqL1xudmFyIG9yaWdpbmFsUm9vdEVsZW1lbnQ7XG5hbmd1bGFyLm1vY2suJFJvb3RFbGVtZW50UHJvdmlkZXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAgICBvcmlnaW5hbFJvb3RFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8ZGl2IG5nLWFwcD48L2Rpdj4nKS5kYXRhKCckaW5qZWN0b3InLCAkaW5qZWN0b3IpO1xuICAgIHJldHVybiBvcmlnaW5hbFJvb3RFbGVtZW50O1xuICB9XTtcbn07XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRjb250cm9sbGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgZGVjb3JhdG9yIGZvciB7QGxpbmsgbmcuJGNvbnRyb2xsZXJ9IHdpdGggYWRkaXRpb25hbCBgYmluZGluZ3NgIHBhcmFtZXRlciwgdXNlZnVsIHdoZW4gdGVzdGluZ1xuICogY29udHJvbGxlcnMgb2YgZGlyZWN0aXZlcyB0aGF0IHVzZSB7QGxpbmsgJGNvbXBpbGUjLWJpbmR0b2NvbnRyb2xsZXItIGBiaW5kVG9Db250cm9sbGVyYH0uXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIGBgYGpzXG4gKlxuICogLy8gRGlyZWN0aXZlIGRlZmluaXRpb24gLi4uXG4gKlxuICogbXlNb2QuZGlyZWN0aXZlKCdteURpcmVjdGl2ZScsIHtcbiAqICAgY29udHJvbGxlcjogJ015RGlyZWN0aXZlQ29udHJvbGxlcicsXG4gKiAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcbiAqICAgICBuYW1lOiAnQCdcbiAqICAgfVxuICogfSk7XG4gKlxuICpcbiAqIC8vIENvbnRyb2xsZXIgZGVmaW5pdGlvbiAuLi5cbiAqXG4gKiBteU1vZC5jb250cm9sbGVyKCdNeURpcmVjdGl2ZUNvbnRyb2xsZXInLCBbJyRsb2cnLCBmdW5jdGlvbigkbG9nKSB7XG4gKiAgIHRoaXMubG9nID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgJGxvZy5pbmZvKHRoaXMubmFtZSk7XG4gKiAgIH07XG4gKiB9XSk7XG4gKlxuICpcbiAqIC8vIEluIGEgdGVzdCAuLi5cbiAqXG4gKiBkZXNjcmliZSgnbXlEaXJlY3RpdmVDb250cm9sbGVyJywgZnVuY3Rpb24oKSB7XG4gKiAgIGRlc2NyaWJlKCdsb2coKScsIGZ1bmN0aW9uKCkge1xuICogICAgIGl0KCdzaG91bGQgd3JpdGUgdGhlIGJvdW5kIG5hbWUgdG8gdGhlIGxvZycsIGluamVjdChmdW5jdGlvbigkY29udHJvbGxlciwgJGxvZykge1xuICogICAgICAgdmFyIGN0cmwgPSAkY29udHJvbGxlcignTXlEaXJlY3RpdmVDb250cm9sbGVyJywgeyAvKiBubyBsb2NhbHMgJiM0MjsvIH0sIHsgbmFtZTogJ0NsYXJrIEtlbnQnIH0pO1xuICogICAgICAgY3RybC5sb2coKTtcbiAqXG4gKiAgICAgICBleHBlY3QoY3RybC5uYW1lKS50b0VxdWFsKCdDbGFyayBLZW50Jyk7XG4gKiAgICAgICBleHBlY3QoJGxvZy5pbmZvLmxvZ3MpLnRvRXF1YWwoWydDbGFyayBLZW50J10pO1xuICogICAgIH0pKTtcbiAqICAgfSk7XG4gKiB9KTtcbiAqXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gY29uc3RydWN0b3IgSWYgY2FsbGVkIHdpdGggYSBmdW5jdGlvbiB0aGVuIGl0J3MgY29uc2lkZXJlZCB0byBiZSB0aGVcbiAqICAgIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24uIE90aGVyd2lzZSBpdCdzIGNvbnNpZGVyZWQgdG8gYmUgYSBzdHJpbmcgd2hpY2ggaXMgdXNlZFxuICogICAgdG8gcmV0cmlldmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgdXNpbmcgdGhlIGZvbGxvd2luZyBzdGVwczpcbiAqXG4gKiAgICAqIGNoZWNrIGlmIGEgY29udHJvbGxlciB3aXRoIGdpdmVuIG5hbWUgaXMgcmVnaXN0ZXJlZCB2aWEgYCRjb250cm9sbGVyUHJvdmlkZXJgXG4gKiAgICAqIGNoZWNrIGlmIGV2YWx1YXRpbmcgdGhlIHN0cmluZyBvbiB0aGUgY3VycmVudCBzY29wZSByZXR1cm5zIGEgY29uc3RydWN0b3JcbiAqXG4gKiAgICBUaGUgc3RyaW5nIGNhbiB1c2UgdGhlIGBjb250cm9sbGVyIGFzIHByb3BlcnR5YCBzeW50YXgsIHdoZXJlIHRoZSBjb250cm9sbGVyIGluc3RhbmNlIGlzIHB1Ymxpc2hlZFxuICogICAgYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBvbiB0aGUgYHNjb3BlYDsgdGhlIGBzY29wZWAgbXVzdCBiZSBpbmplY3RlZCBpbnRvIGBsb2NhbHNgIHBhcmFtIGZvciB0aGlzXG4gKiAgICB0byB3b3JrIGNvcnJlY3RseS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IGJpbmRpbmdzIFByb3BlcnRpZXMgdG8gYWRkIHRvIHRoZSBjb250cm9sbGVyIGluc3RhbmNlLiBUaGlzIGlzIHVzZWQgdG8gc2ltdWxhdGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGBiaW5kVG9Db250cm9sbGVyYCBmZWF0dXJlIGFuZCBzaW1wbGlmeSBjZXJ0YWluIGtpbmRzIG9mIHRlc3RzLlxuICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxuICovXG5mdW5jdGlvbiBjcmVhdGVDb250cm9sbGVyRGVjb3JhdG9yKCkge1xuICBhbmd1bGFyLm1vY2suJENvbnRyb2xsZXJEZWNvcmF0b3IgPSBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihleHByZXNzaW9uLCBsb2NhbHMsIGxhdGVyLCBpZGVudCkge1xuICAgICAgaWYgKGxhdGVyICYmIHR5cGVvZiBsYXRlciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdmFyIGluc3RhbnRpYXRlID0gJGRlbGVnYXRlKGV4cHJlc3Npb24sIGxvY2FscywgdHJ1ZSwgaWRlbnQpO1xuICAgICAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW50aWF0ZSgpO1xuICAgICAgICBhbmd1bGFyLmV4dGVuZChpbnN0YW5jZSwgbGF0ZXIpO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gJGRlbGVnYXRlKGV4cHJlc3Npb24sIGxvY2FscywgbGF0ZXIsIGlkZW50KTtcbiAgICB9O1xuICB9XTtcblxuICByZXR1cm4gYW5ndWxhci5tb2NrLiRDb250cm9sbGVyRGVjb3JhdG9yO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkY29tcG9uZW50Q29udHJvbGxlclxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNlcnZpY2UgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGNvbXBvbmVudCBjb250cm9sbGVycy4gVXNlZnVsIGZvciB1bml0LXRlc3RpbmcuXG4gKlxuICogQmUgYXdhcmUgdGhhdCB0aGUgY29udHJvbGxlciB3aWxsIGJlIGluc3RhbnRpYXRlZCBhbmQgYXR0YWNoZWQgdG8gdGhlIHNjb3BlIGFzIHNwZWNpZmllZCBpblxuICogdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdC4gSWYgeW91IGRvIG5vdCBwcm92aWRlIGEgYCRzY29wZWAgb2JqZWN0IGluIHRoZSBgbG9jYWxzYCBwYXJhbVxuICogdGhlbiB0aGUgaGVscGVyIHdpbGwgY3JlYXRlIGEgbmV3IGlzb2xhdGVkIHNjb3BlIGFzIGEgY2hpbGQgb2YgYCRyb290U2NvcGVgLlxuICpcbiAqIElmIHlvdSBhcmUgdXNpbmcgYCRlbGVtZW50YCBvciBgJGF0dHJzYCBpbiB0aGUgY29udHJvbGxlciwgbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBhcyBgbG9jYWxzYC5cbiAqIFRoZSBgJGVsZW1lbnRgIG11c3QgYmUgYSBqcUxpdGUtd3JhcHBlZCBET00gZWxlbWVudCwgYW5kIGAkYXR0cnNgIHNob3VsZCBiZSBhbiBvYmplY3QgdGhhdFxuICogaGFzIGFsbCBwcm9wZXJ0aWVzIC8gZnVuY3Rpb25zIHRoYXQgeW91IGFyZSB1c2luZyBpbiB0aGUgY29udHJvbGxlci4gSWYgdGhpcyBpcyBnZXR0aW5nIHRvbyBjb21wbGV4LFxuICogeW91IHNob3VsZCBjb21waWxlIHRoZSBjb21wb25lbnQgaW5zdGVhZCBhbmQgYWNjZXNzIHRoZSBjb21wb25lbnQncyBjb250cm9sbGVyIHZpYSB0aGVcbiAqIHtAbGluayBhbmd1bGFyLmVsZW1lbnQjbWV0aG9kcyBgY29udHJvbGxlcmB9IGZ1bmN0aW9uLlxuICpcbiAqIFNlZSBhbHNvIHRoZSBzZWN0aW9uIG9uIHtAbGluayBndWlkZS9jb21wb25lbnQjdW5pdC10ZXN0aW5nLWNvbXBvbmVudC1jb250cm9sbGVycyB1bml0LXRlc3RpbmcgY29tcG9uZW50IGNvbnRyb2xsZXJzfVxuICogaW4gdGhlIGd1aWRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnROYW1lIHRoZSBuYW1lIG9mIHRoZSBjb21wb25lbnQgd2hvc2UgY29udHJvbGxlciB3ZSB3YW50IHRvIGluc3RhbnRpYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IGJpbmRpbmdzIFByb3BlcnRpZXMgdG8gYWRkIHRvIHRoZSBjb250cm9sbGVyIGJlZm9yZSBpbnZva2luZyB0aGUgY29uc3RydWN0b3IuIFRoaXMgaXMgdXNlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICB0byBzaW11bGF0ZSB0aGUgYGJpbmRUb0NvbnRyb2xsZXJgIGZlYXR1cmUgYW5kIHNpbXBsaWZ5IGNlcnRhaW4ga2luZHMgb2YgdGVzdHMuXG4gKiBAcGFyYW0ge3N0cmluZz19IGlkZW50IE92ZXJyaWRlIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHVzZSB3aGVuIGF0dGFjaGluZyB0aGUgY29udHJvbGxlciB0byB0aGUgc2NvcGUuXG4gKiBAcmV0dXJuIHtPYmplY3R9IEluc3RhbmNlIG9mIHJlcXVlc3RlZCBjb250cm9sbGVyLlxuICovXG5hbmd1bGFyLm1vY2suJENvbXBvbmVudENvbnRyb2xsZXJQcm92aWRlciA9IFsnJGNvbXBpbGVQcm92aWRlcicsXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50Q29udHJvbGxlclByb3ZpZGVyKCRjb21waWxlUHJvdmlkZXIpIHtcbiAgdGhpcy4kZ2V0ID0gWyckY29udHJvbGxlcicsJyRpbmplY3RvcicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJGNvbnRyb2xsZXIsICRpbmplY3RvciwgJHJvb3RTY29wZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAkY29tcG9uZW50Q29udHJvbGxlcihjb21wb25lbnROYW1lLCBsb2NhbHMsIGJpbmRpbmdzLCBpZGVudCkge1xuICAgICAgLy8gZ2V0IGFsbCBkaXJlY3RpdmVzIGFzc29jaWF0ZWQgdG8gdGhlIGNvbXBvbmVudCBuYW1lXG4gICAgICB2YXIgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQoY29tcG9uZW50TmFtZSArICdEaXJlY3RpdmUnKTtcbiAgICAgIC8vIGxvb2sgZm9yIHRob3NlIGRpcmVjdGl2ZXMgdGhhdCBhcmUgY29tcG9uZW50c1xuICAgICAgdmFyIGNhbmRpZGF0ZURpcmVjdGl2ZXMgPSBkaXJlY3RpdmVzLmZpbHRlcihmdW5jdGlvbihkaXJlY3RpdmVJbmZvKSB7XG4gICAgICAgIC8vIGNvbXBvbmVudHMgaGF2ZSBjb250cm9sbGVyLCBjb250cm9sbGVyQXMgYW5kIHJlc3RyaWN0OidFJ1xuICAgICAgICByZXR1cm4gZGlyZWN0aXZlSW5mby5jb250cm9sbGVyICYmIGRpcmVjdGl2ZUluZm8uY29udHJvbGxlckFzICYmIGRpcmVjdGl2ZUluZm8ucmVzdHJpY3QgPT09ICdFJztcbiAgICAgIH0pO1xuICAgICAgLy8gY2hlY2sgaWYgdmFsaWQgZGlyZWN0aXZlcyBmb3VuZFxuICAgICAgaWYgKGNhbmRpZGF0ZURpcmVjdGl2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29tcG9uZW50IGZvdW5kJyk7XG4gICAgICB9XG4gICAgICBpZiAoY2FuZGlkYXRlRGlyZWN0aXZlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vIG1hbnkgY29tcG9uZW50cyBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgLy8gZ2V0IHRoZSBpbmZvIG9mIHRoZSBjb21wb25lbnRcbiAgICAgIHZhciBkaXJlY3RpdmVJbmZvID0gY2FuZGlkYXRlRGlyZWN0aXZlc1swXTtcbiAgICAgIC8vIGNyZWF0ZSBhIHNjb3BlIGlmIG5lZWRlZFxuICAgICAgbG9jYWxzID0gbG9jYWxzIHx8IHt9O1xuICAgICAgbG9jYWxzLiRzY29wZSA9IGxvY2Fscy4kc2NvcGUgfHwgJHJvb3RTY29wZS4kbmV3KHRydWUpO1xuICAgICAgcmV0dXJuICRjb250cm9sbGVyKGRpcmVjdGl2ZUluZm8uY29udHJvbGxlciwgbG9jYWxzLCBiaW5kaW5ncywgaWRlbnQgfHwgZGlyZWN0aXZlSW5mby5jb250cm9sbGVyQXMpO1xuICAgIH07XG4gIH1dO1xufV07XG5cblxuLyoqXG4gKiBAbmdkb2MgbW9kdWxlXG4gKiBAbmFtZSBuZ01vY2tcbiAqIEBwYWNrYWdlTmFtZSBhbmd1bGFyLW1vY2tzXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgYG5nTW9ja2AgbW9kdWxlIHByb3ZpZGVzIHN1cHBvcnQgdG8gaW5qZWN0IGFuZCBtb2NrIEFuZ3VsYXJKUyBzZXJ2aWNlcyBpbnRvIHVuaXQgdGVzdHMuXG4gKiBJbiBhZGRpdGlvbiwgbmdNb2NrIGFsc28gZXh0ZW5kcyB2YXJpb3VzIGNvcmUgQW5ndWxhckpTIHNlcnZpY2VzIHN1Y2ggdGhhdCB0aGV5IGNhbiBiZVxuICogaW5zcGVjdGVkIGFuZCBjb250cm9sbGVkIGluIGEgc3luY2hyb25vdXMgbWFubmVyIHdpdGhpbiB0ZXN0IGNvZGUuXG4gKlxuICogQGluc3RhbGxhdGlvblxuICpcbiAqICBGaXJzdCwgZG93bmxvYWQgdGhlIGZpbGU6XG4gKiAgKiBbR29vZ2xlIENETl0oaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc3BlZWQvbGlicmFyaWVzL2Rldmd1aWRlI2FuZ3VsYXJqcykgZS5nLlxuICogICAgYFwiLy9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy9hbmd1bGFyanMvWC5ZLlovYW5ndWxhci1tb2Nrcy5qc1wiYFxuICogICogW05QTV0oaHR0cHM6Ly93d3cubnBtanMuY29tLykgZS5nLiBgbnBtIGluc3RhbGwgYW5ndWxhci1tb2Nrc0BYLlkuWmBcbiAqICAqIFtZYXJuXShodHRwczovL3lhcm5wa2cuY29tKSBlLmcuIGB5YXJuIGFkZCBhbmd1bGFyLW1vY2tzQFguWS5aYFxuICogICogW0Jvd2VyXShodHRwOi8vYm93ZXIuaW8pIGUuZy4gYGJvd2VyIGluc3RhbGwgYW5ndWxhci1tb2NrcyNYLlkuWmBcbiAqICAqIFtjb2RlLmFuZ3VsYXJqcy5vcmddKGh0dHBzOi8vY29kZS5hbmd1bGFyanMub3JnLykgKGRpc2NvdXJhZ2VkIGZvciBwcm9kdWN0aW9uIHVzZSkgIGUuZy5cbiAqICAgIGBcIi8vY29kZS5hbmd1bGFyanMub3JnL1guWS5aL2FuZ3VsYXItbW9ja3MuanNcImBcbiAqXG4gKiB3aGVyZSBYLlkuWiBpcyB0aGUgQW5ndWxhckpTIHZlcnNpb24geW91IGFyZSBydW5uaW5nLlxuICpcbiAqIFRoZW4sIGNvbmZpZ3VyZSB5b3VyIHRlc3QgcnVubmVyIHRvIGxvYWQgYGFuZ3VsYXItbW9ja3MuanNgIGFmdGVyIGBhbmd1bGFyLmpzYC5cbiAqIFRoaXMgZXhhbXBsZSB1c2VzIDxhIGhyZWY9XCJodHRwOi8va2FybWEtcnVubmVyLmdpdGh1Yi5pby9cIj5LYXJtYTwvYT46XG4gKlxuICogYGBgXG4gKiBjb25maWcuc2V0KHtcbiAqICAgZmlsZXM6IFtcbiAqICAgICAnYnVpbGQvYW5ndWxhci5qcycsIC8vIGFuZCBvdGhlciBtb2R1bGUgZmlsZXMgeW91IG5lZWRcbiAqICAgICAnYnVpbGQvYW5ndWxhci1tb2Nrcy5qcycsXG4gKiAgICAgJzxwYXRoL3RvL2FwcGxpY2F0aW9uL2ZpbGVzPicsXG4gKiAgICAgJzxwYXRoL3RvL3NwZWMvZmlsZXM+J1xuICogICBdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEluY2x1ZGluZyB0aGUgYGFuZ3VsYXItbW9ja3MuanNgIGZpbGUgYXV0b21hdGljYWxseSBhZGRzIHRoZSBgbmdNb2NrYCBtb2R1bGUsIHNvIHlvdXIgdGVzdHNcbiAqICBhcmUgcmVhZHkgdG8gZ28hXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCduZ01vY2snLCBbJ25nJ10pLnByb3ZpZGVyKHtcbiAgJGJyb3dzZXI6IGFuZ3VsYXIubW9jay4kQnJvd3NlclByb3ZpZGVyLFxuICAkZXhjZXB0aW9uSGFuZGxlcjogYW5ndWxhci5tb2NrLiRFeGNlcHRpb25IYW5kbGVyUHJvdmlkZXIsXG4gICRsb2c6IGFuZ3VsYXIubW9jay4kTG9nUHJvdmlkZXIsXG4gICRpbnRlcnZhbDogYW5ndWxhci5tb2NrLiRJbnRlcnZhbFByb3ZpZGVyLFxuICAkcm9vdEVsZW1lbnQ6IGFuZ3VsYXIubW9jay4kUm9vdEVsZW1lbnRQcm92aWRlcixcbiAgJGNvbXBvbmVudENvbnRyb2xsZXI6IGFuZ3VsYXIubW9jay4kQ29tcG9uZW50Q29udHJvbGxlclByb3ZpZGVyLFxuICAkZmx1c2hQZW5kaW5nVGFza3M6IGFuZ3VsYXIubW9jay4kRmx1c2hQZW5kaW5nVGFza3NQcm92aWRlcixcbiAgJHZlcmlmeU5vUGVuZGluZ1Rhc2tzOiBhbmd1bGFyLm1vY2suJFZlcmlmeU5vUGVuZGluZ1Rhc2tzUHJvdmlkZXJcbn0pLmNvbmZpZyhbJyRwcm92aWRlJywgJyRjb21waWxlUHJvdmlkZXInLCBmdW5jdGlvbigkcHJvdmlkZSwgJGNvbXBpbGVQcm92aWRlcikge1xuICAkcHJvdmlkZS5kZWNvcmF0b3IoJyR0aW1lb3V0JywgYW5ndWxhci5tb2NrLiRUaW1lb3V0RGVjb3JhdG9yKTtcbiAgJHByb3ZpZGUuZGVjb3JhdG9yKCckJHJBRicsIGFuZ3VsYXIubW9jay4kUkFGRGVjb3JhdG9yKTtcbiAgJHByb3ZpZGUuZGVjb3JhdG9yKCckcm9vdFNjb3BlJywgYW5ndWxhci5tb2NrLiRSb290U2NvcGVEZWNvcmF0b3IpO1xuICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRjb250cm9sbGVyJywgY3JlYXRlQ29udHJvbGxlckRlY29yYXRvcigkY29tcGlsZVByb3ZpZGVyKSk7XG4gICRwcm92aWRlLmRlY29yYXRvcignJGh0dHBCYWNrZW5kJywgYW5ndWxhci5tb2NrLiRodHRwQmFja2VuZERlY29yYXRvcik7XG59XSkuaW5mbyh7IGFuZ3VsYXJWZXJzaW9uOiAnMS43LjgnIH0pO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG5nTW9ja0UyRVxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBwYWNrYWdlTmFtZSBhbmd1bGFyLW1vY2tzXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgYG5nTW9ja0UyRWAgaXMgYW4gQW5ndWxhckpTIG1vZHVsZSB3aGljaCBjb250YWlucyBtb2NrcyBzdWl0YWJsZSBmb3IgZW5kLXRvLWVuZCB0ZXN0aW5nLlxuICogQ3VycmVudGx5IHRoZXJlIGlzIG9ubHkgb25lIG1vY2sgcHJlc2VudCBpbiB0aGlzIG1vZHVsZSAtXG4gKiB0aGUge0BsaW5rIG5nTW9ja0UyRS4kaHR0cEJhY2tlbmQgZTJlICRodHRwQmFja2VuZH0gbW9jay5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ25nTW9ja0UyRScsIFsnbmcnXSkuY29uZmlnKFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSkge1xuICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRodHRwQmFja2VuZCcsIGFuZ3VsYXIubW9jay5lMmUuJGh0dHBCYWNrZW5kRGVjb3JhdG9yKTtcbn1dKS5pbmZvKHsgYW5ndWxhclZlcnNpb246ICcxLjcuOCcgfSk7XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRodHRwQmFja2VuZFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogRmFrZSBIVFRQIGJhY2tlbmQgaW1wbGVtZW50YXRpb24gc3VpdGFibGUgZm9yIGVuZC10by1lbmQgdGVzdGluZyBvciBiYWNrZW5kLWxlc3MgZGV2ZWxvcG1lbnQgb2ZcbiAqIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSB0aGUge0BsaW5rIG5nLiRodHRwICRodHRwIHNlcnZpY2V9LlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKk5vdGUqKjogRm9yIGZha2UgaHR0cCBiYWNrZW5kIGltcGxlbWVudGF0aW9uIHN1aXRhYmxlIGZvciB1bml0IHRlc3RpbmcgcGxlYXNlIHNlZVxuICoge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgdW5pdC10ZXN0aW5nICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIDwvZGl2PlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gY2FuIGJlIHVzZWQgdG8gcmVzcG9uZCB3aXRoIHN0YXRpYyBvciBkeW5hbWljIHJlc3BvbnNlcyB2aWEgdGhlIGB3aGVuYCBhcGlcbiAqIGFuZCBpdHMgc2hvcnRjdXRzIChgd2hlbkdFVGAsIGB3aGVuUE9TVGAsIGV0YykgYW5kIG9wdGlvbmFsbHkgcGFzcyB0aHJvdWdoIHJlcXVlc3RzIHRvIHRoZVxuICogcmVhbCAkaHR0cEJhY2tlbmQgZm9yIHNwZWNpZmljIHJlcXVlc3RzIChlLmcuIHRvIGludGVyYWN0IHdpdGggY2VydGFpbiByZW1vdGUgYXBpcyBvciB0byBmZXRjaFxuICogdGVtcGxhdGVzIGZyb20gYSB3ZWJzZXJ2ZXIpLlxuICpcbiAqIEFzIG9wcG9zZWQgdG8gdW5pdC10ZXN0aW5nLCBpbiBhbiBlbmQtdG8tZW5kIHRlc3Rpbmcgc2NlbmFyaW8gb3IgaW4gc2NlbmFyaW8gd2hlbiBhbiBhcHBsaWNhdGlvblxuICogaXMgYmVpbmcgZGV2ZWxvcGVkIHdpdGggdGhlIHJlYWwgYmFja2VuZCBhcGkgcmVwbGFjZWQgd2l0aCBhIG1vY2ssIGl0IGlzIG9mdGVuIGRlc2lyYWJsZSBmb3JcbiAqIGNlcnRhaW4gY2F0ZWdvcnkgb2YgcmVxdWVzdHMgdG8gYnlwYXNzIHRoZSBtb2NrIGFuZCBpc3N1ZSBhIHJlYWwgaHR0cCByZXF1ZXN0IChlLmcuIHRvIGZldGNoXG4gKiB0ZW1wbGF0ZXMgb3Igc3RhdGljIGZpbGVzIGZyb20gdGhlIHdlYnNlcnZlcikuIFRvIGNvbmZpZ3VyZSB0aGUgYmFja2VuZCB3aXRoIHRoaXMgYmVoYXZpb3JcbiAqIHVzZSB0aGUgYHBhc3NUaHJvdWdoYCByZXF1ZXN0IGhhbmRsZXIgb2YgYHdoZW5gIGluc3RlYWQgb2YgYHJlc3BvbmRgLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgd2UgZG9uJ3Qgd2FudCB0byBtYW51YWxseSBoYXZlIHRvIGZsdXNoIG1vY2tlZCBvdXQgcmVxdWVzdHMgbGlrZSB3ZSBkbyBkdXJpbmcgdW5pdFxuICogdGVzdGluZy4gRm9yIHRoaXMgcmVhc29uIHRoZSBlMmUgJGh0dHBCYWNrZW5kIGZsdXNoZXMgbW9ja2VkIG91dCByZXF1ZXN0c1xuICogYXV0b21hdGljYWxseSwgY2xvc2VseSBzaW11bGF0aW5nIHRoZSBiZWhhdmlvciBvZiB0aGUgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0LlxuICpcbiAqIFRvIHNldHVwIHRoZSBhcHBsaWNhdGlvbiB0byBydW4gd2l0aCB0aGlzIGh0dHAgYmFja2VuZCwgeW91IGhhdmUgdG8gY3JlYXRlIGEgbW9kdWxlIHRoYXQgZGVwZW5kc1xuICogb24gdGhlIGBuZ01vY2tFMkVgIGFuZCB5b3VyIGFwcGxpY2F0aW9uIG1vZHVsZXMgYW5kIGRlZmluZXMgdGhlIGZha2UgYmFja2VuZDpcbiAqXG4gKiBgYGBqc1xuICogICB2YXIgbXlBcHBEZXYgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHBEZXYnLCBbJ215QXBwJywgJ25nTW9ja0UyRSddKTtcbiAqICAgbXlBcHBEZXYucnVuKGZ1bmN0aW9uKCRodHRwQmFja2VuZCkge1xuICogICAgIHZhciBwaG9uZXMgPSBbe25hbWU6ICdwaG9uZTEnfSwge25hbWU6ICdwaG9uZTInfV07XG4gKlxuICogICAgIC8vIHJldHVybnMgdGhlIGN1cnJlbnQgbGlzdCBvZiBwaG9uZXNcbiAqICAgICAkaHR0cEJhY2tlbmQud2hlbkdFVCgnL3Bob25lcycpLnJlc3BvbmQocGhvbmVzKTtcbiAqXG4gKiAgICAgLy8gYWRkcyBhIG5ldyBwaG9uZSB0byB0aGUgcGhvbmVzIGFycmF5XG4gKiAgICAgJGh0dHBCYWNrZW5kLndoZW5QT1NUKCcvcGhvbmVzJykucmVzcG9uZChmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSkge1xuICogICAgICAgdmFyIHBob25lID0gYW5ndWxhci5mcm9tSnNvbihkYXRhKTtcbiAqICAgICAgIHBob25lcy5wdXNoKHBob25lKTtcbiAqICAgICAgIHJldHVybiBbMjAwLCBwaG9uZSwge31dO1xuICogICAgIH0pO1xuICogICAgICRodHRwQmFja2VuZC53aGVuR0VUKC9eXFwvdGVtcGxhdGVzXFwvLykucGFzc1Rocm91Z2goKTsgLy8gUmVxdWVzdHMgZm9yIHRlbXBsYXRlcyBhcmUgaGFuZGxlZCBieSB0aGUgcmVhbCBzZXJ2ZXJcbiAqICAgICAvLy4uLlxuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIEFmdGVyd2FyZHMsIGJvb3RzdHJhcCB5b3VyIGFwcCB3aXRoIHRoaXMgbmV3IG1vZHVsZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cImh0dHBiYWNrZW5kLWUyZS10ZXN0aW5nXCIgbW9kdWxlPVwibXlBcHBFMkVcIiBkZXBzPVwiYW5ndWxhci1tb2Nrcy5qc1wiPlxuICogPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICB2YXIgbXlBcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSk7XG4gKlxuICogICBteUFwcC5jb250cm9sbGVyKCdNYWluQ3RybCcsIGZ1bmN0aW9uIE1haW5DdHJsKCRodHRwKSB7XG4gKiAgICAgdmFyIGN0cmwgPSB0aGlzO1xuICpcbiAqICAgICBjdHJsLnBob25lcyA9IFtdO1xuICogICAgIGN0cmwubmV3UGhvbmUgPSB7XG4gKiAgICAgICBuYW1lOiAnJ1xuICogICAgIH07XG4gKlxuICogICAgIGN0cmwuZ2V0UGhvbmVzID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAkaHR0cC5nZXQoJy9waG9uZXMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gKiAgICAgICAgIGN0cmwucGhvbmVzID0gcmVzcG9uc2UuZGF0YTtcbiAqICAgICAgIH0pO1xuICogICAgIH07XG4gKlxuICogICAgIGN0cmwuYWRkUGhvbmUgPSBmdW5jdGlvbihwaG9uZSkge1xuICogICAgICAgJGh0dHAucG9zdCgnL3Bob25lcycsIHBob25lKS50aGVuKGZ1bmN0aW9uKCkge1xuICogICAgICAgICBjdHJsLm5ld1Bob25lID0ge25hbWU6ICcnfTtcbiAqICAgICAgICAgcmV0dXJuIGN0cmwuZ2V0UGhvbmVzKCk7XG4gKiAgICAgICB9KTtcbiAqICAgICB9O1xuICpcbiAqICAgICBjdHJsLmdldFBob25lcygpO1xuICogICB9KTtcbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJlMmUuanNcIj5cbiAqICAgdmFyIG15QXBwRGV2ID0gYW5ndWxhci5tb2R1bGUoJ215QXBwRTJFJywgWydteUFwcCcsICduZ01vY2tFMkUnXSk7XG4gKlxuICogICBteUFwcERldi5ydW4oZnVuY3Rpb24oJGh0dHBCYWNrZW5kKSB7XG4gKiAgICAgdmFyIHBob25lcyA9IFt7bmFtZTogJ3Bob25lMSd9LCB7bmFtZTogJ3Bob25lMid9XTtcbiAqXG4gKiAgICAgLy8gcmV0dXJucyB0aGUgY3VycmVudCBsaXN0IG9mIHBob25lc1xuICogICAgICRodHRwQmFja2VuZC53aGVuR0VUKCcvcGhvbmVzJykucmVzcG9uZChwaG9uZXMpO1xuICpcbiAqICAgICAvLyBhZGRzIGEgbmV3IHBob25lIHRvIHRoZSBwaG9uZXMgYXJyYXlcbiAqICAgICAkaHR0cEJhY2tlbmQud2hlblBPU1QoJy9waG9uZXMnKS5yZXNwb25kKGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhKSB7XG4gKiAgICAgICB2YXIgcGhvbmUgPSBhbmd1bGFyLmZyb21Kc29uKGRhdGEpO1xuICogICAgICAgcGhvbmVzLnB1c2gocGhvbmUpO1xuICogICAgICAgcmV0dXJuIFsyMDAsIHBob25lLCB7fV07XG4gKiAgICAgfSk7XG4gKiAgIH0pO1xuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkN0cmwgYXMgJGN0cmxcIj5cbiAqICAgPGZvcm0gbmFtZT1cIm5ld1Bob25lRm9ybVwiIG5nLXN1Ym1pdD1cIiRjdHJsLmFkZFBob25lKCRjdHJsLm5ld1Bob25lKVwiPlxuICogICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiJGN0cmwubmV3UGhvbmUubmFtZVwiPlxuICogICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJBZGQgUGhvbmVcIj5cbiAqICAgPC9mb3JtPlxuICogICA8aDE+UGhvbmVzPC9oMT5cbiAqICAgPHVsPlxuICogICAgIDxsaSBuZy1yZXBlYXQ9XCJwaG9uZSBpbiAkY3RybC5waG9uZXNcIj57e3Bob25lLm5hbWV9fTwvbGk+XG4gKiAgIDwvdWw+XG4gKiAgIDwvZGl2PlxuICogPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZCBIVFRQIG1ldGhvZC5cbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAqIEBwYXJhbSB7KHN0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKSk9fSBkYXRhIEhUVFAgcmVxdWVzdCBib2R5IG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXNcbiAqICAgZGF0YSBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGF0YSBpcyBhcyBleHBlY3RlZC5cbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbihPYmplY3QpKT19IGhlYWRlcnMgSFRUUCBoZWFkZXJzIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgaHR0cCBoZWFkZXJcbiAqICAgb2JqZWN0IGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGhlYWRlcnMgbWF0Y2ggdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKlxuICogIC0gcmVzcG9uZCDigJNcbiAqICAgIGBgYFxuICogICAgeyBmdW5jdGlvbihbc3RhdHVzLF0gZGF0YVssIGhlYWRlcnMsIHN0YXR1c1RleHRdKVxuICogICAgfCBmdW5jdGlvbihmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgaGVhZGVycywgcGFyYW1zKX1cbiAqICAgIGBgYFxuICogICAg4oCTIFRoZSByZXNwb25kIG1ldGhvZCB0YWtlcyBhIHNldCBvZiBzdGF0aWMgZGF0YSB0byBiZSByZXR1cm5lZCBvciBhIGZ1bmN0aW9uIHRoYXQgY2FuIHJldHVyblxuICogICAgYW4gYXJyYXkgY29udGFpbmluZyByZXNwb25zZSBzdGF0dXMgKG51bWJlciksIHJlc3BvbnNlIGRhdGEgKEFycmF5fE9iamVjdHxzdHJpbmcpLCByZXNwb25zZVxuICogICAgaGVhZGVycyAoT2JqZWN0KSwgYW5kIHRoZSB0ZXh0IGZvciB0aGUgc3RhdHVzIChzdHJpbmcpLlxuICogIC0gcGFzc1Rocm91Z2gg4oCTIGB7ZnVuY3Rpb24oKX1gIOKAkyBBbnkgcmVxdWVzdCBtYXRjaGluZyBhIGJhY2tlbmQgZGVmaW5pdGlvbiB3aXRoXG4gKiAgICBgcGFzc1Rocm91Z2hgIGhhbmRsZXIgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgcmVhbCBiYWNrZW5kIChhbiBYSFIgcmVxdWVzdCB3aWxsIGJlIG1hZGVcbiAqICAgIHRvIHRoZSBzZXJ2ZXIuKVxuICogIC0gQm90aCBtZXRob2RzIHJldHVybiB0aGUgYHJlcXVlc3RIYW5kbGVyYCBvYmplY3QgZm9yIHBvc3NpYmxlIG92ZXJyaWRlcy5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRodHRwQmFja2VuZCN3aGVuR0VUXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgR0VUIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkhFQURcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBIRUFEIHJlcXVlc3RzLiBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkRFTEVURVxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gZm9yIERFTEVURSByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QT1NUXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgUE9TVCByZXF1ZXN0cy4gRm9yIG1vcmUgaW5mbyBzZWUgYHdoZW4oKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZyk9fSB1cmwgSFRUUCB1cmwgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyBhIHVybFxuICogICBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cmwgbWF0Y2hlcyB0aGUgY3VycmVudCBkZWZpbml0aW9uLlxuICogQHBhcmFtIHsoc3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpKT19IGRhdGEgSFRUUCByZXF1ZXN0IGJvZHkgb3IgZnVuY3Rpb24gdGhhdCByZWNlaXZlc1xuICogICBkYXRhIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBkYXRhIGlzIGFzIGV4cGVjdGVkLlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKE9iamVjdCkpPX0gaGVhZGVycyBIVFRQIGhlYWRlcnMuXG4gKiBAcGFyYW0geyhBcnJheSk9fSBrZXlzIEFycmF5IG9mIGtleXMgdG8gYXNzaWduIHRvIHJlZ2V4IG1hdGNoZXMgaW4gcmVxdWVzdCB1cmwgZGVzY3JpYmVkIG9uXG4gKiAgIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kICRodHRwQmFja2VuZCBtb2NrfS5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5QVVRcbiAqIEBtb2R1bGUgbmdNb2NrRTJFXG4gKiBAZGVzY3JpcHRpb25cbiAqIENyZWF0ZXMgYSBuZXcgYmFja2VuZCBkZWZpbml0aW9uIGZvciBQVVQgcmVxdWVzdHMuICBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZykpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzXG4gKiAgIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQuXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlblBBVENIXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgUEFUQ0ggcmVxdWVzdHMuICBGb3IgbW9yZSBpbmZvIHNlZSBgd2hlbigpYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xSZWdFeHB8ZnVuY3Rpb24oc3RyaW5nKT19IHVybCBIVFRQIHVybCBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgdXJsXG4gKiAgIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIHVybCBtYXRjaGVzIHRoZSBjdXJyZW50IGRlZmluaXRpb24uXG4gKiBAcGFyYW0geyhzdHJpbmd8UmVnRXhwfGZ1bmN0aW9uKHN0cmluZykpPX0gZGF0YSBIVFRQIHJlcXVlc3QgYm9keSBvciBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzXG4gKiAgIGRhdGEgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGRhdGEgaXMgYXMgZXhwZWN0ZWQuXG4gKiBAcGFyYW0geyhPYmplY3R8ZnVuY3Rpb24oT2JqZWN0KSk9fSBoZWFkZXJzIEhUVFAgaGVhZGVycy5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmQjd2hlbkpTT05QXG4gKiBAbW9kdWxlIG5nTW9ja0UyRVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGJhY2tlbmQgZGVmaW5pdGlvbiBmb3IgSlNPTlAgcmVxdWVzdHMuIEZvciBtb3JlIGluZm8gc2VlIGB3aGVuKClgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfFJlZ0V4cHxmdW5jdGlvbihzdHJpbmcpPX0gdXJsIEhUVFAgdXJsIG9yIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSB1cmxcbiAqICAgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgdXJsIG1hdGNoZXMgdGhlIGN1cnJlbnQgZGVmaW5pdGlvbi5cbiAqIEBwYXJhbSB7KEFycmF5KT19IGtleXMgQXJyYXkgb2Yga2V5cyB0byBhc3NpZ24gdG8gcmVnZXggbWF0Y2hlcyBpbiByZXF1ZXN0IHVybCBkZXNjcmliZWQgb25cbiAqICAge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICogQHJldHVybnMge3JlcXVlc3RIYW5kbGVyfSBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGByZXNwb25kYCBhbmQgYHBhc3NUaHJvdWdoYCBtZXRob2RzIHRoYXRcbiAqICAgY29udHJvbCBob3cgYSBtYXRjaGVkIHJlcXVlc3QgaXMgaGFuZGxlZC4gWW91IGNhbiBzYXZlIHRoaXMgb2JqZWN0IGZvciBsYXRlciB1c2UgYW5kIGludm9rZVxuICogICBgcmVzcG9uZGAgb3IgYHBhc3NUaHJvdWdoYCBhZ2FpbiBpbiBvcmRlciB0byBjaGFuZ2UgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuXG4gKi9cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGh0dHBCYWNrZW5kI3doZW5Sb3V0ZVxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIG5ldyBiYWNrZW5kIGRlZmluaXRpb24gdGhhdCBjb21wYXJlcyBvbmx5IHdpdGggdGhlIHJlcXVlc3RlZCByb3V0ZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kIEhUVFAgbWV0aG9kLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBIVFRQIHVybCBzdHJpbmcgdGhhdCBzdXBwb3J0cyBjb2xvbiBwYXJhbSBtYXRjaGluZy5cbiAqIEByZXR1cm5zIHtyZXF1ZXN0SGFuZGxlcn0gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgcmVzcG9uZGAgYW5kIGBwYXNzVGhyb3VnaGAgbWV0aG9kcyB0aGF0XG4gKiAgIGNvbnRyb2wgaG93IGEgbWF0Y2hlZCByZXF1ZXN0IGlzIGhhbmRsZWQuIFlvdSBjYW4gc2F2ZSB0aGlzIG9iamVjdCBmb3IgbGF0ZXIgdXNlIGFuZCBpbnZva2VcbiAqICAgYHJlc3BvbmRgIG9yIGBwYXNzVGhyb3VnaGAgYWdhaW4gaW4gb3JkZXIgdG8gY2hhbmdlIGhvdyBhIG1hdGNoZWQgcmVxdWVzdCBpcyBoYW5kbGVkLlxuICovXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICAkaHR0cEJhY2tlbmQjbWF0Y2hMYXRlc3REZWZpbml0aW9uRW5hYmxlZFxuICogQG1vZHVsZSBuZ01vY2tFMkVcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gY2hhbmdlIHdoaWNoIG1vY2tlZCByZXNwb25zZXMgYCRodHRwQmFja2VuZGAgcmV0dXJucywgd2hlbiBkZWZpbmluZ1xuICogdGhlbSB3aXRoIHtAbGluayBuZ01vY2suJGh0dHBCYWNrZW5kI3doZW4gJGh0dHBCYWNrZW5kLndoZW4oKX0gKGFuZCBzaG9ydGN1dCBtZXRob2RzKS5cbiAqIEJ5IGRlZmF1bHQsIGAkaHR0cEJhY2tlbmRgIHJldHVybnMgdGhlIGZpcnN0IGRlZmluaXRpb24gdGhhdCBtYXRjaGVzLiBXaGVuIHNldHRpbmdcbiAqIGAkaHR0cC5tYXRjaExhdGVzdERlZmluaXRpb25FbmFibGVkKHRydWUpYCwgaXQgd2lsbCB1c2UgdGhlIGxhc3QgcmVzcG9uc2UgdGhhdCBtYXRjaGVzLCBpLmUuIHRoZVxuICogb25lIHRoYXQgd2FzIGFkZGVkIGxhc3QuXG4gKlxuICogYGBganNcbiAqIGhiLndoZW4oJ0dFVCcsICcvdXJsMScpLnJlc3BvbmQoMjAwLCAnY29udGVudCcsIHt9KTtcbiAqIGhiLndoZW4oJ0dFVCcsICcvdXJsMScpLnJlc3BvbmQoMjAxLCAnYW5vdGhlcicsIHt9KTtcbiAqIGhiKCdHRVQnLCAnL3VybDEnKTsgLy8gcmVjZWl2ZXMgXCJjb250ZW50XCJcbiAqXG4gKiAkaHR0cC5tYXRjaExhdGVzdERlZmluaXRpb25FbmFibGVkKHRydWUpXG4gKiBoYignR0VUJywgJy91cmwxJyk7IC8vIHJlY2VpdmVzIFwiYW5vdGhlclwiXG4gKlxuICogaGIud2hlbignR0VUJywgJy91cmwxJykucmVzcG9uZCgyMDEsICdvbmVtb3JlJywge30pO1xuICogaGIoJ0dFVCcsICcvdXJsMScpOyAvLyByZWNlaXZlcyBcIm9uZW1vcmVcIlxuICogYGBgXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgaWYgYSB5b3UgaGF2ZSBhIGRlZmF1bHQgcmVzcG9uc2UgdGhhdCBpcyBvdmVycmlkZW4gaW5zaWRlIHNwZWNpZmljIHRlc3RzLlxuICpcbiAqIE5vdGUgdGhhdCBkaWZmZXJlbnQgZnJvbSBjb25maWcgbWV0aG9kcyBvbiBwcm92aWRlcnMsIGBtYXRjaExhdGVzdERlZmluaXRpb25FbmFibGVkKClgIGNhbiBiZSBjaGFuZ2VkXG4gKiBldmVuIHdoZW4gdGhlIGFwcGxpY2F0aW9uIGlzIGFscmVhZHkgcnVubmluZy5cbiAqXG4gKiBAcGFyYW0gIHtCb29sZWFuPX0gdmFsdWUgdmFsdWUgdG8gc2V0LCBlaXRoZXIgYHRydWVgIG9yIGBmYWxzZWAuIERlZmF1bHQgaXMgYGZhbHNlYC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBvbWl0dGVkLCBpdCB3aWxsIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAqIEByZXR1cm4geyRodHRwQmFja2VuZHxCb29sZWFufSBzZWxmIHdoZW4gdXNlZCBhcyBhIHNldHRlciwgYW5kIHRoZSBjdXJyZW50IHZhbHVlIHdoZW4gdXNlZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzIGEgZ2V0dGVyXG4gKi9cbmFuZ3VsYXIubW9jay5lMmUgPSB7fTtcbmFuZ3VsYXIubW9jay5lMmUuJGh0dHBCYWNrZW5kRGVjb3JhdG9yID1cbiAgWyckcm9vdFNjb3BlJywgJyR0aW1lb3V0JywgJyRkZWxlZ2F0ZScsICckYnJvd3NlcicsIGNyZWF0ZUh0dHBCYWNrZW5kTW9ja107XG5cblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgJHJvb3RTY29wZS5TY29wZVxuICogQG1vZHVsZSBuZ01vY2tcbiAqIEBkZXNjcmlwdGlvblxuICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IHR5cGUgZGVjb3JhdGVkIHdpdGggaGVscGVyIG1ldGhvZHMgdXNlZnVsIGZvciB0ZXN0aW5nLiBUaGVzZVxuICogbWV0aG9kcyBhcmUgYXV0b21hdGljYWxseSBhdmFpbGFibGUgb24gYW55IHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIFNjb3BlfSBpbnN0YW5jZSB3aGVuXG4gKiBgbmdNb2NrYCBtb2R1bGUgaXMgbG9hZGVkLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIGFsbCB0aGUgcmVndWxhciBgU2NvcGVgIG1ldGhvZHMsIHRoZSBmb2xsb3dpbmcgaGVscGVyIG1ldGhvZHMgYXJlIGF2YWlsYWJsZTpcbiAqL1xuYW5ndWxhci5tb2NrLiRSb290U2NvcGVEZWNvcmF0b3IgPSBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKCRkZWxlZ2F0ZSkge1xuXG4gIHZhciAkcm9vdFNjb3BlUHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKCRkZWxlZ2F0ZSk7XG5cbiAgJHJvb3RTY29wZVByb3RvdHlwZS4kY291bnRDaGlsZFNjb3BlcyA9IGNvdW50Q2hpbGRTY29wZXM7XG4gICRyb290U2NvcGVQcm90b3R5cGUuJGNvdW50V2F0Y2hlcnMgPSBjb3VudFdhdGNoZXJzO1xuXG4gIHJldHVybiAkZGVsZWdhdGU7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkY291bnRDaGlsZFNjb3Blc1xuICAgKiBAbW9kdWxlIG5nTW9ja1xuICAgKiBAdGhpcyAkcm9vdFNjb3BlLlNjb3BlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDb3VudHMgYWxsIHRoZSBkaXJlY3QgYW5kIGluZGlyZWN0IGNoaWxkIHNjb3BlcyBvZiB0aGUgY3VycmVudCBzY29wZS5cbiAgICpcbiAgICogVGhlIGN1cnJlbnQgc2NvcGUgaXMgZXhjbHVkZWQgZnJvbSB0aGUgY291bnQuIFRoZSBjb3VudCBpbmNsdWRlcyBhbGwgaXNvbGF0ZSBjaGlsZCBzY29wZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFRvdGFsIG51bWJlciBvZiBjaGlsZCBzY29wZXMuXG4gICAqL1xuICBmdW5jdGlvbiBjb3VudENoaWxkU2NvcGVzKCkge1xuICAgIHZhciBjb3VudCA9IDA7IC8vIGV4Y2x1ZGUgdGhlIGN1cnJlbnQgc2NvcGVcbiAgICB2YXIgcGVuZGluZ0NoaWxkSGVhZHMgPSBbdGhpcy4kJGNoaWxkSGVhZF07XG4gICAgdmFyIGN1cnJlbnRTY29wZTtcblxuICAgIHdoaWxlIChwZW5kaW5nQ2hpbGRIZWFkcy5sZW5ndGgpIHtcbiAgICAgIGN1cnJlbnRTY29wZSA9IHBlbmRpbmdDaGlsZEhlYWRzLnNoaWZ0KCk7XG5cbiAgICAgIHdoaWxlIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgcGVuZGluZ0NoaWxkSGVhZHMucHVzaChjdXJyZW50U2NvcGUuJCRjaGlsZEhlYWQpO1xuICAgICAgICBjdXJyZW50U2NvcGUgPSBjdXJyZW50U2NvcGUuJCRuZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY291bnQ7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGNvdW50V2F0Y2hlcnNcbiAgICogQHRoaXMgJHJvb3RTY29wZS5TY29wZVxuICAgKiBAbW9kdWxlIG5nTW9ja1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ291bnRzIGFsbCB0aGUgd2F0Y2hlcnMgb2YgZGlyZWN0IGFuZCBpbmRpcmVjdCBjaGlsZCBzY29wZXMgb2YgdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAqXG4gICAqIFRoZSB3YXRjaGVycyBvZiB0aGUgY3VycmVudCBzY29wZSBhcmUgaW5jbHVkZWQgaW4gdGhlIGNvdW50IGFuZCBzbyBhcmUgYWxsIHRoZSB3YXRjaGVycyBvZlxuICAgKiBpc29sYXRlIGNoaWxkIHNjb3Blcy5cbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgbnVtYmVyIG9mIHdhdGNoZXJzLlxuICAgKi9cbiAgZnVuY3Rpb24gY291bnRXYXRjaGVycygpIHtcbiAgICB2YXIgY291bnQgPSB0aGlzLiQkd2F0Y2hlcnMgPyB0aGlzLiQkd2F0Y2hlcnMubGVuZ3RoIDogMDsgLy8gaW5jbHVkZSB0aGUgY3VycmVudCBzY29wZVxuICAgIHZhciBwZW5kaW5nQ2hpbGRIZWFkcyA9IFt0aGlzLiQkY2hpbGRIZWFkXTtcbiAgICB2YXIgY3VycmVudFNjb3BlO1xuXG4gICAgd2hpbGUgKHBlbmRpbmdDaGlsZEhlYWRzLmxlbmd0aCkge1xuICAgICAgY3VycmVudFNjb3BlID0gcGVuZGluZ0NoaWxkSGVhZHMuc2hpZnQoKTtcblxuICAgICAgd2hpbGUgKGN1cnJlbnRTY29wZSkge1xuICAgICAgICBjb3VudCArPSBjdXJyZW50U2NvcGUuJCR3YXRjaGVycyA/IGN1cnJlbnRTY29wZS4kJHdhdGNoZXJzLmxlbmd0aCA6IDA7XG4gICAgICAgIHBlbmRpbmdDaGlsZEhlYWRzLnB1c2goY3VycmVudFNjb3BlLiQkY2hpbGRIZWFkKTtcbiAgICAgICAgY3VycmVudFNjb3BlID0gY3VycmVudFNjb3BlLiQkbmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG59XTtcblxuXG4oZnVuY3Rpb24oamFzbWluZU9yTW9jaGEpIHtcblxuICBpZiAoIWphc21pbmVPck1vY2hhKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGN1cnJlbnRTcGVjID0gbnVsbCxcbiAgICAgIGluamVjdG9yU3RhdGUgPSBuZXcgSW5qZWN0b3JTdGF0ZSgpLFxuICAgICAgYW5ub3RhdGVkRnVuY3Rpb25zID0gW10sXG4gICAgICB3YXNJbmplY3RvckNyZWF0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhY3VycmVudFNwZWM7XG4gICAgICB9O1xuXG4gIGFuZ3VsYXIubW9jay4kJGFubm90YXRlID0gYW5ndWxhci5pbmplY3Rvci4kJGFubm90YXRlO1xuICBhbmd1bGFyLmluamVjdG9yLiQkYW5ub3RhdGUgPSBmdW5jdGlvbihmbikge1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgJiYgIWZuLiRpbmplY3QpIHtcbiAgICAgIGFubm90YXRlZEZ1bmN0aW9ucy5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIGFuZ3VsYXIubW9jay4kJGFubm90YXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBhbmd1bGFyLm1vY2subW9kdWxlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiAqTk9URSo6IFRoaXMgZnVuY3Rpb24gaXMgYWxzbyBwdWJsaXNoZWQgb24gd2luZG93IGZvciBlYXN5IGFjY2Vzcy48YnI+XG4gICAqICpOT1RFKjogVGhpcyBmdW5jdGlvbiBpcyBkZWNsYXJlZCBPTkxZIFdIRU4gcnVubmluZyB0ZXN0cyB3aXRoIGphc21pbmUgb3IgbW9jaGFcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiByZWdpc3RlcnMgYSBtb2R1bGUgY29uZmlndXJhdGlvbiBjb2RlLiBJdCBjb2xsZWN0cyB0aGUgY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvblxuICAgKiB3aGljaCB3aWxsIGJlIHVzZWQgd2hlbiB0aGUgaW5qZWN0b3IgaXMgY3JlYXRlZCBieSB7QGxpbmsgYW5ndWxhci5tb2NrLmluamVjdCBpbmplY3R9LlxuICAgKlxuICAgKiBTZWUge0BsaW5rIGFuZ3VsYXIubW9jay5pbmplY3QgaW5qZWN0fSBmb3IgdXNhZ2UgZXhhbXBsZVxuICAgKlxuICAgKiBAcGFyYW0gey4uLihzdHJpbmd8RnVuY3Rpb258T2JqZWN0KX0gZm5zIGFueSBudW1iZXIgb2YgbW9kdWxlcyB3aGljaCBhcmUgcmVwcmVzZW50ZWQgYXMgc3RyaW5nXG4gICAqICAgICAgICBhbGlhc2VzIG9yIGFzIGFub255bW91cyBtb2R1bGUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb25zLiBUaGUgbW9kdWxlcyBhcmUgdXNlZCB0b1xuICAgKiAgICAgICAgY29uZmlndXJlIHRoZSBpbmplY3Rvci4gVGhlICduZycgYW5kICduZ01vY2snIG1vZHVsZXMgYXJlIGF1dG9tYXRpY2FsbHkgbG9hZGVkLiBJZiBhblxuICAgKiAgICAgICAgb2JqZWN0IGxpdGVyYWwgaXMgcGFzc2VkIGVhY2gga2V5LXZhbHVlIHBhaXIgd2lsbCBiZSByZWdpc3RlcmVkIG9uIHRoZSBtb2R1bGUgdmlhXG4gICAqICAgICAgICB7QGxpbmsgYXV0by4kcHJvdmlkZSAkcHJvdmlkZX0udmFsdWUsIHRoZSBrZXkgYmVpbmcgdGhlIHN0cmluZyBuYW1lIChvciB0b2tlbikgdG8gYXNzb2NpYXRlXG4gICAqICAgICAgICB3aXRoIHRoZSB2YWx1ZSBvbiB0aGUgaW5qZWN0b3IuXG4gICAqL1xuICB2YXIgbW9kdWxlID0gd2luZG93Lm1vZHVsZSA9IGFuZ3VsYXIubW9jay5tb2R1bGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbW9kdWxlRm5zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICByZXR1cm4gd2FzSW5qZWN0b3JDcmVhdGVkKCkgPyB3b3JrRm4oKSA6IHdvcmtGbjtcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBmdW5jdGlvbiB3b3JrRm4oKSB7XG4gICAgICBpZiAoY3VycmVudFNwZWMuJGluamVjdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW5qZWN0b3IgYWxyZWFkeSBjcmVhdGVkLCBjYW4gbm90IHJlZ2lzdGVyIGEgbW9kdWxlIScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZuLCBtb2R1bGVzID0gY3VycmVudFNwZWMuJG1vZHVsZXMgfHwgKGN1cnJlbnRTcGVjLiRtb2R1bGVzID0gW10pO1xuICAgICAgICBhbmd1bGFyLmZvckVhY2gobW9kdWxlRm5zLCBmdW5jdGlvbihtb2R1bGUpIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc09iamVjdChtb2R1bGUpICYmICFhbmd1bGFyLmlzQXJyYXkobW9kdWxlKSkge1xuICAgICAgICAgICAgZm4gPSBbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZHVsZSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICRwcm92aWRlLnZhbHVlKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1dO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmbiA9IG1vZHVsZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRTcGVjLiRwcm92aWRlckluamVjdG9yKSB7XG4gICAgICAgICAgICBjdXJyZW50U3BlYy4kcHJvdmlkZXJJbmplY3Rvci5pbnZva2UoZm4pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb2R1bGVzLnB1c2goZm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG1vZHVsZS4kJGJlZm9yZUFsbEhvb2sgPSAod2luZG93LmJlZm9yZSB8fCB3aW5kb3cuYmVmb3JlQWxsKTtcbiAgbW9kdWxlLiQkYWZ0ZXJBbGxIb29rID0gKHdpbmRvdy5hZnRlciB8fCB3aW5kb3cuYWZ0ZXJBbGwpO1xuXG4gIC8vIHB1cmVseSBmb3IgdGVzdGluZyBuZ01vY2sgaXRzZWxmXG4gIG1vZHVsZS4kJGN1cnJlbnRTcGVjID0gZnVuY3Rpb24odG8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRvO1xuICAgIGN1cnJlbnRTcGVjID0gdG87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBhbmd1bGFyLm1vY2subW9kdWxlLnNoYXJlZEluamVjdG9yXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiAqTk9URSo6IFRoaXMgZnVuY3Rpb24gaXMgZGVjbGFyZWQgT05MWSBXSEVOIHJ1bm5pbmcgdGVzdHMgd2l0aCBqYXNtaW5lIG9yIG1vY2hhXG4gICAqXG4gICAqIFRoaXMgZnVuY3Rpb24gZW5zdXJlcyBhIHNpbmdsZSBpbmplY3RvciB3aWxsIGJlIHVzZWQgZm9yIGFsbCB0ZXN0cyBpbiBhIGdpdmVuIGRlc2NyaWJlIGNvbnRleHQuXG4gICAqIFRoaXMgY29udHJhc3RzIHdpdGggdGhlIGRlZmF1bHQgYmVoYXZpb3VyIHdoZXJlIGEgbmV3IGluamVjdG9yIGlzIGNyZWF0ZWQgcGVyIHRlc3QgY2FzZS5cbiAgICpcbiAgICogVXNlIHNoYXJlZEluamVjdG9yIHdoZW4geW91IHdhbnQgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgSmFzbWluZSdzIGBiZWZvcmVBbGwoKWAsIG9yIG1vY2hhJ3NcbiAgICogYGJlZm9yZSgpYCBtZXRob2RzLiBDYWxsIGBtb2R1bGUuc2hhcmVkSW5qZWN0b3IoKWAgYmVmb3JlIHlvdSBzZXR1cCBhbnkgb3RoZXIgaG9va3MgdGhhdFxuICAgKiB3aWxsIGNyZWF0ZSAoaS5lIGNhbGwgYG1vZHVsZSgpYCkgb3IgdXNlIChpLmUgY2FsbCBgaW5qZWN0KClgKSB0aGUgaW5qZWN0b3IuXG4gICAqXG4gICAqIFlvdSBjYW5ub3QgY2FsbCBgc2hhcmVkSW5qZWN0b3IoKWAgZnJvbSB3aXRoaW4gYSBjb250ZXh0IGFscmVhZHkgdXNpbmcgYHNoYXJlZEluamVjdG9yKClgLlxuICAgKlxuICAgKiAjIyBFeGFtcGxlXG4gICAqXG4gICAqIFR5cGljYWxseSBiZWZvcmVBbGwgaXMgdXNlZCB0byBtYWtlIG1hbnkgYXNzZXJ0aW9ucyBhYm91dCBhIHNpbmdsZSBvcGVyYXRpb24uIFRoaXMgY2FuXG4gICAqIGN1dCBkb3duIHRlc3QgcnVuLXRpbWUgYXMgdGhlIHRlc3Qgc2V0dXAgZG9lc24ndCBuZWVkIHRvIGJlIHJlLXJ1biwgYW5kIGVuYWJsaW5nIGZvY3Vzc2VkXG4gICAqIHRlc3RzIGVhY2ggd2l0aCBhIHNpbmdsZSBhc3NlcnRpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGRlc2NyaWJlKFwiRGVlcCBUaG91Z2h0XCIsIGZ1bmN0aW9uKCkge1xuICAgKlxuICAgKiAgIG1vZHVsZS5zaGFyZWRJbmplY3RvcigpO1xuICAgKlxuICAgKiAgIGJlZm9yZUFsbChtb2R1bGUoXCJVbHRpbWF0ZVF1ZXN0aW9uXCIpKTtcbiAgICpcbiAgICogICBiZWZvcmVBbGwoaW5qZWN0KGZ1bmN0aW9uKERlZXBUaG91Z2h0KSB7XG4gICAqICAgICBleHBlY3QoRGVlcFRob3VnaHQuYW5zd2VyKS50b0JlVW5kZWZpbmVkKCk7XG4gICAqICAgICBEZWVwVGhvdWdodC5nZW5lcmF0ZUFuc3dlcigpO1xuICAgKiAgIH0pKTtcbiAgICpcbiAgICogICBpdChcImhhcyBjYWxjdWxhdGVkIHRoZSBhbnN3ZXIgY29ycmVjdGx5XCIsIGluamVjdChmdW5jdGlvbihEZWVwVGhvdWdodCkge1xuICAgKiAgICAgLy8gQmVjYXVzZSBvZiBzaGFyZWRJbmplY3Rvciwgd2UgaGF2ZSBhY2Nlc3MgdG8gdGhlIGluc3RhbmNlIG9mIHRoZSBEZWVwVGhvdWdodCBzZXJ2aWNlXG4gICAqICAgICAvLyB0aGF0IHdhcyBwcm92aWRlZCB0byB0aGUgYmVmb3JlQWxsKCkgaG9vay4gVGhlcmVmb3JlIHdlIGNhbiB0ZXN0IHRoZSBnZW5lcmF0ZWQgYW5zd2VyXG4gICAqICAgICBleHBlY3QoRGVlcFRob3VnaHQuYW5zd2VyKS50b0JlKDQyKTtcbiAgICogICB9KSk7XG4gICAqXG4gICAqICAgaXQoXCJoYXMgY2FsY3VsYXRlZCB0aGUgYW5zd2VyIHdpdGhpbiB0aGUgZXhwZWN0ZWQgdGltZVwiLCBpbmplY3QoZnVuY3Rpb24oRGVlcFRob3VnaHQpIHtcbiAgICogICAgIGV4cGVjdChEZWVwVGhvdWdodC5ydW5UaW1lTWlsbGVubmlhKS50b0JlTGVzc1RoYW4oODAwMCk7XG4gICAqICAgfSkpO1xuICAgKlxuICAgKiAgIGl0KFwiaGFzIGRvdWJsZSBjaGVja2VkIHRoZSBhbnN3ZXJcIiwgaW5qZWN0KGZ1bmN0aW9uKERlZXBUaG91Z2h0KSB7XG4gICAqICAgICBleHBlY3QoRGVlcFRob3VnaHQuYWJzb2x1dGVseVN1cmVJdElzVGhlUmlnaHRBbnN3ZXIpLnRvQmUodHJ1ZSk7XG4gICAqICAgfSkpO1xuICAgKlxuICAgKiB9KTtcbiAgICpcbiAgICogYGBgXG4gICAqL1xuICBtb2R1bGUuc2hhcmVkSW5qZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIShtb2R1bGUuJCRiZWZvcmVBbGxIb29rICYmIG1vZHVsZS4kJGFmdGVyQWxsSG9vaykpIHtcbiAgICAgIHRocm93IEVycm9yKCdzaGFyZWRJbmplY3RvcigpIGNhbm5vdCBiZSB1c2VkIHVubGVzcyB5b3VyIHRlc3QgcnVubmVyIGRlZmluZXMgYmVmb3JlQWxsL2FmdGVyQWxsJyk7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICBtb2R1bGUuJCRiZWZvcmVBbGxIb29rKC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChpbmplY3RvclN0YXRlLnNoYXJlZCkge1xuICAgICAgICBpbmplY3RvclN0YXRlLnNoYXJlZEVycm9yID0gRXJyb3IoJ3NoYXJlZEluamVjdG9yKCkgY2Fubm90IGJlIGNhbGxlZCBpbnNpZGUgYSBjb250ZXh0IHRoYXQgaGFzIGFscmVhZHkgY2FsbGVkIHNoYXJlZEluamVjdG9yKCknKTtcbiAgICAgICAgdGhyb3cgaW5qZWN0b3JTdGF0ZS5zaGFyZWRFcnJvcjtcbiAgICAgIH1cbiAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIGN1cnJlbnRTcGVjID0gdGhpcztcbiAgICAgIGluamVjdG9yU3RhdGUuc2hhcmVkID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIG1vZHVsZS4kJGFmdGVyQWxsSG9vayhmdW5jdGlvbigpIHtcbiAgICAgIGlmIChpbml0aWFsaXplZCkge1xuICAgICAgICBpbmplY3RvclN0YXRlID0gbmV3IEluamVjdG9yU3RhdGUoKTtcbiAgICAgICAgbW9kdWxlLiQkY2xlYW51cCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5qZWN0b3JTdGF0ZS5zaGFyZWRFcnJvciA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgbW9kdWxlLiQkYmVmb3JlRWFjaCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChpbmplY3RvclN0YXRlLnNoYXJlZCAmJiBjdXJyZW50U3BlYyAmJiBjdXJyZW50U3BlYyAhPT0gdGhpcykge1xuICAgICAgdmFyIHN0YXRlID0gY3VycmVudFNwZWM7XG4gICAgICBjdXJyZW50U3BlYyA9IHRoaXM7XG4gICAgICBhbmd1bGFyLmZvckVhY2goWyckaW5qZWN0b3InLCckbW9kdWxlcycsJyRwcm92aWRlckluamVjdG9yJywgJyRpbmplY3RvclN0cmljdCddLCBmdW5jdGlvbihrKSB7XG4gICAgICAgIGN1cnJlbnRTcGVjW2tdID0gc3RhdGVba107XG4gICAgICAgIHN0YXRlW2tdID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50U3BlYyA9IHRoaXM7XG4gICAgICBvcmlnaW5hbFJvb3RFbGVtZW50ID0gbnVsbDtcbiAgICAgIGFubm90YXRlZEZ1bmN0aW9ucyA9IFtdO1xuICAgIH1cbiAgfTtcblxuICBtb2R1bGUuJCRhZnRlckVhY2ggPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoaW5qZWN0b3JTdGF0ZS5jbGVhbnVwQWZ0ZXJFYWNoKCkpIHtcbiAgICAgIG1vZHVsZS4kJGNsZWFudXAoKTtcbiAgICB9XG4gIH07XG5cbiAgbW9kdWxlLiQkY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmplY3RvciA9IGN1cnJlbnRTcGVjLiRpbmplY3RvcjtcblxuICAgIGFubm90YXRlZEZ1bmN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGZuKSB7XG4gICAgICBkZWxldGUgZm4uJGluamVjdDtcbiAgICB9KTtcblxuICAgIGN1cnJlbnRTcGVjLiRpbmplY3RvciA9IG51bGw7XG4gICAgY3VycmVudFNwZWMuJG1vZHVsZXMgPSBudWxsO1xuICAgIGN1cnJlbnRTcGVjLiRwcm92aWRlckluamVjdG9yID0gbnVsbDtcbiAgICBjdXJyZW50U3BlYyA9IG51bGw7XG5cbiAgICBpZiAoaW5qZWN0b3IpIHtcbiAgICAgIC8vIEVuc3VyZSBgJHJvb3RFbGVtZW50YCBpcyBpbnN0YW50aWF0ZWQsIGJlZm9yZSBjaGVja2luZyBgb3JpZ2luYWxSb290RWxlbWVudGBcbiAgICAgIHZhciAkcm9vdEVsZW1lbnQgPSBpbmplY3Rvci5nZXQoJyRyb290RWxlbWVudCcpO1xuICAgICAgdmFyIHJvb3ROb2RlID0gJHJvb3RFbGVtZW50ICYmICRyb290RWxlbWVudFswXTtcbiAgICAgIHZhciBjbGVhblVwTm9kZXMgPSAhb3JpZ2luYWxSb290RWxlbWVudCA/IFtdIDogW29yaWdpbmFsUm9vdEVsZW1lbnRbMF1dO1xuICAgICAgaWYgKHJvb3ROb2RlICYmICghb3JpZ2luYWxSb290RWxlbWVudCB8fCByb290Tm9kZSAhPT0gb3JpZ2luYWxSb290RWxlbWVudFswXSkpIHtcbiAgICAgICAgY2xlYW5VcE5vZGVzLnB1c2gocm9vdE5vZGUpO1xuICAgICAgfVxuICAgICAgYW5ndWxhci5lbGVtZW50LmNsZWFuRGF0YShjbGVhblVwTm9kZXMpO1xuXG4gICAgICAvLyBFbnN1cmUgYCRkZXN0cm95KClgIGlzIGF2YWlsYWJsZSwgYmVmb3JlIGNhbGxpbmcgaXRcbiAgICAgIC8vIChhIG1vY2tlZCBgJHJvb3RTY29wZWAgbWlnaHQgbm90IGltcGxlbWVudCBpdCAob3Igbm90IGV2ZW4gYmUgYW4gb2JqZWN0IGF0IGFsbCkpXG4gICAgICB2YXIgJHJvb3RTY29wZSA9IGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpO1xuICAgICAgaWYgKCRyb290U2NvcGUgJiYgJHJvb3RTY29wZS4kZGVzdHJveSkgJHJvb3RTY29wZS4kZGVzdHJveSgpO1xuICAgIH1cblxuICAgIC8vIGNsZWFuIHVwIGpxdWVyeSdzIGZyYWdtZW50IGNhY2hlXG4gICAgYW5ndWxhci5mb3JFYWNoKGFuZ3VsYXIuZWxlbWVudC5mcmFnbWVudHMsIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgICBkZWxldGUgYW5ndWxhci5lbGVtZW50LmZyYWdtZW50c1trZXldO1xuICAgIH0pO1xuXG4gICAgTW9ja1hoci4kJGxhc3RJbnN0YW5jZSA9IG51bGw7XG5cbiAgICBhbmd1bGFyLmZvckVhY2goYW5ndWxhci5jYWxsYmFja3MsIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgICBkZWxldGUgYW5ndWxhci5jYWxsYmFja3Nba2V5XTtcbiAgICB9KTtcbiAgICBhbmd1bGFyLmNhbGxiYWNrcy4kJGNvdW50ZXIgPSAwO1xuICB9O1xuXG4gICh3aW5kb3cuYmVmb3JlRWFjaCB8fCB3aW5kb3cuc2V0dXApKG1vZHVsZS4kJGJlZm9yZUVhY2gpO1xuICAod2luZG93LmFmdGVyRWFjaCB8fCB3aW5kb3cudGVhcmRvd24pKG1vZHVsZS4kJGFmdGVyRWFjaCk7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgKiBAbmFtZSBhbmd1bGFyLm1vY2suaW5qZWN0XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiAqTk9URSo6IFRoaXMgZnVuY3Rpb24gaXMgYWxzbyBwdWJsaXNoZWQgb24gd2luZG93IGZvciBlYXN5IGFjY2Vzcy48YnI+XG4gICAqICpOT1RFKjogVGhpcyBmdW5jdGlvbiBpcyBkZWNsYXJlZCBPTkxZIFdIRU4gcnVubmluZyB0ZXN0cyB3aXRoIGphc21pbmUgb3IgbW9jaGFcbiAgICpcbiAgICogVGhlIGluamVjdCBmdW5jdGlvbiB3cmFwcyBhIGZ1bmN0aW9uIGludG8gYW4gaW5qZWN0YWJsZSBmdW5jdGlvbi4gVGhlIGluamVjdCgpIGNyZWF0ZXMgbmV3XG4gICAqIGluc3RhbmNlIG9mIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9IHBlciB0ZXN0LCB3aGljaCBpcyB0aGVuIHVzZWQgZm9yXG4gICAqIHJlc29sdmluZyByZWZlcmVuY2VzLlxuICAgKlxuICAgKlxuICAgKiAjIyBSZXNvbHZpbmcgUmVmZXJlbmNlcyAoVW5kZXJzY29yZSBXcmFwcGluZylcbiAgICogT2Z0ZW4sIHdlIHdvdWxkIGxpa2UgdG8gaW5qZWN0IGEgcmVmZXJlbmNlIG9uY2UsIGluIGEgYGJlZm9yZUVhY2goKWAgYmxvY2sgYW5kIHJldXNlIHRoaXNcbiAgICogaW4gbXVsdGlwbGUgYGl0KClgIGNsYXVzZXMuIFRvIGJlIGFibGUgdG8gZG8gdGhpcyB3ZSBtdXN0IGFzc2lnbiB0aGUgcmVmZXJlbmNlIHRvIGEgdmFyaWFibGVcbiAgICogdGhhdCBpcyBkZWNsYXJlZCBpbiB0aGUgc2NvcGUgb2YgdGhlIGBkZXNjcmliZSgpYCBibG9jay4gU2luY2Ugd2Ugd291bGQsIG1vc3QgbGlrZWx5LCB3YW50XG4gICAqIHRoZSB2YXJpYWJsZSB0byBoYXZlIHRoZSBzYW1lIG5hbWUgb2YgdGhlIHJlZmVyZW5jZSB3ZSBoYXZlIGEgcHJvYmxlbSwgc2luY2UgdGhlIHBhcmFtZXRlclxuICAgKiB0byB0aGUgYGluamVjdCgpYCBmdW5jdGlvbiB3b3VsZCBoaWRlIHRoZSBvdXRlciB2YXJpYWJsZS5cbiAgICpcbiAgICogVG8gaGVscCB3aXRoIHRoaXMsIHRoZSBpbmplY3RlZCBwYXJhbWV0ZXJzIGNhbiwgb3B0aW9uYWxseSwgYmUgZW5jbG9zZWQgd2l0aCB1bmRlcnNjb3Jlcy5cbiAgICogVGhlc2UgYXJlIGlnbm9yZWQgYnkgdGhlIGluamVjdG9yIHdoZW4gdGhlIHJlZmVyZW5jZSBuYW1lIGlzIHJlc29sdmVkLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgdGhlIHBhcmFtZXRlciBgX215U2VydmljZV9gIHdvdWxkIGJlIHJlc29sdmVkIGFzIHRoZSByZWZlcmVuY2UgYG15U2VydmljZWAuXG4gICAqIFNpbmNlIGl0IGlzIGF2YWlsYWJsZSBpbiB0aGUgZnVuY3Rpb24gYm9keSBhcyBgX215U2VydmljZV9gLCB3ZSBjYW4gdGhlbiBhc3NpZ24gaXQgdG8gYSB2YXJpYWJsZVxuICAgKiBkZWZpbmVkIGluIGFuIG91dGVyIHNjb3BlLlxuICAgKlxuICAgKiBgYGBcbiAgICogLy8gRGVmaW5lZCBvdXQgcmVmZXJlbmNlIHZhcmlhYmxlIG91dHNpZGVcbiAgICogdmFyIG15U2VydmljZTtcbiAgICpcbiAgICogLy8gV3JhcCB0aGUgcGFyYW1ldGVyIGluIHVuZGVyc2NvcmVzXG4gICAqIGJlZm9yZUVhY2goIGluamVjdCggZnVuY3Rpb24oX215U2VydmljZV8pe1xuICAgKiAgIG15U2VydmljZSA9IF9teVNlcnZpY2VfO1xuICAgKiB9KSk7XG4gICAqXG4gICAqIC8vIFVzZSBteVNlcnZpY2UgaW4gYSBzZXJpZXMgb2YgdGVzdHMuXG4gICAqIGl0KCdtYWtlcyB1c2Ugb2YgbXlTZXJ2aWNlJywgZnVuY3Rpb24oKSB7XG4gICAqICAgbXlTZXJ2aWNlLmRvU3R1ZmYoKTtcbiAgICogfSk7XG4gICAqXG4gICAqIGBgYFxuICAgKlxuICAgKiBTZWUgYWxzbyB7QGxpbmsgYW5ndWxhci5tb2NrLm1vZHVsZSBhbmd1bGFyLm1vY2subW9kdWxlfVxuICAgKlxuICAgKiAjIyBFeGFtcGxlXG4gICAqIEV4YW1wbGUgb2Ygd2hhdCBhIHR5cGljYWwgamFzbWluZSB0ZXN0cyBsb29rcyBsaWtlIHdpdGggdGhlIGluamVjdCBtZXRob2QuXG4gICAqIGBgYGpzXG4gICAqXG4gICAqICAgYW5ndWxhci5tb2R1bGUoJ215QXBwbGljYXRpb25Nb2R1bGUnLCBbXSlcbiAgICogICAgICAgLnZhbHVlKCdtb2RlJywgJ2FwcCcpXG4gICAqICAgICAgIC52YWx1ZSgndmVyc2lvbicsICd2MS4wLjEnKTtcbiAgICpcbiAgICpcbiAgICogICBkZXNjcmliZSgnTXlBcHAnLCBmdW5jdGlvbigpIHtcbiAgICpcbiAgICogICAgIC8vIFlvdSBuZWVkIHRvIGxvYWQgbW9kdWxlcyB0aGF0IHlvdSB3YW50IHRvIHRlc3QsXG4gICAqICAgICAvLyBpdCBsb2FkcyBvbmx5IHRoZSBcIm5nXCIgbW9kdWxlIGJ5IGRlZmF1bHQuXG4gICAqICAgICBiZWZvcmVFYWNoKG1vZHVsZSgnbXlBcHBsaWNhdGlvbk1vZHVsZScpKTtcbiAgICpcbiAgICpcbiAgICogICAgIC8vIGluamVjdCgpIGlzIHVzZWQgdG8gaW5qZWN0IGFyZ3VtZW50cyBvZiBhbGwgZ2l2ZW4gZnVuY3Rpb25zXG4gICAqICAgICBpdCgnc2hvdWxkIHByb3ZpZGUgYSB2ZXJzaW9uJywgaW5qZWN0KGZ1bmN0aW9uKG1vZGUsIHZlcnNpb24pIHtcbiAgICogICAgICAgZXhwZWN0KHZlcnNpb24pLnRvRXF1YWwoJ3YxLjAuMScpO1xuICAgKiAgICAgICBleHBlY3QobW9kZSkudG9FcXVhbCgnYXBwJyk7XG4gICAqICAgICB9KSk7XG4gICAqXG4gICAqXG4gICAqICAgICAvLyBUaGUgaW5qZWN0IGFuZCBtb2R1bGUgbWV0aG9kIGNhbiBhbHNvIGJlIHVzZWQgaW5zaWRlIG9mIHRoZSBpdCBvciBiZWZvcmVFYWNoXG4gICAqICAgICBpdCgnc2hvdWxkIG92ZXJyaWRlIGEgdmVyc2lvbiBhbmQgdGVzdCB0aGUgbmV3IHZlcnNpb24gaXMgaW5qZWN0ZWQnLCBmdW5jdGlvbigpIHtcbiAgICogICAgICAgLy8gbW9kdWxlKCkgdGFrZXMgZnVuY3Rpb25zIG9yIHN0cmluZ3MgKG1vZHVsZSBhbGlhc2VzKVxuICAgKiAgICAgICBtb2R1bGUoZnVuY3Rpb24oJHByb3ZpZGUpIHtcbiAgICogICAgICAgICAkcHJvdmlkZS52YWx1ZSgndmVyc2lvbicsICdvdmVycmlkZGVuJyk7IC8vIG92ZXJyaWRlIHZlcnNpb24gaGVyZVxuICAgKiAgICAgICB9KTtcbiAgICpcbiAgICogICAgICAgaW5qZWN0KGZ1bmN0aW9uKHZlcnNpb24pIHtcbiAgICogICAgICAgICBleHBlY3QodmVyc2lvbikudG9FcXVhbCgnb3ZlcnJpZGRlbicpO1xuICAgKiAgICAgICB9KTtcbiAgICogICAgIH0pO1xuICAgKiAgIH0pO1xuICAgKlxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZm5zIGFueSBudW1iZXIgb2YgZnVuY3Rpb25zIHdoaWNoIHdpbGwgYmUgaW5qZWN0ZWQgdXNpbmcgdGhlIGluamVjdG9yLlxuICAgKi9cblxuXG5cbiAgdmFyIEVycm9yQWRkaW5nRGVjbGFyYXRpb25Mb2NhdGlvblN0YWNrID0gZnVuY3Rpb24gRXJyb3JBZGRpbmdEZWNsYXJhdGlvbkxvY2F0aW9uU3RhY2soZSwgZXJyb3JGb3JTdGFjaykge1xuICAgIHRoaXMubWVzc2FnZSA9IGUubWVzc2FnZTtcbiAgICB0aGlzLm5hbWUgPSBlLm5hbWU7XG4gICAgaWYgKGUubGluZSkgdGhpcy5saW5lID0gZS5saW5lO1xuICAgIGlmIChlLnNvdXJjZUlkKSB0aGlzLnNvdXJjZUlkID0gZS5zb3VyY2VJZDtcbiAgICBpZiAoZS5zdGFjayAmJiBlcnJvckZvclN0YWNrKVxuICAgICAgdGhpcy5zdGFjayA9IGUuc3RhY2sgKyAnXFxuJyArIGVycm9yRm9yU3RhY2suc3RhY2s7XG4gICAgaWYgKGUuc3RhY2tBcnJheSkgdGhpcy5zdGFja0FycmF5ID0gZS5zdGFja0FycmF5O1xuICB9O1xuICBFcnJvckFkZGluZ0RlY2xhcmF0aW9uTG9jYXRpb25TdGFjay5wcm90b3R5cGUgPSBFcnJvci5wcm90b3R5cGU7XG5cbiAgd2luZG93LmluamVjdCA9IGFuZ3VsYXIubW9jay5pbmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYmxvY2tGbnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgIHZhciBlcnJvckZvclN0YWNrID0gbmV3IEVycm9yKCdEZWNsYXJhdGlvbiBMb2NhdGlvbicpO1xuICAgIC8vIElFMTArIGFuZCBQaGFudGhvbUpTIGRvIG5vdCBzZXQgc3RhY2sgdHJhY2UgaW5mb3JtYXRpb24sIHVudGlsIHRoZSBlcnJvciBpcyB0aHJvd25cbiAgICBpZiAoIWVycm9yRm9yU3RhY2suc3RhY2spIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRocm93IGVycm9yRm9yU3RhY2s7XG4gICAgICB9IGNhdGNoIChlKSB7IC8qIGVtcHR5ICovIH1cbiAgICB9XG4gICAgcmV0dXJuIHdhc0luamVjdG9yQ3JlYXRlZCgpID8gV29ya0ZuLmNhbGwoY3VycmVudFNwZWMpIDogV29ya0ZuO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIGZ1bmN0aW9uIFdvcmtGbigpIHtcbiAgICAgIHZhciBtb2R1bGVzID0gY3VycmVudFNwZWMuJG1vZHVsZXMgfHwgW107XG4gICAgICB2YXIgc3RyaWN0RGkgPSAhIWN1cnJlbnRTcGVjLiRpbmplY3RvclN0cmljdDtcbiAgICAgIG1vZHVsZXMudW5zaGlmdChbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICAgICAgICBjdXJyZW50U3BlYy4kcHJvdmlkZXJJbmplY3RvciA9ICRpbmplY3RvcjtcbiAgICAgIH1dKTtcbiAgICAgIG1vZHVsZXMudW5zaGlmdCgnbmdNb2NrJyk7XG4gICAgICBtb2R1bGVzLnVuc2hpZnQoJ25nJyk7XG4gICAgICB2YXIgaW5qZWN0b3IgPSBjdXJyZW50U3BlYy4kaW5qZWN0b3I7XG4gICAgICBpZiAoIWluamVjdG9yKSB7XG4gICAgICAgIGlmIChzdHJpY3REaSkge1xuICAgICAgICAgIC8vIElmIHN0cmljdERpIGlzIGVuYWJsZWQsIGFubm90YXRlIHRoZSBwcm92aWRlckluamVjdG9yIGJsb2Nrc1xuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtb2R1bGVzLCBmdW5jdGlvbihtb2R1bGVGbikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGVGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBhbmd1bGFyLmluamVjdG9yLiQkYW5ub3RhdGUobW9kdWxlRm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGluamVjdG9yID0gY3VycmVudFNwZWMuJGluamVjdG9yID0gYW5ndWxhci5pbmplY3Rvcihtb2R1bGVzLCBzdHJpY3REaSk7XG4gICAgICAgIGN1cnJlbnRTcGVjLiRpbmplY3RvclN0cmljdCA9IHN0cmljdERpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYmxvY2tGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBpZiAoY3VycmVudFNwZWMuJGluamVjdG9yU3RyaWN0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGluamVjdG9yIGlzIHN0cmljdCAvIHN0cmljdERpLCBhbmQgdGhlIHNwZWMgd2FudHMgdG8gaW5qZWN0IHVzaW5nIGF1dG9tYXRpY1xuICAgICAgICAgIC8vIGFubm90YXRpb24sIHRoZW4gYW5ub3RhdGUgdGhlIGZ1bmN0aW9uIGhlcmUuXG4gICAgICAgICAgaW5qZWN0b3IuYW5ub3RhdGUoYmxvY2tGbnNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaW5qZWN0b3IuaW52b2tlKGJsb2NrRm5zW2ldIHx8IGFuZ3VsYXIubm9vcCwgdGhpcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoZS5zdGFjayAmJiBlcnJvckZvclN0YWNrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3JBZGRpbmdEZWNsYXJhdGlvbkxvY2F0aW9uU3RhY2soZSwgZXJyb3JGb3JTdGFjayk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgZXJyb3JGb3JTdGFjayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cblxuICBhbmd1bGFyLm1vY2suaW5qZWN0LnN0cmljdERpID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPyAhIXZhbHVlIDogdHJ1ZTtcbiAgICByZXR1cm4gd2FzSW5qZWN0b3JDcmVhdGVkKCkgPyB3b3JrRm4oKSA6IHdvcmtGbjtcblxuICAgIGZ1bmN0aW9uIHdvcmtGbigpIHtcbiAgICAgIGlmICh2YWx1ZSAhPT0gY3VycmVudFNwZWMuJGluamVjdG9yU3RyaWN0KSB7XG4gICAgICAgIGlmIChjdXJyZW50U3BlYy4kaW5qZWN0b3IpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luamVjdG9yIGFscmVhZHkgY3JlYXRlZCwgY2FuIG5vdCBtb2RpZnkgc3RyaWN0IGFubm90YXRpb25zJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudFNwZWMuJGluamVjdG9yU3RyaWN0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gSW5qZWN0b3JTdGF0ZSgpIHtcbiAgICB0aGlzLnNoYXJlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2hhcmVkRXJyb3IgPSBudWxsO1xuXG4gICAgdGhpcy5jbGVhbnVwQWZ0ZXJFYWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXRoaXMuc2hhcmVkIHx8IHRoaXMuc2hhcmVkRXJyb3I7XG4gICAgfTtcbiAgfVxufSkod2luZG93Lmphc21pbmUgfHwgd2luZG93Lm1vY2hhKTtcblxuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24oKSB7XG4gIC8qKlxuICAgKiBAbmdkb2MgZnVuY3Rpb25cbiAgICogQG5hbWUgYnJvd3NlclRyaWdnZXJcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFRoaXMgaXMgYSBnbG9iYWwgKHdpbmRvdykgZnVuY3Rpb24gdGhhdCBpcyBvbmx5IGF2YWlsYWJsZSB3aGVuIHRoZSB7QGxpbmsgbmdNb2NrfSBtb2R1bGUgaXNcbiAgICogaW5jbHVkZWQuXG4gICAqXG4gICAqIEl0IGNhbiBiZSB1c2VkIHRvIHRyaWdnZXIgYSBuYXRpdmUgYnJvd3NlciBldmVudCBvbiBhbiBlbGVtZW50LCB3aGljaCBpcyB1c2VmdWwgZm9yIHVuaXQgdGVzdGluZy5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnQgRWl0aGVyIGEgd3JhcHBlZCBqUXVlcnkvanFMaXRlIG5vZGUgb3IgYSBET01FbGVtZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gZXZlbnRUeXBlIE9wdGlvbmFsIGV2ZW50IHR5cGUuIElmIG5vbmUgaXMgc3BlY2lmaWVkLCB0aGUgZnVuY3Rpb24gdHJpZXNcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gZGV0ZXJtaW5lIHRoZSByaWdodCBldmVudCB0eXBlIGZvciB0aGUgZWxlbWVudCwgZS5nLiBgY2hhbmdlYCBmb3JcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgYGlucHV0W3RleHRdYC5cbiAgICogQHBhcmFtIHtPYmplY3Q9fSBldmVudERhdGEgQW4gb3B0aW9uYWwgb2JqZWN0IHdoaWNoIGNvbnRhaW5zIGFkZGl0aW9uYWwgZXZlbnQgZGF0YSB0aGF0IGlzIHVzZWRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiBjcmVhdGluZyB0aGUgZXZlbnQ6XG4gICAqXG4gICAqICAtIGBidWJibGVzYDogW0V2ZW50LmJ1YmJsZXNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9FdmVudC9idWJibGVzKS5cbiAgICogICAgTm90IGFwcGxpY2FibGUgdG8gYWxsIGV2ZW50cy5cbiAgICpcbiAgICogIC0gYGNhbmNlbGFibGVgOiBbRXZlbnQuY2FuY2VsYWJsZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0V2ZW50L2NhbmNlbGFibGUpLlxuICAgKiAgICBOb3QgYXBwbGljYWJsZSB0byBhbGwgZXZlbnRzLlxuICAgKlxuICAgKiAgLSBgY2hhcmNvZGVgOiBbY2hhckNvZGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50L2NoYXJjb2RlKVxuICAgKiAgICBmb3Iga2V5Ym9hcmQgZXZlbnRzIChrZXlkb3duLCBrZXlwcmVzcywgYW5kIGtleXVwKS5cbiAgICpcbiAgICogIC0gYGRhdGFgOiBbZGF0YV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NvbXBvc2l0aW9uRXZlbnQvZGF0YSkgZm9yXG4gICAqICAgIFtDb21wb3NpdGlvbkV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NvbXBvc2l0aW9uRXZlbnQpLlxuICAgKlxuICAgKiAgLSBgZWxhcHNlZFRpbWVgOiB0aGUgZWxhcHNlZFRpbWUgZm9yXG4gICAqICAgIFtUcmFuc2l0aW9uRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9UcmFuc2l0aW9uRXZlbnQpXG4gICAqICAgIGFuZCBbQW5pbWF0aW9uRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9BbmltYXRpb25FdmVudCkuXG4gICAqXG4gICAqICAtIGBrZXljb2RlYDogW2tleUNvZGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50L2tleWNvZGUpXG4gICAqICAgIGZvciBrZXlib2FyZCBldmVudHMgKGtleWRvd24sIGtleXByZXNzLCBhbmQga2V5dXApLlxuICAgKlxuICAgKiAgLSBga2V5c2A6IGFuIGFycmF5IG9mIHBvc3NpYmxlIG1vZGlmaWVyIGtleXMgKGN0cmwsIGFsdCwgc2hpZnQsIG1ldGEpIGZvclxuICAgKiAgICBbTW91c2VFdmVudF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL01vdXNlRXZlbnQpIGFuZFxuICAgKiAgICBrZXlib2FyZCBldmVudHMgKGtleWRvd24sIGtleXByZXNzLCBhbmQga2V5dXApLlxuICAgKlxuICAgKiAgLSBgcmVsYXRlZFRhcmdldGA6IHRoZVxuICAgKiAgICBbcmVsYXRlZFRhcmdldF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL01vdXNlRXZlbnQvcmVsYXRlZFRhcmdldClcbiAgICogICAgZm9yIFtNb3VzZUV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudCkuXG4gICAqXG4gICAqICAtIGB3aGljaGA6IFt3aGljaF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0tleWJvYXJkRXZlbnQvd2hpY2gpXG4gICAqICAgIGZvciBrZXlib2FyZCBldmVudHMgKGtleWRvd24sIGtleXByZXNzLCBhbmQga2V5dXApLlxuICAgKlxuICAgKiAgLSBgeGA6IHgtY29vcmRpbmF0ZXMgZm9yIFtNb3VzZUV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvTW91c2VFdmVudClcbiAgICogICAgYW5kIFtUb3VjaEV2ZW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvVG91Y2hFdmVudCkuXG4gICAqXG4gICAqICAtIGB5YDogeS1jb29yZGluYXRlcyBmb3IgW01vdXNlRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9Nb3VzZUV2ZW50KVxuICAgKiAgICBhbmQgW1RvdWNoRXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9Ub3VjaEV2ZW50KS5cbiAgICpcbiAgICovXG4gIHdpbmRvdy5icm93c2VyVHJpZ2dlciA9IGZ1bmN0aW9uIGJyb3dzZXJUcmlnZ2VyKGVsZW1lbnQsIGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQubm9kZU5hbWUpIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuXG4gICAgZXZlbnREYXRhID0gZXZlbnREYXRhIHx8IHt9O1xuICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gZXZlbnREYXRhLnJlbGF0ZWRUYXJnZXQgfHwgZWxlbWVudDtcbiAgICB2YXIga2V5cyA9IGV2ZW50RGF0YS5rZXlzO1xuICAgIHZhciB4ID0gZXZlbnREYXRhLng7XG4gICAgdmFyIHkgPSBldmVudERhdGEueTtcblxuICAgIHZhciBpbnB1dFR5cGUgPSAoZWxlbWVudC50eXBlKSA/IGVsZW1lbnQudHlwZS50b0xvd2VyQ2FzZSgpIDogbnVsbCxcbiAgICAgICAgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFldmVudFR5cGUpIHtcbiAgICAgIGV2ZW50VHlwZSA9IHtcbiAgICAgICAgJ3RleHQnOiAgICAgICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAndGV4dGFyZWEnOiAgICAgICAgJ2NoYW5nZScsXG4gICAgICAgICdoaWRkZW4nOiAgICAgICAgICAnY2hhbmdlJyxcbiAgICAgICAgJ3Bhc3N3b3JkJzogICAgICAgICdjaGFuZ2UnLFxuICAgICAgICAnYnV0dG9uJzogICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgJ3N1Ym1pdCc6ICAgICAgICAgICdjbGljaycsXG4gICAgICAgICdyZXNldCc6ICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAnaW1hZ2UnOiAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgJ2NoZWNrYm94JzogICAgICAgICdjbGljaycsXG4gICAgICAgICdyYWRpbyc6ICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAnc2VsZWN0LW9uZSc6ICAgICAgJ2NoYW5nZScsXG4gICAgICAgICdzZWxlY3QtbXVsdGlwbGUnOiAnY2hhbmdlJyxcbiAgICAgICAgJ19kZWZhdWx0Xyc6ICAgICAgICdjbGljaydcbiAgICAgIH1baW5wdXRUeXBlIHx8ICdfZGVmYXVsdF8nXTtcbiAgICB9XG5cbiAgICBpZiAobm9kZU5hbWUgPT09ICdvcHRpb24nKSB7XG4gICAgICBlbGVtZW50LnBhcmVudE5vZGUudmFsdWUgPSBlbGVtZW50LnZhbHVlO1xuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgIGV2ZW50VHlwZSA9ICdjaGFuZ2UnO1xuICAgIH1cblxuICAgIGtleXMgPSBrZXlzIHx8IFtdO1xuICAgIGZ1bmN0aW9uIHByZXNzZWQoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5cy5pbmRleE9mKGtleSkgIT09IC0xO1xuICAgIH1cblxuICAgIHZhciBldm50O1xuICAgIGlmICgvdHJhbnNpdGlvbmVuZC8udGVzdChldmVudFR5cGUpKSB7XG4gICAgICBpZiAod2luZG93LldlYktpdFRyYW5zaXRpb25FdmVudCkge1xuICAgICAgICBldm50ID0gbmV3IHdpbmRvdy5XZWJLaXRUcmFuc2l0aW9uRXZlbnQoZXZlbnRUeXBlLCBldmVudERhdGEpO1xuICAgICAgICBldm50LmluaXRFdmVudChldmVudFR5cGUsIGV2ZW50RGF0YS5idWJibGVzLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZXZudCA9IG5ldyB3aW5kb3cuVHJhbnNpdGlvbkV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGV2bnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ1RyYW5zaXRpb25FdmVudCcpO1xuICAgICAgICAgIGV2bnQuaW5pdFRyYW5zaXRpb25FdmVudChldmVudFR5cGUsIGV2ZW50RGF0YS5idWJibGVzLCBudWxsLCBudWxsLCBldmVudERhdGEuZWxhcHNlZFRpbWUgfHwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKC9hbmltYXRpb25lbmQvLnRlc3QoZXZlbnRUeXBlKSkge1xuICAgICAgaWYgKHdpbmRvdy5XZWJLaXRBbmltYXRpb25FdmVudCkge1xuICAgICAgICBldm50ID0gbmV3IHdpbmRvdy5XZWJLaXRBbmltYXRpb25FdmVudChldmVudFR5cGUsIGV2ZW50RGF0YSk7XG4gICAgICAgIGV2bnQuaW5pdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLmJ1YmJsZXMsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBldm50ID0gbmV3IHdpbmRvdy5BbmltYXRpb25FdmVudChldmVudFR5cGUsIGV2ZW50RGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBldm50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdBbmltYXRpb25FdmVudCcpO1xuICAgICAgICAgIGV2bnQuaW5pdEFuaW1hdGlvbkV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLmJ1YmJsZXMsIG51bGwsIG51bGwsIGV2ZW50RGF0YS5lbGFwc2VkVGltZSB8fCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoL3RvdWNoLy50ZXN0KGV2ZW50VHlwZSkgJiYgc3VwcG9ydHNUb3VjaEV2ZW50cygpKSB7XG4gICAgICBldm50ID0gY3JlYXRlVG91Y2hFdmVudChlbGVtZW50LCBldmVudFR5cGUsIHgsIHkpO1xuICAgIH0gZWxzZSBpZiAoL2tleS8udGVzdChldmVudFR5cGUpKSB7XG4gICAgICBldm50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudHMnKTtcbiAgICAgIGV2bnQuaW5pdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLmJ1YmJsZXMsIGV2ZW50RGF0YS5jYW5jZWxhYmxlKTtcbiAgICAgIGV2bnQudmlldyA9IHdpbmRvdztcbiAgICAgIGV2bnQuY3RybEtleSA9IHByZXNzZWQoJ2N0cmwnKTtcbiAgICAgIGV2bnQuYWx0S2V5ID0gcHJlc3NlZCgnYWx0Jyk7XG4gICAgICBldm50LnNoaWZ0S2V5ID0gcHJlc3NlZCgnc2hpZnQnKTtcbiAgICAgIGV2bnQubWV0YUtleSA9IHByZXNzZWQoJ21ldGEnKTtcbiAgICAgIGV2bnQua2V5Q29kZSA9IGV2ZW50RGF0YS5rZXlDb2RlO1xuICAgICAgZXZudC5jaGFyQ29kZSA9IGV2ZW50RGF0YS5jaGFyQ29kZTtcbiAgICAgIGV2bnQud2hpY2ggPSBldmVudERhdGEud2hpY2g7XG4gICAgfSBlbHNlIGlmICgvY29tcG9zaXRpb24vLnRlc3QoZXZlbnRUeXBlKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZXZudCA9IG5ldyB3aW5kb3cuQ29tcG9zaXRpb25FdmVudChldmVudFR5cGUsIHtcbiAgICAgICAgICBkYXRhOiBldmVudERhdGEuZGF0YVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gU3VwcG9ydDogSUU5K1xuICAgICAgICBldm50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDb21wb3NpdGlvbkV2ZW50Jywge30pO1xuICAgICAgICBldm50LmluaXRDb21wb3NpdGlvbkV2ZW50KFxuICAgICAgICAgIGV2ZW50VHlwZSxcbiAgICAgICAgICBldmVudERhdGEuYnViYmxlcyxcbiAgICAgICAgICBldmVudERhdGEuY2FuY2VsYWJsZSxcbiAgICAgICAgICB3aW5kb3csXG4gICAgICAgICAgZXZlbnREYXRhLmRhdGEsXG4gICAgICAgICAgbnVsbFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGV2bnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XG4gICAgICB4ID0geCB8fCAwO1xuICAgICAgeSA9IHkgfHwgMDtcbiAgICAgIGV2bnQuaW5pdE1vdXNlRXZlbnQoZXZlbnRUeXBlLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIHgsIHksIHgsIHksIHByZXNzZWQoJ2N0cmwnKSxcbiAgICAgICAgICBwcmVzc2VkKCdhbHQnKSwgcHJlc3NlZCgnc2hpZnQnKSwgcHJlc3NlZCgnbWV0YScpLCAwLCByZWxhdGVkVGFyZ2V0KTtcbiAgICB9XG5cbiAgICAvKiB3ZSdyZSB1bmFibGUgdG8gY2hhbmdlIHRoZSB0aW1lU3RhbXAgdmFsdWUgZGlyZWN0bHkgc28gdGhpc1xuICAgICAqIGlzIG9ubHkgaGVyZSB0byBhbGxvdyBmb3IgdGVzdGluZyB3aGVyZSB0aGUgdGltZVN0YW1wIHZhbHVlIGlzXG4gICAgICogcmVhZCAqL1xuICAgIGV2bnQuJG1hbnVhbFRpbWVTdGFtcCA9IGV2ZW50RGF0YS50aW1lU3RhbXA7XG5cbiAgICBpZiAoIWV2bnQpIHJldHVybjtcblxuICAgIGlmICghZXZlbnREYXRhLmJ1YmJsZXMgfHwgc3VwcG9ydHNFdmVudEJ1YmJsaW5nSW5EZXRhY2hlZFRyZWUoKSB8fCBpc0F0dGFjaGVkVG9Eb2N1bWVudChlbGVtZW50KSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldm50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJpZ2dlckZvclBhdGgoZWxlbWVudCwgZXZudCk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHN1cHBvcnRzVG91Y2hFdmVudHMoKSB7XG4gICAgaWYgKCdfY2FjaGVkJyBpbiBzdXBwb3J0c1RvdWNoRXZlbnRzKSB7XG4gICAgICByZXR1cm4gc3VwcG9ydHNUb3VjaEV2ZW50cy5fY2FjaGVkO1xuICAgIH1cbiAgICBpZiAoIXdpbmRvdy5kb2N1bWVudC5jcmVhdGVUb3VjaCB8fCAhd2luZG93LmRvY3VtZW50LmNyZWF0ZVRvdWNoTGlzdCkge1xuICAgICAgc3VwcG9ydHNUb3VjaEV2ZW50cy5fY2FjaGVkID0gZmFsc2U7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ1RvdWNoRXZlbnQnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBzdXBwb3J0c1RvdWNoRXZlbnRzLl9jYWNoZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3VwcG9ydHNUb3VjaEV2ZW50cy5fY2FjaGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVRvdWNoRXZlbnQoZWxlbWVudCwgZXZlbnRUeXBlLCB4LCB5KSB7XG4gICAgdmFyIGV2bnQgPSBuZXcgd2luZG93LkV2ZW50KGV2ZW50VHlwZSk7XG4gICAgeCA9IHggfHwgMDtcbiAgICB5ID0geSB8fCAwO1xuXG4gICAgdmFyIHRvdWNoID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZVRvdWNoKHdpbmRvdywgZWxlbWVudCwgRGF0ZS5ub3coKSwgeCwgeSwgeCwgeSk7XG4gICAgdmFyIHRvdWNoZXMgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlVG91Y2hMaXN0KHRvdWNoKTtcblxuICAgIGV2bnQudG91Y2hlcyA9IHRvdWNoZXM7XG5cbiAgICByZXR1cm4gZXZudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN1cHBvcnRzRXZlbnRCdWJibGluZ0luRGV0YWNoZWRUcmVlKCkge1xuICAgIGlmICgnX2NhY2hlZCcgaW4gc3VwcG9ydHNFdmVudEJ1YmJsaW5nSW5EZXRhY2hlZFRyZWUpIHtcbiAgICAgIHJldHVybiBzdXBwb3J0c0V2ZW50QnViYmxpbmdJbkRldGFjaGVkVHJlZS5fY2FjaGVkO1xuICAgIH1cbiAgICBzdXBwb3J0c0V2ZW50QnViYmxpbmdJbkRldGFjaGVkVHJlZS5fY2FjaGVkID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IHdpbmRvdy5kb2N1bWVudDtcbiAgICBpZiAoZG9jKSB7XG4gICAgICB2YXIgcGFyZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgIGNoaWxkID0gcGFyZW50LmNsb25lTm9kZSgpO1xuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIHBhcmVudC5hZGRFdmVudExpc3RlbmVyKCdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHN1cHBvcnRzRXZlbnRCdWJibGluZ0luRGV0YWNoZWRUcmVlLl9jYWNoZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICB2YXIgZXZudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnRzJyk7XG4gICAgICBldm50LmluaXRFdmVudCgnZScsIHRydWUsIHRydWUpO1xuICAgICAgY2hpbGQuZGlzcGF0Y2hFdmVudChldm50KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cHBvcnRzRXZlbnRCdWJibGluZ0luRGV0YWNoZWRUcmVlLl9jYWNoZWQ7XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyRm9yUGF0aChlbGVtZW50LCBldm50KSB7XG4gICAgdmFyIHN0b3AgPSBmYWxzZTtcblxuICAgIHZhciBfc3RvcFByb3BhZ2F0aW9uID0gZXZudC5zdG9wUHJvcGFnYXRpb247XG4gICAgZXZudC5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHN0b3AgPSB0cnVlO1xuICAgICAgX3N0b3BQcm9wYWdhdGlvbi5hcHBseShldm50LCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgcGF0Y2hFdmVudFRhcmdldEZvckJ1YmJsaW5nKGV2bnQsIGVsZW1lbnQpO1xuICAgIGRvIHtcbiAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldm50KTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bm1vZGlmaWVkLWxvb3AtY29uZGl0aW9uXG4gICAgfSB3aGlsZSAoIXN0b3AgJiYgKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdGNoRXZlbnRUYXJnZXRGb3JCdWJibGluZyhldmVudCwgdGFyZ2V0KSB7XG4gICAgZXZlbnQuX3RhcmdldCA9IHRhcmdldDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsICd0YXJnZXQnLCB7Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3RhcmdldDt9fSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0F0dGFjaGVkVG9Eb2N1bWVudChlbGVtZW50KSB7XG4gICAgd2hpbGUgKChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSkge1xuICAgICAgICBpZiAoZWxlbWVudCA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cblxufSkod2luZG93LCB3aW5kb3cuYW5ndWxhcik7XG4iLCIvLyBjb25zdCBjb25maWd1cmUgPSAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikgPT4ge1xuLy8gICAgIC8vIGNvbmZpZyBzdGF0ZVxuLy8gICAgIGNvbnN0IGhvbWUgPSB7XG4vLyAgICAgICAgIHVybDogJy8nLFxuLy8gICAgICAgICB0ZW1wbGF0ZVVybDogJ2hvbWUvaW5kZXgudmlldy5odG1sJyxcbi8vICAgICAgICAgY29udHJvbGxlcjogJ0hvbWUuSW5kZXhDb250cm9sbGVyJyxcbi8vICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4vLyAgICAgfTtcbi8vXG4vLyAgICAgY29uc3QgbG9naW4gPSB7XG4vLyAgICAgICAgIHVybDogJy9sb2dpbicsXG4vLyAgICAgICAgIHRlbXBsYXRlVXJsOiAnbG9naW4vaW5kZXgudmlldy5odG1sJyxcbi8vICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luLkluZGV4Q29udHJvbGxlcicsXG4vLyAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuLy8gICAgIH07XG4vL1xuLy8gICAgIC8vIGRlZmF1bHQgcm91dGVcbi8vICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG4vL1xuLy8gICAgIC8vIGFwcCByb3V0ZVxuLy8gICAgICRzdGF0ZVByb3ZpZGVyXG4vLyAgICAgICAgIC5zdGF0ZSgnaG9tZScsIGhvbWUpXG4vLyAgICAgICAgIC5zdGF0ZSgnbG9naW4nLCBsb2dpbik7XG4vLyB9O1xuXG4vLyBjb25zdCBydW4gPSAoJHJvb3RTY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgJGxvY2FsU3RvcmFnZSkgPT4ge1xuLy8gICAgIC8vIGtlZXAgdXNlciBsb2dnZWQgYWZ0ZXIgcGFnZSByZWZyZXNoXG4vLyAgICAgaWYgKCRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpIHtcbi8vICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb24uQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArICRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIudG9rZW47XG4vLyAgICAgfVxuLy9cbi8vICAgICAvLyByZWRpcmVjdCB0byBsb2dpbiBwYWdlIGlmIG5vdCBsb2dnZWQgaW4gYW5kIHRyeWluZyB0byBhY2Nlc3MgYSByZXN0cmljdGVkIHBhZ2Vcbi8vICAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLGZ1bmN0aW9uIChldmVudCwgbmV4dCwgY3VycmVudCkge1xuLy8gICAgICAgICBjb25zdCBwdWJsaWNQYWdlcyA9IFsnL2xvZ2luJ107XG4vLyAgICAgICAgIGNvbnN0IHJlc3RyaWN0ZWRQYWdlID0gcHVibGljUGFnZXMuaW5kZXhPZigkbG9jYXRpb24ucGF0aCgpKSA9PT0gLTE7XG4vL1xuLy8gICAgICAgICBpZiAocmVzdHJpY3RlZFBhZ2UgJiYgISRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpIHtcbi8vICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuLy8gfTtcblxuYW5ndWxhclxuICAgIC5tb2R1bGUoXCJteUF1dGhcIixbJ3VpLnJvdXRlcicsICduZ01lc3NhZ2VzJywgJ25nU3RvcmFnZScsICduZ01vY2tFMkUnXSlcbiAgICAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgICAgLy8gY29uZmlnIHN0YXRlXG4gICAgICAgIGNvbnN0IGhvbWUgPSB7XG4gICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaG9tZS9pbmRleC52aWV3Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWUuSW5kZXhDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGxvZ2luID0ge1xuICAgICAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbG9naW4vaW5kZXgudmlldy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbi5JbmRleENvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gZGVmYXVsdCByb3V0ZVxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAgICAgLy8gYXBwIHJvdXRlXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2hvbWUnLCBob21lKVxuICAgICAgICAgICAgLnN0YXRlKCdsb2dpbicsIGxvZ2luKTtcbiAgICB9KVxuICAgIC5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUsICRodHRwLCAkbG9jYXRpb24sICRsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgLy8ga2VlcCB1c2VyIGxvZ2dlZCBhZnRlciBwYWdlIHJlZnJlc2hcbiAgICAgICAgaWYgKCRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLnRva2VuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gcGFnZSBpZiBub3QgbG9nZ2VkIGluIGFuZCB0cnlpbmcgdG8gYWNjZXNzIGEgcmVzdHJpY3RlZCBwYWdlXG4gICAgICAgICRyb290U2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdGFydCcsZnVuY3Rpb24gKGV2ZW50LCBuZXh0LCBjdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zdCBwdWJsaWNQYWdlcyA9IFsnL2xvZ2luJ107XG4gICAgICAgICAgICBjb25zdCByZXN0cmljdGVkUGFnZSA9IHB1YmxpY1BhZ2VzLmluZGV4T2YoJGxvY2F0aW9uLnBhdGgoKSkgPT09IC0xO1xuXG4gICAgICAgICAgICBpZiAocmVzdHJpY3RlZFBhZ2UgJiYgISRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pOyJdfQ==
